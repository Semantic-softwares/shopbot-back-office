<div class="p-6">
  <h2 mat-dialog-title class="text-xl font-bold mb-4">
    {{ data.isEdit ? 'Edit Category' : 'Create New Category' }}
  </h2>

  <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()">
    <div class="space-y-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Category Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter category name">
      </mat-form-field>


      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Color picker</mat-label>
        <input matInput  [mtxColorpicker]="picker" [format]="format" formControlName="color" />
        <mtx-colorpicker-toggle matSuffix [for]="picker"></mtx-colorpicker-toggle>
        <mtx-colorpicker #picker></mtx-colorpicker>
        <mat-hint>Choose your favorite color</mat-hint>
        <mat-error>Please enter the color</mat-error>
      </mat-form-field>


      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Select icon</mat-label>
        <mtx-select [items]="icons" formControlName="icon"  bindLabel="name" bindValue="value">
          <ng-template ng-label-tmp let-item="item">
            <div class="flex items-center">
                <div class="w-6 h-6 rounded-full mr-2" > <mat-icon>{{item.value}}</mat-icon></div>
                <span>{{item.name}}</span>
              </div>
          </ng-template>
        </mtx-select>
        <mat-hint>Choose your icon</mat-hint>
      </mat-form-field>

      <div class="flex items-center">
        <mat-slide-toggle formControlName="published" color="primary">
          Published
        </mat-slide-toggle>
      </div>
    </div>

    <div class="flex justify-end space-x-2 mt-6">
      <button mat-button type="button" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!categoryForm.valid || isSubmitting()">
        @if (isSubmitting()) {
          <mat-spinner diameter="20" class="mr-2"></mat-spinner>
        }
        {{data.isEdit ? 'Update' : 'Create'}}
      </button>
    </div>
  </form>
</div>
