<div class="p-6">
  <h2 mat-dialog-title class="text-xl font-bold mb-4">
    {{ isEdit ? 'Edit Customer' : 'Create New Customer' }}
  </h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="space-y-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter customer name">
        <mat-error *ngIf="form.get('name')?.hasError('required')">
          Name is required
        </mat-error>
        <mat-error *ngIf="form.get('name')?.hasError('minlength')">
          Name must be at least 2 characters
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" placeholder="Enter email address">
        <mat-error *ngIf="form.get('email')?.hasError('required')">
          Email is required
        </mat-error>
        <mat-error *ngIf="form.get('email')?.hasError('email')">
          Please enter a valid email address
        </mat-error>
        <mat-error *ngIf="form.get('email')?.hasError('lowercase')">
          Email must be lowercase
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Phone Number</mat-label>
        <input matInput formControlName="phoneNumber" placeholder="Enter phone number">
        <mat-error *ngIf="form.get('phoneNumber')?.hasError('required')">
          Phone number is required
        </mat-error>
        <mat-error *ngIf="form.get('phoneNumber')?.hasError('minlength')">
          Phone number must be at least 6 digits
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Country</mat-label>
        <mat-select formControlName="country" placeholder="Select country" (selectionChange)="selectCountry($event.value)">
          @for (zone of deliveryZones.value() || []; track $index) {
            <mat-option [value]="zone.country">
              {{ zone.country }}
            </mat-option>
          }
        </mat-select>
        <mat-error *ngIf="form.get('country')?.hasError('required')">
          Country is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Notes</mat-label>
        <textarea matInput formControlName="notes" placeholder="Enter any additional notes"></textarea>
       
        
      </mat-form-field>

       
    </div>

    <div class="flex justify-end space-x-2 mt-6 pt-4 border-t border-gray-200">
      <button mat-button type="button" [disabled]="isSubmitting()" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid || isSubmitting()">
        @if (isSubmitting()) {
          <mat-spinner diameter="20" class="mr-2"></mat-spinner>
        }
        {{isEdit ? 'Update' : 'Create'}}
      </button>
    </div>
  </form>
</div>
