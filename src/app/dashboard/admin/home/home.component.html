<div class="dashboard">
  <div class="welcome-section">
    <h1>Dashboard Overview</h1>
    <p class="date">{{currentDate | date:'EEEE, MMMM d, y'}}</p>
  </div>

  <div class="stats-container">
    <div class="stat-card" [class.active]="selectedStat === 'users'" (click)="selectStat('users')">
      <div class="stat-header">
        <span class="material-icons" [style.color]="'#4f46e5'">person</span>
        <span class="label">Users</span>
      </div>
      <div class="stat-body">
        <h3>{{stats.users.count | number}}</h3>
        <div class="stat-details">
          <span class="trend-up">{{stats.users.trend}}</span>
          <span class="period">vs last month</span>
        </div>
      </div>
    </div>

    <div class="stat-card" [class.active]="selectedStat === 'companies'" (click)="selectStat('companies')">
      <div class="stat-header">
        <span class="material-icons" [style.color]="'#10b981'">business</span>
        <span class="label">Companies</span>
      </div>
      <div class="stat-body">
        <h3>{{stats.companies.count | number}}</h3>
        <div class="stat-details">
          <span class="trend-up">{{stats.companies.trend}}</span>
          <span class="period">vs last month</span>
        </div>
      </div>
    </div>

    <div class="stat-card" [class.active]="selectedStat === 'services'" (click)="selectStat('services')">
      <div class="stat-header">
        <span class="material-icons" [style.color]="'#f59e0b'">handyman</span>
        <span class="label">Feedback</span>
      </div>
      <div class="stat-body">
        <h3>{{stats.feedback.count | number}}</h3>
        <div class="stat-details">
          <span class="trend-up">{{stats.feedback.trend}}</span>
          <span class="period">vs last month</span>
        </div>
      </div>
    </div>

    <div class="stat-card" [class.active]="selectedStat === 'events'" (click)="selectStat('events')">
      <div class="stat-header">
        <span class="material-icons" [style.color]="'#ef4444'">psychology_alt</span>
        <span class="label">Surveys</span>
      </div>
      <div class="stat-body">
        <h3>{{stats.surveys.count | number}}</h3>
        <div class="stat-details">
          <span class="trend-up">{{stats.surveys.trend}}</span>
          <span class="period">vs last month</span>
        </div>
      </div>
    </div>
  </div>

  <div class="content-grid">
    <div class="chart-section">
      <div class="chart-card">
        <div class="card-header">
          <h2>{{selectedStat | titlecase}} Growth</h2>
          <div class="period-selector">
            <button [class.active]="selectedPeriod === 'week'" (click)="changePeriod('week')">Week</button>
            <button [class.active]="selectedPeriod === 'month'" (click)="changePeriod('month')">Month</button>
            <button [class.active]="selectedPeriod === 'year'" (click)="changePeriod('year')">Year</button>
          </div>
        </div>
        <canvas baseChart [data]="chartData" [type]="'line'" [options]="chartOptions"></canvas>
      </div>
    </div>

    <div class="side-section">
      <div class="recent-activity-card">
        <h2>Recent Activities</h2>
        <div class="activity-list">
          <div class="activity-item" *ngFor="let activity of recentActivities">
            <div class="activity-icon" [style.background]="activity.color + '20'" [style.color]="activity.color">
              <span class="material-icons">{{activity.icon}}</span>
            </div>
            <div class="activity-content">
              <p class="activity-text">{{activity.text}}</p>
              <span class="activity-time">{{activity.time}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
