<div class="p-4 bg-gray-50 min-h-screen">
  <!-- Header Section -->
  <div class="flex justify-between items-center mb-6 bg-white p-4 rounded-lg shadow-sm">
       <date-range-selector />
    
    
  </div>

  <div class="bg-white rounded-lg shadow-sm">
    <div class="p-6 flex justify-between items-center border-b">
      <h2 class="text-lg font-medium">Sales by Employee</h2>
      <button mat-flat-button color="primary" (click)="exportData()">
        <mat-icon class="mr-2">file_download</mat-icon>
        Export Data
      </button>
    </div>
    
    @if (dataSource.hasValue()) {
      <div class="p-6">
        <mat-table [dataSource]="dataSource.value()!" class="w-full !bg-white">
          <ng-container matColumnDef="name">
            <mat-header-cell *matHeaderCellDef>Name</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element?.name ?? 'Removed user'}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="grossSales">
            <mat-header-cell *matHeaderCellDef>Gross Sales</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.grossSales | currency: storeStore.selectedStore()?.currency}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="refunds">
            <mat-header-cell *matHeaderCellDef>Refunds</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.refunds | currency: storeStore.selectedStore()?.currency}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="discounts">
            <mat-header-cell *matHeaderCellDef>Discounts</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.discounts | percent}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="netSales">
            <mat-header-cell *matHeaderCellDef>Net Sales</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.netSales |  currency: storeStore.selectedStore()?.currency}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="receipts">
            <mat-header-cell *matHeaderCellDef>Receipts</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.receipts}}</mat-cell>
          </ng-container>

          <ng-container matColumnDef="averageSale">
            <mat-header-cell *matHeaderCellDef>Average Sale</mat-header-cell>
            <mat-cell *matCellDef="let element">{{element.averageSale | currency: storeStore.selectedStore()?.currency}}</mat-cell>
          </ng-container>

      

          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
        </mat-table>

        <mat-paginator class="!bg-white"
          [pageSize]="pageSize"
          [pageSizeOptions]="pageSizeOptions"
          showFirstLastButtons
          aria-label="Select page">
        </mat-paginator>
      </div>
    } @else if (dataSource.isLoading()) {
        <div class="flex items-center justify-center min-h-[300px]">
          <mat-spinner diameter="40"></mat-spinner>
        </div>
        }  @else {
        <app-no-record icon="inventory_2" title="No Employee Data Found"
            message="There are no employee sales data to display for the selected period.">
        </app-no-record>
        } 
  </div>
</div>
