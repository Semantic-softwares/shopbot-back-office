<div class="dialog-container">
  <h2 mat-dialog-title class="text-xl font-semibold text-gray-900 mb-4">
    {{ isEdit ? 'Edit Table' : 'Create New Table' }}
  </h2>

  <form [formGroup]="tableForm" (ngSubmit)="onSubmit()" class="space-y-4">
    <mat-dialog-content class="space-y-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Table Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter table name">
        <mat-error *ngIf="tableForm.get('name')?.hasError('required')">
          Table name is required
        </mat-error>
        <mat-error *ngIf="tableForm.get('name')?.hasError('minlength')">
          Table name must be at least 2 characters
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Category</mat-label>
        <mat-select formControlName="category">
          @for (category of categories.value(); track category._id) {
            <mat-option [value]="category._id">
              {{ category.name }}
            </mat-option>
          }
        </mat-select>
        <mat-error *ngIf="tableForm.get('category')?.hasError('required')">
          Category is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Number of Guests</mat-label>
        <input matInput type="number" formControlName="numberOfGuest" placeholder="Maximum number of guests">
        <mat-error *ngIf="tableForm.get('numberOfGuest')?.hasError('required')">
          Number of guests is required
        </mat-error>
        <mat-error *ngIf="tableForm.get('numberOfGuest')?.hasError('min')">
          Minimum 1 guest required
        </mat-error>
        <mat-error *ngIf="tableForm.get('numberOfGuest')?.hasError('max')">
          Maximum 20 guests allowed
        </mat-error>
      </mat-form-field>

      <div class="flex items-center gap-3">
        <mat-slide-toggle formControlName="active" color="primary">
          Active
        </mat-slide-toggle>
        <span class="text-sm text-gray-600">
          {{ tableForm.get('active')?.value ? 'Table is active and available' : 'Table is inactive' }}
        </span>
      </div>
    </mat-dialog-content>

    <mat-dialog-actions class="flex justify-end gap-3 pt-4">
      <button mat-button type="button" (click)="onCancel()" [disabled]="isLoading">
        Cancel
      </button>
      <button 
        mat-raised-button 
        color="primary" 
        type="submit" 
        [disabled]="tableForm.invalid || isLoading">
        {{ isLoading ? 'Saving...' : (isEdit ? 'Update Table' : 'Create Table') }}
      </button>
    </mat-dialog-actions>
  </form>
</div>
