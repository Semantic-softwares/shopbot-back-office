<mat-card class="max-w-4xl mx-auto">
  <mat-card-header>
    <mat-card-title>
      {{ isEditMode() ? 'Edit Supplier' : 'Add New Supplier' }}
    </mat-card-title>
    <mat-card-subtitle>
      {{ isEditMode() ? 'Update supplier information' : 'Create a new supplier for your store' }}
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- Error Message -->
    @if (error()) {
      <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
        <div class="flex">
          <mat-icon class="text-red-400 mr-2">error</mat-icon>
          <p class="text-sm text-red-800">{{ error() }}</p>
        </div>
      </div>
    }

    <!-- Form -->
    <form [formGroup]="supplierForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Basic Information -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Basic Information</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Supplier Name -->
          <mat-form-field appearance="outline" class="md:col-span-2">
            <mat-label>Supplier Name *</mat-label>
            <input matInput formControlName="name" placeholder="Enter supplier name">
            <mat-icon matSuffix>business</mat-icon>
            <mat-error *ngIf="supplierForm.get('name')?.hasError('required')">
              Supplier name is required
            </mat-error>
            <mat-error *ngIf="supplierForm.get('name')?.hasError('minlength')">
              Supplier name must be at least 2 characters
            </mat-error>
          </mat-form-field>

          <!-- Contact Person -->
          <mat-form-field appearance="outline">
            <mat-label>Contact Person</mat-label>
            <input matInput formControlName="contactPerson" placeholder="Enter contact person name">
            <mat-icon matSuffix>person</mat-icon>
          </mat-form-field>

          <!-- Email -->
          <mat-form-field appearance="outline">
            <mat-label>Email Address *</mat-label>
            <input matInput type="email" formControlName="email" placeholder="Enter email address">
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="supplierForm.get('email')?.hasError('required')">
              Email is required
            </mat-error>
            <mat-error *ngIf="supplierForm.get('email')?.hasError('email')">
              Please enter a valid email address
            </mat-error>
          </mat-form-field>

          <!-- Phone -->
          <mat-form-field appearance="outline">
            <mat-label>Phone Number</mat-label>
            <input matInput type="tel" formControlName="phone" placeholder="Enter phone number">
            <mat-icon matSuffix>phone</mat-icon>
          </mat-form-field>

          <!-- Website -->
          <mat-form-field appearance="outline">
            <mat-label>Website</mat-label>
            <input matInput type="url" formControlName="website" placeholder="https://example.com">
            <mat-icon matSuffix>language</mat-icon>
          </mat-form-field>

          <!-- Description -->
          <mat-form-field appearance="outline" class="md:col-span-2">
            <mat-label>Description</mat-label>
            <textarea matInput formControlName="description" rows="3" placeholder="Enter supplier description"></textarea>
          </mat-form-field>
        </div>
      </div>

      <!-- Address Information -->
      <div formGroupName="address" class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Address Information</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Street -->
          <mat-form-field appearance="outline" class="md:col-span-2">
            <mat-label>Street Address</mat-label>
            <input matInput formControlName="street" placeholder="Enter street address">
            <mat-icon matSuffix>location_on</mat-icon>
          </mat-form-field>

          <!-- City -->
          <mat-form-field appearance="outline">
            <mat-label>City</mat-label>
            <input matInput formControlName="city" placeholder="Enter city">
          </mat-form-field>

          <!-- State -->
          <mat-form-field appearance="outline">
            <mat-label>State/Province</mat-label>
            <input matInput formControlName="state" placeholder="Enter state or province">
          </mat-form-field>

          <!-- Country -->
          <mat-form-field appearance="outline">
            <mat-label>Country</mat-label>
            <input matInput formControlName="country" placeholder="Enter country">
          </mat-form-field>

          <!-- Postal Code -->
          <mat-form-field appearance="outline">
            <mat-label>Postal Code</mat-label>
            <input matInput formControlName="postalCode" placeholder="Enter postal code">
          </mat-form-field>
        </div>
      </div>

      <!-- Business Information -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Business Information</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <!-- Tax ID -->
          <mat-form-field appearance="outline">
            <mat-label>Tax ID</mat-label>
            <input matInput formControlName="taxId" placeholder="Enter tax identification number">
            <mat-icon matSuffix>receipt</mat-icon>
          </mat-form-field>

          <!-- Payment Terms -->
          <mat-form-field appearance="outline">
            <mat-label>Payment Terms</mat-label>
            <input matInput formControlName="paymentTerms" placeholder="e.g., Net 30 days">
            <mat-icon matSuffix>payment</mat-icon>
          </mat-form-field>

          <!-- Credit Limit -->
          <mat-form-field appearance="outline">
            <mat-label>Credit Limit</mat-label>
            <input matInput type="number" formControlName="creditLimit" placeholder="Enter credit limit amount" min="0" step="0.01">
            <mat-icon matSuffix>attach_money</mat-icon>
          </mat-form-field>

          <!-- Active Status -->
          <div class="flex items-center mt-4">
            <mat-checkbox formControlName="active">Active Supplier</mat-checkbox>
          </div>
        </div>
      </div>

      <!-- Notes -->
      <div class="mb-8">
        <h3 class="text-lg font-semibold text-gray-900 mb-4">Additional Notes</h3>
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Notes</mat-label>
          <textarea matInput formControlName="notes" rows="4" placeholder="Enter any additional notes about this supplier"></textarea>
        </mat-form-field>
      </div>
    </form>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button type="button" (click)="onCancel()" [disabled]="loading()">
      Cancel
    </button>
    @if (loading()) {
      <button mat-raised-button color="primary" disabled>
        <mat-spinner diameter="20"></mat-spinner>
        {{ isEditMode() ? 'Updating...' : 'Creating...' }}
      </button>
    } @else {
      <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="supplierForm.invalid">
        <mat-icon>{{ isEditMode() ? 'save' : 'add' }}</mat-icon>
        {{ isEditMode() ? 'Update Supplier' : 'Create Supplier' }}
      </button>
    }
  </mat-card-actions>
</mat-card>
