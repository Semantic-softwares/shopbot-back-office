<div class="p-6">
  <h2 mat-dialog-title class="text-xl font-bold mb-4">
    {{ isEdit ? 'Edit Employee' : 'Create New Employee' }}
  </h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="space-y-4">
      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Name</mat-label>
        <input matInput formControlName="name" placeholder="Enter employee name">
        @if (form.get('name')?.hasError('required')) {
          <mat-error>
            Name is required
          </mat-error>
        }
      </mat-form-field>

      <div class="grid grid-cols-2 gap-4">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Gender</mat-label>
          <mat-select formControlName="gender">
            @for (gender of genders; track gender) {
              <mat-option [value]="gender">{{gender}}</mat-option>
            }
          </mat-select>
          @if (form.get('gender')?.hasError('required')) {
            <mat-error>
              Gender is required
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Role</mat-label>
          <mat-select formControlName="role" >
            @for (role of roles; track role) {
              <mat-option [value]="role">{{role}}</mat-option>
            }
          </mat-select>
          @if (form.get('role')?.hasError('required')) {
            <mat-error>
              Role is required
            </mat-error>
          }
          @if (isRoleDisabled()) {
            <mat-hint>Role cannot be changed for owners</mat-hint>
          }
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Email</mat-label>
        <input matInput formControlName="email" type="email" placeholder="Enter email address">
        @if (form.get('email')?.hasError('required')) {
          <mat-error>
            Email is required
          </mat-error>
        }
        @if (form.get('email')?.hasError('email')) {
          <mat-error>
            Please enter a valid email address
          </mat-error>
        }
      </mat-form-field>

      <div class="grid grid-cols-2 gap-4">
        <mat-form-field appearance="outline" class="w-full">
          <mat-label>Phone Number</mat-label>
          <input matInput formControlName="phoneNumber" placeholder="Enter phone number">
          @if (form.get('phoneNumber')?.hasError('required')) {
            <mat-error>
              Phone number is required
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-full">
          <mat-label>PIN</mat-label>
          <input matInput formControlName="pin" type="password" maxlength="4" placeholder="Enter 4-digit PIN">
          @if (form.get('pin')?.hasError('required')) {
            <mat-error>
              PIN is required
            </mat-error>
          }
          @if (form.get('pin')?.hasError('minlength') || form.get('pin')?.hasError('maxlength')) {
            <mat-error>
              PIN must be exactly 4 digits
            </mat-error>
          }
        </mat-form-field>
      </div>
    </div>

    <div class="flex justify-end space-x-2 mt-6 pt-4 border-t border-gray-200">
      <button mat-button type="button" [disabled]="isSubmitting()" (click)="onCancel()">Cancel</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!form.valid || isSubmitting()">
        @if (isSubmitting()) {
          <mat-spinner diameter="20" class="mr-2"></mat-spinner>
        }
        {{isEdit ? 'Update' : 'Create'}}
      </button>
    </div>
  </form>
</div>
