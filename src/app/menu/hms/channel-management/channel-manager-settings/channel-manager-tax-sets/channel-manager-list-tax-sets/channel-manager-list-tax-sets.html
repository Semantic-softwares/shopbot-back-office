
  <!-- Page Header -->
  <app-page-header
    title="Tax Sets"
    subtitle="Manage your tax sets"
    actionLabel="Create Tax Set"
    
  >
<ng-container actions>
    <button
      matButton="filled"
      color="primary"
      (click)="createTaxSet()"
    >
      <mat-icon>add</mat-icon>
      Create Tax Set
    </button>
</ng-container>
</app-page-header>

  <!-- Loading State -->
  @if (taxSets.isLoading()) {
    <div class="flex justify-center items-center py-20">
      <mat-spinner diameter="50"></mat-spinner>
    </div>
  }

  <!-- Error State -->
  @if (taxSets.error()) {
    <app-no-record
      icon="error_outline"
      title="Failed to Load Tax Sets"
      [message]="taxSets.error()?.message || 'Unable to load tax sets. Please try again.'"
    ></app-no-record>
  }

  <!-- Tax Sets Table -->
  @if (!taxSets.isLoading() && dataSource && dataSource.data.length > 0) {
    <mat-card appearance="outlined" class="mt-6">
      <mat-card-content class="p-0">
        <!-- Search Field -->
        <div class="p-4 border-b border-gray-200">
          <mat-form-field appearance="outline" class="w-full md:w-80">
            <mat-label>Search tax sets</mat-label>
            <input
              matInput
              [(ngModel)]="searchText"
              (input)="applyFilter()"
              placeholder="Search by title..."
            />
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>
        </div>

        <!-- Table -->
        <table mat-table [dataSource]="dataSource" matSort #table>
          <!-- Title Column -->
          <ng-container matColumnDef="title">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Tax Set Title</th>
            <td mat-cell *matCellDef="let element">
              <span class="font-semibold text-gray-900">{{ element.attributes?.title }}</span>
            </td>
          </ng-container>

          <!-- Currency Column -->
          <ng-container matColumnDef="currency">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Currency</th>
            <td mat-cell *matCellDef="let element">
              {{ element.attributes?.currency }}
            </td>
          </ng-container>

          <!-- Taxes Count Column -->
          <ng-container matColumnDef="taxes_count">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Tax Count</th>
            <td mat-cell *matCellDef="let element">
              {{ element.attributes?.taxes?.length || 0 }}
            </td>
          </ng-container>

          <!-- Actions Column -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let element" class="text-right">
              <button
                mat-icon-button
                [matMenuTriggerFor]="menu"
                matTooltip="More options"
              >
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="editTaxSet(element)">
                  <mat-icon>edit</mat-icon>
                  <span>Edit</span>
                </button>
                <button mat-menu-item (click)="deleteTaxSet(element)" class="text-red-600">
                  <mat-icon>delete</mat-icon>
                  <span>Delete</span>
                </button>
              </mat-menu>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <!-- Paginator -->
        <mat-paginator
          [pageSizeOptions]="[5, 10, 20, 50]"
          showFirstLastButtons
          aria-label="Select page"
        ></mat-paginator>
      </mat-card-content>
    </mat-card>
  }

  <!-- Empty State -->
  @if (!taxSets.isLoading() && (!dataSource || dataSource.data.length === 0) && !taxSets.error()) {
    <app-no-record
      icon="assignment"
      title="No Tax Sets Found"
      message="No tax sets have been created yet. Create your first tax set to get started."
    ></app-no-record>
  }

