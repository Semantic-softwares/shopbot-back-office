<h2 mat-dialog-title class="flex items-center justify-between">
  {{ guestName() }}
</h2>

<mat-dialog-content>
  
  <mat-chip-set>
    <mat-chip class="capitalize" color="primary">{{ statusLabel() }}</mat-chip>
   <mat-chip class="capitalize">{{ reservationType() }}</mat-chip>
   <mat-chip>{{ confirmationNumber() }}</mat-chip>
</mat-chip-set>

  <!-- Stay Information (from room assignment) -->
  <mat-list>
    <div mat-subheader>Stay</div>
    <mat-list-item>
      Check-in
      <span matListItemMeta>{{ roomCheckIn() | date:'dd/MM/yyyy' }}</span>
    </mat-list-item>
    <mat-list-item>
      Check-out
      <span matListItemMeta>{{ roomCheckOut() | date:'dd/MM/yyyy' }}</span>
    </mat-list-item>
    <mat-list-item>
      Source
      <span matListItemMeta class="capitalize">{{ bookingSource() }}</span>
    </mat-list-item>
  </mat-list>

  <mat-divider></mat-divider>

  <!-- Room Information -->
  <mat-list>
    <div mat-subheader>Room</div>
    @if (isOtaUnassigned() && otaRooms().length) {
      @for (room of otaRooms(); track room?.booking_room_id || room?.room_type_id || $index; let i = $index) {
        <mat-list-item>
          <span matListItemTitle>{{ getOtaRoomTypeName(room, i) }}</span>
          <span matListItemMeta>{{ getOtaRoomPrice(room) | currency: bookingCurrency() }}</span>
          <span matListItemLine>
            {{ getOtaRoomCheckIn(room) | date:'dd/MM/yyyy' }} → {{ getOtaRoomCheckOut(room) | date:'dd/MM/yyyy' }}
          </span>
        </mat-list-item>
      }
    } @else {
      <mat-list-item>
        Room
        <span matListItemMeta>{{ roomTypeName() }}</span>
      </mat-list-item>
      <mat-list-item>
        Price
        <span matListItemMeta>
          {{ (hasRoomAssignment() ? roomTotal() : bookingAmount()) | currency: bookingCurrency() }}
        </span>
      </mat-list-item>
      <mat-list-item>
        Dates
        <span matListItemMeta>
          {{ roomCheckIn() | date:'dd/MM/yyyy' }} → {{ roomCheckOut() | date:'dd/MM/yyyy' }}
        </span>
      </mat-list-item>
    }
  </mat-list>

  <mat-divider></mat-divider>

  <!-- Payment Information -->
  <mat-list>
    <div mat-subheader>Payment</div>
    <mat-list-item>
      Payment Mode
      <span matListItemMeta class="capitalize">{{ paymentMethod() }}</span>
    </mat-list-item>
    @if (hasRoomAssignment()) {
      <mat-list-item>
        Room Total
        <span matListItemMeta>{{ roomTotal() | currency: bookingCurrency() }}</span>
      </mat-list-item>
    }
    <mat-list-item>
      Booking Total
      <span matListItemMeta class="font-semibold">{{ bookingAmount() | currency: bookingCurrency() }}</span>
    </mat-list-item>
    <mat-list-item>
      Amount Paid
      <span matListItemMeta>{{ amountPaid() | currency: bookingCurrency() }}</span>
    </mat-list-item>
    <mat-list-item>
      Balance
      <span matListItemMeta>{{ bookingBalance() | currency: bookingCurrency() }}</span>
    </mat-list-item>
  </mat-list>
</mat-dialog-content>

<mat-dialog-actions align="end" class="gap-2">
  <button matButton="outlined" (click)="openReservation()">View</button>
  <button matButton="outlined" (click)="close()">Close</button>
</mat-dialog-actions>
