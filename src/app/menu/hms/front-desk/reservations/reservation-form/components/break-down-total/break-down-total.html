<div class="mt-6" [formGroup]="reservationForm()!">
    <h3 class="text-sm font-bold text-gray-800 mb-4 flex items-center gap-2">
        Price Breakdown
    </h3>

    <!-- Summary List -->
    <mat-list formGroupName="pricing">
        <!-- Total Nights -->
        <mat-list-item>
            <span matListItemTitle>Total Nights</span>
            <span matListItemMeta class="font-semibold">
                {{ totalNumberOfNights() }} night(s)
            </span>
        </mat-list-item>

        <!-- Base Total -->
        <mat-list-item>
            <span matListItemTitle>Base Total (all rooms)</span>
            <span matListItemMeta>
                {{ breakdownSubtotal() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Service Fee -->
        <mat-list-item>
            <span matListItemTitle>Service Fee</span>
            <span matListItemMeta>
                {{ breakdownServiceFee() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Cleaning Fee -->
        <mat-list-item>
            <span matListItemTitle>Cleaning Fee</span>
            <span matListItemMeta>
                {{ breakdownCleaningFee() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Resort Fee -->
        <mat-list-item>
            <span matListItemTitle>Resort Fee</span>
            <span matListItemMeta>
                {{ breakdownResortFee() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Other Fees -->
        <mat-list-item>
            <span matListItemTitle>Other Fees</span>
            <span matListItemMeta>
                {{ breakdownOtherFees() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Divider -->
        <mat-divider></mat-divider>

        <!-- Total Fees -->
        <mat-list-item>
            <span matListItemTitle class="font-semibold">Total Fees</span>
            <span matListItemMeta class="font-semibold">
                {{ breakdownTotalFees() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Divider -->
        <mat-divider></mat-divider>

        <!-- Taxes -->
        <mat-list-item>
            <span matListItemTitle>Taxes</span>
            <span matListItemMeta>
                {{ breakdownTaxes() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Discount -->
        <mat-list-item>
            <span matListItemTitle>Discount</span>
            <span matListItemMeta>
                {{ breakdownDiscount() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Divider -->
        <mat-divider></mat-divider>

        <!-- Grand Total -->
        <mat-list-item class="py-4">
            <span matListItemTitle class="font-bold text-lg">Grand Total</span>
            <span matListItemMeta class="font-bold text-lg">
                {{ breakdownGrandTotal() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Divider -->
        <mat-divider></mat-divider>

        <!-- Reservation Total (same as Grand Total, for clarity) -->
        <mat-list-item class="py-4 bg-indigo-50">
            <span matListItemTitle class="font-bold text-indigo-900">Reservation Total</span>
            <span matListItemMeta class="font-bold text-indigo-900">
                {{ breakdownGrandTotal() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Orders Grand Total -->
        @if (ordersGrandTotal() > 0) {
          <mat-list-item class="py-4 bg-green-50">
              <span matListItemTitle class="font-bold text-green-900 flex items-center gap-2">
                <span class="text-sm">ðŸ“¦</span> Orders Total
              </span>
              <span matListItemMeta class="font-bold text-green-900">
                  {{ ordersGrandTotal() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
              </span>
          </mat-list-item>

          <!-- Orders Paid -->
          <mat-list-item class="py-2 pl-8">
              <span matListItemTitle class="text-sm text-gray-700">Orders Paid</span>
              <span matListItemMeta class="text-sm text-green-700">
                  {{ ordersPaidAmount() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
              </span>
          </mat-list-item>

          <!-- Orders Balance -->
          <mat-list-item class="py-2 pl-8 mb-2">
              <span matListItemTitle class="text-sm text-gray-700">Orders Balance</span>
              <span matListItemMeta class="text-sm" [class.text-red-700]="ordersBalanceAmount() > 0" [class.text-green-700]="ordersBalanceAmount() <= 0">
                  {{ ordersBalanceAmount() | currency:storeStore!.selectedStore()?.currency:'symbol':'1.2-2' }}
              </span>
          </mat-list-item>

          <mat-divider></mat-divider>
        }

        <!-- Paid Amount -->
        <mat-list-item class="py-4">
            <span matListItemTitle >Paid</span>
            <span matListItemMeta >
                {{ paidAmount() | currency: storeStore.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>

        <!-- Balance -->
        <mat-list-item class="py-4">
            <span matListItemTitle >Balance</span>
            <span matListItemMeta >
                {{ breakdownBalance() | currency: storeStore.selectedStore()?.currency:'symbol':'1.2-2' }}
            </span>
        </mat-list-item>
    </mat-list>
   <!-- <pre>{{ reservationForm()?.value | json }}</pre> -->
</div>