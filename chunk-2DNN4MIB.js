import{c as X,d as Z}from"./chunk-IS37LNAK.js";import{a as U,b as J,e as Q,h as W}from"./chunk-QJ2P7YZL.js";import"./chunk-LXD47U2C.js";import{a as $,b as ee}from"./chunk-ZG44B3L4.js";import{B as K,b as q,d as _,g as A,h as j,m as G,s as z,t as O,x as H,z as Y}from"./chunk-SZWYIW32.js";import"./chunk-CTT4BYCX.js";import{a as T}from"./chunk-V7ZBVJLR.js";import{a as V}from"./chunk-T4ACDKLD.js";import"./chunk-5QCN73SK.js";import"./chunk-NQRUH5DO.js";import{h as L}from"./chunk-MESJBQC5.js";import"./chunk-QEF3JOQ3.js";import"./chunk-LSROOOYO.js";import"./chunk-7NDZPDVA.js";import{b as D,c as B}from"./chunk-OWLRGWNJ.js";import{$ as I,Y as F,Z as N}from"./chunk-OS2CYUJN.js";import{e as M,g as k,h as R}from"./chunk-WFEXX4HI.js";import{r as y}from"./chunk-U2P6GFP5.js";import{$a as s,Eb as C,Gb as c,Hb as u,Mb as f,Nb as t,Ob as e,Pb as w,Wb as E,_b as v,ac as x,ea as p,ja as b,ka as g,ob as S,pc as i,qc as P,va as m}from"./chunk-IQSYHSID.js";import"./chunk-EQDQRRRY.js";function ie(o,n){o&1&&(t(0,"mat-error"),i(1,"Password is required"),e())}function ne(o,n){o&1&&(t(0,"mat-error"),i(1,"Password must be at least 8 characters"),e())}function oe(o,n){o&1&&(t(0,"mat-error"),i(1,"Please confirm your password"),e())}function re(o,n){o&1&&(t(0,"div",31),i(1," Passwords do not match "),e())}function ae(o,n){o&1&&(t(0,"span",33),w(1,"mat-spinner",37),i(2," Resetting... "),e())}function se(o,n){o&1&&i(0," Reset Password ")}function le(o,n){if(o&1){let r=E();t(0,"h2",23),i(1,"Create new password"),e(),t(2,"p",24),i(3,"Enter a strong password for your account."),e(),t(4,"form",25),v("ngSubmit",function(){b(r);let d=x();return g(d.onSubmit())}),t(5,"mat-form-field",26)(6,"mat-label"),i(7,"New Password"),e(),w(8,"input",27),t(9,"button",28),v("click",function(){b(r);let d=x();return g(d.clickEvent("password"))}),t(10,"mat-icon",29),i(11),e()(),c(12,ie,2,0,"mat-error"),c(13,ne,2,0,"mat-error"),e(),t(14,"mat-form-field",26)(15,"mat-label"),i(16,"Confirm Password"),e(),w(17,"input",30),t(18,"button",28),v("click",function(){b(r);let d=x();return g(d.clickEvent("confirmPassword"))}),t(19,"mat-icon",29),i(20),e()(),c(21,oe,2,0,"mat-error"),e(),c(22,re,2,0,"div",31),t(23,"button",32),c(24,ae,3,0,"span",33)(25,se,1,0),e(),t(26,"div",34)(27,"a",35)(28,"mat-icon",36),i(29,"arrow_back"),e(),i(30," Back to Login "),e()()()}if(o&2){let r,l,d,h,a=x();s(4),f("formGroup",a.resetPasswordForm),s(4),f("type",a.hidePassword()?"password":"text"),s(),C("aria-label","Hide password")("aria-pressed",a.hidePassword()),s(2),P(a.hidePassword()?"visibility_off":"visibility"),s(),u((r=a.resetPasswordForm.get("password"))!=null&&r.hasError("required")?12:-1),s(),u((l=a.resetPasswordForm.get("password"))!=null&&l.hasError("minlength")?13:-1),s(4),f("type",a.hideConfirmPassword()?"password":"text"),s(),C("aria-label","Hide password")("aria-pressed",a.hideConfirmPassword()),s(2),P(a.hideConfirmPassword()?"visibility_off":"visibility"),s(),u((d=a.resetPasswordForm.get("confirmPassword"))!=null&&d.hasError("required")?21:-1),s(),u(a.resetPasswordForm.hasError("passwordMismatch")&&((h=a.resetPasswordForm.get("password"))!=null&&h.value)&&((h=a.resetPasswordForm.get("confirmPassword"))!=null&&h.value)?22:-1),s(),f("disabled",!a.resetPasswordForm.valid||a.loading()),s(),u(a.loading()?24:25)}}function de(o,n){o&1&&(t(0,"div",6)(1,"div",38)(2,"mat-icon",39),i(3,"check_circle"),e()(),t(4,"h2",23),i(5,"Password Reset Successfully!"),e(),t(6,"p",24),i(7," Your password has been reset. You can now login with your new password. "),e(),t(8,"a",40),i(9," Go to Login "),e()())}var te=class o{fb=p(Y);authService=p(V);snackBar=p(T);router=p(k);route=p(M);loading=m(!1);resetComplete=m(!1);hidePassword=m(!0);hideConfirmPassword=m(!0);email=m("");token=m("");resetPasswordForm=this.fb.group({password:["",[_.required,_.minLength(8)]],confirmPassword:["",_.required]},{validators:this.passwordMatchValidator});constructor(){}ngOnInit(){this.route.queryParams.subscribe(n=>{if(!n.email||!n.token){this.router.navigate(["/auth/forgot-password"]);return}n.email&&this.email.set(n.email),n.token&&this.token.set(n.token)})}passwordMatchValidator(n){let r=n.get("password"),l=n.get("confirmPassword");return!r||!l||r.value===l.value?null:{passwordMismatch:!0}}clickEvent(n){n==="password"?this.hidePassword.set(!this.hidePassword()):this.hideConfirmPassword.set(!this.hideConfirmPassword())}onSubmit(){if(this.resetPasswordForm.valid&&this.email()&&this.token()){this.loading.set(!0);let{password:n}=this.resetPasswordForm.value;this.authService.updatePassword(this.email(),n).subscribe({next:r=>{this.loading.set(!1),this.resetComplete.set(!0),this.snackBar.open("Password reset successfully!","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),setTimeout(()=>{this.router.navigate(["/auth/login"])},2e3)},error:r=>{this.loading.set(!1),this.snackBar.open(r.error?.msg||r.message||"Failed to reset password. Please try again.","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}}static \u0275fac=function(r){return new(r||o)};static \u0275cmp=S({type:o,selectors:[["app-reset-password"]],decls:52,vars:1,consts:[[1,"min-h-screen","w-full","flex","flex-col","lg:flex-row"],[1,"w-full","lg:w-1/2","flex","flex-col","justify-center","px-6","py-12","lg:px-16","xl:px-24","bg-white"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-500","mt-1"],[1,"max-w-md"],[1,"text-center","py-8"],[1,"hidden","lg:flex","lg:w-1/2","bg-gradient-to-br","from-blue-600","via-blue-700","to-indigo-800","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-10"],[1,"absolute","top-0","left-0","w-96","h-96","bg-white","rounded-full","-translate-x-1/2","-translate-y-1/2"],[1,"absolute","bottom-0","right-0","w-80","h-80","bg-white","rounded-full","translate-x-1/3","translate-y-1/3"],[1,"absolute","top-1/2","left-1/2","w-64","h-64","bg-white","rounded-full","-translate-x-1/2","-translate-y-1/2"],[1,"relative","z-10","flex","flex-col","justify-center","px-12","xl:px-16","text-white"],[1,"mb-10"],[1,"text-3xl","xl:text-4xl","font-bold","leading-tight","mb-4"],[1,"text-blue-200","text-lg"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-6"],[1,"font-semibold","text-white","mb-4","flex","items-center","gap-2"],["fontSet","material-icons-outlined",1,"text-blue-300"],[1,"space-y-3"],[1,"flex","items-start","gap-3"],["fontSet","material-icons-outlined",1,"text-blue-300","text-sm","mt-0.5"],[1,"text-blue-100","text-sm"],[1,"text-2xl","font-semibold","text-gray-800","mb-2"],[1,"text-gray-500","mb-8"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","minlength","8",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["fontSet","material-icons-outlined"],["matInput","","formControlName","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"type"],[1,"bg-red-50","text-red-600","text-sm","p-3","rounded-lg","text-center"],["mat-flat-button","","color","primary","type","submit",1,"w-full","h-12","text-base","mt-2",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-center","mt-6"],["routerLink","/auth/login",1,"text-sm","font-medium","text-blue-600","hover:text-blue-800"],[1,"text-sm","align-middle","mr-1"],["diameter","20"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],[1,"text-green-600","text-3xl"],["routerLink","/auth/login","mat-flat-button","","color","primary",1,"w-full","h-12"]],template:function(r,l){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"ShopBot"),e(),t(5,"p",4),i(6,"Create New Password"),e()(),t(7,"div",5),c(8,le,31,15)(9,de,10,0,"div",6),e()(),t(10,"div",7)(11,"div",8),w(12,"div",9)(13,"div",10)(14,"div",11),e(),t(15,"div",12)(16,"div",13)(17,"h2",14),i(18," Create a strong password "),e(),t(19,"p",15),i(20," Keep your account secure with a strong, unique password. "),e()(),t(21,"div",16)(22,"h4",17)(23,"mat-icon",18),i(24,"lightbulb"),e(),i(25," Password Tips "),e(),t(26,"div",19)(27,"div",20)(28,"mat-icon",21),i(29,"check_circle"),e(),t(30,"span",22),i(31,"Use at least 8 characters"),e()(),t(32,"div",20)(33,"mat-icon",21),i(34,"check_circle"),e(),t(35,"span",22),i(36,"Include uppercase and lowercase letters"),e()(),t(37,"div",20)(38,"mat-icon",21),i(39,"check_circle"),e(),t(40,"span",22),i(41,"Add numbers and special characters"),e()(),t(42,"div",20)(43,"mat-icon",21),i(44,"check_circle"),e(),t(45,"span",22),i(46,"Avoid using personal information"),e()(),t(47,"div",20)(48,"mat-icon",21),i(49,"check_circle"),e(),t(50,"span",22),i(51,"Don't reuse passwords from other accounts"),e()()()()()()()),r&2&&(s(8),u(l.resetComplete()?9:8))},dependencies:[y,L,I,N,F,Z,X,W,U,J,Q,K,G,q,A,j,H,O,z,B,D,ee,$,R],encapsulation:2})};export{te as ResetPasswordComponent};
