import{Qc as h,Rc as j,Sc as M,T as D,Tc as k,W as d,ca as b,d as f,h as y,la as w,na as l,ta as v,wa as x,xa as g}from"./chunk-HCNG3XRF.js";import{a as p,b as m}from"./chunk-EQDQRRRY.js";function U(n){n||(n=b(l));let e=new f(t=>{if(n.destroyed){t.next();return}return n.onDestroy(t.next.bind(t))});return t=>t.pipe(D(e))}function T(n){let e=h(n);return new f(t=>{let o=e?.onDestroy(()=>t.complete()),i=n.subscribe(r=>t.next(r));return()=>{i.unsubscribe(),o?.()}})}function F(n,e){let t=e?.injector??b(w),o=new y(1),i=x(()=>{let r;try{r=n()}catch(u){g(()=>o.error(u));return}g(()=>o.next(r))},{injector:t,manualCleanup:!0});return t.get(l).onDestroy(()=>{i.destroy(),o.complete()}),o.asObservable()}function L(n,e){let o=!e?.manualCleanup?e?.injector?.get(l)??b(l):null,i=I(e?.equal),r;e?.requireSync?r=v({kind:0},{equal:i}):r=v({kind:1,value:e?.initialValue},{equal:i});let u,a=n.subscribe({next:s=>r.set({kind:1,value:s}),error:s=>{r.set({kind:2,error:s}),u?.()},complete:()=>{u?.()}});if(e?.requireSync&&r().kind===0)throw new d(601,!1);return u=o?.onDestroy(a.unsubscribe.bind(a)),j(()=>{let s=r();switch(s.kind){case 1:return s.value;case 2:throw s.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function I(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function $(n){return M(m(p({},n),{loader:void 0,stream:e=>{let t,o=()=>t?.unsubscribe();e.abortSignal.addEventListener("abort",o);let i=v({value:void 0}),r,u=new Promise(c=>r=c);function a(c){i.set(c),r?.(i),r=void 0}let s=n.stream??n.loader;if(s===void 0)throw new d(990,!1);return t=s(e).subscribe({next:c=>a({value:c}),error:c=>{a({error:k(c)}),e.abortSignal.removeEventListener("abort",o)},complete:()=>{r&&a({error:new d(991,!1)}),e.abortSignal.removeEventListener("abort",o)}}),u}}))}export{U as a,T as b,F as c,L as d,$ as e};
