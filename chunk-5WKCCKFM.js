import{a as be}from"./chunk-VWN5Z5VW.js";import{a as fe,b as U,c as he}from"./chunk-ELEDOZ6W.js";import{a as Ce}from"./chunk-5UWICUNS.js";import"./chunk-HJ3IDALV.js";import"./chunk-24SFQJLQ.js";import{g as ve}from"./chunk-M3D2B6CG.js";import"./chunk-MS4AQ6UA.js";import{k as pe}from"./chunk-BWWYPHKT.js";import{b as ge}from"./chunk-YVYCFWPM.js";import"./chunk-3RK6DDJD.js";import{a as _e,b as xe}from"./chunk-LIUA42FM.js";import"./chunk-JQGESV5S.js";import"./chunk-XQNDMVIO.js";import{b as ee}from"./chunk-3632TDEK.js";import{a as X}from"./chunk-I24LUS2H.js";import{c as ue}from"./chunk-DSRTAZMJ.js";import{c as de,g as me}from"./chunk-H55FNLX4.js";import{a as oe,b as re}from"./chunk-H476YUNT.js";import{a as ae,c as se,d as le,e as ce}from"./chunk-5XJCC6NP.js";import"./chunk-EEQKDLYL.js";import"./chunk-JTD73F4Y.js";import"./chunk-JGZ2V5AL.js";import"./chunk-CXVWFC6J.js";import"./chunk-JTLCVARK.js";import{g as Z}from"./chunk-HA7VDR7W.js";import{a as te,b as ne}from"./chunk-7C3RSL2D.js";import"./chunk-OHZSVTBE.js";import"./chunk-VIOSJ367.js";import"./chunk-TEL7Y7UN.js";import{q as Q}from"./chunk-FSA22CPB.js";import{b as ie}from"./chunk-TS4O77IX.js";import"./chunk-M2YK6UF7.js";import"./chunk-BVQK7CK4.js";import"./chunk-AGZJ637K.js";import{a as J,c as K}from"./chunk-7EKHSXIM.js";import"./chunk-TQDHD3WD.js";import{g as W,o as H,s as q,t as Y}from"./chunk-DWCYWQVU.js";import{Cc as g,Db as d,Dc as M,Eb as m,Ec as h,Fb as T,Hb as O,Ib as D,Jb as P,Kb as o,Lb as i,Mb as I,Mc as b,Qb as y,Ub as f,Vb as u,_a as s,dc as R,ec as w,fa as k,hc as B,ic as r,jc as c,kb as L,kc as S,la as x,lc as F,ma as C,va as E}from"./chunk-5AECHVKR.js";import{a as z,b as j,f as _}from"./chunk-EQDQRRRY.js";var Pe=(a,t)=>t.value;function Se(a,t){if(a&1&&(o(0,"h1",40),r(1," Reservation Details "),i(),o(2,"p",41),r(3),i()),a&2){let e=u();s(3),S("Confirmation: ",e.reservation().confirmationNumber)}}function ke(a,t){a&1&&(o(0,"h1",40),r(1,"Reservation Details"),i(),o(2,"p",41),r(3,"Loading reservation information..."),i())}function Ee(a,t){a&1&&(o(0,"mat-icon",44),r(1,"refresh"),i())}function Me(a,t){if(a&1&&(o(0,"mat-icon",50),r(1),i()),a&2){let e=u(2);w("color",e.getStatusColor(e.reservation().status)),s(),c(e.getStatusIcon(e.reservation().status))}}function Oe(a,t){a&1&&(o(0,"div",22),r(1," No status changes available "),i())}function De(a,t){if(a&1){let e=y();o(0,"button",51),f("click",function(){let l=x(e).$implicit,v=u(2);return C(v.updateReservationStatus(l.value))}),o(1,"mat-icon",52),r(2),i(),o(3,"span"),r(4),i()()}if(a&2){let e=t.$implicit;s(),w("color",e.color),s(),c(e.icon),s(2),c(e.label)}}function Re(a,t){a&1&&(o(0,"div",47),r(1," \u{1F4A1} Confirm reservation before check-in "),i())}function we(a,t){a&1&&(o(0,"div",24),r(1," \u{1F4A1} Ready for check-in "),i())}function Te(a,t){if(a&1){let e=y();o(0,"button",53),f("click",function(){x(e);let l=u(2);return C(l.editReservation())}),o(1,"mat-icon",54),r(2,"edit"),i(),r(3," Edit Reservation "),i()}}function Ie(a,t){if(a&1&&(o(0,"div",10)(1,"div",42)(2,"button",43),d(3,Ee,2,0,"mat-icon",44)(4,Me,2,3,"mat-icon",45),r(5),g(6,"titlecase"),o(7,"mat-icon",46),r(8,"expand_more"),i()(),o(9,"mat-menu",13,4)(11,"div",21),r(12," Change Status "),i(),d(13,Oe,2,0,"div",22),O(14,De,5,4,"button",23,Pe),d(16,Re,2,0,"div",47),d(17,we,2,0,"div",24),i()(),d(18,Te,4,0,"button",48),o(19,"button",49)(20,"mat-icon"),r(21,"more_vert"),i()()()),a&2){let e=R(10),n=u(),l=R(15);s(2),w("background-color",n.getStatusColor(n.reservation().status)+"20")("color",n.getStatusColor(n.reservation().status))("border-color",n.getStatusColor(n.reservation().status)+"40"),P("matMenuTriggerFor",e)("disabled",n.statusUpdating()),s(),m(n.statusUpdating()?3:4),s(2),S(" ",M(6,15,n.reservation().status)," "),s(8),m(n.getAvailableStatusOptions().length===0?13:-1),s(),D(n.getAvailableStatusOptions()),s(2),m(n.reservation()&&n.reservation().status==="pending"?16:-1),s(),m(n.reservation()&&n.reservation().status==="confirmed"?17:-1),s(),m(n.canEdit()?18:-1),s(),P("matMenuTriggerFor",l)}}function Be(a,t){a&1&&(o(0,"div",11),I(1,"mat-spinner",55),o(2,"span",56),r(3,"Loading reservation details..."),i()())}function Fe(a,t){if(a&1){let e=y();o(0,"div",12)(1,"div",57)(2,"div",58)(3,"mat-icon",59),r(4,"error_outline"),i()(),o(5,"h3",60),r(6,"Failed to Load Reservation"),i(),o(7,"p",61),r(8),i(),o(9,"button",62),f("click",function(){x(e);let l=u();return C(l.goBack())}),r(10," Back to Reservations "),i()()()}if(a&2){let e=u();s(8),c(e.error())}}function Ue(a,t){if(a&1&&(o(0,"div",41),r(1),i()),a&2){let e=u(2);s(),S("Expected: ",e.reservation().expectedCheckInTime)}}function Ae(a,t){if(a&1&&(o(0,"div",41),r(1),i()),a&2){let e=u(2);s(),S("Expected: ",e.reservation().expectedCheckOutTime)}}function Ne(a,t){if(a&1&&(o(0,"tr",79)(1,"td",93),r(2),i(),o(3,"td",94),r(4),i(),o(5,"td",94),r(6),i(),o(7,"td",94),r(8),i(),o(9,"td",93),r(10),g(11,"currency"),i()()),a&2){let e,n=t.$implicit,l=u(2);s(2),c(n.roomNumber+" ("+n.name+")"),s(2),c(n.roomType),s(2),c(n.adults),s(2),c(n.children),s(2),c(h(11,5,n.rate,(e=l.storeStore.selectedStore())==null?null:e.currency))}}function Ve(a,t){if(a&1&&(o(0,"div",82)(1,"span",83),r(2,"Service Fee"),i(),o(3,"span",84),r(4),g(5,"currency"),i()()),a&2){let e,n=u(2);s(4),c(h(5,1,(e=n.reservation().pricing.fees)==null?null:e.serviceFee,(e=n.storeStore.selectedStore())==null?null:e.currency))}}function $e(a,t){if(a&1&&(o(0,"div",82)(1,"span",83),r(2,"Cleaning Fee"),i(),o(3,"span",84),r(4),g(5,"currency"),i()()),a&2){let e,n=u(2);s(4),c(h(5,1,(e=n.reservation().pricing.fees)==null?null:e.cleaningFee,(e=n.storeStore.selectedStore())==null?null:e.currency))}}function Ge(a,t){if(a&1&&(o(0,"div",82)(1,"span",83),r(2,"Resort Fee"),i(),o(3,"span",84),r(4),g(5,"currency"),i()()),a&2){let e,n=u(2);s(4),c(h(5,1,(e=n.reservation().pricing.fees)==null?null:e.resortFee,(e=n.storeStore.selectedStore())==null?null:e.currency))}}function ze(a,t){if(a&1&&(o(0,"div",82)(1,"span",83),r(2,"Discount"),i(),o(3,"span",88),r(4),g(5,"currency"),i()()),a&2){let e,n=u(2);s(4),S("-",h(5,1,(e=n.reservation().pricing.discounts)==null?null:e.amount,(e=n.storeStore.selectedStore())==null?null:e.currency))}}function je(a,t){if(a&1&&(o(0,"button",49)(1,"mat-icon"),r(2,"more_vert"),i()()),a&2){u(3);let e=R(38);P("matMenuTriggerFor",e)}}function Le(a,t){a&1&&(o(0,"mat-icon",99),r(1,"refresh"),i())}function We(a,t){if(a&1&&(o(0,"div")(1,"label",71),r(2,"Last Transaction"),i(),o(3,"div",97),r(4),g(5,"currency"),i()()),a&2){let e,n=u(3);s(4),F(" ",h(5,2,n.transactionHistory()[n.transactionHistory().length-1].amount,(e=n.storeStore.selectedStore())==null?null:e.currency)," on ",n.formatDateTime(n.transactionHistory()[n.transactionHistory().length-1].date)," ")}}function He(a,t){if(a&1&&(o(0,"div",65)(1,"div",66)(2,"div",95)(3,"h3",67)(4,"mat-icon",96),r(5,"credit_card"),i(),r(6," Payment Information "),i(),d(7,je,3,1,"button",49),i()(),o(8,"div",69)(9,"div",81)(10,"div")(11,"label",71),r(12,"Payment Method"),i(),o(13,"div",97),r(14),g(15,"titlecase"),i()(),o(16,"div")(17,"label",71),r(18,"Payment Status"),i(),o(19,"div",98),d(20,Le,2,0,"mat-icon",99),o(21,"span",100),r(22),g(23,"titlecase"),i()()(),d(24,We,6,5,"div"),i()()()),a&2){let e,n,l,v=u(2);s(7),m(v.statusUpdating()?-1:7),s(7),c(M(15,7,(e=v.reservation().paymentInfo)==null?null:e.method)),s(6),m(v.statusUpdating()?20:-1),s(),B(((n=v.reservation().paymentInfo)==null?null:n.status)==="paid"?"bg-green-100 text-green-800":((n=v.reservation().paymentInfo)==null?null:n.status)==="refunded"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),s(),S(" ",M(23,9,(l=v.reservation().paymentInfo)==null?null:l.status)," "),s(2),m(v.transactionHistory().length>0?24:-1)}}function qe(a,t){if(a&1&&(o(0,"tr",79)(1,"td",94),r(2),i(),o(3,"td",93),r(4),g(5,"currency"),i(),o(6,"td",94),r(7),g(8,"titlecase"),i(),o(9,"td",94),r(10),i(),o(11,"td",101)(12,"span",100),r(13),g(14,"titlecase"),i()()()),a&2){let e,n=t.$implicit,l=u(3);s(2),c(l.formatDateTime(n.date)),s(2),c(h(5,7,n.amount,(e=l.storeStore.selectedStore())==null?null:e.currency)),s(3),c(M(8,10,n.method)),s(3),c(n.reference),s(2),B(n.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),s(),S(" ",M(14,12,n.status)," ")}}function Ye(a,t){if(a&1&&(o(0,"div",65)(1,"div",66)(2,"h3",67)(3,"mat-icon",73),r(4,"receipt"),i(),r(5," Transaction History "),i()(),o(6,"div",69)(7,"div",75)(8,"table",76)(9,"thead")(10,"tr",77)(11,"th",78),r(12,"Date"),i(),o(13,"th",78),r(14,"Amount"),i(),o(15,"th",78),r(16,"Method"),i(),o(17,"th",78),r(18,"Reference"),i(),o(19,"th",78),r(20,"Status"),i()()(),o(21,"tbody"),O(22,qe,15,14,"tr",79,T),i()()()()()),a&2){let e=u(2);s(22),D(e.transactionHistory())}}function Je(a,t){if(a&1&&(o(0,"div",65)(1,"div",66)(2,"h3",67)(3,"mat-icon",68),r(4,"message"),i(),r(5," Special Requests "),i()(),o(6,"div",69)(7,"p",102),r(8),i()()()),a&2){let e=u(3);s(8),c(e.reservation().specialRequests)}}function Ke(a,t){if(a&1&&(o(0,"div",65)(1,"div",66)(2,"h3",67)(3,"mat-icon",103),r(4,"note"),i(),r(5," Internal Notes "),i()(),o(6,"div",69)(7,"p",102),r(8),i()()()),a&2){let e=u(3);s(8),c(e.reservation().internalNotes)}}function Qe(a,t){if(a&1&&(o(0,"div",91),d(1,Je,9,1,"div",65),d(2,Ke,9,1,"div",65),i()),a&2){let e=u(2);s(),m(e.reservation().specialRequests?1:-1),s(),m(e.reservation().internalNotes?2:-1)}}function Xe(a,t){if(a&1&&(o(0,"div",41),r(1),i()),a&2){let e=u().$implicit;s(),S("Age: ",e.age)}}function Ze(a,t){if(a&1&&(o(0,"div",41),r(1),i()),a&2){let e=u().$implicit;s(),c(e.relationship)}}function et(a,t){if(a&1&&(o(0,"div",105)(1,"div",84),r(2),i(),d(3,Xe,2,1,"div",41),d(4,Ze,2,1,"div",41),i()),a&2){let e=t.$implicit;s(2),F("",e.firstName," ",e.lastName),s(),m(e.age?3:-1),s(),m(e.relationship?4:-1)}}function tt(a,t){if(a&1&&(o(0,"div",65)(1,"div",66)(2,"h3",67)(3,"mat-icon",73),r(4,"group"),i(),r(5," Additional Guests "),i()(),o(6,"div",69)(7,"div",104),O(8,et,5,4,"div",105,T),i()()()),a&2){let e=u(2);s(8),D(e.reservation().guestDetails.additionalGuests)}}function nt(a,t){if(a&1&&(o(0,"div")(1,"label",71),r(2,"Last Updated"),i(),o(3,"div",41),r(4),i()()),a&2){let e=u(2);s(4),c(e.formatDateTime(e.reservation().updatedAt))}}function it(a,t){if(a&1&&(o(0,"div")(1,"label",71),r(2,"Actual Check-in"),i(),o(3,"div",41),r(4),i()()),a&2){let e=u(2);s(4),c(e.formatDateTime(e.reservation().actualCheckInDate))}}function ot(a,t){if(a&1&&(o(0,"div")(1,"label",71),r(2,"Actual Check-out"),i(),o(3,"div",41),r(4),i()()),a&2){let e=u(2);s(4),c(e.formatDateTime(e.reservation().actualCheckOutDate))}}function rt(a,t){if(a&1&&(o(0,"div")(1,"label",109),r(2,"Refund Amount"),i(),o(3,"div",110),r(4),g(5,"currency"),i()()),a&2){let e,n=u(3);s(4),c(h(5,1,n.getRefundAmount(),(e=n.storeStore.selectedStore())==null?null:e.currency))}}function at(a,t){if(a&1&&(o(0,"div")(1,"label",109),r(2,"Cancellation Fee"),i(),o(3,"div",110),r(4),g(5,"currency"),i()()),a&2){let e,n=u(3);s(4),c(h(5,1,n.getCancellationFee(),(e=n.storeStore.selectedStore())==null?null:e.currency))}}function st(a,t){if(a&1&&(o(0,"div",92)(1,"div",106)(2,"h3",107)(3,"mat-icon",108),r(4,"cancel"),i(),r(5," Cancellation Information "),i()(),o(6,"div",69)(7,"div",70)(8,"div")(9,"label",109),r(10,"Cancelled"),i(),o(11,"div",110),r(12),i()(),o(13,"div")(14,"label",109),r(15,"Reason"),i(),o(16,"div",110),r(17),i()(),d(18,rt,6,4,"div"),d(19,at,6,4,"div"),i()()()),a&2){let e=u(2);s(12),c(e.formatDateTime(e.reservation().cancellation.cancelledAt)),s(5),c(e.reservation().cancellation.reason),s(),m(e.hasRefundAmount()?18:-1),s(),m(e.hasCancellationFee()?19:-1)}}function lt(a,t){if(a&1&&(o(0,"div",12)(1,"div",63)(2,"div",64)(3,"div",65)(4,"div",66)(5,"h3",67)(6,"mat-icon",68),r(7,"person"),i(),r(8," Guest Information "),i()(),o(9,"div",69)(10,"div",70)(11,"div")(12,"label",71),r(13,"Guest Name"),i(),o(14,"div",72),r(15),i()(),o(16,"div")(17,"label",71),r(18,"Email"),i(),o(19,"div",41),r(20),i()(),o(21,"div")(22,"label",71),r(23,"Phone"),i(),o(24,"div",41),r(25),i()(),o(26,"div")(27,"label",71),r(28,"Occupancy"),i(),o(29,"div",41),r(30),i()()()()(),o(31,"div",65)(32,"div",66)(33,"h3",67)(34,"mat-icon",73),r(35,"calendar_today"),i(),r(36," Stay Information "),i()(),o(37,"div",69)(38,"div",70)(39,"div")(40,"label",71),r(41,"Check-in Date"),i(),o(42,"div",72),r(43),i(),d(44,Ue,2,1,"div",41),i(),o(45,"div")(46,"label",71),r(47,"Check-out Date"),i(),o(48,"div",72),r(49),i(),d(50,Ae,2,1,"div",41),i(),o(51,"div")(52,"label",71),r(53,"Number of Nights"),i(),o(54,"div",72),r(55),i()(),o(56,"div")(57,"label",71),r(58,"Booking Source"),i(),o(59,"div",41),r(60),g(61,"titlecase"),i()()()()(),o(62,"div",65)(63,"div",66)(64,"h3",67)(65,"mat-icon",74),r(66,"hotel"),i(),r(67," Room Details "),i()(),o(68,"div",69)(69,"div",75)(70,"table",76)(71,"thead")(72,"tr",77)(73,"th",78),r(74,"Room Number"),i(),o(75,"th",78),r(76,"Room Type"),i(),o(77,"th",78),r(78,"Adults"),i(),o(79,"th",78),r(80,"Children"),i(),o(81,"th",78),r(82,"Rate per Night"),i()()(),o(83,"tbody"),O(84,Ne,12,8,"tr",79,T),i()()()()()(),o(86,"div",80)(87,"div",65)(88,"div",66)(89,"h3",67)(90,"mat-icon",74),r(91,"payments"),i(),r(92," Pricing Summary "),i()(),o(93,"div",69)(94,"div",81)(95,"div",82)(96,"span",83),r(97,"Subtotal"),i(),o(98,"span",84),r(99),g(100,"currency"),i()(),o(101,"div",82)(102,"span",83),r(103,"Taxes"),i(),o(104,"span",84),r(105),g(106,"currency"),i()(),d(107,Ve,6,4,"div",82),d(108,$e,6,4,"div",82),d(109,Ge,6,4,"div",82),d(110,ze,6,4,"div",82),I(111,"hr",85),o(112,"div",86)(113,"span",87),r(114,"Total"),i(),o(115,"span",87),r(116),g(117,"currency"),i()(),o(118,"div",82)(119,"span",83),r(120,"Paid"),i(),o(121,"span",88),r(122),g(123,"currency"),i()(),o(124,"div",82)(125,"span",83),r(126,"Balance"),i(),o(127,"span",89),r(128),g(129,"currency"),i()()()()(),d(130,He,25,11,"div",65),i()(),o(131,"div",90),d(132,Ye,24,0,"div",65),d(133,Qe,3,2,"div",91),d(134,tt,10,0,"div",65),o(135,"div",65)(136,"div",66)(137,"h3",67)(138,"mat-icon",74),r(139,"info"),i(),r(140," Booking Information "),i()(),o(141,"div",69)(142,"div",70)(143,"div")(144,"label",71),r(145,"Created"),i(),o(146,"div",41),r(147),i()(),d(148,nt,5,1,"div"),d(149,it,5,1,"div"),d(150,ot,5,1,"div"),i()()(),d(151,st,20,4,"div",92),i()()),a&2){let e,n,l,v,A,N,V,$,G,p=u();s(15),c(p.guestName()),s(5),c(p.guestEmail()),s(5),c(p.guestPhone()),s(5),F("",p.reservation().guestDetails.totalAdults," Adults, ",p.reservation().guestDetails.totalChildren," Children"),s(13),c(p.formatDate(p.reservation().checkInDate)),s(),m(p.reservation().expectedCheckInTime?44:-1),s(5),c(p.formatDate(p.reservation().checkOutDate)),s(),m(p.reservation().expectedCheckOutTime?50:-1),s(5),c(p.reservation().numberOfNights),s(5),c(M(61,31,p.reservation().bookingSource)),s(24),D(p.roomDetails()),s(15),c(h(100,33,p.reservation().pricing.subtotal,(e=p.storeStore.selectedStore())==null?null:e.currency)),s(6),c(h(106,36,p.reservation().pricing.taxes,(n=p.storeStore.selectedStore())==null?null:n.currency)),s(2),m((l=p.reservation().pricing.fees)!=null&&l.serviceFee?107:-1),s(),m((v=p.reservation().pricing.fees)!=null&&v.cleaningFee?108:-1),s(),m((A=p.reservation().pricing.fees)!=null&&A.resortFee?109:-1),s(),m((N=p.reservation().pricing.discounts)!=null&&N.amount?110:-1),s(6),c(h(117,39,p.reservation().pricing.total,(V=p.storeStore.selectedStore())==null?null:V.currency)),s(6),c(h(123,42,p.reservation().pricing.paid,($=p.storeStore.selectedStore())==null?null:$.currency)),s(5),B(p.reservation().pricing.balance>0?"text-red-600":"text-green-600"),s(),S(" ",h(129,45,p.reservation().pricing.balance,(G=p.storeStore.selectedStore())==null?null:G.currency)," "),s(2),m(p.reservation().paymentInfo?130:-1),s(2),m(p.transactionHistory().length>0?132:-1),s(),m(p.reservation().specialRequests||p.reservation().internalNotes?133:-1),s(),m(p.hasAdditionalGuests()?134:-1),s(13),c(p.formatDateTime(p.reservation().createdAt)),s(),m(p.reservation().updatedAt!==p.reservation().createdAt?148:-1),s(),m(p.reservation().actualCheckInDate?149:-1),s(),m(p.reservation().actualCheckOutDate?150:-1),s(),m(p.hasCancellation()?151:-1)}}function ct(a,t){if(a&1){let e=y();o(0,"button",25),f("click",function(){x(e);let l=u();return C(l.editReservation())}),o(1,"mat-icon",26),r(2,"edit"),i(),o(3,"span"),r(4,"Edit Reservation"),i()()}}function dt(a,t){a&1&&(o(0,"mat-icon",19),r(1,"download"),i())}function mt(a,t){a&1&&(o(0,"mat-icon",20),r(1,"picture_as_pdf"),i())}function ut(a,t){if(a&1){let e=y();I(0,"mat-divider",111),o(1,"button",112),f("click",function(){x(e);let l=u();return C(l.deleteReservation())}),o(2,"mat-icon",20),r(3,"delete"),i(),o(4,"span"),r(5,"Delete Reservation"),i()()}}function pt(a,t){a&1&&(o(0,"div",22),r(1," No status changes available "),i())}function vt(a,t){if(a&1){let e=y();o(0,"button",51),f("click",function(){let l=x(e).$implicit,v=u();return C(v.updatePaymentStatus(l.value))}),o(1,"mat-icon",52),r(2),i(),o(3,"span"),r(4),i()()}if(a&2){let e=t.$implicit;s(),w("color",e.color),s(),c(e.icon),s(2),c(e.label)}}function gt(a,t){if(a&1){let e=y();o(0,"button",113),f("click",function(){x(e);let l=u();return C(l.sendReservationEmail("confirmation"))}),o(1,"mat-icon",36),r(2,"check_circle"),i(),o(3,"span"),r(4,"Send Confirmation Email"),i()()}}function _t(a,t){if(a&1){let e=y();o(0,"button",114),f("click",function(){x(e);let l=u();return C(l.sendReservationEmail("checkin"))}),o(1,"mat-icon",115),r(2,"login"),i(),o(3,"span"),r(4,"Send Check-in Notification"),i()()}}function xt(a,t){a&1&&(o(0,"div",31)(1,"mat-icon",50),r(2,"bluetooth_connected"),i(),o(3,"span"),r(4,"Printer Connected"),i()())}function Ct(a,t){a&1&&(o(0,"div",32)(1,"mat-icon",50),r(2,"bluetooth_disabled"),i(),o(3,"span"),r(4,"Printer Not Connected"),i()())}function ft(a,t){a&1&&(o(0,"mat-icon",34),r(1,"print"),i())}function ht(a,t){a&1&&(o(0,"mat-icon",26),r(1,"print"),i())}function bt(a,t){if(a&1){let e=y();o(0,"button",116),f("click",function(){x(e);let l=u();return C(l.disconnectFromPrinter())}),o(1,"mat-icon",20),r(2,"bluetooth_disabled"),i(),o(3,"span"),r(4,"Disconnect Printer"),i()()}if(a&2){let e=u();P("disabled",e.printing()||e.statusUpdating())}}function yt(a,t){if(a&1){let e=y();o(0,"button",117),f("click",function(){x(e);let l=u();return C(l.connectToPrinter())}),o(1,"mat-icon",26),r(2,"bluetooth"),i(),o(3,"span"),r(4,"Connect to Printer"),i()()}if(a&2){let e=u();P("disabled",e.printing()||e.statusUpdating())}}var ye=class a{router=k(K);route=k(J);location=k(W);reservationService=k(Ce);bluetoothPrinterService=k(be);storeStore=k(ie);snackBar=k(X);dialog=k(de);reservation=E(null);loading=E(!1);error=E(null);statusUpdating=E(!1);printerConnected=E(!1);printing=E(!1);exportingPDF=E(!1);statusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"confirmed",label:"Confirmed",icon:"check_circle",color:"#10b981"},{value:"checked_in",label:"Checked In",icon:"login",color:"#3b82f6"},{value:"checked_out",label:"Checked Out",icon:"logout",color:"#6b7280"},{value:"cancelled",label:"Cancelled",icon:"cancel",color:"#ef4444"},{value:"no_show",label:"No Show",icon:"person_off",color:"#f97316"}];roomDetails=b(()=>{let t=this.reservation();return!t||!t.rooms?[]:t.rooms.map(e=>{let n=typeof e.room=="string"?{roomNumber:e.room,roomType:"Unknown"}:e.room;return{name:n.name||"N/A",roomNumber:n.roomNumber||"Unknown",roomType:typeof n.roomType=="object"&&n.roomType?.name||"Unknown",adults:e.guests?.adults||0,children:e.guests?.children||0,rate:n.priceOverride||0}})});transactionHistory=b(()=>{let t=this.reservation();return!t||!t.paymentInfo?.transactions?[]:t.paymentInfo.transactions});guestName=b(()=>{let t=this.reservation();if(!t||!t.guestDetails?.primaryGuest)return"Unknown Guest";let e=t.guestDetails.primaryGuest;return`${e.firstName||""} ${e.lastName||""}`.trim()||"Unknown Guest"});guestEmail=b(()=>this.reservation()?.guestDetails?.primaryGuest?.email||"No email provided");guestPhone=b(()=>this.reservation()?.guestDetails?.primaryGuest?.phone||"No phone provided");hasAdditionalGuests=b(()=>{let t=this.reservation();return t?.guestDetails?.additionalGuests&&t.guestDetails.additionalGuests.length>0});hasCancellation=b(()=>this.reservation()?.cancellation?.isCancelled);hasRefundAmount=b(()=>{let t=this.reservation();return t?.cancellation?.refundAmount&&t.cancellation.refundAmount>0});hasCancellationFee=b(()=>{let t=this.reservation();return t?.cancellation?.cancellationFee&&t.cancellation.cancellationFee>0});getRefundAmount=b(()=>this.reservation()?.cancellation?.refundAmount||0);getCancellationFee=b(()=>this.reservation()?.cancellation?.cancellationFee||0);paymentStatusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"paid",label:"Paid",icon:"check_circle",color:"#10b981"},{value:"partial",label:"Partial",icon:"donut_small",color:"#3b82f6"},{value:"refunded",label:"Refunded",icon:"undo",color:"#6b7280"}];getAvailablePaymentStatusOptions=b(()=>{let t=this.reservation();if(!t)return[];let e=t.paymentInfo?.status||"pending";return this.paymentStatusOptions.filter(n=>n.value!==e)});ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t?this.loadReservation(t):this.error.set("No reservation ID provided"),this.printerConnected.set(this.bluetoothPrinterService.isConnected())}loadReservation(t){return _(this,null,function*(){this.loading.set(!0),this.error.set(null);try{if(!this.storeStore.selectedStore()?._id)throw new Error("No store selected");this.reservationService.getReservationById(t).subscribe({next:n=>{this.reservation.set(n),this.loading.set(!1)},error:n=>{console.error("Error loading reservation:",n),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}catch(e){console.error("Error loading reservation:",e),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}goBack(){this.location.back()}editReservation(){this.reservation()&&this.router.navigate(["/menu/hms/front-desk/reservations/edit",this.reservation()._id])}canEdit(){let t=this.reservation();return t?.status!=="cancelled"&&t?.status!=="checked_out"&&t?.status!=="no_show"&&t?.status!=="checked_in"&&!t?.actualCheckInDate}canDelete(){let t=this.reservation();return t?["pending","cancelled","no_show"].includes(t.status):!1}deleteReservation(){let t=this.reservation();if(!t)return;let e=this.storeStore.selectedStore();if(!e?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let n={storeId:e._id,actionDescription:`delete reservation ${t.confirmationNumber}`,reservationId:t._id};this.dialog.open(he,{data:n,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(v=>{v?.authorized&&v.pin&&this.performReservationDeletion(t,v.pin)})}performReservationDeletion(t,e){this.statusUpdating.set(!0),this.reservationService.deleteReservationWithPin(t._id,e).subscribe({next:n=>{this.snackBar.open(`Reservation ${t.confirmationNumber} deleted successfully`,"Close",{duration:5e3}),this.router.navigate(["/dashboard/hms/front-desk/reservations"])},error:n=>{console.error("Error deleting reservation:",n),this.snackBar.open(n.message||"Failed to delete reservation","Close",{duration:5e3,panelClass:["error-snackbar"]})},complete:()=>{this.statusUpdating.set(!1)}})}canCheckIn(){return this.reservation()?.status==="confirmed"}canCheckOut(){return this.reservation()?.status==="checked_in"}canCancel(){let t=this.reservation();return t?.status!=="cancelled"&&t?.status!=="checked_out"&&t?.status!=="no_show"}checkInReservation(){return _(this,null,function*(){if(this.reservation()){if(!this.canCheckIn()){this.snackBar.open('Guests can only be checked in when reservation status is "Confirmed"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_in")}catch(e){console.error("Error checking in reservation:",e),this.snackBar.open("Failed to check in reservation","Close",{duration:3e3})}}})}checkOutReservation(){return _(this,null,function*(){if(this.reservation()){if(!this.canCheckOut()){this.snackBar.open('Guests can only be checked out when reservation status is "Checked In"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_out")}catch(e){console.error("Error checking out reservation:",e),this.snackBar.open("Failed to check out reservation","Close",{duration:3e3})}}})}cancelReservation(){return _(this,null,function*(){if(!(!this.reservation()||!this.canCancel()))try{this.snackBar.open("Cancellation functionality coming soon","Close",{duration:3e3})}catch(e){console.error("Error cancelling reservation:",e),this.snackBar.open("Failed to cancel reservation","Close",{duration:3e3})}})}updateReservationStatus(t){return _(this,null,function*(){let e=this.reservation();if(!(!e||e.status===t)){if(t==="checked_in"){this.showCheckInDialog(e);return}if(t==="checked_out"){this.performCheckOut();return}if(!this.isValidStatusTransition(e.status,t)){this.snackBar.open(this.getStatusTransitionError(e.status,t),"Close",{duration:5e3,panelClass:["error-snackbar"]});return}(t==="cancelled"||t==="no_show")&&!confirm(`Are you sure you want to change the status to ${t}?`)||(yield this.performStatusUpdate(t))}})}updatePaymentStatus(t){let e=this.reservation();e&&(t==="paid"?this.showPaymentDialog(e):this.performPaymentStatusUpdate(t))}showPaymentDialog(t){let e={reservation:t,isCheckoutFlow:!1};this.dialog.open(U,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(l=>{l?.confirmed&&l.paymentData&&this.processPayment(l.paymentData)})}processPayment(t){return _(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.processPayment(e._id,{amount:t.amount,method:t.method,reference:t.reference||`PAY-${Date.now()}`}).toPromise();let n=yield this.reservationService.getReservationById(e._id).toPromise();n&&this.reservation.set(n),this.snackBar.open(`Payment of ${this.formatCurrency(t.amount)} recorded successfully`,"Close",{duration:5e3})}catch(n){console.error("Error processing payment:",n);let l=n instanceof Error?n.message:"Failed to process payment";this.snackBar.open(l,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performPaymentStatusUpdate(t){return _(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let n=yield this.reservationService.updateReservation(e._id,{paymentInfo:j(z({},e.paymentInfo),{status:t})}).toPromise();n&&(this.reservation.set(n),this.snackBar.open(`Payment status updated to ${t}`,"Close",{duration:3e3}))}catch(n){console.error("Error updating payment status:",n);let l=n instanceof Error?n.message:"Failed to update payment status";this.snackBar.open(l,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}showCheckInDialog(t){let e={reservation:t};this.dialog.open(fe,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(l=>{l?.confirmed&&this.performCheckIn(l)})}performCheckIn(t){return _(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let n=yield this.reservationService.checkInReservationWithRooms(e._id).toPromise();n&&(this.reservation.set(n),this.snackBar.open("Guest checked in successfully! Room status updated to occupied.","Close",{duration:5e3}))}catch(n){console.error("Error during check-in:",n);let l=n instanceof Error?n.message:"Failed to check in guest";this.snackBar.open(l,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performCheckOut(){return _(this,null,function*(){let t=this.reservation();if(t){if(this.requiresPaymentBeforeCheckout(t)){this.showPaymentRequiredDialog(t);return}this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(t._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during check-out:",e);let n=e instanceof Error?e.message:"Failed to check out guest";this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}requiresPaymentBeforeCheckout(t){let e=t.pricing.balance>0,n=t.paymentInfo?.status!=="paid";return e&&n}showPaymentRequiredDialog(t){let e={reservation:t,isCheckoutFlow:!0};this.dialog.open(U,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(l=>{l?.confirmed&&l.paymentData&&this.processPaymentAndCheckout(l.paymentData)})}processPaymentAndCheckout(t){return _(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.processPayment(e._id,{amount:t.amount,method:t.method,reference:t.reference||`PAY-${Date.now()}`}).toPromise();let n=yield this.reservationService.getReservationById(e._id).toPromise();n&&(this.reservation.set(n),this.snackBar.open(`Payment of ${this.formatCurrency(t.amount)} recorded successfully`,"Close",{duration:3e3}),n.pricing.balance<=0||n.paymentInfo?.status==="paid"?setTimeout(()=>{this.proceedWithCheckout()},1500):this.snackBar.open("Payment recorded, but outstanding balance remains. Please complete payment before checkout.","Close",{duration:5e3,panelClass:["warning-snackbar"]}))}catch(n){console.error("Error processing payment for checkout:",n);let l=n instanceof Error?n.message:"Failed to process payment";this.snackBar.open(l,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}proceedWithCheckout(){return _(this,null,function*(){let t=this.reservation();if(t){this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(t._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during checkout after payment:",e);let n=e instanceof Error?e.message:"Failed to complete checkout";this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performStatusUpdate(t){return _(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let n=yield this.reservationService.updateReservationStatus(e._id,t).toPromise();n&&(this.reservation.set(n),this.snackBar.open(`Status updated to ${t}`,"Close",{duration:3e3}))}catch(n){console.error("Error updating reservation status:",n);let l=n instanceof Error?n.message:"Failed to update status";this.snackBar.open(l,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}getAvailableStatusOptions(){let t=this.reservation()?.status;return this.statusOptions.filter(e=>e.value!==t&&this.isValidStatusTransition(t||"",e.value))}isValidStatusTransition(t,e){return{pending:["confirmed","cancelled","no_show"],confirmed:["checked_in","cancelled","no_show"],checked_in:["checked_out"],checked_out:[],cancelled:[],no_show:[]}[t]?.includes(e)||!1}getStatusTransitionError(t,e){switch(e){case"checked_in":return'Guests can only be checked in when reservation status is "Confirmed"';case"checked_out":return'Guests can only be checked out when reservation status is "Checked In"';case"confirmed":return t==="checked_in"?"Cannot change back to confirmed after check-in":t==="checked_out"?"Cannot change back to confirmed after check-out":"Invalid status transition";default:return`Cannot change status from "${t}" to "${e}"`}}getStatusColor(t){return{pending:"#f59e0b",confirmed:"#10b981",checked_in:"#3b82f6",checked_out:"#6b7280",cancelled:"#ef4444",no_show:"#f97316"}[t]||"#6b7280"}getStatusIcon(t){return{pending:"schedule",confirmed:"check_circle",checked_in:"login",checked_out:"logout",cancelled:"cancel",no_show:"person_off"}[t]||"help"}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}formatDateTime(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}sendReservationEmail(t="details"){return _(this,null,function*(){let e=this.reservation();if(!e)return;let n=this.guestEmail();if(!n||n==="No email provided"){this.snackBar.open("No email address available for this guest","Close",{duration:5e3,panelClass:["error-snackbar"]});return}this.statusUpdating.set(!0);try{let l=yield this.reservationService.sendReservationEmail(e._id,{emailType:t}).toPromise();if(l?.success)this.snackBar.open(l.message||`${t.charAt(0).toUpperCase()+t.slice(1)} email sent successfully to ${n}`,"Close",{duration:5e3});else throw new Error("Email sending failed")}catch(l){console.error("Error sending reservation email:",l);let v=l instanceof Error?l.message:"Failed to send reservation email";this.snackBar.open(v,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}connectToPrinter(){return _(this,null,function*(){if(!this.bluetoothPrinterService.isBluetoothSupported()){this.snackBar.open("Web Bluetooth is not supported in this browser","Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{this.statusUpdating.set(!0),yield this.bluetoothPrinterService.connectToPrinter(),this.printerConnected.set(!0);let t=this.bluetoothPrinterService.getConnectedDeviceInfo();this.snackBar.open(`Connected to printer: ${t?.name||"Unknown Printer"}`,"Close",{duration:3e3})}catch(t){console.error("Error connecting to printer:",t),this.printerConnected.set(!1);let e=t instanceof Error?t.message:"Failed to connect to printer";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}disconnectFromPrinter(){return _(this,null,function*(){try{yield this.bluetoothPrinterService.disconnectPrinter(),this.printerConnected.set(!1),this.snackBar.open("Disconnected from printer","Close",{duration:3e3})}catch(t){console.error("Error disconnecting from printer:",t),this.snackBar.open("Failed to disconnect from printer","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}printReservation(){return _(this,null,function*(){let t=this.reservation();if(t){if(!this.bluetoothPrinterService.isConnected())if(confirm("Printer not connected. Would you like to connect to a printer first?"))try{if(yield this.connectToPrinter(),!this.bluetoothPrinterService.isConnected())return}catch{return}else return;this.printing.set(!0);try{let e=this.storeStore.selectedStore();yield this.bluetoothPrinterService.printReservation(t,e),this.snackBar.open("Reservation printed successfully","Close",{duration:3e3})}catch(e){console.error("Error printing reservation:",e);let n=e instanceof Error?e.message:"Failed to print reservation";this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]}),n.includes("not connected")&&this.printerConnected.set(!1)}finally{this.printing.set(!1)}}})}testPrint(){return _(this,null,function*(){if(!this.bluetoothPrinterService.isConnected()){this.snackBar.open("Please connect to a printer first","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.printing.set(!0);try{yield this.bluetoothPrinterService.testPrint(),this.snackBar.open("Test print completed successfully","Close",{duration:3e3})}catch(t){console.error("Error during test print:",t);let e=t instanceof Error?t.message:"Test print failed";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.printing.set(!1)}})}exportReservationToPDF(){return _(this,null,function*(){let t=this.reservation();if(t){this.exportingPDF.set(!0);try{let e=yield this.reservationService.exportReservationToPDF(t._id).toPromise();if(e){let n=window.URL.createObjectURL(e),l=document.createElement("a");l.href=n,l.download=`reservation-${t.confirmationNumber}.pdf`,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(n),this.snackBar.open("Reservation details exported to PDF successfully!","Close",{duration:3e3})}}catch(e){console.error("Error exporting reservation to PDF:",e);let n=e instanceof Error?e.message:"Failed to export reservation to PDF";this.snackBar.open(n,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.exportingPDF.set(!1)}}})}formatCurrency(t){if(!t&&t!==0)return"N/A";let e=this.storeStore.selectedStore(),n=e?.currencyCode||e?.currency||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:n}).format(t)}catch{return console.warn(`Invalid currency code: ${n}, falling back to USD`),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=L({type:a,selectors:[["app-reservation-details"]],decls:81,vars:22,consts:[["actionsMenu","matMenu"],["paymentMenu","matMenu"],["emailMenu","matMenu"],["printMenu","matMenu"],["statusMenu","matMenu"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","border-b","border-blue-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-6"],[1,"flex","items-center","gap-4"],["type","button",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","justify-center","items-center","py-12","bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"!shadow-xl","!border","!border-gray-200","!rounded-lg"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"matMenuTriggerFor"],[1,"mr-3","!text-gray-600"],[1,"ml-auto","!text-gray-400"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-red-600","animate-spin"],[1,"mr-3","!text-red-600"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","border-b","border-gray-100"],[1,"px-3","py-2","text-xs","text-gray-400","italic"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors"],[1,"px-3","py-2","text-xs","text-blue-600","bg-blue-50","border-t","border-blue-100","mt-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click"],[1,"mr-3","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors"],[1,"px-3","py-2","text-xs","text-gray-600","bg-gray-50","border-t","border-gray-100","mt-1"],[1,"px-3","py-2","text-xs","border-b","border-gray-100"],[1,"flex","items-center","gap-2","text-green-600"],[1,"flex","items-center","gap-2","text-gray-500"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-blue-600","animate-spin"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-green-600"],[1,"px-3","py-2","border-t","border-gray-100","mt-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"disabled"],[1,"text-3xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600"],[1,"relative"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","border-2","flex","items-center","gap-2","hover:opacity-80","transition-all","duration-200","disabled:opacity-50",3,"matMenuTriggerFor","disabled"],[1,"text-sm","animate-spin"],[1,"text-sm",3,"color"],[1,"text-xs","opacity-60"],[1,"px-3","py-2","text-xs","text-amber-600","bg-amber-50","border-t","border-amber-100","mt-1"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2"],[1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"matMenuTriggerFor"],[1,"text-sm"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"click"],[1,"mr-3","!text-base"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"text-lg"],["diameter","40",1,"!text-blue-600"],[1,"ml-3","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center"],[1,"w-16","h-16","bg-red-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-red-500"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],["type","button",1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors","duration-200",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"text-blue-600"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-green-600"],[1,"text-purple-600"],[1,"overflow-x-auto"],[1,"min-w-full"],[1,"border-b","border-gray-200"],[1,"text-left","py-3","px-4","font-semibold","text-gray-700"],[1,"border-b","border-gray-100","hover:bg-gray-50"],[1,"space-y-6"],[1,"space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium","text-gray-900"],[1,"border-gray-200"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-gray-900"],[1,"font-medium","text-green-600"],[1,"font-medium"],[1,"mt-8","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-red-50","border","border-red-200","rounded-lg","overflow-hidden"],[1,"py-3","px-4","font-medium","text-gray-900"],[1,"py-3","px-4","text-gray-600"],[1,"flex","justify-between","items-center"],[1,"text-indigo-600"],[1,"text-sm","text-gray-900"],[1,"flex","items-center","gap-2"],[1,"text-sm","animate-spin","text-blue-600"],[1,"inline-flex","px-2","py-1","text-xs","font-medium","rounded-full"],[1,"py-3","px-4"],[1,"text-gray-700"],[1,"text-orange-600"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-gray-50","border","border-gray-200","rounded-lg","p-4"],[1,"bg-red-100","px-6","py-4","border-b","border-red-200"],[1,"text-lg","font-semibold","text-red-900","flex","items-center","gap-2"],[1,"text-red-600"],[1,"block","text-sm","font-medium","text-red-700","mb-1"],[1,"text-sm","text-red-600"],[1,"!border-gray-200","my-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors",3,"click"],[1,"mr-3","!text-purple-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"click","disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"click","disabled"]],template:function(e,n){if(e&1){let l=y();o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"button",9),f("click",function(){return x(l),C(n.goBack())}),o(5,"mat-icon"),r(6,"arrow_back"),i()(),o(7,"div"),d(8,Se,4,1)(9,ke,4,0),i()(),d(10,Ie,22,17,"div",10),i()()(),d(11,Be,4,0,"div",11),d(12,Fe,11,1,"div",12),d(13,lt,152,48,"div",12),o(14,"mat-menu",13,0),d(16,ct,5,0,"button",14),o(17,"button",15)(18,"mat-icon",16),r(19,"print"),i(),o(20,"span"),r(21,"Print Details"),i(),o(22,"mat-icon",17),r(23,"chevron_right"),i()(),o(24,"button",15)(25,"mat-icon",16),r(26,"email"),i(),o(27,"span"),r(28,"Send Email"),i(),o(29,"mat-icon",17),r(30,"chevron_right"),i()(),o(31,"button",18),f("click",function(){return x(l),C(n.exportReservationToPDF())}),d(32,dt,2,0,"mat-icon",19)(33,mt,2,0,"mat-icon",20),o(34,"span"),r(35),i()(),d(36,ut,6,0),i(),o(37,"mat-menu",13,1)(39,"div",21),r(40," Update Payment Status "),i(),d(41,pt,2,0,"div",22),O(42,vt,5,4,"button",23,Pe),o(44,"div",24),r(45,' \u{1F4A1} Selecting "Paid" will open payment entry dialog '),i()(),o(46,"mat-menu",13,2)(48,"div",21),r(49," Email Options "),i(),o(50,"button",25),f("click",function(){return x(l),C(n.sendReservationEmail("details"))}),o(51,"mat-icon",26),r(52,"description"),i(),o(53,"span"),r(54,"Send Reservation Details"),i()(),d(55,gt,5,0,"button",27),d(56,_t,5,0,"button",28),o(57,"div",29),r(58),i()(),o(59,"mat-menu",13,3)(61,"div",21),r(62," Print Options "),i(),o(63,"div",30),d(64,xt,5,0,"div",31)(65,Ct,5,0,"div",32),i(),o(66,"button",33),f("click",function(){return x(l),C(n.printReservation())}),d(67,ft,2,0,"mat-icon",34)(68,ht,2,0,"mat-icon",26),o(69,"span"),r(70),i()(),o(71,"button",35),f("click",function(){return x(l),C(n.testPrint())}),o(72,"mat-icon",36),r(73,"check_circle"),i(),o(74,"span"),r(75,"Test Print"),i()(),o(76,"div",37),d(77,bt,5,1,"button",38)(78,yt,5,1,"button",39),i(),o(79,"div",29),r(80," \u{1F5A8}\uFE0F Uses Bluetooth thermal printers with ESC/POS commands "),i()()}if(e&2){let l=R(47),v=R(60);s(8),m(n.reservation()?8:9),s(2),m(n.reservation()&&!n.loading()?10:-1),s(),m(n.loading()?11:-1),s(),m(n.error()&&!n.loading()?12:-1),s(),m(n.reservation()&&!n.loading()&&!n.error()?13:-1),s(3),m(n.canEdit()?16:-1),s(),P("matMenuTriggerFor",v),s(7),P("matMenuTriggerFor",l),s(7),P("disabled",n.exportingPDF()||n.statusUpdating()),s(),m(n.exportingPDF()?32:33),s(3),c(n.exportingPDF()?"Exporting...":"Export to PDF"),s(),m(n.canDelete()?36:-1),s(5),m(n.getAvailablePaymentStatusOptions().length===0?41:-1),s(),D(n.getAvailablePaymentStatusOptions()),s(13),m(n.reservation()&&(n.reservation().status==="confirmed"||n.reservation().status==="checked_in"||n.reservation().status==="checked_out")?55:-1),s(),m(n.reservation()&&(n.reservation().status==="checked_in"||n.reservation().status==="checked_out")?56:-1),s(2),S(" \u{1F4E7} Email will be sent to: ",n.guestEmail()," "),s(6),m(n.printerConnected()?64:65),s(2),P("disabled",n.printing()||n.statusUpdating()),s(),m(n.printing()?67:68),s(3),c(n.printing()?"Printing...":"Print Reservation"),s(),P("disabled",n.printing()||n.statusUpdating()||!n.printerConnected()),s(6),m(n.printerConnected()?77:78)}},dependencies:[Y,H,q,Z,Q,ne,te,ue,ve,pe,ce,se,ae,le,xe,_e,ge,ee,me,re,oe],styles:[".reservation-details-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{margin:24px auto;max-width:400px}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#f44336}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:24px 24px 0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px 24px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e9ecef;margin:0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-weight:500;border-radius:20px;padding:8px 16px;font-size:12px;text-transform:uppercase;letter-spacing:.5px}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1f2937}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:#3b82f6;font-weight:600}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-body-content{padding:0}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table{box-shadow:none;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-row{background-color:#f8f9fa}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{font-weight:600;color:#374151;border-bottom:1px solid #e5e7eb;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-cell{color:#1f2937;border-bottom:1px solid #f3f4f6;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:hover{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:last-child .mat-mdc-cell{border-bottom:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip{font-size:11px;font-weight:500;height:24px;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip.status-chip{border:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary{background-color:#3b82f6;color:#fff}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary:hover{background-color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-menu-panel{border-radius:8px;box-shadow:0 4px 16px #0000001f}.reservation-details-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .gap-2[_ngcontent-%COMP%]{gap:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-4[_ngcontent-%COMP%]{gap:1rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-6[_ngcontent-%COMP%]{gap:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}@media (min-width: 768px){.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}.reservation-details-container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex}.reservation-details-container[_ngcontent-%COMP%]   .items-center[_ngcontent-%COMP%]{align-items:center}.reservation-details-container[_ngcontent-%COMP%]   .items-start[_ngcontent-%COMP%]{align-items:flex-start}.reservation-details-container[_ngcontent-%COMP%]   .justify-center[_ngcontent-%COMP%]{justify-content:center}.reservation-details-container[_ngcontent-%COMP%]   .justify-between[_ngcontent-%COMP%]{justify-content:space-between}.reservation-details-container[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]{width:100%}.reservation-details-container[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%]{padding:.75rem}.reservation-details-container[_ngcontent-%COMP%]   .p-4[_ngcontent-%COMP%]{padding:1rem}.reservation-details-container[_ngcontent-%COMP%]   .py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.reservation-details-container[_ngcontent-%COMP%]   .pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.reservation-details-container[_ngcontent-%COMP%]   .text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.reservation-details-container[_ngcontent-%COMP%]   .text-lg[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.reservation-details-container[_ngcontent-%COMP%]   .text-4xl[_ngcontent-%COMP%]{font-size:2.25rem;line-height:2.5rem}.reservation-details-container[_ngcontent-%COMP%]   .font-medium[_ngcontent-%COMP%]{font-weight:500}.reservation-details-container[_ngcontent-%COMP%]   .font-semibold[_ngcontent-%COMP%]{font-weight:600}.reservation-details-container[_ngcontent-%COMP%]   .rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .border-t[_ngcontent-%COMP%]{border-top-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#111827}.reservation-details-container[_ngcontent-%COMP%]   .text-blue-600[_ngcontent-%COMP%]{color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]   .text-green-600[_ngcontent-%COMP%]{color:#059669}.reservation-details-container[_ngcontent-%COMP%]   .text-purple-600[_ngcontent-%COMP%]{color:#9333ea}.reservation-details-container[_ngcontent-%COMP%]   .text-orange-600[_ngcontent-%COMP%]{color:#ea580c}.reservation-details-container[_ngcontent-%COMP%]   .text-red-600[_ngcontent-%COMP%]{color:#dc2626}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .bg-red-50[_ngcontent-%COMP%]{background-color:#fef2f2}.reservation-details-container[_ngcontent-%COMP%]   .border-red-200[_ngcontent-%COMP%]{border-color:#fecaca}.reservation-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.5}.reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}@media print{.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   .mat-mdc-menu-trigger[_ngcontent-%COMP%]{display:none!important}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #ccc}}@media (prefers-color-scheme: dark){.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background-color:#374151;color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#9ca3af}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#4b5563}}"]})};export{ye as ReservationDetailsComponent};
