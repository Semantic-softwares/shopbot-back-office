import{a as pe,b as xe}from"./chunk-E366X3FD.js";import"./chunk-ZAOMQAJO.js";import{a as ce}from"./chunk-LO5LXT4F.js";import{a as de}from"./chunk-YZQZHEMG.js";import{f as se,k as me}from"./chunk-XSZYAESL.js";import"./chunk-LCNY3JPX.js";import"./chunk-MSN3EE44.js";import{a as le}from"./chunk-HOFFRLAS.js";import{a as oe}from"./chunk-OFQMF3WN.js";import{a as Q,b as W,c as X,d as Y,e as Z,f as ee,g as te,h as ae,i as ie,j as ne,k as re}from"./chunk-BAU4EBFS.js";import{b as O}from"./chunk-E4PTFC5Z.js";import"./chunk-YHIOFNIN.js";import"./chunk-PYUUH7RE.js";import"./chunk-OKEXGVJ3.js";import"./chunk-O7SXWP4H.js";import"./chunk-F5YHHFYE.js";import{a as z,b as U,c as q,d as G}from"./chunk-4P4GBQE7.js";import{i as $}from"./chunk-ZKQYDJ5W.js";import"./chunk-LCF3SYDV.js";import"./chunk-ZLVLWRZH.js";import{a as C}from"./chunk-HJGFVW6K.js";import"./chunk-TVH27JLT.js";import"./chunk-G4CZ6LK2.js";import"./chunk-I564X6SI.js";import"./chunk-VTDH2LYT.js";import"./chunk-63HT37SK.js";import"./chunk-YJCGHVXK.js";import"./chunk-UHBDKNKX.js";import{a as J,b as K}from"./chunk-3ZLH5HUN.js";import"./chunk-O5GCTPYR.js";import"./chunk-EGLRIU4H.js";import{a as H,b as V}from"./chunk-5TL46KBL.js";import"./chunk-53AK2UWQ.js";import"./chunk-BFT2MTJY.js";import{a as P,c as j,h as A}from"./chunk-JONI64R4.js";import"./chunk-H7INH462.js";import"./chunk-OOL2KACG.js";import"./chunk-KZJMNFJ3.js";import{b as F,c as N}from"./chunk-G6I3OKXX.js";import{Z as R,_ as I,ba as B}from"./chunk-4Z2XUZY2.js";import"./chunk-F436VINI.js";import{u as k}from"./chunk-H22US2IH.js";import{Ib as v,Jb as E,Ob as c,Pb as i,Qb as n,Rb as M,Vb as p,Wb as x,Yb as S,ac as u,bb as s,cc as _,fa as m,ka as g,la as h,mc as L,qa as D,qb as b,rc as r,sc as y,tc as w,wa as T,wb as d}from"./chunk-P5WOETP4.js";import"./chunk-GAL4ENT6.js";function ue(e,a){e&1&&(i(0,"div",7),M(1,"mat-spinner",10),n())}function _e(e,a){if(e&1){let t=S();i(0,"div",8)(1,"p",11),r(2,"No taxes found"),n(),i(3,"button",12),u("click",function(){g(t);let l=_();return h(l.createTax())}),r(4," Create Tax "),n()()}}function Ce(e,a){e&1&&(i(0,"th",23),r(1,"Title"),n())}function ge(e,a){if(e&1&&(i(0,"td",24)(1,"span",25),r(2),n()()),e&2){let t=a.$implicit;s(2),y(t.title)}}function he(e,a){e&1&&(i(0,"th",23),r(1,"Type"),n())}function Me(e,a){if(e&1&&(i(0,"td",24)(1,"span",26),r(2),n()()),e&2){let t=a.$implicit;s(2),y(t.type||"-")}}function Te(e,a){e&1&&(i(0,"th",23),r(1,"Rate"),n())}function Se(e,a){if(e&1&&(i(0,"td",24)(1,"span",27),r(2),n()()),e&2){let t=a.$implicit;s(2),w("",t.rate||"-","%")}}function ye(e,a){e&1&&(i(0,"th",28),r(1,"Actions"),n())}function De(e,a){if(e&1){let t=S();i(0,"td",29)(1,"button",30)(2,"mat-icon"),r(3,"more_vert"),n()(),i(4,"mat-menu",null,0)(6,"button",31),u("click",function(){let l=g(t).$implicit,f=_(2);return h(f.editTax(l))}),i(7,"mat-icon"),r(8,"edit"),n(),i(9,"span"),r(10,"Edit"),n()(),i(11,"button",32),u("click",function(){let l=g(t).$implicit,f=_(2);return h(f.deleteTax(l))}),i(12,"mat-icon"),r(13,"delete"),n(),i(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=L(5);s(),c("matMenuTriggerFor",t)}}function be(e,a){e&1&&M(0,"tr",33)}function ve(e,a){e&1&&M(0,"tr",34)}function Ee(e,a){if(e&1&&(i(0,"table",9),p(1,13),d(2,Ce,2,0,"th",14)(3,ge,3,1,"td",15),x(),p(4,16),d(5,he,2,0,"th",14)(6,Me,3,1,"td",15),x(),p(7,17),d(8,Te,2,0,"th",14)(9,Se,3,1,"td",15),x(),p(10,18),d(11,ye,2,0,"th",19)(12,De,16,1,"td",20),x(),d(13,be,1,0,"tr",21)(14,ve,1,0,"tr",22),n()),e&2){let t=_();c("dataSource",t.taxes()),s(13),c("matHeaderRowDef",t.displayedColumns),s(),c("matRowDefColumns",t.displayedColumns)}}var fe=class e{taxService=m(pe);storeStore=m($);snackBar=m(H);dialog=m(se);destroyRef=m(D);taxes=T([]);isLoading=T(!1);displayedColumns=["title","type","rate","actions"];constructor(){this.loadTaxes()}loadTaxes(){let a=this.storeStore.selectedStore()?.channex?.propertyId;if(!a){this.snackBar.open("Property ID not found","Close",{duration:3e3});return}this.isLoading.set(!0),this.taxService.getTaxes(a).pipe(C(this.destroyRef)).subscribe({next:t=>{this.taxes.set(t),this.isLoading.set(!1)},error:t=>{this.isLoading.set(!1);let o=t.error?.message||"Failed to load taxes";this.snackBar.open(o,"Close",{duration:5e3}),console.error("Error loading taxes:",t)}})}createTax(){this.openModal()}editTax(a){this.openModal(a)}openModal(a){this.dialog.open(xe,{data:{tax:a,propertyId:this.storeStore.selectedStore()?.channex?.propertyId},width:"600px",disableClose:!1}).afterClosed().pipe(C(this.destroyRef)).subscribe(t=>{t&&this.loadTaxes()})}deleteTax(a){this.dialog.open(ce,{data:{title:"Delete Tax",message:`Are you sure you want to delete the tax "${a.title}"?`,confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().pipe(C(this.destroyRef)).subscribe(t=>{if(t){let o=this.storeStore.selectedStore()?.channex?.propertyId;if(!o)return;this.taxService.deleteTax(o,a.id).pipe(C(this.destroyRef)).subscribe({next:()=>{this.snackBar.open("Tax deleted successfully","Close",{duration:3e3}),this.loadTaxes()},error:l=>{let f=l.error?.message||"Failed to delete tax";this.snackBar.open(f,"Close",{duration:5e3}),console.error("Error deleting tax:",l)}})}})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-channel-manager-list-taxes"]],decls:11,vars:2,consts:[["menu","matMenu"],["title","Taxes","subtitle","Manage all taxes for your property"],["actions",""],["matButton","filled","color","primary",1,"px-4",3,"click","disabled"],[1,"mr-2"],["appearance","outlined",1,"mt-6"],[1,"pt-6"],[1,"flex","items-center","justify-center","py-8"],[1,"text-center","py-8"],["mat-table","",1,"w-full",3,"dataSource"],["diameter","40"],[1,"text-gray-500","mb-4"],["matButton","","color","primary",3,"click"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","rate"],["matColumnDef","actions"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium","text-gray-900"],[1,"text-gray-700","capitalize"],[1,"text-gray-700"],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-icon-button","","matTooltip","More options",1,"text-gray-600",3,"matMenuTriggerFor"],["mat-menu-item","",1,"text-blue-600",3,"click"],["mat-menu-item","",1,"text-red-600",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){t&1&&(i(0,"app-page-header",1),p(1,2),i(2,"button",3),u("click",function(){return o.createTax()}),i(3,"mat-icon",4),r(4,"add"),n(),r(5," Create Tax "),n(),x(),n(),i(6,"mat-card",5)(7,"mat-card-content",6),v(8,ue,2,0,"div",7)(9,_e,5,0,"div",8)(10,Ee,15,3,"table",9),n()()),t&2&&(s(2),c("disabled",o.isLoading()),s(6),E(o.isLoading()?8:o.taxes().length===0?9:10))},dependencies:[k,A,P,j,B,I,R,N,F,le,oe,re,Q,X,te,Y,W,ae,Z,ee,ie,ne,K,J,V,me,G,U,z,q,O,de],encapsulation:2,changeDetection:0})};export{fe as ChannelManagerListTaxes};
