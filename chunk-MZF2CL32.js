import{a as h}from"./chunk-BFT2MTJY.js";import{A as c,z as n}from"./chunk-H22US2IH.js";import{F as p,aa as u,fa as m,m as o}from"./chunk-P5WOETP4.js";var G=class i{http=m(c);apiUrl=`${h.apiUrl}/guests`;searchGuests(t,e=1,r=10,s,l){let a=new n().set("search",t).set("page",e.toString()).set("limit",r.toString());return s&&(a=a.set("storeId",s)),l&&(a=a.set("guestType",l)),this.http.get(this.apiUrl,{params:a})}searchGuestByPhone(t,e){let r=new n;return e&&(r=r.set("storeId",e)),this.http.get(`${this.apiUrl}/search/phone/${t}`,{params:r}).pipe(p(()=>o(null)))}searchGuestByEmail(t,e){let r=new n;return e&&(r=r.set("storeId",e)),this.http.get(`${this.apiUrl}/search/email/${t}`,{params:r}).pipe(p(()=>o(null)))}getGuestById(t){return this.http.get(`${this.apiUrl}/${t}`)}createGuest(t){return this.http.post(this.apiUrl,t)}updateGuest(t,e){return this.http.put(`${this.apiUrl}/${t}`,e)}deleteGuest(t){return this.http.delete(`${this.apiUrl}/${t}`)}getGuestHistory(t){return this.http.get(`${this.apiUrl}/${t}/history`)}updateLoyaltyPoints(t,e,r){return this.http.put(`${this.apiUrl}/${t}/loyalty`,{points:e,reason:r})}getGuestStats(t){let e=new n;return t&&(e=e.set("storeId",t)),this.http.get(`${this.apiUrl}/stats/overview`,{params:e})}getGuestName(t){if(!t)return"Unknown Guest";if(t.firstName||t.lastName){let e=t.firstName||"",r=t.lastName||"",s=`${e} ${r}`.trim();return t.companyName?`${s} (${t.companyName})`:s||"Unknown Guest"}if(t.contactPersonFirstName||t.contactPersonLastName){let e=t.contactPersonFirstName||"",r=t.contactPersonLastName||"",s=`${e} ${r}`.trim();return t.companyName?`${s} (${t.companyName})`:s||"Unknown Guest"}return t.companyName?t.companyName:"Unknown Guest"}static \u0275fac=function(e){return new(e||i)};static \u0275prov=u({token:i,factory:i.\u0275fac,providedIn:"root"})};export{G as a};
