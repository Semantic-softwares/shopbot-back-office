import{a as ce}from"./chunk-Q3XHK53E.js";import{a as ue}from"./chunk-RFNL2MTP.js";import{a as pe}from"./chunk-AVI5MMAA.js";import{a as de}from"./chunk-43IVEMCZ.js";import{a as me}from"./chunk-IPDJJ377.js";import{h as re}from"./chunk-MLXMZDM2.js";import{a as se}from"./chunk-DZT6VHYM.js";import{a as M,b as le}from"./chunk-N67EMNJ4.js";import"./chunk-PSH3SVZJ.js";import"./chunk-5LVVGVPB.js";import{a as U,b as W,c as X,d as Y,e as Z,f as ee,g as te,h as ie,i as oe,j as ae,k as ne}from"./chunk-IFYNKVPK.js";import"./chunk-FK6H3RFT.js";import"./chunk-TRRVPZ2R.js";import{a as H,b as G,c as $,d as N}from"./chunk-Q24JN32N.js";import{i as q}from"./chunk-WFQLSX5X.js";import"./chunk-66RT5LSQ.js";import"./chunk-O2QR3P5A.js";import{c as J,d as K}from"./chunk-WD3LGOJ6.js";import"./chunk-5IMEEOTN.js";import"./chunk-UATHS3SB.js";import"./chunk-GZ7S2I6F.js";import"./chunk-L5R7UQHM.js";import{b as j,d as A}from"./chunk-323BPMCN.js";import"./chunk-TW5XL4DD.js";import"./chunk-GBJWJHBW.js";import{a as L}from"./chunk-ZDRRUYFZ.js";import{B as Q}from"./chunk-ADPCW6JI.js";import"./chunk-UUMWQRYG.js";import"./chunk-UPMF7ZC6.js";import"./chunk-BFT2MTJY.js";import"./chunk-GI3DA2RF.js";import"./chunk-DDDMZQMU.js";import"./chunk-6NXOHEKD.js";import"./chunk-47XHPHB4.js";import{b as O,c as z}from"./chunk-5P5QATX2.js";import{$ as V,Z as F}from"./chunk-LG6YQHRU.js";import"./chunk-DWM5GR6S.js";import{p as I,r as k}from"./chunk-6BQAOBQP.js";import{$a as m,Gb as E,Hb as b,Jc as x,Lc as h,Mb as s,Nb as o,Ob as a,Pb as p,Tb as d,Ub as u,Wb as D,_b as g,ac as C,ea as f,ec as T,fc as B,gc as P,ja as S,ka as y,kc as R,ob as w,pc as n,qc as _,ub as c}from"./chunk-H33Y42PP.js";import"./chunk-GAL4ENT6.js";function fe(e,i){e&1&&(o(0,"mat-header-cell"),n(1,"Category"),a())}function Ce(e,i){if(e&1&&(o(0,"mat-cell"),n(1),a()),e&2){let t=i.$implicit;m(),_(t.category)}}function Se(e,i){e&1&&(o(0,"mat-header-cell"),n(1,"Items Sold"),a())}function ye(e,i){if(e&1&&(o(0,"mat-cell"),n(1),a()),e&2){let t=i.$implicit;m(),_(t.itemsSold)}}function ge(e,i){e&1&&(o(0,"mat-header-cell"),n(1,"Net Sales"),a())}function xe(e,i){if(e&1&&(o(0,"mat-cell"),n(1),x(2,"currency"),a()),e&2){let t,r=i.$implicit,l=C(2);m(),_(h(2,1,r.netSales,(t=l.storeStore.selectedStore())==null?null:t.currency))}}function he(e,i){e&1&&(o(0,"mat-header-cell"),n(1,"Cost of Goods"),a())}function Me(e,i){if(e&1&&(o(0,"mat-cell"),n(1),x(2,"currency"),a()),e&2){let t,r=i.$implicit,l=C(2);m(),_(h(2,1,r.costOfGoods,(t=l.storeStore.selectedStore())==null?null:t.currency))}}function ve(e,i){e&1&&(o(0,"mat-header-cell"),n(1,"Gross Profit"),a())}function we(e,i){if(e&1&&(o(0,"mat-cell"),n(1),x(2,"currency"),a()),e&2){let t,r=i.$implicit,l=C(2);m(),_(h(2,1,r.grossProfit,(t=l.storeStore.selectedStore())==null?null:t.currency))}}function Ee(e,i){e&1&&p(0,"mat-header-row")}function be(e,i){e&1&&p(0,"mat-row")}function De(e,i){if(e&1&&(o(0,"div",9)(1,"mat-table",12),d(2,13),c(3,fe,2,0,"mat-header-cell",14)(4,Ce,2,1,"mat-cell",15),u(),d(5,16),c(6,Se,2,0,"mat-header-cell",14)(7,ye,2,1,"mat-cell",15),u(),d(8,17),c(9,ge,2,0,"mat-header-cell",14)(10,xe,3,4,"mat-cell",15),u(),d(11,18),c(12,he,2,0,"mat-header-cell",14)(13,Me,3,4,"mat-cell",15),u(),d(14,19),c(15,ve,2,0,"mat-header-cell",14)(16,we,3,4,"mat-cell",15),u(),c(17,Ee,1,0,"mat-header-row",20)(18,be,1,0,"mat-row",21),a(),p(19,"mat-paginator",22),a()),e&2){let t=C();m(),s("dataSource",t.dataSource.value()),m(16),s("matHeaderRowDef",t.displayedColumns),m(),s("matRowDefColumns",t.displayedColumns),m(),s("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}}function Te(e,i){e&1&&(o(0,"div",10),p(1,"mat-spinner",23),a())}function Be(e,i){e&1&&p(0,"app-no-record",11)}var _e=class e{queryParams=f(me);orderService=f(se);storeStore=f(q);query=J(this.queryParams.getAllParams$);dataSource=K({params:()=>({storeId:this.storeStore.selectedStore()?._id,query:this.query()}),stream:({params:i})=>this.orderService.getTopSellingCategories(i.storeId,i.query)});displayedColumns=["category","itemsSold","netSales","costOfGoods","grossProfit"];paginator;pageSize=10;pageSizeOptions=[5,10,25,50];exportService=f(de);exportData(i){if(!this.dataSource.value())return;let t=this.dataSource.value()||[],r="category-sales";switch(i){case"pdf":this.exportService.exportCategoryDataToPdf(t,r,{from:this.query().start,to:this.query().end});break;case"csv":this.exportService.exportToCSV(t,r);break;case"excel":this.exportService.exportToExcel(t,r);break}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=w({type:e,selectors:[["app-sales-by-category"]],viewQuery:function(t,r){if(t&1&&T(M,5),t&2){let l;B(l=P())&&(r.paginator=l.first)}},decls:32,vars:2,consts:[["exportMenu","matMenu"],[1,"p-4","bg-gray-50","min-h-screen"],[1,"flex","justify-between","items-center","mb-6","bg-white","p-4","rounded-lg","shadow-sm"],[1,"bg-white","rounded-lg","shadow-sm"],[1,"p-6","flex","justify-between","items-center","border-b"],[1,"text-lg","font-medium"],["mat-flat-button","","color","primary",3,"matMenuTriggerFor"],[1,"mr-2"],["mat-menu-item","",3,"click"],[1,"p-6"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","inventory_2","title","No Category Found","message","There are no category to display for the selected period."],[1,"w-full","!bg-white",3,"dataSource"],["matColumnDef","category"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","itemsSold"],["matColumnDef","netSales"],["matColumnDef","costOfGoods"],["matColumnDef","grossProfit"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page",1,"!bg-white",3,"pageSize","pageSizeOptions"],["diameter","40"]],template:function(t,r){if(t&1){let l=D();o(0,"div",1)(1,"div",2),p(2,"date-range-selector")(3,"app-employee-selector"),a(),o(4,"div",3)(5,"div",4)(6,"h2",5),n(7,"Sales by Category"),a(),o(8,"button",6)(9,"mat-icon",7),n(10,"file_download"),a(),n(11," Export Data "),a(),o(12,"mat-menu",null,0)(14,"button",8),g("click",function(){return S(l),y(r.exportData("pdf"))}),o(15,"mat-icon"),n(16,"picture_as_pdf"),a(),o(17,"span"),n(18,"Export as PDF"),a()(),o(19,"button",8),g("click",function(){return S(l),y(r.exportData("csv"))}),o(20,"mat-icon"),n(21,"description"),a(),o(22,"span"),n(23,"Export as CSV"),a()(),o(24,"button",8),g("click",function(){return S(l),y(r.exportData("excel"))}),o(25,"mat-icon"),n(26,"table_chart"),a(),o(27,"span"),n(28,"Export as Excel"),a()()()(),E(29,De,20,5,"div",9)(30,Te,2,0,"div",10)(31,Be,1,0,"app-no-record",11),a()()}if(t&2){let l=R(13);m(8),s("matMenuTriggerFor",l),m(21),b(r.dataSource.hasValue()?29:r.dataSource.isLoading()?30:31)}},dependencies:[k,ne,U,X,te,Y,W,ie,Z,ee,oe,ae,le,M,V,F,z,O,re,j,A,Q,N,G,H,$,ce,ue,pe,L,I],encapsulation:2})};export{_e as SalesByCategoryComponent};
