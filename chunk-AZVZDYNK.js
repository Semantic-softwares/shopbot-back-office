import{a as te,b as ie}from"./chunk-GZXF4TWP.js";import"./chunk-6RCOBA75.js";import{i as N}from"./chunk-QC7H4KPM.js";import{a as F}from"./chunk-XLZTIYSF.js";import{b as X,c as Y,d as Z}from"./chunk-UMV4DCPT.js";import{a as K,e as Q,h as W}from"./chunk-G3VZM262.js";import"./chunk-BCE7WRWQ.js";import{a as $,b as ee}from"./chunk-6I3AJKA7.js";import{B as J,b as P,d as V,g as A,h as j,m as q,q as z,s as L,t as H,z as U}from"./chunk-W7NMJLMQ.js";import"./chunk-F5SZ3AU3.js";import{a as w}from"./chunk-4UBDYPTG.js";import"./chunk-TILT22SG.js";import"./chunk-BFT2MTJY.js";import{a as D,b as R,c as T,d as I,f as B,g as O,h as G}from"./chunk-3E3PJ7Q7.js";import"./chunk-FO4KTVQ3.js";import"./chunk-TRZH7NMW.js";import"./chunk-GXTELBJV.js";import{b as _,c as k}from"./chunk-JPRPNQOM.js";import{_ as E,ba as M}from"./chunk-3LDCGXHW.js";import{s as C}from"./chunk-6PFJHDFS.js";import{Ib as v,Jb as b,Ob as p,Pb as t,Qb as e,Rb as o,Yb as h,ac as S,bb as d,cc as c,fa as m,ka as u,la as g,qb as x,rc as i,tc as y,wa as f}from"./chunk-J2AK4FW5.js";import"./chunk-GAL4ENT6.js";function oe(s,a){s&1&&(t(0,"div",5),o(1,"mat-spinner",11),e())}function ne(s,a){if(s&1){let r=h();t(0,"form",12),S("ngSubmit",function(){u(r);let n=c();return g(n.saveReceiptSettings())}),t(1,"div",13)(2,"div",14)(3,"div",15)(4,"div")(5,"label",16),i(6,"Require Payment Before Checkout"),e(),t(7,"p",17),i(8,"Customers must complete payment before checking out"),e()(),o(9,"mat-slide-toggle",18),e()(),t(10,"div",19)(11,"h3",20),i(12,"Receipt Content"),e(),t(13,"div",21)(14,"div")(15,"label",22),i(16,"Show Notes"),e(),t(17,"p",23),i(18,"Display special notes on receipts"),e()(),o(19,"mat-slide-toggle",24),e(),t(20,"div",21)(21,"div")(22,"label",22),i(23,"Show Tax"),e(),t(24,"p",23),i(25,"Display tax breakdown on receipts"),e()(),o(26,"mat-slide-toggle",25),e(),t(27,"div",21)(28,"div")(29,"label",22),i(30,"Show Store Details"),e(),t(31,"p",23),i(32,"Display store name and address"),e()(),o(33,"mat-slide-toggle",26),e(),t(34,"div",21)(35,"div")(36,"label",22),i(37,"Show Seller Info"),e(),t(38,"p",23),i(39,"Display staff/seller information"),e()(),o(40,"mat-slide-toggle",27),e(),t(41,"div",21)(42,"div")(43,"label",22),i(44,"Show Customer Name"),e(),t(45,"p",23),i(46,"Display customer information on receipts"),e()(),o(47,"mat-slide-toggle",28),e(),t(48,"div",21)(49,"div")(50,"label",22),i(51,"Auto Print After Order Complete"),e(),t(52,"p",23),i(53,"Automatically print receipt when order is completed"),e()(),o(54,"mat-slide-toggle",29),e(),t(55,"div")(56,"mat-form-field",30)(57,"mat-label"),i(58,"Footer Message"),e(),o(59,"textarea",31),t(60,"mat-icon",32),i(61,"message"),e()(),t(62,"p",33),i(63,"Message displayed at the bottom of receipts"),e()(),t(64,"div")(65,"mat-form-field",30)(66,"mat-label"),i(67,"Disclaimer (Optional)"),e(),o(68,"textarea",34),t(69,"mat-icon",32),i(70,"info"),e()(),t(71,"p",33),i(72,"Optional legal disclaimer to include on receipts"),e()()(),t(73,"div",35)(74,"button",36)(75,"mat-icon",37),i(76,"save"),e(),i(77),e(),t(78,"button",38),S("click",function(){u(r);let n=c();return g(n.resetForm())}),t(79,"mat-icon",37),i(80,"refresh"),e(),i(81," Reset "),e()()()()}if(s&2){let r=c();p("formGroup",r.posSettingsForm),d(74),p("disabled",r.posSettingsForm.invalid||r.saving()),d(3),y(" ",r.saving()?"Saving...":"Save Settings"," "),d(),p("disabled",r.saving())}}var re=class s{fb=m(U);snackBar=m(w);storeService=m(F);storeStore=m(N);loading=f(!1);saving=f(!1);posSettingsForm;ngOnInit(){this.initializeForm(),this.loadSettings()}initializeForm(){this.posSettingsForm=this.fb.group({requireOrdersPaymentBeforeCheckout:[!0],receiptSettings:this.fb.group({showNote:[!1],showTax:[!0],showStoreDetails:[!0],showSellerInfo:[!0],showCustomerName:[!0],printAfterFinish:[!0],footerMessage:["Thank you for your patronage",V.required],disclaimer:[""]})})}loadSettings(){this.loading.set(!0);let a=this.storeStore.selectedStore();a?.posSettings&&this.posSettingsForm.patchValue(a.posSettings),this.loading.set(!1)}saveReceiptSettings(){if(this.posSettingsForm.valid&&this.storeStore.selectedStore()){this.saving.set(!0);let a=this.storeStore.selectedStore(),l={posSettings:this.posSettingsForm.value};this.storeService.updateStore(a._id,l).subscribe({next:()=>{this.storeService.getStore(a._id).subscribe({next:n=>{this.storeStore.updateStore(n),this.storeService.saveStoreLocally(n),this.saving.set(!1),this.snackBar.open("Receipt settings saved successfully!","Close",{duration:3e3})},error:n=>{console.error("Error fetching updated store:",n),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data.","Close",{duration:5e3})}})},error:n=>{console.error("Error saving receipt settings:",n),this.saving.set(!1),this.snackBar.open("Failed to save receipt settings.","Close",{duration:5e3})}})}}resetForm(){this.loadSettings()}static \u0275fac=function(r){return new(r||s)};static \u0275cmp=x({type:s,selectors:[["app-receipt-settings"]],decls:27,vars:1,consts:[[1,"py-6"],[1,"grid","grid-cols-1","gap-6"],["appearance","outlined"],["mat-card-avatar","",1,"text-blue-600","!flex","!items-center","!justify-center"],[1,"pt-4"],[1,"flex","items-center","justify-center","py-8"],[3,"formGroup"],[1,"p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"font-semibold","text-blue-900","mb-2","flex","items-center","gap-2"],[1,"text-blue-600"],[1,"text-sm","text-blue-800","space-y-1"],["diameter","40"],[3,"ngSubmit","formGroup"],[1,"space-y-6"],[1,"p-4","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-600","mt-1"],["formControlName","requireOrdersPaymentBeforeCheckout","color","primary"],["formGroupName","receiptSettings",1,"space-y-4"],[1,"font-semibold","text-gray-900","mb-4"],[1,"flex","items-center","justify-between","p-3","bg-gray-50","rounded-lg","border","border-gray-200"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-600"],["formControlName","showNote","color","primary"],["formControlName","showTax","color","primary"],["formControlName","showStoreDetails","color","primary"],["formControlName","showSellerInfo","color","primary"],["formControlName","showCustomerName","color","primary"],["formControlName","printAfterFinish","color","primary"],["appearance","outline",1,"w-full"],["matInput","","formControlName","footerMessage","rows","2","placeholder","Thank you for your patronage"],["matSuffix",""],[1,"text-xs","text-gray-500","mt-1"],["matInput","","formControlName","disclaimer","rows","2","placeholder","Enter any disclaimer text..."],[1,"flex","gap-3","pt-4","border-t","border-gray-200"],["type","submit","mat-raised-button","","color","primary",1,"flex-1",3,"disabled"],[1,"mr-2"],["type","button","mat-stroked-button","",1,"flex-1",3,"click","disabled"]],template:function(r,l){r&1&&(t(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-icon",3),i(5,"receipt"),e(),t(6,"mat-card-title"),i(7,"Receipt Settings"),e(),t(8,"mat-card-subtitle"),i(9,"Configure how receipts are displayed and printed"),e()(),t(10,"mat-card-content",4),v(11,oe,2,0,"div",5)(12,ne,82,4,"form",6),e()(),t(13,"div",7)(14,"h5",8)(15,"mat-icon",9),i(16,"info"),e(),i(17," Receipt Configuration Guide "),e(),t(18,"ul",10)(19,"li"),i(20,"\u2022 These settings control how receipts appear to customers"),e(),t(21,"li"),i(22,"\u2022 Toggle options ON/OFF to show or hide information on receipts"),e(),t(23,"li"),i(24,"\u2022 Custom footer and disclaimer text will appear at the bottom"),e(),t(25,"li"),i(26,"\u2022 Changes take effect immediately for new transactions"),e()()()()()),r&2&&(d(11),b(l.loading()?11:12))},dependencies:[C,J,q,P,A,j,H,L,z,G,D,O,T,B,I,R,M,E,k,_,X,W,K,Q,Z,Y,ie,te,ee,$],styles:["[_nghost-%COMP%]{display:block}"]})};export{re as ReceiptSettings};
