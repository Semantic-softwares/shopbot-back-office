import{a as pt}from"./chunk-L4EJJVHR.js";import{a as ie}from"./chunk-5HOUELSU.js";import{a as vt}from"./chunk-FUTA6TE5.js";import{b as at}from"./chunk-EHJ5MOYI.js";import"./chunk-23Y5PA5G.js";import"./chunk-2KPMOGOH.js";import{a as ft,b as ht}from"./chunk-RDML4QTY.js";import"./chunk-WFM45R76.js";import"./chunk-TRRVPZ2R.js";import{a as mt}from"./chunk-DVHR5RQT.js";import{a as I}from"./chunk-YBGFVESJ.js";import{i as lt}from"./chunk-WFQLSX5X.js";import"./chunk-O2QR3P5A.js";import{a as dt,b as ut}from"./chunk-WD3LGOJ6.js";import"./chunk-5IMEEOTN.js";import"./chunk-UATHS3SB.js";import"./chunk-L5R7UQHM.js";import"./chunk-UUMWQRYG.js";import{a as ee}from"./chunk-7HFBBWIO.js";import{a as te}from"./chunk-RRHIWUSE.js";import"./chunk-VJNXGGOY.js";import{a as ct}from"./chunk-UPMF7ZC6.js";import"./chunk-BFT2MTJY.js";import"./chunk-DDDMZQMU.js";import"./chunk-6NXOHEKD.js";import"./chunk-47XHPHB4.js";import{a as gt,b as ne,c as re}from"./chunk-5P5QATX2.js";import{$ as Q,Y as q,Z}from"./chunk-LG6YQHRU.js";import{a as et,b as tt,c as nt,d as rt,f as it,g,j as ot,k as st}from"./chunk-DWM5GR6S.js";import{A as Ze,B as Qe,g as K,r as X,u as We,v as Ke,y as Xe,z as qe}from"./chunk-6BQAOBQP.js";import{$ as V,$a as c,B as G,Ba as Le,E as B,Eb as Ve,Gb as O,Hb as R,J as fe,Ja as Ue,L as H,Mb as h,Nb as l,Ob as m,Pb as ze,Qb as ye,Rb as Y,Sb as _e,Tc as a,U as he,V as Ne,Wb as J,X as E,Y as we,Yc as Se,Zc as u,_b as w,ac as S,ca as b,cd as Je,db as je,ea as s,fa as Ie,g as Ee,gb as $e,id as W,ja as D,jb as Ge,jd as M,k as De,ka as N,lc as Ce,m as F,mc as Ye,n as $,na as Ae,oa as ke,ob as C,pc as f,qb as L,qc as x,r as T,sa as Fe,sb as be,tb as He,va as y,wa as Be,ya as ve,z as me,za as z}from"./chunk-H33Y42PP.js";import{g as j}from"./chunk-GAL4ENT6.js";var xe=()=>{let r=s(g),t=s(te),e=s(ee);return t.currentUser.pipe(T(n=>n?!0:(e.open("Please log in first","Close",{duration:3e3}),r.navigate(["/auth/login"]),!1)))};var bt=()=>{let r=s(g),t=s(te),e=s(ee);return t.currentUser.pipe(T(n=>n?(e.open("You are already logged in","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),r.navigate(["/menu/menu"]),!1):!0))};var Pe=(r,t)=>{let e=s(I);return e.getSubscriptionStatus().pipe(B(n=>n.status===404?(console.log("No subscription found for store, creating trial subscription..."),e.createTrial().pipe(B(o=>(console.error("Failed to create trial subscription:",o),F(null))))):(console.error("Failed to load subscription:",n),F(null))))};var yt=(r,t)=>{let e=s(g),o=s(I).getCachedSubscription();return o?o.status==="EXPIRED"||o.status==="PAST_DUE"||o.status==="CANCELLED"?(e.navigate(["/pricing/pricing"]),!1):o.status==="TRIAL"||o.status==="ACTIVE":(e.navigate(["/pricing/pricing"]),!1)};var _t=[{path:"",pathMatch:"full",redirectTo:"website"},{path:"",loadChildren:()=>import("./chunk-MPUB5IZU.js").then(r=>r.WEBSITE_ROUTES)},{path:"auth",loadChildren:()=>import("./chunk-CTWNUPSF.js").then(r=>r.AUTH_ROUTES),canActivate:[bt]},{path:"pricing",loadComponent:()=>import("./chunk-NHW2MHVN.js").then(r=>r.PricingShellComponent),canActivate:[xe],resolve:{subscription:Pe},children:[{path:"",redirectTo:"pricing",pathMatch:"full"},{path:"pricing",loadComponent:()=>import("./chunk-SBEGG6Z2.js").then(r=>r.PricingComponent)},{path:"billing",loadComponent:()=>import("./chunk-IIZTBCW6.js").then(r=>r.BillingComponent)},{path:"payment-callback",loadComponent:()=>import("./chunk-HCS25NHY.js").then(r=>r.PaymentCallbackComponent)}]},{path:"menu",loadChildren:()=>import("./chunk-A2334F7X.js").then(r=>r.MENU_ROUTES),canActivate:[xe,yt],resolve:{role:pt,subscription:Pe}}];var It="@",At=(()=>{class r{doc;delegate;zone;animationType;moduleImpl;_rendererFactoryPromise=null;scheduler=null;injector=s(Ae);loadingSchedulerFn=s(kt,{optional:!0});_engine;constructor(e,n,o,i,d){this.doc=e,this.delegate=n,this.zone=o,this.animationType=i,this.moduleImpl=d}ngOnDestroy(){this._engine?.flush()}loadImpl(){let e=()=>this.moduleImpl??import("./chunk-2AVVNTV5.js").then(o=>o),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(e):n=e(),n.catch(o=>{throw new we(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:i})=>{this._engine=o(this.animationType,this.doc);let d=new i(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(e,n){let o=this.delegate.createRenderer(e,n);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let i=new Oe(o);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{let v=d.createRenderer(e,n);i.use(v),this.scheduler??=this.injector.get(Be,null,{optional:!0}),this.scheduler?.notify(10)}).catch(d=>{i.use(o)}),i}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}componentReplaced(e){this._engine?.flush(),this.delegate.componentReplaced?.(e)}static \u0275fac=function(n){Ge()};static \u0275prov=V({token:r,factory:r.\u0275fac})}return r})(),Oe=class{delegate;replay=[];\u0275type=1;constructor(t){this.delegate=t}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,o){this.delegate.insertBefore(t,e,n,o)}removeChild(t,e,n,o){this.delegate.removeChild(t,e,n,o)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,o){this.delegate.setAttribute(t,e,n,o)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,o){this.delegate.setStyle(t,e,n,o)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n,o){return this.shouldReplay(e)&&this.replay.push(i=>i.listen(t,e,n,o)),this.delegate.listen(t,e,n,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(It)}},kt=new b("");function Ct(r="animations"){return je("NgAsyncAnimations"),Ie([{provide:$e,useFactory:()=>new At(s(ke),s(We),s(Fe),r)},{provide:Ue,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var St=(r,t)=>{let n=s(ct).getItem("auth_token"),o=s(lt);if(n){let i=r.clone({headers:r.headers.set("Authorization",`Bearer ${n}`).set("storeId",o.selectedStore()?._id||"")});return t(i)}return t(r)};var xt=(r,t)=>{let e=s(g);return t(r).pipe(B(n=>n.status===402?(e.navigate(["/billing"],{queryParams:{reason:"subscription-expired"}}),$(()=>n)):n.status===403&&n.error?.code==="SUBSCRIPTION_PAST_DUE"?(e.navigate(["/billing"],{queryParams:{reason:"past-due"}}),$(()=>n)):$(()=>n)))};function Bt(r,t){r&1&&_e(0,"div",3)}function Lt(r,t){r&1&&(ye(0,"div",4),_e(1,"div",5),Y())}var Ut={min:8,max:100,speed:200,debounceTime:0,trickleSpeed:300,fadeOutSpeed:50,relative:!1,flat:!1,spinner:!1,direction:"ltr+",spinnerPosition:"right",trickleFunc:r=>r>=0&&r<20?10:r>=20&&r<50?4:r>=50&&r<80?2:r>=80&&r<99?.5:0},Pt=new b("NG_PROGRESS_OPTIONS",{providedIn:"root",factory:()=>Ut});var oe=(function(r){return r.START="START",r.COMPLETE="COMPLETE",r})(oe||{});function jt(r){let t=M(r)||0;return t<100&&t>=0?t:0}function $t(r){let t=M(r)||100;return t>0&&t<=100?t:100}var se=(()=>{class r{constructor(){this.defaultOptions=s(Pt),this.min=u(this.defaultOptions.min,{transform:jt}),this.max=u(this.defaultOptions.max,{transform:$t}),this.speed=u(this.defaultOptions.speed,{transform:M}),this.trickleSpeed=u(this.defaultOptions.trickleSpeed,{transform:M}),this.fadeOutSpeed=u(this.defaultOptions.fadeOutSpeed,{transform:M}),this.debounceTime=u(this.defaultOptions.debounceTime,{transform:M}),this.trickleFunc=u(this.defaultOptions.trickleFunc),this.config=a(()=>({max:this.max(),min:this.min(),speed:this.speed(),trickleSpeed:this.trickleSpeed(),fadeOutSpeed:this.fadeOutSpeed(),trickleFunc:this.trickleFunc(),debounceTime:this.debounceTime()})),this._progress=y(0),this._active=y(!1),this.active=a(()=>this._active()),this.progress=a(()=>this._progress()),this.started=Se(),this.completed=Se(),this._trigger=new Ee(null);let e;ve(n=>{let o=this.config();z(()=>{e=this._trigger.pipe(G(i=>!!i),he(i=>i===oe.START?me(o.debounceTime).pipe(he(()=>this.onTrickling(o))):this.onComplete(o))).subscribe(),n(()=>e?.unsubscribe())})})}start(){this.started.emit(),this._trigger.next(oe.START),this._active.set(!0)}complete(){this._trigger.next(oe.COMPLETE)}inc(e){let n=this.progress();this.active()?(typeof e!="number"&&(e=this.config().trickleFunc(n)),this.set(n+e)):this.start()}set(e){this._active.set(!0),this._progress.set(this.clamp(e))}clamp(e){return Math.max(this.config().min,Math.min(this.config().max,e))}onTrickling(e){return this.active()||this.set(e.min),me(0,e.trickleSpeed).pipe(E(()=>this.inc()))}onComplete(e){return this.active()?(this.completed.emit(),F({}).pipe(E(()=>this._progress.set(100)),fe(e.speed+140),E(()=>this._active.set(!1)),fe(e.fadeOutSpeed),H(()=>this._progress.set(0)),Ne(ut(this.started)))):De}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=L({type:r,selectors:[["","ngProgressRef",""]],inputs:{min:[1,"min"],max:[1,"max"],speed:[1,"speed"],trickleSpeed:[1,"trickleSpeed"],fadeOutSpeed:[1,"fadeOutSpeed"],debounceTime:[1,"debounceTime"],trickleFunc:[1,"trickleFunc"]},outputs:{started:"started",completed:"completed"},exportAs:["ngProgressRef"]})}}return r})(),Ot=(()=>{class r{constructor(){this.config=s(Pt),this.progressRef=s(se,{host:!0,self:!0}),this.flat=u(this.config.flat,{transform:W}),this.spinner=u(this.config.spinner,{transform:W}),this.relative=u(this.config.relative,{transform:W}),this.spinnerPosition=u(this.config.spinnerPosition),this.direction=u(this.config.direction),this.progressTransform=a(()=>`translate3d(${this.progressRef.progress()}%,0,0)`)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=C({type:r,selectors:[["ng-progress"]],hostAttrs:["role","progressbar"],hostVars:12,hostBindings:function(n,o){n&2&&(Ve("spinnerPosition",o.spinnerPosition())("direction",o.direction()),Ce("--_ng-progress-speed",o.progressRef.speed()+"ms")("--_ng-progress-fade-out-speed",o.progressRef.fadeOutSpeed()+"ms"),Ye("ng-progress-bar",!0)("ng-progress-bar-active",o.progressRef.active())("ng-progress-bar-relative",o.relative()))},inputs:{flat:[1,"flat"],spinner:[1,"spinner"],relative:[1,"relative"],spinnerPosition:[1,"spinnerPosition"],direction:[1,"direction"]},exportAs:["ngProgress"],features:[be([{directive:se,inputs:["min","min","max","max","speed","speed","trickleSpeed","trickleSpeed","fadeOutSpeed","fadeOutSpeed","debounceTime","debounceTime"],outputs:["started","started","completed","completed"]}])],decls:5,vars:4,consts:[[1,"ng-progress-bar-wrapper"],[1,"ng-bar-placeholder"],[1,"ng-bar"],[1,"ng-meteor"],[1,"ng-spinner"],[1,"ng-spinner-icon"]],template:function(n,o){n&1&&(ye(0,"div",0)(1,"div",1)(2,"div",2),O(3,Bt,1,0,"div",3),Y()(),O(4,Lt,2,0,"div",4),Y()),n&2&&(c(2),Ce("transform",o.progressTransform()),c(),R(o.flat()?-1:3),c(),R(o.spinner()?4:-1))},styles:['[_nghost-%COMP%]{--_ng-progress-thickness: var(--ng-progress-thickness, 2);--_ng-progress-thickness-px: calc(var(--_ng-progress-thickness) * 1px);--_ng-progress-thickness-add-one: calc(var(--_ng-progress-thickness) + 1);--_ng-progress-meteor-position-px: calc(var(--_ng-progress-thickness-add-one) * -1px);--_ng-progress-color: var(--ng-progress-color, #1B95E0);--_ng-progress-holder-color: var(--ng-progress-holder-color, transparent);--_ng-progress-ease: var(--ng-progress-ease, linear);--_ng-progress-spinner-thickness: var(--ng-progress-spinner-thickness, 2);--_ng-progress-spinner-thickness-px: calc(var(--_ng-progress-spinner-thickness) * 1px);--_ng-progress-spinner-spacing: var(--ng-progress-spinner-spacing, 15);--_ng-progress-spinner-spacing-px: calc(var(--_ng-progress-spinner-spacing) * 1px);--_ng-progress-spinner-size: var(--ng-progress-spinner-size, 18);--_ng-progress-spinner-size-px: calc(var(--_ng-progress-spinner-size) * 1px);--_ng-progress-spinner-speed: var(--ng-progress-spinner-speed, .25s);z-index:999999;pointer-events:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{filter:alpha(opacity=100);opacity:1;transition:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{transition:all var(--_ng-progress-speed) var(--_ng-progress-ease)}.ng-progress-bar-relative[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:relative}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * 1deg)}[direction="ltr+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{margin-left:-100%}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{right:0}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{top:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{bottom:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%]{transform:rotate(180deg)}[direction=ltr-][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%]{animation-direction:reverse}[direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * -1deg)}[_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{top:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=left][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{left:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=right][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{right:var(--_ng-progress-spinner-spacing-px)}.ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:fixed;z-index:999999;top:0;left:0;width:100%;transform:scale(1);filter:alpha(opacity=0);opacity:0;transition:opacity var(--_ng-progress-fade-out-speed) linear}.ng-bar-placeholder[_ngcontent-%COMP%]{position:absolute;height:var(--_ng-progress-thickness-px);width:100%}.ng-bar[_ngcontent-%COMP%]{width:100%;height:100%;transform:translate(-100%,0,0);background:var(--_ng-progress-color)}.ng-meteor[_ngcontent-%COMP%]{display:block;position:absolute;width:100px;height:100%;opacity:1;box-shadow:0 0 10px var(--_ng-progress-color),0 0 5px var(--_ng-progress-color)}.ng-spinner[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1031;top:10px}.ng-spinner-icon[_ngcontent-%COMP%]{box-sizing:border-box;animation:_ngcontent-%COMP%_spinner-animation var(--_ng-progress-spinner-speed) linear infinite;border-style:solid;border-color:transparent;border-radius:50%;border-top-color:var(--_ng-progress-color);border-left-color:var(--_ng-progress-color);width:var(--_ng-progress-spinner-size-px);height:var(--_ng-progress-spinner-size-px);border-width:var(--_ng-progress-spinner-thickness-px)}@keyframes _ngcontent-%COMP%_spinner-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0})}}return r})();var Gt=new b("NG_PROGRESS_HTTP_OPTIONS",{providedIn:"root",factory:()=>null});var Ht=new b("NgProgressHttpCounter",{providedIn:"root",factory:()=>y(0)});function Tt(r,t){let e=s(Gt),n=s(Ht);return r.headers.has("ignoreProgressBar")?t(r.clone({headers:r.headers.delete("ignoreProgressBar")})):e&&Vt(r,e)?t(r):z(()=>(n.set(n()+1),t(r).pipe(H(()=>{n.set(n()-1)}))))}function Vt(r,t){let e=r.url.toLowerCase();return t.matcher&&t.silentApis?.length?Mt(e,t.matcher)&&Rt(e,t.silentApis):t.silentApis?.length?Rt(e,t.silentApis):t.matcher?Mt(e,t.matcher):!1}function Rt(r,t){return!!t.find(e=>r.includes(e.toLowerCase()))}function Mt(r,t){return!!r.match(t)}var Et={providers:[Je({eventCoalescing:!0}),ot(_t,st()),Ct(),at(),{provide:gt,useValue:{fontSet:"material-symbols-outlined"}},Xe(Qe(),Ze(),qe([St,xt,Tt])),ht(ft())]};var zt={minDuration:0,startEvents:[et],completeEvents:[tt,nt,rt]},Yt=new b("NG_PROGRESS_ROUTER_OPTIONS",{providedIn:"root",factory:()=>zt});function Dt(r,t){return t.some(e=>r instanceof e)}var Jt=(()=>{class r{constructor(){this.router=s(g),this.config=s(Yt),this.progressRef=s(se,{host:!0,self:!0});let e;this.router.events.pipe(G(n=>Dt(n,[...this.config.startEvents,...this.config.completeEvents])),T(n=>Dt(n,this.config.startEvents)),E(n=>{clearTimeout(e),n?this.progressRef.start():e=setTimeout(()=>{this.progressRef.complete()},this.config.minDuration)}),dt()).subscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=L({type:r})}}return r})(),Nt=(()=>{class r extends Jt{static{this.\u0275fac=(()=>{let e;return function(o){return(e||(e=Le(r)))(o||r)}})()}static{this.\u0275dir=L({type:r,selectors:[["ng-progress","ngProgressRouter",""]],features:[He]})}}return r})();function qt(r,t){if(r&1){let e=J();l(0,"div",0)(1,"div",1)(2,"div",0)(3,"mat-icon",2),f(4),m()(),l(5,"div",3)(6,"strong",0),f(7),m(),l(8,"p",0),f(9),m()(),l(10,"div",4)(11,"button",5),w("click",function(){D(e);let o=S();return N(o.upgradeTrial())}),f(12," Upgrade Now "),m(),l(13,"button",6),w("click",function(){D(e);let o=S();return N(o.closeBanner())}),l(14,"mat-icon",7),f(15,"close"),m()()()()()}if(r&2){let e=S();h("ngClass","px-4 py-3  bg-white flex items-center justify-between  gap-2  "+e.bannerClass()),c(2),h("ngClass","flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0 "+(e.bannerClass()==="info"?"text-cyan-600 bg-cyan-100":e.bannerClass()==="warning"?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100")),c(2),x(e.bannerIcon()),c(2),h("ngClass","block m-0 mb-1 text-sm font-semibold "+(e.bannerClass()==="info"?"text-cyan-900":e.bannerClass()==="warning"?"text-orange-900":"text-red-900")),c(),x(e.bannerTitle()),c(),h("ngClass","m-0 text-xs leading-snug "+(e.bannerClass()==="info"?"text-cyan-900":e.bannerClass()==="warning"?"text-orange-900":"text-red-900 font-medium")),c(),x(e.bannerMessage())}}var ae=class r{router=s(g);featureGatingService=s(mt);dismissedBanner=y(!1);isTrialActive=this.featureGatingService.isTrialActive;trialDaysRemaining=this.featureGatingService.trialDaysRemaining;showBanner=a(()=>!this.dismissedBanner()&&this.isTrialActive());bannerClass=a(()=>{let t=this.trialDaysRemaining();return t<=1?"critical":t<=3||t<=7?"warning":"info"});bannerIcon=a(()=>{let t=this.trialDaysRemaining();return t<=1?"priority_high":t<=3?"warning":"info"});bannerTitle=a(()=>{let t=this.trialDaysRemaining();return t===0?"Trial Ended!":t===1?"Trial Ends Tomorrow":t<=3?"Trial Ending Soon!":"Free Trial Active"});bannerMessage=a(()=>{let t=this.trialDaysRemaining();return t===0?"Your free trial has ended. Upgrade now to continue using ShopBot and managing your business.":t===1?"Your free trial ends tomorrow. Upgrade now to continue uninterrupted service.":`You have ${t} days remaining in your free trial. Upgrade now to maintain continuous access to all features.`});upgradeTrial(){this.router.navigate(["/menu/hms/settings/hotel-settings/billing"])}closeBanner(){this.dismissedBanner.set(!0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-trial-warning-banner"]],decls:1,vars:1,consts:[[3,"ngClass"],[1,"flex","items-center","gap-3","w-full","flex-wrap"],[1,"text-sm"],[1,"flex-1","min-w-[180px]"],[1,"flex","items-center","gap-1","flex-shrink-0"],["matButton","outlined","color","primary",1,"whitespace-nowrap",3,"click"],["mat-icon-button","",1,"w-8","h-8",3,"click"],[1,"text-gray-400","hover:text-gray-600"]],template:function(e,n){e&1&&O(0,qt,16,7,"div",0),e&2&&R(n.showBanner()?0:-1)},dependencies:[X,K,Q,Z,q,re,ne],encapsulation:2})};function Zt(r,t){if(r&1){let e=J();l(0,"div",0)(1,"div",1)(2,"div",0)(3,"mat-icon",2),f(4),m()(),l(5,"div",3)(6,"strong",0),f(7),m(),l(8,"p",0),f(9),m()(),l(10,"div",4)(11,"button",5),w("click",function(){D(e);let o=S();return N(o.manageBilling())}),f(12," Manage Billing "),m(),l(13,"button",6),w("click",function(){D(e);let o=S();return N(o.closeBanner())}),l(14,"mat-icon",7),f(15,"close"),m()()()()()}if(r&2){let e=S();h("ngClass","px-4 py-3  bg-white flex items-center justify-between  gap-2  "+e.bannerClass()),c(2),h("ngClass","flex items-center justify-center w-8 h-8 rounded-full flex-shrink-0 "+(e.bannerClass()==="info"?"text-cyan-600 bg-cyan-100":e.bannerClass()==="warning"?"text-orange-600 bg-orange-100":"text-red-600 bg-red-100")),c(2),x(e.bannerIcon()),c(2),h("ngClass","block m-0 mb-1 text-sm font-semibold "+(e.bannerClass()==="info"?"text-cyan-900":e.bannerClass()==="warning"?"text-orange-900":"text-red-900")),c(),x(e.bannerTitle()),c(),h("ngClass","m-0 text-xs leading-snug "+(e.bannerClass()==="info"?"text-cyan-900":e.bannerClass()==="warning"?"text-orange-900":"text-red-900 font-medium")),c(),x(e.bannerMessage())}}var ce=class r{router=s(g);subscriptionService=s(I);dismissedBanner=y(!1);subscription=this.subscriptionService.getSubscriptionSignal();daysUntilRenewal=a(()=>{let t=this.subscription();if(!t||t.status!=="ACTIVE"||!t.nextBillingDate)return null;let e=new Date,n=new Date(t.nextBillingDate),o=Math.ceil((n.getTime()-e.getTime())/(1e3*60*60*24));return o>0&&o<=7?o:null});showBanner=a(()=>!this.dismissedBanner()&&this.daysUntilRenewal()!==null);bannerClass=a(()=>{let t=this.daysUntilRenewal();return t===null?"":t<=1?"critical":t<=3?"warning":"info"});bannerIcon=a(()=>{let t=this.daysUntilRenewal();return t===null?"":t<=1?"priority_high":t<=3?"warning":"notifications_active"});bannerTitle=a(()=>{let t=this.daysUntilRenewal();return t===null?"":t===0?"Subscription Renews Today!":t===1?"Subscription Renews Tomorrow":t<=3?"Subscription Renewing Soon":"Subscription Renewal Coming"});bannerMessage=a(()=>{let t=this.daysUntilRenewal(),e=this.subscription();return t===null||!e?"":t===0?"Your subscription renews today.":t===1?"Your subscription renews tomorrow.":`Your subscription will renew in ${t} days.`});manageBilling(){this.router.navigate(["/menu/hms/settings/hotel-settings/billing"])}closeBanner(){this.dismissedBanner.set(!0)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-subscription-expiring-banner"]],decls:1,vars:1,consts:[[3,"ngClass"],[1,"flex","items-center","gap-3","w-full","flex-wrap"],[1,"text-sm"],[1,"flex-1","min-w-[180px]"],[1,"flex","items-center","gap-1","flex-shrink-0"],["matButton","outlined","color","primary",1,"whitespace-nowrap",3,"click"],["mat-icon-button","",1,"w-8","h-8",3,"click"],[1,"text-gray-400","hover:text-gray-600"]],template:function(e,n){e&1&&O(0,Zt,16,7,"div",0),e&2&&R(n.showBanner()?0:-1)},dependencies:[X,K,Q,Z,q,re,ne],encapsulation:2})};var pe=class r{socketService=s(ie);bluetoothPrinterService=s(vt);socketSubscription=null;constructor(){}startListening(){if(this.socketSubscription){console.log("\u{1F504} Auto-print already listening");return}console.log("\u{1F3A7} Starting auto-print socket listener"),this.socketSubscription=this.socketService.on("printJob:created").subscribe({next:t=>j(this,null,function*(){console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F4E1} [SOCKET EVENT RECEIVED] printJob:created"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F4E6} Full Socket Data:",JSON.stringify(t,null,2)),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),yield this.handlePrintJobEvent(t)}),error:t=>{console.error("\u274C [SOCKET ERROR] in auto-print:",t)}}),console.log("\u2705 Auto-print socket listener active")}stopListening(){this.socketSubscription&&(this.socketSubscription.unsubscribe(),this.socketSubscription=null,console.log("Auto-print listener stopped"))}handlePrintJobEvent(t){return j(this,null,function*(){try{console.log("\u{1F50D} [PROCESSING] Starting print job validation");let e=t.printJob||t;if(!e){console.warn("\u26A0\uFE0F [VALIDATION FAILED] No print job data in socket event"),console.log("Available data keys:",Object.keys(t));return}console.log("\u2713 [PRINT JOB FOUND]"),console.log("  - Job ID:",e._id),console.log("  - Job Status:",e.status),console.log("  - Station:",e.station);let n=e.order;if(!n||typeof n!="object"){console.warn("\u26A0\uFE0F [VALIDATION FAILED] No order object in print job"),console.log("  - Order type:",typeof n),console.log("  - Order value:",n);return}console.log("\u2713 [ORDER FOUND]"),console.log("  - Order ID:",n._id),console.log("  - Order Reference:",n.reference),console.log("  - Order Category:",n.category),console.log("  - Payment Status:",n.paymentStatus);let o=n.category==="Complete",i=n.paymentStatus==="Paid";if(console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F50D} [ORDER VALIDATION CHECK]"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("  Category:",n.category,o?"\u2705":"\u274C"),console.log("  Payment:",n.paymentStatus,i?"\u2705":"\u274C"),console.log("  Can Print:",o&&i?"\u2705 YES":"\u274C NO"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),!o||!i){console.log("\u23ED\uFE0F [SKIPPED] Order not complete or not paid");return}let d=this.bluetoothPrinterService.isConnected();if(console.log("\u{1F5A8}\uFE0F [PRINTER CHECK] Bluetooth printer connected:",d?"\u2705 YES":"\u274C NO"),!d){console.log("\u23ED\uFE0F [SKIPPED] Bluetooth printer not connected");return}console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F5A8}\uFE0F [PRINTING] Auto-printing receipt..."),console.log("  Order:",n.reference||n._id),console.log("  Store:",n.store?.name||"N/A"),console.log("  Total:",n.total),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),yield this.printReceipt(e),console.log("\u2705 [SUCCESS] Auto-print completed successfully"),console.log(`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`)}catch(e){console.error("\u274C [ERROR] Auto-print failed:",e),console.error("Error details:",e)}})}printReceipt(t){return j(this,null,function*(){let e=this.generateReceipt(t);yield this.bluetoothPrinterService.sendToPrinter(e)})}generateReceipt(t){let e={INIT:"\x1B@",ALIGN_CENTER:"\x1Ba",ALIGN_LEFT:"\x1Ba\0",TEXT_DOUBLE_SIZE:"\x1B!0",TEXT_NORMAL:"\x1B!\0",BOLD_ON:"\x1BE",BOLD_OFF:"\x1BE\0",FEED_LINE:`
`,CUT_PAPER:"V\0"},n=t.order,o=n?.store;if(!n)return e.INIT+`ERROR: No order data
`+e.CUT_PAPER;let i="";if(i+=e.INIT,i+=e.ALIGN_CENTER,i+=e.TEXT_DOUBLE_SIZE,i+=e.BOLD_ON,o?.name&&(i+=`${o.name}
`),i+=`KITCHEN ORDER
`,i+=e.BOLD_OFF,i+=e.TEXT_NORMAL,i+=e.ALIGN_LEFT,i+=`================================
`,i+=e.BOLD_ON,i+=`Order: #${n.reference||n._id}
`,i+=e.BOLD_OFF,i+=`Time: ${new Date().toLocaleString()}
`,n.type&&(i+=`Type: ${n.type}
`),n.salesChannel&&(i+=`Channel: ${n.salesChannel}
`),n.table){let p=n.table;i+=`Table: ${p.number||p.name||p}
`}if(n.staff){let p=n.staff,ue=p.name||p.firstName||p;i+=`Server: ${ue}
`}i+=`================================
`;let d=n.cart?.products||[],v=o?.currencyCode||"USD";d.length>0&&(i+=e.BOLD_ON,i+=`ITEMS:
`,i+=e.BOLD_OFF,d.forEach(p=>{let ue=p.quantity||1,Te=p.price||0;i+=`${ue}x ${p.name}`,Te>0&&(i+=` - ${this.formatCurrency(Te,v)}`),i+=`
`,p.options&&Array.isArray(p.options)&&p.options.forEach(_=>{if(_.options&&Array.isArray(_.options))_.options.forEach(P=>{if(P.selected){let U=P.quantity||1,k=P.price||0;i+=`   + ${U}x ${P.name}`,k>0&&(i+=` (${this.formatCurrency(k,v)})`),i+=`
`}});else{let P=_.optionItemName||_.name||_,U=_.quantity||1,k=_.price||0;U>1?i+=`   + ${U}x ${P}`:i+=`   + ${P}`,k>0&&(i+=` (${this.formatCurrency(k,v)})`),i+=`
`}}),p.notes&&(i+=`   Note: ${p.notes}
`),i+=`
`})),i+=`================================
`;let Re=n.subTotal||n.subtotal,ge=n.tax,de=n.discount,Me=n.total;return i+=e.BOLD_ON,i+=`ORDER SUMMARY:
`,i+=e.BOLD_OFF,Re!==void 0&&(i+=`Subtotal:            ${this.formatCurrency(Re,v)}
`),ge&&ge>0&&(i+=`Tax:                 ${this.formatCurrency(ge,v)}
`),de&&de>0&&(i+=`Discount:           -${this.formatCurrency(de,v)}
`),Me!==void 0&&(i+=`--------------------------------
`,i+=e.BOLD_ON,i+=`TOTAL:               ${this.formatCurrency(Me,v)}
`,i+=e.BOLD_OFF),n.payment&&(i+=`Payment: ${n.payment}
`),i+=`================================
`,(n.note||n.orderInstruction)&&(i+=e.BOLD_ON,i+=`NOTES:
`,i+=e.BOLD_OFF,i+=`${n.note||n.orderInstruction}
`,i+=`================================
`),i+=e.ALIGN_CENTER,i+=`Job #${t._id?.substring(t._id.length-6)||"N/A"}
`,i+=e.FEED_LINE,i+=e.FEED_LINE,i+=e.CUT_PAPER,i}formatCurrency(t,e){let n=t.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return`${e} ${n}`}static \u0275fac=function(e){return new(e||r)};static \u0275prov=V({token:r,factory:r.\u0275fac,providedIn:"root"})};var le=class r{title="shopbot-back-office";autoPrintService=s(pe);socketService=s(ie);ngOnInit(){console.log("\u{1F680} [APP] Application initialized"),console.log("\u{1F50C} [APP] Socket connected:",this.socketService.isConnected()),this.autoPrintService.startListening(),console.log("\u{1F4E1} [APP] Auto-print service registered")}ngOnDestroy(){console.log("\u{1F6D1} [APP] Application destroying"),this.autoPrintService.stopListening()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=C({type:r,selectors:[["app-root"]],decls:4,vars:0,consts:[["ngProgressRouter","",1,"root-progress-bar"]],template:function(e,n){e&1&&ze(0,"ng-progress",0)(1,"app-trial-warning-banner")(2,"app-subscription-expiring-banner")(3,"router-outlet")},dependencies:[it,Ot,Nt,ae,ce],styles:[".root-progress-bar[_ngcontent-%COMP%]{--ng-progress-thickness: 3}.root-progress-bar[_ngcontent-%COMP%]     .ng-bar-placeholder{background-color:#d3d3d3}.root-progress-bar[_ngcontent-%COMP%]     .ng-bar{background:#0000ef}"]})};Ke(le,Et).catch(r=>console.error(r));
