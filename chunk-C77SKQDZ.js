import{a as et}from"./chunk-DL4VC65Q.js";import{a as tt,b as at}from"./chunk-E366X3FD.js";import{a as We,b as Oe}from"./chunk-ZAOMQAJO.js";import{a as Qe,b as Xe,c as Ye,d as Ze}from"./chunk-B25KU3PS.js";import{a as Ke}from"./chunk-YZQZHEMG.js";import{d as je,e as Ue,f as ee,h as He,i as ze,j as Je,k as te}from"./chunk-XSZYAESL.js";import"./chunk-LCNY3JPX.js";import{a as Be,b as Le,c as Ge,h as qe}from"./chunk-MSN3EE44.js";import{a as $e}from"./chunk-HOFFRLAS.js";import{a as Ne}from"./chunk-OFQMF3WN.js";import{b as we}from"./chunk-E4PTFC5Z.js";import{a as _e}from"./chunk-YHIOFNIN.js";import"./chunk-PYUUH7RE.js";import"./chunk-OKEXGVJ3.js";import"./chunk-O7SXWP4H.js";import"./chunk-F5YHHFYE.js";import{i as he}from"./chunk-ZKQYDJ5W.js";import{a as Ve,b as Z}from"./chunk-LCF3SYDV.js";import{d as xe}from"./chunk-ZLVLWRZH.js";import{a as S}from"./chunk-HJGFVW6K.js";import"./chunk-TVH27JLT.js";import"./chunk-G4CZ6LK2.js";import"./chunk-I564X6SI.js";import"./chunk-VTDH2LYT.js";import{b as Q,c as Pe,d as Ae}from"./chunk-63HT37SK.js";import{a as z,b as J,c as De,e as Ie,h as K}from"./chunk-YJCGHVXK.js";import"./chunk-UHBDKNKX.js";import{a as X,b as Y}from"./chunk-3ZLH5HUN.js";import{B as H,b as be,d as c,g as q,h as $,m as W,n as Me,q as ke,r as Re,s as O,t as j,v as Fe,y as Ee,z as U}from"./chunk-O5GCTPYR.js";import"./chunk-EGLRIU4H.js";import{a as N,b as B}from"./chunk-5TL46KBL.js";import"./chunk-53AK2UWQ.js";import{a as fe}from"./chunk-BFT2MTJY.js";import{a as Ce,b as ye,c as Te,f as Se,h as ve}from"./chunk-JONI64R4.js";import"./chunk-H7INH462.js";import"./chunk-OOL2KACG.js";import"./chunk-KZJMNFJ3.js";import{b as L,c as G}from"./chunk-G6I3OKXX.js";import{Z as ge,_ as V,ba as w}from"./chunk-4Z2XUZY2.js";import{e as pe,g as ue}from"./chunk-F436VINI.js";import{A as me,u as A}from"./chunk-H22US2IH.js";import{Ib as _,Jb as g,Kb as ne,Mb as v,Nb as b,Ob as u,Pb as r,Qb as n,Rb as T,Vb as le,Wb as se,Yb as y,aa as oe,ac as x,bb as d,cc as m,fa as p,hd as ce,ka as h,la as C,mc as de,qa as I,qb as P,r as D,rc as l,sc as M,tc as R,wa as k,x as re}from"./chunk-P5WOETP4.js";import{a as F,b as E}from"./chunk-GAL4ENT6.js";var ae=class i{http=p(me);apiUrl=fe.apiUrl;getRoomTypesOptions(t){return this.http.get(`${this.apiUrl}/admin/channex/room-types/options?propertyId=${t}`).pipe(D(e=>(Array.isArray(e?.data)?e.data:[]).map(o=>({id:o.id||o.attributes?.id,title:o.attributes?.title,position:o.attributes?.position,occ_adults:o.attributes?.occ_adults,occ_children:o.attributes?.occ_children,occ_infants:o.attributes?.occ_infants,default_occupancy:o.attributes?.default_occupancy}))))}getRatePlansOptions(t,e=!1){return this.http.get(`${this.apiUrl}/admin/channex/rate-plans/options?propertyId=${t}&multiOccupancy=${e}`).pipe(D(a=>(Array.isArray(a?.data)?a.data:[]).map(s=>({id:s.id||s.attributes?.id,title:s.attributes?.title,position:s.attributes?.position,room_type_id:s.attributes?.room_type_id,rate_plan_id:s.attributes?.rate_plan_id}))))}getRoomTypesWithRatePlans(t){return re({roomTypes:this.getRoomTypesOptions(t),ratePlans:this.getRatePlansOptions(t,!1)}).pipe(D(({roomTypes:e,ratePlans:a})=>e.map(o=>E(F({},o),{ratePlans:a.filter(s=>s.room_type_id===o.id)})).sort((o,s)=>(o.position??0)-(s.position??0))))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=oe({token:i,factory:i.\u0275fac,providedIn:"root"})};var pt=(i,t)=>t.id;function ut(i,t){i&1&&(r(0,"div",1),T(1,"mat-spinner",2),n())}function xt(i,t){i&1&&(r(0,"p",4),l(1,"All taxes have been added to this tax set."),n())}function _t(i,t){if(i&1&&(r(0,"mat-option",13),l(1),n()),i&2){let e=t.$implicit;u("value",e.id),d(),M(e.title)}}function gt(i,t){i&1&&(r(0,"mat-error"),l(1,"Please select a tax"),n())}function ft(i,t){if(i&1&&(r(0,"form",5)(1,"mat-form-field",11)(2,"mat-label"),l(3,"Select Tax"),n(),r(4,"mat-select",12),v(5,_t,2,2,"mat-option",13,pt),n(),_(7,gt,2,0,"mat-error"),n()()),i&2){let e,a=m(2);u("formGroup",a.form),d(5),b(a.availableTaxes()),d(2),g((e=a.form.get("taxId"))!=null&&e.hasError("required")?7:-1)}}function ht(i,t){if(i&1){let e=y();r(0,"mat-dialog-content",3),_(1,xt,2,0,"p",4)(2,ft,8,2,"form",5),n(),r(3,"mat-dialog-actions",6)(4,"button",7),x("click",function(){h(e);let o=m();return C(o.cancel())}),l(5," Cancel "),n(),r(6,"button",8),x("click",function(){h(e);let o=m();return C(o.createNewTax())}),r(7,"mat-icon",9),l(8,"add"),n(),l(9," Create Tax "),n(),r(10,"button",10),x("click",function(){h(e);let o=m();return C(o.selectTax())}),l(11," Select "),n()()}if(i&2){let e=m();d(),g(e.availableTaxes().length===0?1:2),d(3),u("disabled",e.isLoading()),d(2),u("disabled",e.isLoading()),d(4),u("disabled",!e.form.valid||e.isLoading()||e.availableTaxes().length===0)}}var ie=class i{fb=p(U);taxService=p(tt);snackBar=p(N);dialogRef=p(je);dialog=p(ee);destroyRef=p(I);data=p(Ue);availableTaxes=k([]);isLoading=k(!1);form;constructor(){this.initializeForm(),this.loadTaxes()}initializeForm(){this.form=this.fb.group({taxId:["",c.required]})}loadTaxes(){if(!this.data.propertyId){this.snackBar.open("Property ID not found","Close",{duration:3e3});return}this.isLoading.set(!0),this.taxService.getTaxes(this.data.propertyId).subscribe({next:t=>{let e=t.filter(a=>!this.data.selectedTaxIds.includes(a.id));this.availableTaxes.set(e),this.isLoading.set(!1),e.length===0&&this.snackBar.open("All taxes have been selected","Close",{duration:3e3})},error:t=>{this.isLoading.set(!1);let e=t.error?.message||"Failed to load taxes";this.snackBar.open(e,"Close",{duration:5e3}),console.error("Error loading taxes:",t)}})}selectTax(){if(!this.form.valid){this.snackBar.open("Please select a tax","Close",{duration:3e3});return}let t=this.form.get("taxId")?.value,e=this.availableTaxes().find(a=>a.id===t);e&&this.dialogRef.close(e)}cancel(){this.dialogRef.close()}createNewTax(){this.dialog.open(at,{data:{tax:void 0,propertyId:this.data.propertyId},width:"600px",disableClose:!1}).afterClosed().pipe(S(this.destroyRef)).subscribe(t=>{t&&(this.loadTaxes(),this.snackBar.open("Tax created successfully","Close",{duration:3e3}))})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-tax-selection-modal"]],decls:4,vars:1,consts:[["mat-dialog-title",""],[1,"flex","items-center","justify-center","py-8"],["diameter","40"],[1,"mt-6"],[1,"text-gray-500","text-center","py-4"],[3,"formGroup"],["align","end",1,"gap-2"],["matButton","",3,"click","disabled"],["matButton","","color","primary",3,"click","disabled"],[1,"mr-1"],["matButton","filled","color","primary",3,"click","disabled"],["appearance","outline",1,"w-full"],["formControlName","taxId"],[3,"value"]],template:function(e,a){e&1&&(r(0,"h2",0),l(1,"Add Tax"),n(),_(2,ut,2,0,"div",1)(3,ht,12,4)),e&2&&(d(2),g(a.isLoading()?2:3))},dependencies:[A,te,He,Je,ze,Q,K,z,J,Z,Ve,xe,w,V,Y,X,B,H,W,q,$,j,O,G,L],encapsulation:2,changeDetection:0})};var rt=(i,t)=>t.id;function Ct(i,t){i&1&&l(0," Saving... ")}function yt(i,t){if(i&1&&l(0),i&2){let e=m();R(" ",e.isEditing?"Update Tax Set":"Create Tax Set"," ")}}function Tt(i,t){i&1&&(r(0,"mat-error"),l(1,"Tax set title is required"),n())}function St(i,t){i&1&&(r(0,"mat-error"),l(1,"Title must be at least 3 characters"),n())}function vt(i,t){i&1&&(r(0,"mat-error"),l(1,"Currency is required"),n())}function bt(i,t){i&1&&(r(0,"p",18),l(1,"No taxes added yet. Click the + button to add a tax."),n())}function Mt(i,t){if(i&1){let e=y();r(0,"div",24)(1,"div",31)(2,"div",32)(3,"mat-icon",33),l(4,"drag_indicator"),n(),r(5,"div")(6,"h4",34),l(7),n(),r(8,"p",35),l(9),n()()(),r(10,"div",30)(11,"button",36),x("click",function(){let o=h(e).$index,s=m(2);return C(s.removeTax(o))}),r(12,"mat-icon"),l(13,"delete"),n()()()(),r(14,"div",37)(15,"div",38)(16,"div")(17,"span",39),l(18,"Title:"),n(),r(19,"span",40),l(20),n()(),r(21,"div")(22,"span",39),l(23,"Inclusive:"),n(),r(24,"span",40),l(25,"-"),n()()(),r(26,"div")(27,"span",39),l(28,"Rate:"),n(),r(29,"span",41),l(30),n()()(),r(31,"p",42),l(32),n()()}if(i&2){let e=t.$index,a=m(2);u("formGroupName",e),d(7),R("Group #",e+1),d(2),M(a.getTaxTitle(e)),d(11),M(a.getTaxTitle(e)),d(10),R("",a.getTaxRate(e),"%"),d(2),R(" Tax Group ",e+1," is calculated first and the sum is used for next group ")}}function kt(i,t){if(i&1){let e=y();r(0,"button",48),x("click",function(){h(e);let o=m(3);return C(o.addNetPrice())}),r(1,"mat-icon"),l(2,"add_circle"),n()()}}function Rt(i,t){if(i&1){let e=y();r(0,"button",49),x("click",function(){h(e);let o=m().$index,s=m(2);return C(s.removeNetPrice(o))}),r(1,"mat-icon"),l(2,"remove_circle"),n()()}}function Ft(i,t){if(i&1&&(r(0,"div",30)(1,"mat-form-field",43)(2,"mat-label"),l(3,"Net price :"),n(),T(4,"input",44),n(),r(5,"div",45),_(6,kt,3,0,"button",46),_(7,Rt,3,0,"button",47),n()()),i&2){let e=t.$index,a=m(2);d(4),u("formControlName",e),d(2),g(e===a.netPricesArray.length-1?6:-1),d(),g(a.netPricesArray.length>1?7:-1)}}function Et(i,t){if(i&1){let e=y();r(0,"div",22)(1,"div",23),x("cdkDropListDropped",function(o){h(e);let s=m();return C(s.dropTax(o))}),v(2,Mt,33,6,"div",24,ne),n()(),r(4,"h3",25),l(5,"Tax calculator"),n(),r(6,"div",26)(7,"mat-form-field",11)(8,"mat-label"),l(9,"Sell date :"),n(),T(10,"input",27)(11,"mat-datepicker-toggle",28)(12,"mat-datepicker",null,0),n(),r(14,"div",29),v(15,Ft,8,3,"div",30,ne),n()()}if(i&2){let e=de(13),a=m();d(2),b(a.taxesArray.controls),d(8),u("matDatepicker",e),d(),u("for",e),d(4),b(a.netPricesArray.controls)}}function Dt(i,t){i&1&&(r(0,"div",20),T(1,"mat-spinner",50),n())}function It(i,t){i&1&&(r(0,"p",18),l(1,"No room types found for this property."),n())}function Pt(i,t){if(i&1){let e=y();r(0,"div",59)(1,"mat-checkbox",60),x("change",function(o){let s=h(e).$implicit,f=m(4);return C(f.onRatePlanCheckboxChange(s.id,o))}),n(),r(2,"span",61),l(3),n()()}if(i&2){let e=t.$implicit,a=m(4);d(),u("checked",a.isRatePlanSelected(e.id)),d(2),M(e.title)}}function At(i,t){if(i&1&&(r(0,"div",58),v(1,Pt,4,2,"div",59,rt),n()),i&2){let e=m().$implicit;d(),b(e.ratePlans)}}function Vt(i,t){if(i&1){let e=y();r(0,"div",53)(1,"div",54)(2,"mat-checkbox",55),x("change",function(o){let s=h(e).$implicit,f=m(2);return C(f.toggleRoomTypeRatePlans(s,o.checked))}),n(),r(3,"span",56),l(4),n(),r(5,"span",57),l(6),n()(),_(7,At,3,0,"div",58),n()}if(i&2){let e=t.$implicit,a=m(2);d(2),u("checked",a.isRoomTypeFullySelected(e))("indeterminate",a.isRoomTypePartiallySelected(e)),d(2),M(e.title),d(2),R(" ",e.ratePlans.length," "),d(),g(e.ratePlans.length>0?7:-1)}}function wt(i,t){if(i&1){let e=y();r(0,"div",21)(1,"div",51)(2,"mat-checkbox",52),x("change",function(o){h(e);let s=m();return C(s.toggleAllRoomTypes(o.checked))}),l(3," Select All Rates "),n()(),v(4,Vt,8,5,"div",53,rt),n()}if(i&2){let e=m();d(2),u("checked",e.areAllRoomTypesSelected())("indeterminate",e.areSomeRoomTypesPartiallySelected()),d(2),b(e.roomTypesWithPlans())}}var nt=class i{fb=p(U);taxSetService=p(et);roomTypeRatePlanService=p(ae);route=p(pe);router=p(ue);snackBar=p(N);storeStore=p(he);destroyRef=p(I);dialog=p(ee);cdr=p(ce);taxSetForm;isSaving=!1;isEditing=!1;taxSetId=null;availableTaxes=[];roomTypesWithPlans=k([]);isLoadingRoomTypes=k(!1);ngOnInit(){this.initializeForm(),this.loadRoomTypesAndRatePlans(),this.route.params.pipe(S(this.destroyRef)).subscribe(t=>{t.id&&(this.isEditing=!0,this.taxSetId=t.id,this.loadTaxSet(t.id))})}initializeForm(){let t=new Date;this.taxSetForm=this.fb.group({title:["",[c.required,c.minLength(3)]],currency:["",[c.required,c.minLength(3),c.maxLength(3)]],taxes:this.fb.array([]),sell_date:[t],net_prices:this.fb.array([this.fb.control(100,[c.required,c.min(0)])]),associated_rate_plan_ids:[]})}loadRoomTypesAndRatePlans(){let t=this.storeStore.selectedStore()?.channex?.propertyId;if(!t){this.snackBar.open("Property ID not found","Close",{duration:3e3});return}this.isLoadingRoomTypes.set(!0),this.roomTypeRatePlanService.getRoomTypesWithRatePlans(t).pipe(S(this.destroyRef)).subscribe({next:e=>{this.roomTypesWithPlans.set(e),this.isLoadingRoomTypes.set(!1)},error:e=>{this.isLoadingRoomTypes.set(!1);let a=e.error?.message||"Failed to load room types";this.snackBar.open(a,"Close",{duration:5e3}),console.error("Error loading room types:",e)}})}loadTaxSet(t){this.taxSetService.getTaxSet(t).pipe(S(this.destroyRef)).subscribe({next:e=>{let a=e.data?.attributes;if(a){this.taxSetForm.patchValue({title:a.title,currency:a.currency,associated_rate_plan_ids:a.associated_rate_plan_ids||[]});let o=this.taxSetForm.get("taxes");a.taxes&&Array.isArray(a.taxes)&&a.taxes.forEach((s,f)=>{o.push(this.fb.group({id:[s.id||s,c.required],level:[f,c.required],title:[s.title||"",c.required],rate:[s.rate||"0.00",c.required]}))})}},error:e=>{let a=e.error?.message||"Failed to load tax set";this.snackBar.open(a,"Close",{duration:5e3}),console.error("Error loading tax set:",e)}})}get taxesArray(){return this.taxSetForm.get("taxes")}get taxesLength(){return this.taxesArray?.length??0}getTaxFormGroup(t){let e=this.taxesArray?.at(t);return e||null}getLevelControl(t){return this.getTaxFormGroup(t)?.get("level")??null}getTaxTitle(t){return this.getTaxFormGroup(t)?.get("title")?.value||""}getTaxId(t){return this.getTaxFormGroup(t)?.get("id")?.value||""}getTaxLevel(t){return this.getTaxFormGroup(t)?.get("level")?.value||0}addTax(){let t=this.taxesArray.value.map(a=>a.id),e={propertyId:this.storeStore.selectedStore()?.channex?.propertyId||"",selectedTaxIds:t};this.dialog.open(ie,{data:e,width:"400px",disableClose:!1}).afterClosed().pipe(S(this.destroyRef)).subscribe(a=>{a&&(this.taxesArray.push(this.fb.group({id:[a.id,c.required],level:[this.taxesArray.length,c.required],title:[a.title,c.required],rate:[a.rate||"0.00",c.required]})),this.cdr.markForCheck(),this.snackBar.open(`Tax "${a.title}" added successfully`,"Close",{duration:3e3}))})}removeTax(t){this.taxesArray.removeAt(t),this.taxesArray.controls.forEach((e,a)=>{e.get("level")?.setValue(a)}),this.cdr.markForCheck()}get netPricesArray(){return this.taxSetForm.get("net_prices")}addNetPrice(){this.netPricesArray.push(this.fb.control("",[c.required,c.min(0)])),this.cdr.markForCheck()}removeNetPrice(t){this.netPricesArray.removeAt(t),this.cdr.markForCheck()}dropTax(t){if(t.previousIndex!==t.currentIndex){let e=this.taxesArray.value,[a]=e.splice(t.previousIndex,1);e.splice(t.currentIndex,0,a),this.taxesArray.clear(),e.forEach((o,s)=>{this.taxesArray.push(this.fb.group({id:[o.id,c.required],level:[s,c.required],title:[o.title,c.required],rate:[o.rate,c.required]}))}),this.cdr.markForCheck()}}getTaxRate(t){let e=this.getTaxId(t);return this.getTaxFormGroup(t)?.get("rate")?.value||"-"}onRatePlanCheckboxChange(t,e){let a=this.taxSetForm.get("associated_rate_plan_ids")?.value||[],o;e.checked?o=[...a,t]:o=a.filter(s=>s!==t),this.taxSetForm.patchValue({associated_rate_plan_ids:o})}isRatePlanSelected(t){return(this.taxSetForm.get("associated_rate_plan_ids")?.value||[]).includes(t)}toggleRoomTypeRatePlans(t,e){let o=[...this.taxSetForm.get("associated_rate_plan_ids")?.value||[]];t.ratePlans.forEach(s=>{e?o.includes(s.id)||o.push(s.id):o=o.filter(f=>f!==s.id)}),this.taxSetForm.patchValue({associated_rate_plan_ids:o})}isRoomTypeFullySelected(t){let e=this.taxSetForm.get("associated_rate_plan_ids")?.value||[];return t.ratePlans.length>0&&t.ratePlans.every(a=>e.includes(a.id))}isRoomTypePartiallySelected(t){let e=this.taxSetForm.get("associated_rate_plan_ids")?.value||[],a=t.ratePlans.filter(o=>e.includes(o.id)).length;return a>0&&a<t.ratePlans.length}areAllRoomTypesSelected(){return this.roomTypesWithPlans().every(t=>this.isRoomTypeFullySelected(t))}areSomeRoomTypesPartiallySelected(){return this.roomTypesWithPlans().some(t=>this.isRoomTypePartiallySelected(t))&&!this.areAllRoomTypesSelected()}toggleAllRoomTypes(t){this.roomTypesWithPlans().forEach(e=>this.toggleRoomTypeRatePlans(e,t))}saveTaxSet(){if(!this.taxSetForm.valid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}this.isSaving=!0;let t=this.taxSetForm.getRawValue(),e=this.storeStore.selectedStore()?.channex?.propertyId,a=E(F({},t),{property_id:e,taxes:t.taxes.filter(s=>s.id),associated_rate_plan_ids:t.associated_rate_plan_ids||[]});(this.isEditing&&this.taxSetId?this.taxSetService.updateTaxSet(this.taxSetId,a):this.taxSetService.createTaxSet(a)).pipe(S(this.destroyRef)).subscribe({next:()=>{this.isSaving=!1;let s=this.isEditing?"Tax set updated successfully":"Tax set created successfully";this.snackBar.open(s,"Close",{duration:3e3}),this.cancel()},error:s=>{this.isSaving=!1;let f=s.error?.message||"Failed to save tax set";this.snackBar.open(f,"Close",{duration:5e3}),console.error("Error saving tax set:",s)}})}cancel(){this.router.navigate(["../../list"],{relativeTo:this.route})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=P({type:i,selectors:[["app-channel-manager-create-tax-sets"]],decls:47,vars:12,consts:[["picker",""],[3,"title","subtitle"],["actions",""],["matButton","outlined","type","button",1,"px-8",3,"click","disabled"],["matButton","filled","color","primary",1,"px-4",3,"click","disabled"],["appearance","outlined",1,"mt-6"],[1,"mb-3"],[1,"text-xl","font-bold","text-gray-900"],[1,"pt-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","title","placeholder","e.g., Standard Tax Set"],["matInput","","formControlName","currency","placeholder","e.g., USD","maxlength","3"],["appearance","outlined"],[1,"mb-3","flex","items-center","justify-between"],[1,"text-lg","font-semibold","text-gray-900"],["type","button","mat-icon-button","","matTooltip","Add tax",1,"text-blue-600",3,"click"],[1,"text-gray-500","text-center","py-4"],["appearance","outlined",1,"bg-gray-50"],[1,"flex","items-center","justify-center","py-8"],[1,"space-y-4"],[1,"space-y-4","mb-6"],["formArrayName","taxes","cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","",1,"p-4","border","border-outline-variant","rounded-lg","mb-3",3,"formGroupName"],[1,"font-semibold","text-gray-900","mb-4"],[1,"space-y-4","p-4","rounded-lg","border","border-outline-variant"],["matInput","","formControlName","sell_date",3,"matDatepicker"],["matIconSuffix","",3,"for"],["formArrayName","net_prices",1,"space-y-3"],[1,"flex","items-center","gap-2"],[1,"flex","items-start","justify-between","mb-4"],[1,"flex","items-center","gap-3","flex-1"],["cdkDragHandle","",1,"cursor-move","text-gray-400"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],["type","button","mat-icon-button","","matTooltip","Remove",1,"text-gray-400","hover:text-red-600",3,"click"],[1,"flex","items-center","justify-between","text-sm"],[1,"flex","items-center","gap-4"],[1,"text-gray-500"],[1,"font-medium","text-gray-900","ml-1"],[1,"font-semibold","text-gray-900","ml-1"],[1,"text-xs","text-gray-500","mt-2","italic"],["appearance","outline",1,"flex-1"],["matInput","","type","number","placeholder","0","min","0","step","0.01",3,"formControlName"],[1,"flex","gap-1"],["type","button","mat-icon-button","","matTooltip","Add Date",1,"text-blue-600"],["type","button","mat-icon-button","","matTooltip","Remove Date",1,"text-red-600"],["type","button","mat-icon-button","","matTooltip","Add Date",1,"text-blue-600",3,"click"],["type","button","mat-icon-button","","matTooltip","Remove Date",1,"text-red-600",3,"click"],["diameter","40"],[1,"pb-4","border-b","border-gray-200"],[1,"font-semibold","text-gray-900",3,"change","checked","indeterminate"],[1,"ml-0"],[1,"flex","items-center","gap-3","py-2"],[1,"flex-shrink-0",3,"change","checked","indeterminate"],[1,"font-semibold","text-gray-900","flex-1"],[1,"text-sm","text-gray-500","bg-gray-200","px-3","py-1","rounded-full"],[1,"ml-8","space-y-2","mb-3"],[1,"flex","items-center","gap-3"],[1,"flex-shrink-0",3,"change","checked"],[1,"text-gray-700"]],template:function(e,a){if(e&1&&(r(0,"app-page-header",1),le(1,2),r(2,"a",3),x("click",function(){return a.cancel()}),l(3," Cancel "),n(),r(4,"button",4),x("click",function(){return a.saveTaxSet()}),_(5,Ct,1,0)(6,yt,1,1),n(),se(),n(),r(7,"mat-card",5)(8,"mat-card-header",6)(9,"mat-card-title",7),l(10,"Tax Set Details"),n()(),r(11,"mat-card-content",8)(12,"form",9),x("ngSubmit",function(){return a.saveTaxSet()}),r(13,"div",10)(14,"mat-form-field",11)(15,"mat-label"),l(16,"Tax Set Title"),n(),T(17,"input",12),r(18,"mat-hint"),l(19,"Give your tax set a clear title"),n(),_(20,Tt,2,0,"mat-error"),_(21,St,2,0,"mat-error"),n(),r(22,"mat-form-field",11)(23,"mat-label"),l(24,"Currency"),n(),T(25,"input",13),r(26,"mat-hint"),l(27,"ISO 4217 currency code"),n(),_(28,vt,2,0,"mat-error"),n()(),r(29,"mat-card",14)(30,"mat-card-header",15)(31,"mat-card-title",16),l(32,"Taxes"),n(),r(33,"button",17),x("click",function(){return a.addTax()}),r(34,"mat-icon"),l(35,"add"),n()()(),r(36,"mat-card-content",8),_(37,bt,2,0,"p",18),_(38,Et,17,2),n()(),r(39,"mat-card",19)(40,"mat-card-header",6)(41,"mat-card-title",16),l(42,"Associated Rate Plans"),n()(),r(43,"mat-card-content",8),_(44,Dt,2,0,"div",20)(45,It,2,0,"p",18)(46,wt,6,2,"div",21),n()()()()()),e&2){let o,s,f;u("title",a.isEditing?"Edit Tax Set":"Create Tax Set")("subtitle",a.isEditing?"Update the tax set details":"Create a new tax set"),d(2),u("disabled",a.isSaving),d(2),u("disabled",a.isSaving||!a.taxSetForm.valid),d(),g(a.isSaving?5:6),d(7),u("formGroup",a.taxSetForm),d(8),g((o=a.taxSetForm.get("title"))!=null&&o.hasError("required")?20:-1),d(),g((s=a.taxSetForm.get("title"))!=null&&s.hasError("minlength")?21:-1),d(7),g((f=a.taxSetForm.get("currency"))!=null&&f.hasError("required")?28:-1),d(9),g(a.taxesLength===0?37:-1),d(),g(a.taxesLength>0?38:-1),d(6),g(a.isLoadingRoomTypes()?44:a.roomTypesWithPlans().length===0?45:46)}},dependencies:[A,H,W,be,Me,q,$,Ee,Fe,j,O,ke,Re,ve,Ce,Te,Se,ye,Q,K,z,De,J,Ie,Ae,Pe,w,V,ge,Z,we,Y,X,Oe,We,B,G,L,$e,Ne,te,qe,Be,Le,Ge,_e,Ze,Ye,Xe,Qe,Ke],encapsulation:2,changeDetection:0})};export{nt as ChannelManagerCreateTaxSets};
