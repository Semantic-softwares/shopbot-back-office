import{b as lt,f as mt}from"./chunk-CU623SSI.js";import{a as ct}from"./chunk-7FSETBMW.js";import"./chunk-HJ3KAQ7K.js";import{a as tt,b as at,c as nt,h as rt}from"./chunk-Y2RO63AQ.js";import{a as ot}from"./chunk-JZKRHT5H.js";import{a as et}from"./chunk-O4OM35BU.js";import{a as He,b as Ge,c as We,d as Je,e as Ze,f as Ke,g as ze,h as Ye,i as qe,j as Qe,k as Xe}from"./chunk-2UZI5XAB.js";import{a as Le,b as Be}from"./chunk-4XV2UKEU.js";import{a as re}from"./chunk-CP5EC6RD.js";import"./chunk-CCJ2KI64.js";import"./chunk-6RCOBA75.js";import{c as it}from"./chunk-BDA5IGGY.js";import"./chunk-WFM45R76.js";import"./chunk-A24HMJCQ.js";import{a as xe,b as he,c as Se,d as ve}from"./chunk-Q4U6FYZ3.js";import{i as le}from"./chunk-QC7H4KPM.js";import{a as Ue,b as $e}from"./chunk-WZDQ5XTC.js";import{d as ne}from"./chunk-R6JGHN2R.js";import{d as Ae}from"./chunk-BXJEGH2V.js";import"./chunk-64WHNS37.js";import"./chunk-TIVXUJ22.js";import"./chunk-WAHSRZAW.js";import"./chunk-XLZTIYSF.js";import{b as Ie,c as Fe,d as Pe}from"./chunk-UMV4DCPT.js";import{a as Te,e as ke,h as Ne}from"./chunk-G3VZM262.js";import"./chunk-BCE7WRWQ.js";import{a as Ve,b as je}from"./chunk-6I3AJKA7.js";import{B as Me,b as Ce,g as _e,h as De,m as Re,s as Oe,t as we,z as Ee}from"./chunk-W7NMJLMQ.js";import"./chunk-F5SZ3AU3.js";import"./chunk-TILT22SG.js";import{a as ce}from"./chunk-BFT2MTJY.js";import{a as pe,b as se,c as ue,d as fe,f as ge,g as ye,h as be}from"./chunk-3E3PJ7Q7.js";import"./chunk-FO4KTVQ3.js";import"./chunk-TRZH7NMW.js";import"./chunk-GXTELBJV.js";import{b as me,c as de}from"./chunk-JPRPNQOM.js";import{_ as oe,ba as ie}from"./chunk-3LDCGXHW.js";import"./chunk-ZLVQTB5B.js";import{l as Q,m as X,q as ee,s as te,x as T,y as ae}from"./chunk-6PFJHDFS.js";import{F as _,Ib as w,Jb as E,Lc as M,Mb as K,Mc as Y,Nb as z,Nc as q,Ob as p,Pb as a,Pc as A,Qb as n,Rb as s,Vb as S,Vc as C,Wb as v,Yb as j,aa as J,ac as x,bb as l,cc as d,fa as O,g as B,ka as y,la as b,m as D,mc as U,qb as Z,qc as H,r as R,rc as r,sc as m,tc as $,wa as k,wb as h,x as W}from"./chunk-J2AK4FW5.js";import{a as P,b as V}from"./chunk-GAL4ENT6.js";var L=class i{http=O(ae);baseUrl=`${ce.apiUrl}/occupancy`;loadingSubject=new B(!1);loading$=this.loadingSubject.asObservable();errorSubject=new B(null);error$=this.errorSubject.asObservable();getOccupancyData(e){this.loadingSubject.next(!0),this.errorSubject.next(null);let t=new T().set("startDate",e.startDate.toISOString()).set("endDate",e.endDate.toISOString()).set("reportType",e.reportType);return e.roomType&&(t=t.set("roomType",e.roomType)),e.floorNumber&&!isNaN(e.floorNumber)&&(t=t.set("floorNumber",e.floorNumber.toString())),this.http.get(`${this.baseUrl}/data`,{params:t}).pipe(R(o=>(this.loadingSubject.next(!1),o.map(c=>V(P({},c),{date:new Date(c.date)})))),_(o=>(console.error("Error fetching occupancy data:",o),this.errorSubject.next("Failed to load occupancy data. Using mock data for demonstration."),this.loadingSubject.next(!1),D(this.generateMockOccupancyData(e.startDate,e.endDate)))))}getRoomStatuses(e){let t=new T;return e&&!isNaN(e)&&(t=t.set("floor",e.toString())),this.http.get(`${this.baseUrl}/rooms`,{params:t}).pipe(R(o=>o.map(c=>V(P({},c),{checkIn:c.checkIn?new Date(c.checkIn):void 0,checkOut:c.checkOut?new Date(c.checkOut):void 0}))),_(o=>(console.error("Error fetching room statuses:",o),D(this.generateMockRoomStatuses()))))}getOccupancyStats(e){let t=new T().set("startDate",e.startDate.toISOString()).set("endDate",e.endDate.toISOString()).set("reportType",e.reportType);return e.roomType&&(t=t.set("roomType",e.roomType)),e.floorNumber&&!isNaN(e.floorNumber)&&(t=t.set("floorNumber",e.floorNumber.toString())),this.http.get(`${this.baseUrl}/stats`,{params:t}).pipe(R(o=>V(P({},o),{peakOccupancyDate:new Date(o.peakOccupancyDate),lowestOccupancyDate:new Date(o.lowestOccupancyDate)})),_(o=>(console.error("Error fetching occupancy stats:",o),D({totalRooms:100,currentOccupied:75,currentAvailable:20,currentOOO:3,currentMaintenance:2,currentOccupancyRate:75,averageOccupancyRate:72.5,totalRevenue:156750,averageRate:209,peakOccupancyDate:new Date,lowestOccupancyDate:new Date(Date.now()-10080*60*1e3),peakOccupancyRate:95,lowestOccupancyRate:45}))))}exportToCSV(e){let t=new T().set("startDate",e.startDate.toISOString()).set("endDate",e.endDate.toISOString()).set("reportType",e.reportType).set("format","csv");return this.http.get(`${this.baseUrl}/export`,{params:t,responseType:"blob"}).pipe(_(o=>{throw console.error("Error exporting data:",o),this.errorSubject.next("Failed to export data. Please try again."),o}))}exportToPDF(e){let t=new T().set("startDate",e.startDate.toISOString()).set("endDate",e.endDate.toISOString()).set("reportType",e.reportType).set("format","pdf");return this.http.get(`${this.baseUrl}/export`,{params:t,responseType:"blob"}).pipe(_(o=>{throw console.error("Error exporting PDF:",o),this.errorSubject.next("Failed to export PDF. Please try again."),o}))}clearError(){this.errorSubject.next(null)}generateMockOccupancyData(e,t){let o=[],c=new Date(e);for(;c<=t;){let u=Math.floor(Math.random()*85)+10,N=Math.floor(Math.random()*5),I=Math.floor(Math.random()*3),g=100-u-N-I,F=Math.round(u/100*100),G=150+Math.random()*100,pt=u*G,st=u+Math.floor(Math.random()*10);o.push({date:new Date(c),totalRooms:100,occupiedRooms:u,availableRooms:g,outOfOrderRooms:N,maintenanceRooms:I,occupancyRate:F,revenue:pt,averageRate:G,reservationCount:st}),c.setDate(c.getDate()+1)}return o}generateMockRoomStatuses(){let e=[],t=["occupied","available","out-of-order","maintenance"],o=["Standard","Deluxe","Suite","Presidential"],c=[1,2,3,4,5];for(let f=101;f<=200;f++){let u=t[Math.floor(Math.random()*t.length)],N=o[Math.floor(Math.random()*o.length)],I=c[Math.floor(Math.random()*c.length)],g={roomNumber:f.toString(),roomType:N,floorNumber:I,status:u};if(u==="occupied"){let F=["John Doe","Jane Smith","Mike Johnson","Sarah Wilson","David Brown"];g.guestName=F[Math.floor(Math.random()*F.length)],g.guestId=`guest_${f}`,g.checkIn=new Date(Date.now()-Math.floor(Math.random()*7)*24*60*60*1e3),g.checkOut=new Date(Date.now()+Math.random()*7*24*60*60*1e3),g.rate=150+Math.random()*100}else u==="maintenance"?g.notes="Scheduled maintenance - AC repair":u==="out-of-order"&&(g.notes="Plumbing issue - under repair");e.push(g)}return e.sort((f,u)=>parseInt(f.roomNumber)-parseInt(u.roomNumber))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"})};var ft=(i,e)=>e.roomNumber;function gt(i,e){i&1&&s(0,"mat-spinner",6)}function yt(i,e){i&1&&(a(0,"mat-icon"),r(1,"refresh"),n())}function bt(i,e){i&1&&(a(0,"div",10),s(1,"mat-spinner",13),n())}function xt(i,e){if(i&1){let t=j();a(0,"mat-card",11)(1,"mat-card-content",14)(2,"div",15)(3,"mat-icon",16),r(4,"error"),n()(),a(5,"h3",17),r(6,"Error Loading Data"),n(),a(7,"p",18),r(8),n(),a(9,"button",19),x("click",function(){y(t);let c=d();return b(c.clearError())}),a(10,"mat-icon"),r(11,"close"),n(),r(12," Dismiss "),n()()()}if(i&2){let t=d();l(8),m(t.error())}}function ht(i,e){if(i&1&&(a(0,"div",44)(1,"mat-card",20)(2,"mat-card-content",79)(3,"div",80)(4,"div")(5,"p",81),r(6,"Current Occupancy"),n(),a(7,"p",82),r(8),n()(),a(9,"div",83)(10,"mat-icon",84),r(11,"hotel"),n()()()()(),a(12,"mat-card",20)(13,"mat-card-content",79)(14,"div",80)(15,"div")(16,"p",85),r(17,"Total Rooms"),n(),a(18,"p",86),r(19),n()(),a(20,"div",87)(21,"mat-icon",84),r(22,"meeting_room"),n()()()()(),a(23,"mat-card",20)(24,"mat-card-content",79)(25,"div",80)(26,"div")(27,"p",88),r(28,"Occupied"),n(),a(29,"p",89),r(30),n()(),a(31,"div",90)(32,"mat-icon",84),r(33,"people"),n()()()()(),a(34,"mat-card",20)(35,"mat-card-content",79)(36,"div",80)(37,"div")(38,"p",91),r(39,"Available"),n(),a(40,"p",92),r(41),n()(),a(42,"div",93)(43,"mat-icon",84),r(44,"check_circle"),n()()()()(),a(45,"mat-card",20)(46,"mat-card-content",79)(47,"div",80)(48,"div")(49,"p",94),r(50,"Avg Occupancy"),n(),a(51,"p",95),r(52),n()(),a(53,"div",96)(54,"mat-icon",84),r(55,"trending_up"),n()()()()(),a(56,"mat-card",20)(57,"mat-card-content",79)(58,"div",80)(59,"div")(60,"p",97),r(61,"Total Revenue"),n(),a(62,"p",98),r(63),M(64,"currency"),n()()()()()()),i&2){let t=d(2);l(8),m(t.formatPercent(t.occupancyStats().currentOccupancyRate)),l(11),m(t.occupancyStats().totalRooms),l(11),m(t.occupancyStats().currentOccupied),l(11),m(t.occupancyStats().currentAvailable),l(11),m(t.formatPercent(t.occupancyStats().averageOccupancyRate)),l(11),m(A(64,6,t.occupancyStats().totalRevenue,t.currency(),"symbol","1.0-0"))}}function St(i,e){i&1&&(a(0,"th",99),r(1,"Date"),n())}function vt(i,e){if(i&1&&(a(0,"td",100),r(1),n()),i&2){let t=e.$implicit,o=d(2);l(),m(o.formatDate(t.date))}}function Ct(i,e){i&1&&(a(0,"th",99),r(1,"Total Rooms"),n())}function _t(i,e){if(i&1&&(a(0,"td",101),r(1),n()),i&2){let t=e.$implicit;l(),m(t.totalRooms)}}function Dt(i,e){i&1&&(a(0,"th",99),r(1,"Occupied"),n())}function Rt(i,e){if(i&1&&(a(0,"td",101)(1,"span",102),r(2),n()()),i&2){let t=e.$implicit;l(2),m(t.occupiedRooms)}}function Ot(i,e){i&1&&(a(0,"th",99),r(1,"Available"),n())}function wt(i,e){if(i&1&&(a(0,"td",101)(1,"span",103),r(2),n()()),i&2){let t=e.$implicit;l(2),m(t.availableRooms)}}function Et(i,e){i&1&&(a(0,"th",99),r(1,"Occupancy Rate"),n())}function Mt(i,e){if(i&1&&(a(0,"td",101)(1,"mat-chip"),r(2),n()()),i&2){let t=e.$implicit,o=d(2);l(),H(o.getOccupancyRateClass(t.occupancyRate)),l(),$(" ",o.formatPercent(t.occupancyRate)," ")}}function Tt(i,e){i&1&&(a(0,"th",99),r(1,"Revenue"),n())}function kt(i,e){if(i&1&&(a(0,"td",101)(1,"span",104),r(2),M(3,"currency"),n()()),i&2){let t=e.$implicit,o=d(2);l(2),m(A(3,1,t.revenue,o.currency(),"symbol","1.2-2"))}}function Nt(i,e){i&1&&(a(0,"th",99),r(1,"Avg Rate"),n())}function It(i,e){if(i&1&&(a(0,"td",101),r(1),M(2,"currency"),n()),i&2){let t=e.$implicit,o=d(2);l(),m(A(2,1,t.averageRate,o.currency(),"symbol","1.2-2"))}}function Ft(i,e){i&1&&s(0,"tr",105)}function Pt(i,e){i&1&&s(0,"tr",106)}function Vt(i,e){if(i&1&&(a(0,"div",107),M(1,"titlecase"),a(2,"div",108),r(3),n(),a(4,"div",109),r(5),n(),a(6,"div",110)(7,"mat-icon",111),r(8),n()()()),i&2){let t=e.$implicit,o=d(2);H(o.getRoomStatusClass(t.status)),p("matTooltip",t.status==="occupied"?"Guest: "+(t.guestName||"N/A")+" | Check-in: "+o.formatDateTime(t.checkIn)+" | Rate: "+o.formatCurrency(t.rate||0):"Room Type: "+t.roomType+" | Status: "+Y(1,6,t.status)),l(3),m(t.roomNumber),l(2),m(t.roomType),l(3),m(o.getRoomStatusIcon(t.status))}}function jt(i,e){if(i&1){let t=j();a(0,"div",12)(1,"mat-card",20)(2,"mat-card-header")(3,"mat-icon",21),r(4,"filter_list"),n(),a(5,"mat-card-title"),r(6,"Report Filters"),n()(),a(7,"mat-card-content",22)(8,"form",23)(9,"mat-form-field",24)(10,"mat-label"),r(11,"Start Date"),n(),a(12,"input",25),x("dateChange",function(){y(t);let c=d();return b(c.onDateRangeChange())}),n(),s(13,"mat-datepicker-toggle",26)(14,"mat-datepicker",null,1),n(),a(16,"mat-form-field",24)(17,"mat-label"),r(18,"End Date"),n(),a(19,"input",27),x("dateChange",function(){y(t);let c=d();return b(c.onDateRangeChange())}),n(),s(20,"mat-datepicker-toggle",26)(21,"mat-datepicker",null,2),n(),a(23,"mat-form-field",24)(24,"mat-label"),r(25,"Report Type"),n(),a(26,"mat-select",28),x("selectionChange",function(){y(t);let c=d();return b(c.onFilterChange())}),a(27,"mat-option",29),r(28,"Daily"),n(),a(29,"mat-option",30),r(30,"Weekly"),n(),a(31,"mat-option",31),r(32,"Monthly"),n()()(),a(33,"mat-form-field",24)(34,"mat-label"),r(35,"Room Type"),n(),a(36,"mat-select",32),x("selectionChange",function(){y(t);let c=d();return b(c.onFilterChange())}),a(37,"mat-option",33),r(38,"All Room Types"),n(),a(39,"mat-option",34),r(40,"Standard"),n(),a(41,"mat-option",35),r(42,"Deluxe"),n(),a(43,"mat-option",36),r(44,"Suite"),n(),a(45,"mat-option",37),r(46,"Presidential"),n()()(),a(47,"mat-form-field",24)(48,"mat-label"),r(49,"Floor"),n(),a(50,"mat-select",38),x("selectionChange",function(){y(t);let c=d();return b(c.onFilterChange())}),a(51,"mat-option",33),r(52,"All Floors"),n(),a(53,"mat-option",39),r(54,"Floor 1"),n(),a(55,"mat-option",40),r(56,"Floor 2"),n(),a(57,"mat-option",41),r(58,"Floor 3"),n(),a(59,"mat-option",42),r(60,"Floor 4"),n(),a(61,"mat-option",43),r(62,"Floor 5"),n()()()()()(),w(63,ht,65,11,"div",44),a(64,"div",45)(65,"mat-card",20)(66,"mat-card-header")(67,"mat-icon",46),r(68,"show_chart"),n(),a(69,"mat-card-title"),r(70,"Occupancy Trend"),n(),a(71,"mat-card-subtitle"),r(72,"Room occupancy and availability over time"),n()(),a(73,"mat-card-content",22)(74,"div",47),s(75,"canvas",48),n()()(),a(76,"mat-card",20)(77,"mat-card-header")(78,"mat-icon",21),r(79,"bar_chart"),n(),a(80,"mat-card-title"),r(81,"Daily Revenue"),n(),a(82,"mat-card-subtitle"),r(83,"Revenue generated from room bookings"),n()(),a(84,"mat-card-content",22)(85,"div",47),s(86,"canvas",49),n()()()(),a(87,"mat-card",20)(88,"mat-card-header")(89,"mat-icon",50),r(90,"table_chart"),n(),a(91,"mat-card-title"),r(92,"Detailed Occupancy Data"),n(),a(93,"mat-card-subtitle"),r(94,"Day-by-day breakdown of occupancy metrics"),n()(),a(95,"mat-card-content",51)(96,"div",52)(97,"table",53),S(98,54),h(99,St,2,0,"th",55)(100,vt,2,1,"td",56),v(),S(101,57),h(102,Ct,2,0,"th",55)(103,_t,2,1,"td",58),v(),S(104,59),h(105,Dt,2,0,"th",55)(106,Rt,3,1,"td",58),v(),S(107,60),h(108,Ot,2,0,"th",55)(109,wt,3,1,"td",58),v(),S(110,61),h(111,Et,2,0,"th",55)(112,Mt,3,3,"td",58),v(),S(113,62),h(114,Tt,2,0,"th",55)(115,kt,4,6,"td",58),v(),S(116,63),h(117,Nt,2,0,"th",55)(118,It,3,6,"td",58),v(),h(119,Ft,1,0,"tr",64)(120,Pt,1,0,"tr",65),n()()()(),a(121,"mat-card",20)(122,"mat-card-header")(123,"mat-icon",66),r(124,"grid_view"),n(),a(125,"mat-card-title"),r(126,"Current Room Status"),n(),a(127,"mat-card-subtitle"),r(128,"Real-time status of all rooms"),n()(),a(129,"mat-card-content",22)(130,"div",67),K(131,Vt,9,8,"div",68,ft),n(),s(133,"mat-divider",69),a(134,"div",70)(135,"div",71),s(136,"div",72),a(137,"span",73),r(138,"Occupied"),n()(),a(139,"div",71),s(140,"div",74),a(141,"span",73),r(142,"Available"),n()(),a(143,"div",71),s(144,"div",75),a(145,"span",73),r(146,"Out of Order"),n()(),a(147,"div",71),s(148,"div",76),a(149,"span",73),r(150,"Maintenance"),n()()()()(),a(151,"div",77)(152,"mat-icon",78),r(153,"schedule"),n(),r(154),M(155,"date"),n()()}if(i&2){let t=U(15),o=U(22),c=d();l(8),p("formGroup",c.filterForm),l(4),p("matDatepicker",t),l(),p("for",t),l(6),p("matDatepicker",o),l(),p("for",o),l(43),E(c.occupancyStats()?63:-1),l(12),p("data",c.occupancyChartData())("options",c.occupancyChartOptions),l(11),p("data",c.revenueChartData())("options",c.revenueChartOptions),l(11),p("dataSource",c.occupancyData()),l(22),p("matHeaderRowDef",c.displayedColumns),l(),p("matRowDefColumns",c.displayedColumns),l(11),z(c.roomStatuses()),l(23),$(" Last updated: ",q(155,14,c.lastUpdated(),"medium")," ")}}var dt=class i{fb=O(Ee);occupancyService=O(L);storeStore=O(le);selectedStore=C(()=>this.storeStore.selectedStore());currencySymbolToCode={"\u20A6":"NGN",$:"USD","\u20AC":"EUR","\xA3":"GBP","\xA5":"JPY","\u20B9":"INR","\u20BD":"RUB","\u20A9":"KRW","\u0E3F":"THB","\u20AB":"VND",R$:"BRL",R:"ZAR",CHF:"CHF",kr:"SEK",z\u0142:"PLN"};currency=C(()=>{let e=this.selectedStore(),t=e?.currency||e?.currencyCode||"USD";return this.currencySymbolToCode[t]||t});filterTrigger=k(0);filterForm;lastUpdated=k(new Date);filterParams=C(()=>(this.filterTrigger(),this.getFilters()));occupancyResource=Ae({params:this.filterParams,stream:({params:e})=>W({occupancyData:this.occupancyService.getOccupancyData(e),roomStatuses:this.occupancyService.getRoomStatuses(),stats:this.occupancyService.getOccupancyStats(e)}).pipe(R(t=>(this.lastUpdated.set(new Date),this.updateCharts(t.occupancyData),t)),_(t=>(console.error("Error loading data:",t),D(null))))});loading=C(()=>this.occupancyResource.isLoading());error=C(()=>this.occupancyResource.error()?"Failed to load occupancy data. Please try again.":null);occupancyData=C(()=>this.occupancyResource.value()?.occupancyData||[]);roomStatuses=C(()=>this.occupancyResource.value()?.roomStatuses||[]);occupancyStats=C(()=>this.occupancyResource.value()?.stats||null);occupancyChartData=k({labels:[],datasets:[{data:[],label:"Occupancy Rate (%)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:!0,tension:.4},{data:[],label:"Available Rooms",backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,fill:!1,tension:.4}]});occupancyChartOptions={responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:e=>e.datasetIndex===0?`Occupancy Rate: ${e.parsed.y}%`:`Available Rooms: ${e.parsed.y}`}}},scales:{x:{display:!0,title:{display:!0,text:"Date"}},y:{display:!0,title:{display:!0,text:"Percentage / Count"},beginAtZero:!0}}};revenueChartData=k({labels:[],datasets:[{data:[],label:"Daily Revenue",backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]});revenueChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{let t=this.currency();return`Revenue: ${new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e.parsed.y??0)}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"}},y:{display:!0,title:{display:!0,text:`Revenue (${this.currency()})`},beginAtZero:!0,ticks:{callback:e=>{let t=this.currency();return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(Number(e))}}}}};displayedColumns=["date","totalRooms","occupiedRooms","availableRooms","occupancyRate","revenue","averageRate"];constructor(){this.filterForm=this.fb.group({startDate:[new Date(Date.now()-720*60*60*1e3)],endDate:[new Date],reportType:["daily"],roomType:["all"],floorNumber:["all"]})}refreshData(){this.filterTrigger.update(e=>e+1)}onDateRangeChange(){this.filterTrigger.update(e=>e+1)}onFilterChange(){this.filterTrigger.update(e=>e+1)}clearError(){this.occupancyService.clearError()}getFilters(){let e=this.filterForm.value;return{startDate:e.startDate,endDate:e.endDate,reportType:e.reportType,roomType:e.roomType!=="all"?e.roomType:void 0,floorNumber:e.floorNumber&&e.floorNumber!=="all"?parseInt(e.floorNumber):void 0}}updateCharts(e){this.occupancyChartData.set({labels:e.map(t=>this.formatDateShort(t.date)),datasets:[{data:e.map(t=>t.occupancyRate),label:"Occupancy Rate (%)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:!0,tension:.4},{data:e.map(t=>t.availableRooms),label:"Available Rooms",backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,fill:!1,tension:.4}]}),this.revenueChartData.set({labels:e.map(t=>this.formatDateShort(t.date)),datasets:[{data:e.map(t=>t.revenue),label:"Daily Revenue",backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:1}]})}exportToCSV(){let e=this.getFilters();this.occupancyService.exportToCSV(e).subscribe({next:t=>{let o=window.URL.createObjectURL(t),c=document.createElement("a");c.href=o,c.download=`occupancy-report-${this.formatDateISO(new Date)}.csv`,c.click(),window.URL.revokeObjectURL(o)},error:t=>{console.error("Export error:",t)}})}exportToPDF(){let e=this.getFilters();this.occupancyService.exportToPDF(e).subscribe({next:t=>{let o=window.URL.createObjectURL(t),c=document.createElement("a");c.href=o,c.download=`occupancy-report-${this.formatDateISO(new Date)}.pdf`,c.click(),window.URL.revokeObjectURL(o)},error:t=>{console.error("Export error:",t)}})}getRoomStatusClass(e){switch(e){case"occupied":return"bg-red-100 text-red-800 border-red-300";case"available":return"bg-green-100 text-green-800 border-green-300";case"out-of-order":return"bg-gray-100 text-gray-800 border-gray-300";case"maintenance":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}}getRoomStatusIcon(e){switch(e){case"occupied":return"person";case"available":return"check_circle";case"out-of-order":return"block";case"maintenance":return"build";default:return"help"}}getOccupancyRateClass(e){return e>=80?"bg-green-100 text-green-800 border-green-300":e>=60?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300"}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency()}).format(e)}formatDate(e){return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatDateShort(e){return e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}formatDateISO(e){return e.toISOString().split("T")[0]}formatPercent(e){return`${e.toFixed(1)}%`}formatDateTime(e){if(!e)return"N/A";let t=typeof e=="string"?new Date(e):e;return isNaN(t.getTime())?"N/A":t.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=Z({type:i,selectors:[["app-occupancy-report"]],decls:27,vars:7,consts:[["exportMenu","matMenu"],["startPicker",""],["endPicker",""],["title","Occupancy Report","subtitle","Monitor room occupancy rates, availability, and revenue trends"],["actions",""],["mat-stroked-button","",3,"click","disabled"],["diameter","18"],["mat-flat-button","","color","primary",3,"matMenuTriggerFor"],["iconPositionEnd",""],["mat-menu-item","",3,"click"],[1,"flex","justify-center","items-center","py-16"],["appearance","outlined",1,"m-6","bg-red-50!"],[1,"p-6","space-y-6"],["diameter","40"],[1,"p-6!","text-center"],[1,"w-16","h-16","bg-red-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-red-500"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],["mat-flat-button","","color","warn",3,"click"],["appearance","outlined"],["mat-card-avatar","",1,"text-purple-600"],[1,"p-6!"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4",3,"formGroup"],["appearance","outline"],["matInput","","formControlName","startDate",3,"dateChange","matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","endDate",3,"dateChange","matDatepicker"],["formControlName","reportType",3,"selectionChange"],["value","daily"],["value","weekly"],["value","monthly"],["formControlName","roomType",3,"selectionChange"],["value","all"],["value","standard"],["value","deluxe"],["value","suite"],["value","presidential"],["formControlName","floorNumber",3,"selectionChange"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["mat-card-avatar","",1,"text-blue-600"],[1,"h-80"],["baseChart","","type","line",3,"data","options"],["baseChart","","type","bar",3,"data","options"],["mat-card-avatar","",1,"text-indigo-600"],[1,"p-0!"],[1,"overflow-x-auto"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","font-medium",4,"matCellDef"],["matColumnDef","totalRooms"],["mat-cell","",4,"matCellDef"],["matColumnDef","occupiedRooms"],["matColumnDef","availableRooms"],["matColumnDef","occupancyRate"],["matColumnDef","revenue"],["matColumnDef","averageRate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-card-avatar","",1,"text-amber-600"],[1,"grid","grid-cols-4","sm:grid-cols-6","md:grid-cols-8","lg:grid-cols-10","xl:grid-cols-12","gap-3","mb-6"],[1,"relative","p-3","rounded-lg","border-2","text-center","text-sm","font-medium","transition-all","duration-200","hover:scale-105","cursor-pointer",3,"class","matTooltip"],[1,"!mb-4"],[1,"flex","flex-wrap","gap-4","text-sm"],[1,"flex","items-center","gap-2"],[1,"w-4","h-4","rounded","bg-red-100","border","border-red-300"],[1,"text-gray-700"],[1,"w-4","h-4","rounded","bg-green-100","border","border-green-300"],[1,"w-4","h-4","rounded","bg-gray-100","border","border-gray-300"],[1,"w-4","h-4","rounded","bg-yellow-100","border","border-yellow-300"],[1,"text-center","text-sm","text-gray-500"],[1,"text-base","align-text-bottom","mr-1"],[1,"p-4!"],[1,"flex","items-center","justify-between"],[1,"text-xs","font-medium","text-blue-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-blue-900"],[1,"w-12","h-12","bg-blue-500","rounded-full","flex","items-center","justify-center"],[1,"text-white"],[1,"text-xs","font-medium","text-purple-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-purple-900"],[1,"w-12","h-12","bg-purple-500","rounded-full","flex","items-center","justify-center"],[1,"text-xs","font-medium","text-red-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-red-900"],[1,"w-12","h-12","bg-red-500","rounded-full","flex","items-center","justify-center"],[1,"text-xs","font-medium","text-green-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-green-900"],[1,"w-12","h-12","bg-green-500","rounded-full","flex","items-center","justify-center"],[1,"text-xs","font-medium","text-orange-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-orange-900"],[1,"w-12","h-12","bg-orange-500","rounded-full","flex","items-center","justify-center"],[1,"text-xs","font-medium","text-teal-600","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-teal-900"],["mat-header-cell",""],["mat-cell","",1,"font-medium"],["mat-cell",""],[1,"text-red-600","font-medium"],[1,"text-green-600","font-medium"],[1,"text-purple-600","font-medium"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"],[1,"relative","p-3","rounded-lg","border-2","text-center","text-sm","font-medium","transition-all","duration-200","hover:scale-105","cursor-pointer",3,"matTooltip"],[1,"text-lg","font-bold"],[1,"text-xs","opacity-75"],[1,"absolute","top-1","right-1"],[1,"text-sm"]],template:function(t,o){if(t&1){let c=j();a(0,"app-page-header",3),S(1,4),a(2,"button",5),x("click",function(){return y(c),b(o.refreshData())}),w(3,gt,1,0,"mat-spinner",6)(4,yt,2,0,"mat-icon"),r(5),n(),a(6,"button",7)(7,"mat-icon"),r(8,"download"),n(),r(9," Export "),a(10,"mat-icon",8),r(11,"arrow_drop_down"),n()(),a(12,"mat-menu",null,0)(14,"button",9),x("click",function(){return y(c),b(o.exportToCSV())}),a(15,"mat-icon"),r(16,"table_chart"),n(),a(17,"span"),r(18,"Export to CSV"),n()(),a(19,"button",9),x("click",function(){return y(c),b(o.exportToPDF())}),a(20,"mat-icon"),r(21,"picture_as_pdf"),n(),a(22,"span"),r(23,"Export to PDF"),n()()(),v(),n(),w(24,bt,2,0,"div",10),w(25,xt,13,1,"mat-card",11),w(26,jt,156,17,"div",12)}if(t&2){let c=U(13);l(2),p("disabled",o.loading()),l(),E(o.loading()?3:4),l(2),$(" ",o.loading()?"Loading...":"Refresh"," "),l(),p("matMenuTriggerFor",c),l(18),E(o.loading()?24:-1),l(),E(o.error()&&!o.loading()?25:-1),l(),E(!o.loading()&&!o.error()?26:-1)}},dependencies:[te,Me,Re,Ce,_e,De,we,Oe,it,ct,be,pe,ye,ue,ge,fe,se,ie,oe,de,me,Ie,Ne,Te,ke,Pe,Fe,$e,Ue,ne,Xe,He,We,ze,Je,Ge,Ye,Ze,Ke,qe,Qe,mt,lt,je,Ve,ve,he,xe,Se,ot,et,Be,Le,rt,tt,at,nt,re,Q,ee,X],styles:["[_nghost-%COMP%]{display:block}"]})};export{dt as OccupancyReportComponent};
