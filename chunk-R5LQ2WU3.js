import{a as he}from"./chunk-5X5SDECG.js";import{a as _e,b as ge}from"./chunk-ZAOMQAJO.js";import{a as ye}from"./chunk-YZQZHEMG.js";import"./chunk-LCNY3JPX.js";import{b as fe}from"./chunk-E4PTFC5Z.js";import"./chunk-OKEXGVJ3.js";import{i as V}from"./chunk-ZKQYDJ5W.js";import{a as de,b as ue}from"./chunk-LCF3SYDV.js";import{d as H}from"./chunk-ZLVLWRZH.js";import"./chunk-TVH27JLT.js";import"./chunk-G4CZ6LK2.js";import"./chunk-I564X6SI.js";import"./chunk-VTDH2LYT.js";import{b as me,c as ce,d as se}from"./chunk-63HT37SK.js";import{a as ae,b as re,c as le,h as oe}from"./chunk-YJCGHVXK.js";import"./chunk-UHBDKNKX.js";import{b as pe}from"./chunk-3ZLH5HUN.js";import{B as ne,b as J,d as m,g as K,h as Q,m as W,n as X,s as Y,t as Z,v as ee,y as te,z as ie}from"./chunk-O5GCTPYR.js";import"./chunk-EGLRIU4H.js";import{a as A,b as L}from"./chunk-5TL46KBL.js";import"./chunk-53AK2UWQ.js";import"./chunk-BFT2MTJY.js";import{a as G,b as $,c as U,f as z,h as j}from"./chunk-JONI64R4.js";import"./chunk-H7INH462.js";import"./chunk-OOL2KACG.js";import"./chunk-KZJMNFJ3.js";import"./chunk-G6I3OKXX.js";import{_ as O,ba as R}from"./chunk-4Z2XUZY2.js";import{e as w,g as D}from"./chunk-F436VINI.js";import{l as q,u as B}from"./chunk-H22US2IH.js";import{Ib as S,Jb as v,Lb as d,Mb as u,Mc as g,Nb as f,Nc as y,Ob as s,Pb as t,Qb as e,Rb as c,Vb as I,Wb as F,ac as x,bb as o,cc as T,fa as p,qb as M,rc as i,sc as _,tc as N}from"./chunk-P5WOETP4.js";import{a as k,b as P}from"./chunk-GAL4ENT6.js";function Se(n,a){n&1&&i(0," Saving... ")}function ve(n,a){if(n&1&&i(0),n&2){let r=T();N(" ",r.isEditing?"Update Policy":"Create Policy"," ")}}function be(n,a){n&1&&(t(0,"mat-error"),i(1,"Policy title is required"),e())}function xe(n,a){n&1&&(t(0,"mat-error"),i(1,"Title must be at least 3 characters"),e())}function Ee(n,a){n&1&&(t(0,"mat-error"),i(1,"Currency is required"),e())}function ke(n,a){n&1&&(t(0,"mat-error"),i(1,"Max guests is required"),e())}function Pe(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}function Me(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}function Ie(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}function Fe(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}function Te(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}function Ne(n,a){if(n&1&&(t(0,"mat-option",25),i(1),g(2,"titlecase"),e()),n&2){let r=a.$implicit;s("value",r),o(),_(y(2,2,r))}}var Ce=class n{fb=p(ie);hotelPolicyService=p(he);route=p(w);router=p(D);snackBar=p(A);storeStore=p(V);policyForm;isSaving=!1;isEditing=!1;policyId=null;internetAccessTypes=["none","wifi","wired"];internetAccessCoverages=["entire_property","public_areas","all_rooms","some_rooms","business_centre"];parkingTypes=["on_site","nearby","none"];parkingReservations=["not_available","not_needed","needed"];petsPolicies=["allowed","not_allowed","by_arrangements","assistive_only"];smokingPolicies=["no_smoking","permitted_areas_only","allowed"];ngOnInit(){this.initializeForm(),this.route.params.subscribe(a=>{a.id&&(this.isEditing=!0,this.policyId=a.id,this.loadPolicy(a.id))})}initializeForm(){this.policyForm=this.fb.group({title:["",[m.required,m.minLength(3)]],currency:["",[m.required,m.minLength(3),m.maxLength(3)]],is_adults_only:[!1],max_count_of_guests:[1,[m.required,m.min(1)]],checkin_from_time:["00:00",m.required],checkin_to_time:["12:00",m.required],checkout_from_time:["15:00",m.required],checkout_to_time:["18:00",m.required],internet_access_type:["wifi",m.required],internet_access_coverage:["entire_property",m.required],internet_access_cost:[null],parking_type:["on_site",m.required],parking_reservation:["needed",m.required],parking_is_private:[!0,m.required],parking_cost:[null],pets_policy:["allowed",m.required],pets_non_refundable_fee:["0",m.required],pets_refundable_deposit:["0",m.required],smoking_policy:["no_smoking",m.required],enhanced_cleaning_practices:[!1],cleaning_practices_description:[""],partner_hygiene_link:[""]})}loadPolicy(a){this.hotelPolicyService.getHotelPolicy(a).subscribe({next:r=>{let l=r.data?.attributes;l&&this.policyForm.patchValue(l)},error:r=>{let l=r.error?.message||"Failed to load policy";this.snackBar.open(l,"Close",{duration:5e3})}})}savePolicy(){if(!this.policyForm.valid){this.snackBar.open("Please fill in all required fields","Close",{duration:3e3});return}this.isSaving=!0;let a=this.policyForm.getRawValue(),r=this.storeStore.selectedStore()?.channex?.propertyId,l=P(k({},a),{property_id:r,internet_access_cost:a.internet_access_cost?String(a.internet_access_cost):null,parking_cost:a.parking_cost?String(a.parking_cost):null,pets_non_refundable_fee:String(a.pets_non_refundable_fee),pets_refundable_deposit:String(a.pets_refundable_deposit)});(this.isEditing&&this.policyId?this.hotelPolicyService.updateHotelPolicy(this.policyId,l):this.hotelPolicyService.createHotelPolicy(l)).subscribe({next:()=>{this.isSaving=!1;let C=this.isEditing?"Policy updated successfully":"Policy created successfully";this.snackBar.open(C,"Close",{duration:3e3}),this.cancel()},error:C=>{this.isSaving=!1;let b=C.error?.message||"Failed to save policy";this.snackBar.open(b,"Close",{duration:5e3})}})}cancel(){this.router.navigate(["../../list"],{relativeTo:this.route})}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=M({type:n,selectors:[["app-channel-manager-create-policies"]],decls:172,vars:10,consts:[[3,"title","subtitle"],["actions",""],["matButton","outlined","type","button",1,"px-8",3,"click","disabled"],["matButton","filled","color","primary",1,"px-4",3,"click","disabled"],["appearance","outlined",1,"mt-6"],[1,"mb-3"],[1,"text-xl","font-bold","text-gray-900"],[1,"pt-6"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","title","placeholder","e.g., Standard Policy"],["matInput","","formControlName","currency","placeholder","e.g., USD","maxlength","3"],["matInput","","type","number","formControlName","max_count_of_guests","min","1"],[1,"flex","items-center"],["formControlName","is_adults_only",1,"py-2"],[1,"ml-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],["matInput","","type","time","formControlName","checkin_from_time"],["matInput","","type","time","formControlName","checkin_to_time"],["matInput","","type","time","formControlName","checkout_from_time"],["matInput","","type","time","formControlName","checkout_to_time"],["appearance","outlined",1,"bg-gray-50"],[1,"text-lg","font-semibold","text-gray-900"],["formControlName","internet_access_type"],[3,"value"],["formControlName","internet_access_coverage"],["matInput","","type","number","formControlName","internet_access_cost","step","0.01","placeholder","0.00"],["formControlName","parking_type"],["formControlName","parking_reservation"],["formControlName","parking_is_private",1,"py-2"],["matInput","","type","number","formControlName","parking_cost","step","0.01","placeholder","0.00"],["formControlName","pets_policy"],["matInput","","type","number","formControlName","pets_non_refundable_fee","step","0.01","placeholder","0.00"],["matInput","","type","number","formControlName","pets_refundable_deposit","step","0.01","placeholder","0.00"],["appearance","outline",1,"w-full","md:w-1/2"],["formControlName","smoking_policy"],[1,"space-y-4"],["formControlName","enhanced_cleaning_practices",1,"py-2"],["matInput","","formControlName","cleaning_practices_description","rows","4","placeholder","Describe your cleaning practices..."],["matInput","","formControlName","partner_hygiene_link","type","url","placeholder","https://example.com/hygiene"]],template:function(r,l){if(r&1&&(t(0,"app-page-header",0),I(1,1),t(2,"a",2),x("click",function(){return l.cancel()}),i(3," Cancel "),e(),t(4,"button",3),x("click",function(){return l.savePolicy()}),S(5,Se,1,0)(6,ve,1,1),e(),F(),i(7," >"),e(),t(8,"mat-card",4)(9,"mat-card-header",5)(10,"mat-card-title",6),i(11,"Policy Details"),e()(),t(12,"mat-card-content",7)(13,"form",8),x("ngSubmit",function(){return l.savePolicy()}),t(14,"div",9)(15,"mat-form-field",10)(16,"mat-label"),i(17,"Policy Title"),e(),c(18,"input",11),t(19,"mat-hint"),i(20,"Give your policy a clear title"),e(),S(21,be,2,0,"mat-error"),S(22,xe,2,0,"mat-error"),e(),t(23,"mat-form-field",10)(24,"mat-label"),i(25,"Currency"),e(),c(26,"input",12),t(27,"mat-hint"),i(28,"ISO 4217 currency code"),e(),S(29,Ee,2,0,"mat-error"),e()(),t(30,"div",9)(31,"mat-form-field",10)(32,"mat-label"),i(33,"Max Guests"),e(),c(34,"input",13),t(35,"mat-hint"),i(36,"Maximum number of guests allowed"),e(),S(37,ke,2,0,"mat-error"),e(),t(38,"div",14)(39,"mat-checkbox",15)(40,"span",16),i(41,"Adults Only"),e()()()(),t(42,"div",17)(43,"mat-form-field",10)(44,"mat-label"),i(45,"Check-in From"),e(),c(46,"input",18),t(47,"mat-hint"),i(48,"Check-in start time"),e()(),t(49,"mat-form-field",10)(50,"mat-label"),i(51,"Check-in To"),e(),c(52,"input",19),t(53,"mat-hint"),i(54,"Check-in end time"),e()(),t(55,"mat-form-field",10)(56,"mat-label"),i(57,"Check-out From"),e(),c(58,"input",20),t(59,"mat-hint"),i(60,"Check-out start time"),e()(),t(61,"mat-form-field",10)(62,"mat-label"),i(63,"Check-out To"),e(),c(64,"input",21),t(65,"mat-hint"),i(66,"Check-out end time"),e()()(),t(67,"mat-card",22)(68,"mat-card-header",5)(69,"mat-card-title",23),i(70,"Internet Settings"),e()(),t(71,"mat-card-content",7)(72,"div",9)(73,"mat-form-field",10)(74,"mat-label"),i(75,"Internet Access Type"),e(),t(76,"mat-select",24),u(77,Pe,3,4,"mat-option",25,d),e()(),t(79,"mat-form-field",10)(80,"mat-label"),i(81,"Coverage"),e(),t(82,"mat-select",26),u(83,Me,3,4,"mat-option",25,d),e()(),t(85,"mat-form-field",10)(86,"mat-label"),i(87,"Cost (Optional)"),e(),c(88,"input",27),t(89,"mat-hint"),i(90,"Leave blank if free"),e()()()()(),t(91,"mat-card",22)(92,"mat-card-header",5)(93,"mat-card-title",23),i(94,"Parking Settings"),e()(),t(95,"mat-card-content",7)(96,"div",9)(97,"mat-form-field",10)(98,"mat-label"),i(99,"Parking Type"),e(),t(100,"mat-select",28),u(101,Ie,3,4,"mat-option",25,d),e()(),t(103,"mat-form-field",10)(104,"mat-label"),i(105,"Reservation Required"),e(),t(106,"mat-select",29),u(107,Fe,3,4,"mat-option",25,d),e()(),t(109,"div",14)(110,"mat-checkbox",30)(111,"span",16),i(112,"Private Parking"),e()()(),t(113,"mat-form-field",10)(114,"mat-label"),i(115,"Cost (Optional)"),e(),c(116,"input",31),t(117,"mat-hint"),i(118,"Leave blank if free"),e()()()()(),t(119,"mat-card",22)(120,"mat-card-header",5)(121,"mat-card-title",23),i(122,"Pets Policy"),e()(),t(123,"mat-card-content",7)(124,"div",9)(125,"mat-form-field",10)(126,"mat-label"),i(127,"Pets Policy"),e(),t(128,"mat-select",32),u(129,Te,3,4,"mat-option",25,d),e()(),t(131,"mat-form-field",10)(132,"mat-label"),i(133,"Non-refundable Fee"),e(),c(134,"input",33),e(),t(135,"mat-form-field",10)(136,"mat-label"),i(137,"Refundable Deposit"),e(),c(138,"input",34),e()()()(),t(139,"mat-card",22)(140,"mat-card-header",5)(141,"mat-card-title",23),i(142,"Smoking Policy"),e()(),t(143,"mat-card-content",7)(144,"mat-form-field",35)(145,"mat-label"),i(146,"Smoking Policy"),e(),t(147,"mat-select",36),u(148,Ne,3,4,"mat-option",25,d),e()()()(),t(150,"mat-card",22)(151,"mat-card-header",5)(152,"mat-card-title",23),i(153,"Cleaning & Hygiene"),e()(),t(154,"mat-card-content",7)(155,"div",37)(156,"div",14)(157,"mat-checkbox",38)(158,"span",16),i(159,"Enhanced Cleaning Practices"),e()()(),t(160,"mat-form-field",10)(161,"mat-label"),i(162,"Cleaning Practices Description"),e(),c(163,"textarea",39),t(164,"mat-hint"),i(165,"Optional: Details about your cleaning procedures"),e()(),t(166,"mat-form-field",10)(167,"mat-label"),i(168,"Partner Hygiene Link"),e(),c(169,"input",40),t(170,"mat-hint"),i(171,"Optional: Link to partner hygiene certification or information"),e()()()()()()()()),r&2){let h,C,b,E;s("title",l.isEditing?"Edit Hotel Policy":"Create Hotel Policy")("subtitle",l.isEditing?"Update the policy details":"Create a new hotel policy"),o(2),s("disabled",l.isSaving),o(2),s("disabled",l.isSaving||!l.policyForm.valid),o(),v(l.isSaving?5:6),o(8),s("formGroup",l.policyForm),o(8),v((h=l.policyForm.get("title"))!=null&&h.hasError("required")?21:-1),o(),v((C=l.policyForm.get("title"))!=null&&C.hasError("minlength")?22:-1),o(7),v((b=l.policyForm.get("currency"))!=null&&b.hasError("required")?29:-1),o(8),v((E=l.policyForm.get("max_count_of_guests"))!=null&&E.hasError("required")?37:-1),o(40),f(l.internetAccessTypes),o(6),f(l.internetAccessCoverages),o(18),f(l.parkingTypes),o(6),f(l.parkingReservations),o(22),f(l.petsPolicies),o(19),f(l.smokingPolicies)}},dependencies:[B,ne,W,J,X,K,Q,te,ee,Z,Y,j,G,U,z,$,me,oe,ae,le,re,se,ce,R,O,ue,de,H,fe,pe,ge,_e,L,ye,q],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};export{Ce as ChannelManagerCreatePolicies};
