import{a as ri}from"./chunk-VWN5Z5VW.js";import{a as oi,b as Je,c as Xe}from"./chunk-BZZFFZVC.js";import{a as xe}from"./chunk-73PALN5U.js";import"./chunk-HJ3IDALV.js";import"./chunk-24SFQJLQ.js";import{g as Xt}from"./chunk-M3D2B6CG.js";import{a as ei,b as ti,c as ii,h as ni}from"./chunk-DOHPGGLS.js";import"./chunk-MS4AQ6UA.js";import{k as Jt}from"./chunk-BWWYPHKT.js";import{a as ai,b as Te}from"./chunk-YVYCFWPM.js";import"./chunk-3RK6DDJD.js";import{a as Fe,b as Ae}from"./chunk-LIUA42FM.js";import{a as Nt}from"./chunk-QC5ECH45.js";import"./chunk-CZ2MIGG7.js";import{a as Rt}from"./chunk-JQGESV5S.js";import"./chunk-IX32NZKS.js";import{d as At}from"./chunk-XQNDMVIO.js";import{b as $,c as me,d as ue}from"./chunk-3632TDEK.js";import{a as Se}from"./chunk-I24LUS2H.js";import"./chunk-F5X5MWHG.js";import{c as Yt}from"./chunk-DSRTAZMJ.js";import{a as ve,b as _e,c as Kt,d as we,e as Ie,f as Oe,g as W}from"./chunk-H55FNLX4.js";import{a as Re,b as ge}from"./chunk-H476YUNT.js";import{a as $t,c as Lt,d as Ht,e as Wt}from"./chunk-5XJCC6NP.js";import{a as Qt,b as Zt}from"./chunk-LPJWQZ4I.js";import{a as zt}from"./chunk-EEQKDLYL.js";import"./chunk-JTD73F4Y.js";import{a as se,b as jt,c as de,d as Pe,e as Me,h as ce}from"./chunk-JGZ2V5AL.js";import{B as re,C as qt,D as le,a as Ut,b as J,d as M,g as X,h as ee,m as te,n as ie,p as ne,q as Gt,s as ae,w as ke,x as oe}from"./chunk-CXVWFC6J.js";import"./chunk-JTLCVARK.js";import{g as De}from"./chunk-HA7VDR7W.js";import{a as L,b as H}from"./chunk-7C3RSL2D.js";import"./chunk-OHZSVTBE.js";import"./chunk-VIOSJ367.js";import"./chunk-TEL7Y7UN.js";import{a as Tt,l as Ft,m as Bt,o as Vt,p as Y,q as z}from"./chunk-FSA22CPB.js";import{b as pe}from"./chunk-TS4O77IX.js";import"./chunk-M2YK6UF7.js";import{H as Ye,e as wt,n as It,p as Ot,y as Ke}from"./chunk-BVQK7CK4.js";import"./chunk-AGZJ637K.js";import{a as Pt,c as Mt}from"./chunk-WTFDJO4H.js";import"./chunk-TQDHD3WD.js";import{g as yt,i as Et,j as St,k as kt,o as Ee,p as Dt,s as K,t as j}from"./chunk-DWCYWQVU.js";import{$ as lt,$b as ye,$c as G,Bb as Le,Cc as x,Db as u,Dc as A,Ea as ze,Eb as p,Ec as D,Fb as he,Fc as T,Hb as Q,Ib as Z,Jb as g,Kb as n,Lb as t,Mb as y,Mc as F,Qb as P,Qc as Ct,Ub as h,Vb as c,Wb as xt,Xb as ft,Xc as Qe,Yb as bt,Zb as He,_a as l,_b as Ce,ad as Ze,ba as st,cb as mt,da as je,db as ut,dc as q,ec as fe,fa as b,fc as B,hc as V,ic as a,jc as m,kb as N,kc as _,la as E,lb as pt,lc as U,ma as S,mb as gt,na as dt,pa as ct,qb as w,sb as $e,tb as vt,ub as _t,va as R,vc as ht,zc as We}from"./chunk-5AECHVKR.js";import{a as ot,b as rt,f as k}from"./chunk-EQDQRRRY.js";function pi(r,o){r&1&&a(0," Should equal the full extension cost ")}function gi(r,o){r&1&&a(0," Enter the amount paid so far ")}function vi(r,o){r&1&&a(0," Enter 0 for pending payment ")}function _i(r,o){r&1&&(n(0,"mat-icon",31),a(1,"refresh"),t())}var Be=class r{dialogRef=b(ve);fb=b(re);data=b(_e);submitting=R(!1);paymentForm=this.fb.group({paymentStatus:["paid",[M.required]],paymentMethod:["",[M.required]],paymentAmount:[0,[M.required,M.min(0)]],transactionReference:[""],notes:[""]});ngOnInit(){this.paymentForm.patchValue({paymentAmount:this.data.extensionCost}),this.paymentForm.get("paymentStatus")?.valueChanges.subscribe(o=>{let e=this.paymentForm.get("paymentAmount");o==="paid"?(e?.setValue(this.data.extensionCost),e?.setValidators([M.required,M.min(this.data.extensionCost)])):o==="pending"?(e?.setValue(0),e?.setValidators([M.required,M.min(0),M.max(0)])):e?.setValidators([M.required,M.min(.01),M.max(this.data.extensionCost-.01)]),e?.updateValueAndValidity()})}onSubmit(){if(this.paymentForm.valid){this.submitting.set(!0);let o={paymentStatus:this.paymentForm.value.paymentStatus,paymentMethod:this.paymentForm.value.paymentMethod,paymentAmount:this.paymentForm.value.paymentAmount,transactionReference:this.paymentForm.value.transactionReference||void 0,notes:this.paymentForm.value.notes||void 0};this.dialogRef.close(o)}}onCancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-extension-payment-dialog"]],decls:81,vars:11,consts:[[1,"max-w-md"],[1,"flex","items-center","gap-3","p-6","border-b","border-gray-200"],[1,"text-green-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"bg-gray-50","rounded-lg","p-4","space-y-2"],[1,"font-medium","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-600"],[1,"font-medium","ml-2"],["appearance","outline",1,"w-full"],["formControlName","paymentStatus"],["value","paid"],["value","partial"],["value","pending"],["formControlName","paymentMethod"],["value","cash"],["value","credit_card"],["value","debit_card"],["value","bank_transfer"],["value","mobile_payment"],["value","check"],["value","other"],["matInput","","type","number","step","0.01","min","0","formControlName","paymentAmount","placeholder","0.00",3,"max"],["matSuffix",""],["matInput","","formControlName","transactionReference","placeholder","Optional transaction ID or reference"],["matInput","","rows","3","formControlName","notes","placeholder","Optional notes about the payment..."],[1,"flex","justify-end","gap-3","pt-4","border-t","border-gray-200"],["type","button","mat-button","",1,"px-6",3,"click"],["type","submit","mat-flat-button","","color","primary",1,"px-6",3,"disabled"],[1,"animate-spin","mr-2"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"mat-icon",2),a(3,"payment"),t(),n(4,"div")(5,"h2",3),a(6,"Extension Payment"),t(),n(7,"p",4),a(8,"Update payment information for extension approval"),t()()(),n(9,"form",5),h("ngSubmit",function(){return i.onSubmit()}),n(10,"div",6)(11,"h3",7),a(12,"Extension Details"),t(),n(13,"div",8)(14,"div")(15,"span",9),a(16,"Additional Nights:"),t(),n(17,"span",10),a(18),t()(),n(19,"div")(20,"span",9),a(21,"Extension Cost:"),t(),n(22,"span",10),a(23),x(24,"currency"),t()()()(),n(25,"mat-form-field",11)(26,"mat-label"),a(27,"Payment Status"),t(),n(28,"mat-select",12)(29,"mat-option",13),a(30,"Paid (Full Amount)"),t(),n(31,"mat-option",14),a(32,"Partial Payment"),t(),n(33,"mat-option",15),a(34,"Pending Payment"),t()(),n(35,"mat-hint"),a(36,"Select the current payment status for this extension"),t()(),n(37,"mat-form-field",11)(38,"mat-label"),a(39,"Payment Method"),t(),n(40,"mat-select",16)(41,"mat-option",17),a(42,"Cash"),t(),n(43,"mat-option",18),a(44,"Credit Card"),t(),n(45,"mat-option",19),a(46,"Debit Card"),t(),n(47,"mat-option",20),a(48,"Bank Transfer"),t(),n(49,"mat-option",21),a(50,"Mobile Payment"),t(),n(51,"mat-option",22),a(52,"Check"),t(),n(53,"mat-option",23),a(54,"Other"),t()()(),n(55,"mat-form-field",11)(56,"mat-label"),a(57,"Payment Amount"),t(),y(58,"input",24),n(59,"span",25),a(60),t(),n(61,"mat-hint"),u(62,pi,1,0)(63,gi,1,0)(64,vi,1,0),t()(),n(65,"mat-form-field",11)(66,"mat-label"),a(67,"Transaction Reference"),t(),y(68,"input",26),n(69,"mat-hint"),a(70,"Payment confirmation number, receipt ID, etc."),t()(),n(71,"mat-form-field",11)(72,"mat-label"),a(73,"Payment Notes"),t(),y(74,"textarea",27),t(),n(75,"div",28)(76,"button",29),h("click",function(){return i.onCancel()}),a(77," Cancel "),t(),n(78,"button",30),u(79,_i,2,0,"mat-icon",31),a(80," Approve Extension "),t()()()()),e&2){let s;l(9),g("formGroup",i.paymentForm),l(9),m(i.data.additionalNights),l(5),m(D(24,8,i.data.extensionCost,i.data.currency)),l(35),g("max",i.data.extensionCost),l(2),m(i.data.currency),l(2),p(((s=i.paymentForm.get("paymentStatus"))==null?null:s.value)==="paid"?62:((s=i.paymentForm.get("paymentStatus"))==null?null:s.value)==="partial"?63:64),l(16),g("disabled",i.paymentForm.invalid||i.submitting()),l(),p(i.submitting()?79:-1)}},dependencies:[j,K,le,te,J,ie,X,ee,oe,ke,ne,ae,W,$,ce,se,de,Me,ue,me,Te,ai,At,z,Y,H,L],encapsulation:2})};var xi=["input"],fi=["formField"],bi=["*"],Ve=class{source;value;constructor(o,e){this.source=o,this.value=e}},hi={provide:Ut,useExisting:lt(()=>at),multi:!0},di=new je("MatRadioGroup"),Ci=new je("mat-radio-default-options",{providedIn:"root",factory:yi});function yi(){return{color:"accent",disabledInteractive:!1}}var at=(()=>{class r{_changeDetector=b(Qe);_value=null;_name=b(Ke).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new $e;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(i=>{i.checked=this.value===i.value,i.checked&&(this._selected=i)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Ve(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(i){return new(i||r)};static \u0275dir=gt({type:r,selectors:[["mat-radio-group"]],contentQueries:function(i,s,d){if(i&1&&bt(d,Ue,5),i&2){let f;Ce(f=ye())&&(s._radios=f)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",G],required:[2,"required","required",G],disabledInteractive:[2,"disabledInteractive","disabledInteractive",G]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[ht([hi,{provide:di,useExisting:r}])]})}return r})(),Ue=(()=>{class r{_elementRef=b(ze);_changeDetector=b(Qe);_focusMonitor=b(It);_radioDispatcher=b(zt);_defaultOptions=b(Ci,{optional:!0});_ngZone=b(vt);_renderer=b(mt);_uniqueId=b(Ke).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){e!==this._required&&this._changeDetector.markForCheck(),this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new $e;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations=wt();_injector=b(ct);constructor(){b(Ot).load(Tt);let e=b(di,{optional:!0}),i=b(new Ct("tabindex"),{optional:!0});this.radioGroup=e,this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,i&&(this.tabIndex=Ze(i,0))}focus(e,i){i?this._focusMonitor.focusVia(this._inputElement,i,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,i)=>{e!==this.id&&i===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Ve(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let i=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),i&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,i;if(!e||!e.selected||this.disabled?i=this.tabIndex:i=e.selected===this?this.tabIndex:-1,i!==this._previousTabIndex){let s=this._inputElement?.nativeElement;s&&(s.setAttribute("tabindex",i+""),this._previousTabIndex=i,_t(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===s&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===s&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=N({type:r,selectors:[["mat-radio-button"]],viewQuery:function(i,s){if(i&1&&(He(xi,5),He(fi,7,ze)),i&2){let d;Ce(d=ye())&&(s._inputElement=d.first),Ce(d=ye())&&(s._rippleTrigger=d.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(i,s){i&1&&h("focus",function(){return s._inputElement.nativeElement.focus()}),i&2&&(Le("id",s.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),B("mat-primary",s.color==="primary")("mat-accent",s.color==="accent")("mat-warn",s.color==="warn")("mat-mdc-radio-checked",s.checked)("mat-mdc-radio-disabled",s.disabled)("mat-mdc-radio-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",G],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Ze(e)],checked:[2,"checked","checked",G],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",G],required:[2,"required","required",G],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",G]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:bi,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(i,s){if(i&1){let d=P();xt(),n(0,"div",2,0)(2,"div",3)(3,"div",4),h("click",function(C){return E(d),S(s._onTouchTargetClick(C))}),t(),n(4,"input",5,1),h("change",function(C){return E(d),S(s._onInputInteraction(C))}),t(),n(6,"div",6),y(7,"div",7)(8,"div",8),t(),n(9,"div",9),y(10,"div",10),t()(),n(11,"label",11),ft(12),t()()}i&2&&(g("labelPosition",s.labelPosition),l(2),B("mdc-radio--disabled",s.disabled),l(2),g("id",s.inputId)("checked",s.checked)("disabled",s.disabled&&!s.disabledInteractive)("required",s.required),Le("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),l(5),g("matRippleTrigger",s._rippleTrigger.nativeElement)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0),l(2),g("for",s.inputId))},dependencies:[Ft,Rt],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return r})(),ci=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275mod=pt({type:r});static \u0275inj=st({imports:[Ye,Bt,Ue,Ye]})}return r})();function Di(r,o){r&1&&(n(0,"mat-error"),a(1," New check-out date is required "),t())}function Pi(r,o){r&1&&(n(0,"div",30),y(1,"mat-spinner",31),n(2,"span",32),a(3,"Checking availability..."),t()())}function Mi(r,o){if(r&1&&(n(0,"div",64)(1,"mat-icon",65),a(2,"savings"),t(),a(3),t()),r&2){let e=c(5);l(3),_(" Save ",e.formatCurrency(e.getDiscountAmount())," per night ")}}function Ri(r,o){r&1&&(n(0,"mat-error"),a(1," Discounted rate is required "),t())}function wi(r,o){r&1&&(n(0,"mat-error"),a(1," Rate must be greater than 0 "),t())}function Ii(r,o){r&1&&(n(0,"mat-error"),a(1," Rate cannot be higher than the original rate "),t())}function Oi(r,o){if(r&1&&(n(0,"div",66)(1,"mat-form-field",15)(2,"mat-label"),a(3,"Discounted Rate per Night"),t(),y(4,"input",67),n(5,"span",68),a(6),t(),n(7,"mat-hint"),a(8),t(),w(9,Ri,2,0,"mat-error",18)(10,wi,2,0,"mat-error",18)(11,Ii,2,0,"mat-error",18),t()()),r&2){let e,i,s,d,f,C=c(5);l(4),g("max",(e=C.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.originalRate),l(2),_("",((i=C.storeStore.selectedStore())==null?null:i.currency)||"$","\xA0"),l(2),_("Rate must be less than or equal to ",C.formatCurrency(((s=C.availability())==null||s.pricingBreakdown==null?null:s.pricingBreakdown.originalRate)||0)),l(),g("ngIf",(d=C.extensionForm.get("discountedRate"))==null?null:d.hasError("required")),l(),g("ngIf",(f=C.extensionForm.get("discountedRate"))==null?null:f.hasError("min")),l(),g("ngIf",!C.validateDiscountedRate())}}function Ti(r,o){if(r&1&&(n(0,"div",69),a(1),t()),r&2){let e,i=c(5);l(),_(" Total Savings: ",i.formatCurrency(i.getDiscountAmount()*(((e=i.availability())==null?null:e.extensionDays)||0))," ")}}function Fi(r,o){if(r&1&&(n(0,"div",41)(1,"div",42)(2,"label",14),a(3,"Choose Rate Option:"),t(),n(4,"div",43),a(5,"2 options available"),t()(),n(6,"mat-radio-group",44)(7,"div",45)(8,"mat-radio-button",46)(9,"div",47),a(10," ORIGINAL "),t(),n(11,"div",48)(12,"div",49)(13,"div",50),a(14,"Same Rate"),t(),n(15,"div",51),a(16,"Continue with the original room rate"),t()(),n(17,"div",52)(18,"div",53),a(19),t(),n(20,"div",43),a(21,"per night"),t()()()()(),n(22,"div",45)(23,"mat-radio-button",54)(24,"div",48)(25,"div",49)(26,"div",55),a(27,"Discounted Rate"),t(),n(28,"div",56),a(29,"Apply a custom discount to the original rate"),t(),w(30,Mi,4,1,"div",57),t(),n(31,"div",52)(32,"div",58),a(33),t(),n(34,"div",43),a(35,"per night"),t()()()()()(),w(36,Oi,12,6,"div",59),n(37,"div",60)(38,"div",61)(39,"div")(40,"div",14),a(41,"Total Extension Cost"),t(),n(42,"div",43),a(43),t(),w(44,Ti,2,1,"div",62),t(),n(45,"div",63),a(46),t()()()()),r&2){let e,i,s,d=c(4);l(19),_(" ",d.formatCurrency(((e=d.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.originalRate)||0)," "),l(11),g("ngIf",d.getDiscountAmount()>0),l(3),_(" ",d.formatCurrency(d.getSelectedRate())," "),l(3),g("ngIf",((i=d.extensionForm.get("selectedPricingStrategy"))==null?null:i.value)==="discounted_rate"),l(7),U(" ",(s=d.availability())==null?null:s.extensionDays," nights \xD7 ",d.formatCurrency(d.getSelectedRate())," "),l(),g("ngIf",d.getDiscountAmount()>0),l(2),_(" ",d.formatCurrency(d.getTotalCost())," ")}}function Ai(r,o){if(r&1&&(n(0,"div",86)(1,"span",75),a(2),t(),n(3,"span",76),a(4),t()()),r&2){let e=o.$implicit,i=c(6);l(2),_("",i.getModifierDisplayName(e),":"),l(),V(i.getModifierValueClass(e)),l(),_(" ",i.getModifierValueDisplay(e)," ")}}function Bi(r,o){if(r&1&&(n(0,"div",9)(1,"div",84),a(2,"ADJUSTMENTS:"),t(),w(3,Ai,5,4,"div",85),t()),r&2){let e,i=c(5);l(3),g("ngForOf",(e=i.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.appliedModifiers)}}function Ni(r,o){if(r&1&&(n(0,"div",70)(1,"h5",71)(2,"mat-icon",72),a(3,"receipt"),t(),a(4," Pricing Breakdown "),t(),n(5,"div",73)(6,"div",74)(7,"span",75),a(8,"Base Rate per Night:"),t(),n(9,"span",76),a(10),t()(),w(11,Bi,4,1,"div",77),n(12,"div",78)(13,"div",79)(14,"span"),a(15,"Final Rate per Night:"),t(),n(16,"span",80),a(17),t()()(),n(18,"div",81)(19,"div",61)(20,"span",82),a(21,"Total Extension Cost:"),t(),n(22,"span",83),a(23),t()()()()()),r&2){let e,i,s,d,f=c(4);l(10),m(f.formatCurrency(((e=f.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.baseRatePerNight)||0)),l(),g("ngIf",(i=f.availability())==null||i.pricingBreakdown==null||i.pricingBreakdown.appliedModifiers==null?null:i.pricingBreakdown.appliedModifiers.length),l(6),m(f.formatCurrency(((s=f.availability())==null||s.pricingBreakdown==null?null:s.pricingBreakdown.finalRatePerNight)||0)),l(6),m(f.formatCurrency(((d=f.availability())==null?null:d.estimatedCost)||0))}}function Vi(r,o){if(r&1&&(n(0,"div",27)(1,"div",37)(2,"div",9)(3,"div",10),a(4,"Additional Nights"),t(),n(5,"div",38),a(6),t()(),n(7,"div",9)(8,"div",10),a(9,"Extension Days"),t(),n(10,"div",38),a(11),t()()(),w(12,Fi,47,8,"div",39)(13,Ni,24,4,"div",40),t()),r&2){let e,i,s,d,f=c(3);l(6),m((e=f.availability())==null?null:e.maxExtensionNights),l(5),m((i=f.availability())==null?null:i.extensionDays),l(),g("ngIf",(s=f.availability())==null||s.pricingBreakdown==null?null:s.pricingBreakdown.originalRate),l(),g("ngIf",(d=f.availability())==null?null:d.pricingBreakdown)}}function Ui(r,o){r&1&&(n(0,"div",87)(1,"mat-icon",88),a(2,"warning"),t(),n(3,"div",89)(4,"div",76),a(5,"Room conflicts prevent extension beyond this date"),t(),n(6,"div",90),a(7,"Please choose an earlier date or check with front desk for alternative options."),t()()())}function Gi(r,o){if(r&1&&(n(0,"div",33)(1,"div",34)(2,"mat-icon"),a(3),t(),n(4,"h4",35),a(5),t()(),w(6,Vi,14,4,"div",19)(7,Ui,8,0,"div",36),t()),r&2){let e,i,s,d,f,C,I,O=c(2);V((e=O.availability())!=null&&e.isAvailable?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),l(2),V((i=O.availability())!=null&&i.isAvailable?"text-green-600":"text-red-600"),l(),_(" ",(s=O.availability())!=null&&s.isAvailable?"check_circle":"cancel"," "),l(),V((d=O.availability())!=null&&d.isAvailable?"text-green-800":"text-red-800"),l(),_(" ",(f=O.availability())!=null&&f.isAvailable?"Extension Available":"Extension Unavailable"," "),l(),g("ngIf",(C=O.availability())==null?null:C.isAvailable),l(),g("ngIf",!((I=O.availability())!=null&&I.isAvailable)&&((I=O.availability())==null||I.conflictingReservations==null?null:I.conflictingReservations.length))}}function qi(r,o){if(r&1&&(n(0,"div",27),w(1,Pi,4,0,"div",28)(2,Gi,8,10,"div",29),t()),r&2){let e=c();l(),g("ngIf",e.availabilityChecking()),l(),g("ngIf",e.availability()&&!e.availabilityChecking())}}function ji(r,o){if(r&1&&(n(0,"div",91)(1,"mat-icon",92),a(2,"error"),t(),n(3,"div",93)(4,"div",76),a(5,"Extension Request Failed"),t(),n(6,"div"),a(7),t()()()),r&2){let e=c();l(7),m(e.errorMessage())}}function zi(r,o){r&1&&y(0,"mat-spinner",94)}function $i(r,o){r&1&&(n(0,"span"),a(1,"Request Extension"),t())}function Li(r,o){r&1&&(n(0,"span"),a(1,"Processing..."),t())}var Ge=class r{dialogRef=b(ve);data=b(_e);fb=b(re);reservationService=b(xe);storeStore=b(pe);extensionForm;isLoading=R(!1);availabilityChecking=R(!1);availability=R(null);errorMessage=R("");constructor(){let o=new Date(this.data.currentCheckOutDate);o.setDate(o.getDate()+1),this.extensionForm=this.fb.group({newCheckOutDate:["",[M.required]],selectedPricingStrategy:["same_rate",M.required],discountedRate:[{value:"",disabled:!0}],notes:[""]}),this.minExtensionDate=o,this.extensionForm.get("selectedPricingStrategy")?.valueChanges.subscribe(e=>{this.onPricingStrategyChange(e)})}minExtensionDate;get reservation(){return this.data.reservation}get currentCheckOutDate(){return this.data.currentCheckOutDate}get selectedStore(){return this.storeStore.selectedStore}formatCurrency(o){let i=this.selectedStore()?.currency||"USD";return`${{USD:"$",EUR:"\u20AC",GBP:"\xA3",NGN:"\u20A6",GHS:"\u20B5",KES:"KSh",ZAR:"R",CAD:"C$",AUD:"A$"}[i]||i+" "}${o.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}getPricingStrategyDisplayName(o){return{same_rate:"Original Booking Rate",current_rate:"Current Room Rate",extension_rate:"Extension Rate",dynamic_rate:"Dynamic Pricing",loyalty_rate:"Loyalty Rate"}[o]||o}getModifierDisplayName(o){if(o.type==="percentage"){let e=((o.value-1)*100).toFixed(0);return e>="0"?`+${e}%`:`${e}%`}else return`${o.value>0?"+":""}${this.formatCurrency(o.value)}`}onDateChange(){return k(this,null,function*(){let o=this.extensionForm.get("newCheckOutDate")?.value;o&&o>this.currentCheckOutDate?yield this.checkAvailability():this.availability.set(null)})}checkAvailability(){return k(this,null,function*(){let o=this.extensionForm.get("newCheckOutDate")?.value;if(o){this.availabilityChecking.set(!0),this.errorMessage.set("");try{let e=yield this.reservationService.checkExtensionAvailability(this.reservation._id,o.toISOString()).toPromise();this.availability.set(e)}catch(e){this.errorMessage.set(e.message||"Failed to check availability"),this.availability.set(null)}finally{this.availabilityChecking.set(!1)}}})}calculateEstimatedCost(o){return this.calculateNights(o)*100}calculateNights(o){let e=o.getTime()-this.currentCheckOutDate.getTime();return Math.ceil(e/(1e3*3600*24))}submitExtension(){return k(this,null,function*(){if(!this.extensionForm.valid){this.markFormGroupTouched();return}if(!this.availability()?.isAvailable){this.errorMessage.set("Extension is not available for the selected dates");return}this.isLoading.set(!0),this.errorMessage.set("");try{let e=this.extensionForm.value,i=this.calculateNights(e.newCheckOutDate),s={newCheckOutDate:e.newCheckOutDate.toISOString(),additionalNights:i,selectedPricingStrategy:e.selectedPricingStrategy,selectedRate:this.getSelectedRate(),discountedRate:e.selectedPricingStrategy==="discounted_rate"?this.getDiscountedRateValue():null,totalCost:this.getTotalCost(),notes:e.notes||""},d=yield this.reservationService.requestExtension(this.reservation._id,s).toPromise();this.dialogRef.close({success:!0,extension:d?.extension})}catch(e){this.errorMessage.set(e.message||"Failed to request extension")}finally{this.isLoading.set(!1)}})}markFormGroupTouched(){Object.keys(this.extensionForm.controls).forEach(o=>{this.extensionForm.get(o)?.markAsTouched()})}getModifierValueDisplay(o){return o.type==="percentage"?`${o.value>0?"+":""}${o.value}%`:`${o.value>0?"+":""}${this.formatCurrency(o.value)}`}getModifierValueClass(o){return o.value>0?"text-red-600 font-medium":"text-green-600 font-medium"}getModifierDescription(o){let e={seasonal:"Applied based on current season",loyalty:"Discount for loyalty program members",length_of_stay:"Discount for extended stays",last_minute:"Discount for booking within 24 hours",occupancy:"Rate adjusted based on current occupancy levels",weekend:"Additional charge for weekend stays",holiday:"Premium rate during holiday periods"};return o.description||e[o.type]||""}get rateOptions(){let o=this.availability()?.pricingBreakdown;return!o||!o.originalRate?[]:[{id:"same_rate",name:"Same Rate",description:"Continue with the original room rate",rate:o.originalRate,isRecommended:!0,badge:"ORIGINAL",savings:0},{id:"discounted_rate",name:"Discounted Rate",description:"Apply a custom discount to the original rate",rate:this.getDiscountedRateValue()||o.originalRate,isRecommended:!1,badge:null,savings:this.getDiscountAmount()}]}getDiscountedRateValue(){let o=this.extensionForm.get("discountedRate")?.value;return o?parseFloat(o):0}getDiscountAmount(){let o=this.availability()?.pricingBreakdown?.originalRate||0,e=this.getDiscountedRateValue();return e>0?Math.max(0,o-e):0}getSelectedRate(){let o=this.extensionForm.get("selectedPricingStrategy")?.value;if(o==="same_rate")return this.availability()?.pricingBreakdown?.originalRate||0;if(o==="discounted_rate"){let e=this.getDiscountedRateValue();return e>0?e:this.availability()?.pricingBreakdown?.originalRate||0}return 0}getTotalCost(){let o=this.availability()?.extensionDays||0,e=this.getSelectedRate();return o*e}getSavings(o){return o.savings||0}hasSavings(o){return(o.savings||0)>0}onPricingStrategyChange(o){let e=this.extensionForm.get("discountedRate");if(o==="discounted_rate"){e?.enable(),e?.setValidators([M.required,M.min(1)]);let i=this.availability()?.pricingBreakdown?.originalRate||0;e?.setValue(i)}else e?.disable(),e?.clearValidators(),e?.setValue("");e?.updateValueAndValidity()}validateDiscountedRate(){if(this.extensionForm.get("selectedPricingStrategy")?.value==="discounted_rate"){let e=this.availability()?.pricingBreakdown?.originalRate||0,i=this.getDiscountedRateValue();return i>0&&i<=e}return!0}onCancel(){this.dialogRef.close({success:!1})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-extension-dialog"]],decls:59,vars:20,consts:[["picker",""],["mat-dialog-title","",1,"flex","items-center","gap-3","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-800","m-0"],[1,"text-sm","text-gray-600","m-0","mt-1"],[1,"py-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"text-sm","font-medium","text-gray-700","mb-3","flex","items-center","gap-2"],[1,"text-gray-600","!text-base"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"space-y-1"],[1,"text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"text-sm","text-gray-900"],[1,"space-y-6",3,"formGroup"],[1,"space-y-2"],[1,"text-sm","font-medium","text-gray-700"],["appearance","outline",1,"w-full"],["matInput","","formControlName","newCheckOutDate","placeholder","Choose date",3,"dateChange","matDatepicker","min"],["matIconSuffix","",3,"for"],[4,"ngIf"],["class","space-y-4",4,"ngIf"],["matInput","","formControlName","notes","rows","3","placeholder","Add any special requests or notes for the extension"],["class","flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-md",4,"ngIf"],[1,"flex","justify-end","gap-3","pt-6","border-t","border-gray-200","mt-6"],["mat-button","","type","button",1,"px-4","py-2",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",1,"px-6","py-2","min-w-[140px]",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2"],["diameter","16",4,"ngIf"],[1,"space-y-4"],["class","flex items-center justify-center gap-3 py-8",4,"ngIf"],["class","border rounded-lg p-4",3,"class",4,"ngIf"],[1,"flex","items-center","justify-center","gap-3","py-8"],["diameter","24"],[1,"text-sm","text-gray-600"],[1,"border","rounded-lg","p-4"],[1,"flex","items-center","gap-3","mb-4"],[1,"text-base","font-medium"],["class","flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-md",4,"ngIf"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-900","font-semibold"],["class","space-y-4 border-t pt-4",4,"ngIf"],["class","bg-white rounded-md p-4 border border-gray-200",4,"ngIf"],[1,"space-y-4","border-t","pt-4"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-gray-500"],["formControlName","selectedPricingStrategy",1,"space-y-3"],[1,"relative"],["value","same_rate",1,"w-full","block","p-4","border","border-blue-200","bg-blue-50","rounded-lg","hover:bg-blue-100","transition-colors"],[1,"absolute","top-2","right-2","px-2","py-1","text-xs","font-bold","rounded-full","bg-blue-100","text-blue-800"],[1,"flex","items-start","justify-between","mt-1"],[1,"flex-1","min-w-0","pr-4"],[1,"text-sm","font-semibold","text-blue-900"],[1,"text-xs","mt-1","text-blue-700"],[1,"text-right"],[1,"text-lg","font-bold","text-blue-600"],["value","discounted_rate",1,"w-full","block","p-4","border","border-green-200","bg-green-50","rounded-lg","hover:bg-green-100","transition-colors"],[1,"text-sm","font-semibold","text-green-900"],[1,"text-xs","mt-1","text-green-700"],["class","inline-flex items-center mt-2 px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",4,"ngIf"],[1,"text-lg","font-bold","text-green-600"],["class","mt-4",4,"ngIf"],[1,"bg-gray-100","rounded-lg","p-4","mt-4"],[1,"flex","justify-between","items-center"],["class","text-xs text-green-600 font-medium mt-1",4,"ngIf"],[1,"text-xl","font-bold","text-blue-600"],[1,"inline-flex","items-center","mt-2","px-2","py-1","bg-green-100","text-green-800","text-xs","font-medium","rounded-full"],[1,"!text-xs","mr-1"],[1,"mt-4"],["matInput","","type","number","min","1","step","0.01","formControlName","discountedRate","placeholder","Enter discounted rate",3,"max"],["matTextPrefix",""],[1,"text-xs","text-green-600","font-medium","mt-1"],[1,"bg-white","rounded-md","p-4","border","border-gray-200"],[1,"text-sm","font-medium","text-gray-900","mb-3","flex","items-center","gap-2"],[1,"!text-base","text-blue-600"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium"],["class","space-y-1",4,"ngIf"],[1,"border-t","pt-2","mt-3"],[1,"flex","justify-between","font-semibold"],[1,"text-blue-600"],[1,"bg-blue-50","rounded","p-2","mt-3"],[1,"font-semibold","text-blue-900"],[1,"text-lg","font-bold","text-blue-700"],[1,"text-xs","font-medium","text-gray-500","mt-2","mb-1"],["class","flex justify-between text-xs",4,"ngFor","ngForOf"],[1,"flex","justify-between","text-xs"],[1,"flex","items-start","gap-3","p-3","bg-amber-50","border","border-amber-200","rounded-md"],[1,"text-amber-600","!text-base","mt-0.5"],[1,"text-sm","text-amber-800"],[1,"text-xs","mt-1"],[1,"flex","items-start","gap-3","p-4","bg-red-50","border","border-red-200","rounded-md"],[1,"text-red-600","!text-base","mt-0.5"],[1,"text-sm","text-red-800"],["diameter","16"]],template:function(e,i){if(e&1){let s=P();n(0,"div",1)(1,"div")(2,"span",2),a(3,"Extend Reservation"),t(),n(4,"p",3),a(5),t()()(),n(6,"mat-dialog-content",4)(7,"div",5)(8,"h3",6)(9,"mat-icon",7),a(10,"info"),t(),a(11," Current Reservation Details "),t(),n(12,"div",8)(13,"div",9)(14,"div",10),a(15,"Check-out Date"),t(),n(16,"div",11),a(17),x(18,"date"),t()(),n(19,"div",9)(20,"div",10),a(21,"Room(s)"),t(),n(22,"div",11),a(23),t()(),n(24,"div",9)(25,"div",10),a(26,"Confirmation"),t(),n(27,"div",11),a(28),t()()()(),n(29,"form",12)(30,"div",13)(31,"label",14),a(32,"New Check-out Date"),t(),n(33,"mat-form-field",15)(34,"mat-label"),a(35,"Select new check-out date"),t(),n(36,"input",16),h("dateChange",function(){return E(s),S(i.onDateChange())}),t(),y(37,"mat-datepicker-toggle",17)(38,"mat-datepicker",null,0),w(40,Di,2,0,"mat-error",18),t()(),w(41,qi,3,2,"div",19),n(42,"div",13)(43,"label",14),a(44,"Notes (Optional)"),t(),n(45,"mat-form-field",15)(46,"mat-label"),a(47,"Special requests or notes"),t(),n(48,"textarea",20),a(49,"        "),t()()(),w(50,ji,8,1,"div",21),t()(),n(51,"mat-dialog-actions",22)(52,"button",23),h("click",function(){return E(s),S(i.onCancel())}),a(53," Cancel "),t(),n(54,"button",24),h("click",function(){return E(s),S(i.submitExtension())}),n(55,"div",25),w(56,zi,1,0,"mat-spinner",26)(57,$i,2,0,"span",18)(58,Li,2,0,"span",18),t()()()}if(e&2){let s,d,f,C=q(39);l(5),U(" Request extension for ",i.reservation==null||i.reservation.guestDetails==null||i.reservation.guestDetails.primaryGuest==null?null:i.reservation.guestDetails.primaryGuest.firstName," ",i.reservation==null||i.reservation.guestDetails==null||i.reservation.guestDetails.primaryGuest==null?null:i.reservation.guestDetails.primaryGuest.lastName," "),l(12),m(D(18,17,i.currentCheckOutDate,"mediumDate")),l(6),_("",i.reservation==null||i.reservation.rooms==null?null:i.reservation.rooms.length," room(s)"),l(5),m(i.reservation==null?null:i.reservation.confirmationNumber),l(),g("formGroup",i.extensionForm),l(7),g("matDatepicker",C)("min",i.minExtensionDate),l(),g("for",C),l(3),g("ngIf",(s=i.extensionForm.get("newCheckOutDate"))==null?null:s.hasError("required")),l(),g("ngIf",(d=i.extensionForm.get("newCheckOutDate"))==null?null:d.value),l(9),g("ngIf",i.errorMessage()),l(2),g("disabled",i.isLoading()),l(2),g("disabled",!i.extensionForm.valid||!((f=i.availability())!=null&&f.isAvailable)||i.isLoading()),l(2),g("ngIf",i.isLoading()),l(),g("ngIf",!i.isLoading()),l(),g("ngIf",i.isLoading())}},dependencies:[j,St,kt,Dt,qt,te,J,ie,X,ee,oe,ke,le,ne,ae,W,we,Oe,Ie,$,ce,se,de,jt,Pe,Me,ue,me,z,Y,ni,ei,ti,ii,Nt,Ae,Fe,H,L,De,ge,ci,at,Ue],styles:[".mat-mdc-dialog-container[_ngcontent-%COMP%]{--mdc-dialog-container-color: white;--mdc-dialog-supporting-text-color: #374151}.mat-mdc-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]   .mdc-radio__native-control[_ngcontent-%COMP%]:enabled:checked + .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__outer-circle[_ngcontent-%COMP%]{border-color:#2563eb}.mat-mdc-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]   .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__inner-circle[_ngcontent-%COMP%]{border-color:#2563eb;background-color:#2563eb}.mat-mdc-radio-button[_ngcontent-%COMP%]:hover   .mdc-radio__native-control[_ngcontent-%COMP%]:enabled:not(:checked) + .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__outer-circle[_ngcontent-%COMP%]{border-color:#3b82f6}.mat-mdc-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:12px 0}@media (max-width: 640px){.mat-mdc-dialog-container[_ngcontent-%COMP%]{margin:16px;width:calc(100vw - 32px);max-width:none}}"]})};function Wi(r,o){if(r&1&&(n(0,"mat-form-field",7)(1,"mat-label"),a(2,"Service Fee"),t(),y(3,"input",46),n(4,"span",9),a(5),t()()),r&2){let e=c(2);l(5),_("",e.currency,"\xA0")}}function Qi(r,o){if(r&1&&(n(0,"mat-form-field",7)(1,"mat-label"),a(2,"Cleaning Fee"),t(),y(3,"input",47),n(4,"span",9),a(5),t()()),r&2){let e=c(2);l(5),_("",e.currency,"\xA0")}}function Zi(r,o){if(r&1&&(n(0,"mat-form-field",7)(1,"mat-label"),a(2,"Resort Fee"),t(),y(3,"input",48),n(4,"span",9),a(5),t()()),r&2){let e=c(2);l(5),_("",e.currency,"\xA0")}}function Ki(r,o){if(r&1&&(n(0,"mat-form-field",7)(1,"mat-label"),a(2,"Other Fees"),t(),y(3,"input",49),n(4,"span",9),a(5),t()()),r&2){let e=c(2);l(5),_("",e.currency,"\xA0")}}function Yi(r,o){if(r&1&&(n(0,"div",11)(1,"h4",4)(2,"mat-icon",5),a(3,"lock"),t(),a(4," Additional Fees (Read-only) "),t(),n(5,"div",6),u(6,Wi,6,1,"mat-form-field",7),u(7,Qi,6,1,"mat-form-field",7),u(8,Zi,6,1,"mat-form-field",7),u(9,Ki,6,1,"mat-form-field",7),t()()),r&2){let e=c();l(6),p(e.data.reservation.pricing.fees.serviceFee?6:-1),l(),p(e.data.reservation.pricing.fees.cleaningFee?7:-1),l(),p(e.data.reservation.pricing.fees.resortFee?8:-1),l(),p(e.data.reservation.pricing.fees.other?9:-1)}}function Ji(r,o){if(r&1&&(n(0,"div",12)(1,"h4",50)(2,"mat-icon",51),a(3,"lock"),t(),a(4," Extension Charges (Read-only) "),t(),n(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),a(8,"Extension Cost"),t(),y(9,"input",52),n(10,"span",9),a(11),t(),n(12,"mat-hint"),a(13),t()(),n(14,"div",25)(15,"div",53),a(16,"Extension Status"),t(),n(17,"div",45)(18,"mat-icon",54),a(19,"check_circle"),t(),n(20,"span",55),a(21,"Approved & Included"),t()(),n(22,"div",56),a(23," Cannot be modified in pricing dialog "),t()()(),n(24,"div",57)(25,"div",45)(26,"mat-icon",58),a(27,"info"),t(),n(28,"span")(29,"strong"),a(30),t(),a(31," totaling "),n(32,"strong"),a(33),x(34,"currency"),t(),a(35," have been approved and are automatically included in the total. "),t()()()()),r&2){let e=c();l(9),g("value",e.getApprovedExtensionCost()),l(2),_("",e.currency,"\xA0"),l(2),_("",e.getApprovedExtensionNights()," additional nights"),l(17),_("",e.getApprovedExtensionNights()," extension night(s)"),l(3),m(T(34,5,e.getApprovedExtensionCost(),e.currency,"symbol","1.2-2"))}}function Xi(r,o){if(r&1&&(n(0,"div",32)(1,"span",33),a(2),t(),n(3,"span",59),a(4),x(5,"currency"),t()()),r&2){let e=c();l(2),_("Extensions (",e.getApprovedExtensionNights()," nights):"),l(2),_("+",T(5,2,e.getApprovedExtensionCost(),e.currency,"symbol","1.2-2"))}}function en(r,o){r&1&&(n(0,"span",45),dt(),n(1,"svg",60),y(2,"circle",61)(3,"path",62),t(),a(4," Updating... "),t())}function tn(r,o){r&1&&(n(0,"span",45)(1,"mat-icon"),a(2,"save"),t(),a(3," Update Pricing "),t())}var qe=class r{constructor(o){this.data=o;if(this.data.reservation.status==="checked_out"){this.pricingForm=this.fb.group({}),setTimeout(()=>{this.dialogRef.close({confirmed:!1,error:"Cannot edit pricing for checked-out reservations"})});return}let e=this.data.reservation.pricing;this.pricingForm=this.fb.group({subtotal:[{value:e.subtotal||0,disabled:!0}],taxes:[{value:e.taxes||0,disabled:!0}],fees:this.fb.group({serviceFee:[{value:e.fees?.serviceFee||0,disabled:!0}],cleaningFee:[{value:e.fees?.cleaningFee||0,disabled:!0}],resortFee:[{value:e.fees?.resortFee||0,disabled:!0}],other:[{value:e.fees?.other||0,disabled:!0}]}),discounts:this.fb.group({amount:[e.discounts?.amount||0,[M.min(0)]],reason:[e.discounts?.reason||""],code:[e.discounts?.code||""]}),paid:[e.paid||0,[M.min(0)]]}),this.pricingForm.valueChanges.subscribe(()=>{this.calculateTotal()})}fb=b(re);dialogRef=b(ve);reservationService=b(xe);storeStore=b(pe);snackBar=b(Se);pricingForm;loading=R(!1);get currency(){return this.storeStore.selectedStore()?.currency||this.storeStore.selectedStore()?.currencyCode||"USD"}getApprovedExtensionCost(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(e=>e.status==="approved").reduce((e,i)=>e+(i.additionalCost||0),0):0}getApprovedExtensionNights(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(e=>e.status==="approved").reduce((e,i)=>e+(i.additionalNights||0),0):0}hasApprovedExtensions(){return this.getApprovedExtensionCost()>0}get currentTotal(){let o=this.data.reservation.pricing,e=this.pricingForm.value,i=o.subtotal||0,s=o.taxes||0,d=o.fees?.serviceFee||0,f=o.fees?.cleaningFee||0,C=o.fees?.resortFee||0,I=o.fees?.other||0,O=this.getApprovedExtensionCost(),be=e.discounts?.amount||0,v=d+f+C+I;return i+s+v+O-be}get currentBalance(){let o=this.pricingForm.get("paid")?.value||0;return this.currentTotal-o}calculateTotal(){}onCancel(){this.dialogRef.close({success:!1})}onSave(){if(this.pricingForm.invalid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.loading.set(!0);let o=this.pricingForm.value,e=this.data.reservation.pricing,i={subtotal:e.subtotal,taxes:e.taxes,fees:{serviceFee:e.fees?.serviceFee||0,cleaningFee:e.fees?.cleaningFee||0,resortFee:e.fees?.resortFee||0,other:e.fees?.other||0},discounts:{amount:o.discounts.amount,reason:o.discounts.reason,code:o.discounts.code},total:this.currentTotal,paid:o.paid||0,balance:this.currentBalance};this.reservationService.updateReservation(this.data.reservation._id,{pricing:i}).subscribe({next:s=>{this.loading.set(!1),this.snackBar.open("Pricing updated successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.dialogRef.close({success:!0,updatedReservation:s})},error:s=>{this.loading.set(!1),console.error("Error updating pricing:",s),this.snackBar.open(s.message||"Failed to update pricing","Close",{duration:5e3,panelClass:["error-snackbar"]})}})}static \u0275fac=function(e){return new(e||r)(ut(_e))};static \u0275cmp=N({type:r,selectors:[["app-pricing-update-dialog"]],decls:149,vars:86,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"!p-6","!max-h-[70vh]","overflow-y-auto"],[1,"space-y-6",3,"formGroup"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200","mb-6","shadow-sm"],[1,"text-sm","font-semibold","text-gray-700","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-gray-500","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","type","number","formControlName","subtotal","readonly","",1,"!bg-gray-100","!text-gray-600"],["matPrefix",""],["matInput","","type","number","formControlName","taxes","readonly","",1,"!bg-gray-100","!text-gray-600"],["formGroupName","fees",1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200","mb-6","shadow-sm"],[1,"bg-orange-50","rounded-lg","p-4","border","border-orange-200","mb-6","shadow-sm"],[1,"space-y-6"],["formGroupName","discounts",1,"bg-green-50","rounded-lg","p-4","border","border-green-200","shadow-sm","hover:shadow-md","transition-shadow","duration-200"],[1,"text-lg","font-semibold","text-green-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-green-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["matInput","","type","number","formControlName","amount","min","0","step","0.01","placeholder","0.00"],["matInput","","formControlName","reason","placeholder","e.g., Staff discount"],["matInput","","formControlName","code","placeholder","e.g., STAFF10"],[1,"bg-blue-50","rounded-lg","p-4","border","border-blue-200","shadow-sm","hover:shadow-md","transition-shadow","duration-200"],[1,"text-lg","font-semibold","text-blue-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-blue-600"],["matInput","","type","number","formControlName","paid","min","0","step","0.01","placeholder","0.00"],[1,"flex","flex-col","justify-center"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-lg","font-medium"],[1,"bg-gradient-to-br","from-purple-50","to-indigo-50","rounded-lg","p-4","border","border-purple-200","shadow-sm"],[1,"text-lg","font-semibold","text-purple-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-purple-600"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium"],[1,"font-medium","text-green-600"],[1,"my-2"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-gray-900"],[1,"bg-gradient-to-br","from-blue-50","to-cyan-50","rounded-lg","p-4","border","border-blue-200","shadow-sm"],[1,"text-sm","font-semibold","text-blue-900","mb-2","uppercase","tracking-wide"],[1,"text-xs","text-blue-800","space-y-1"],["mat-dialog-actions","",1,"flex","items-center","justify-end","gap-3","!p-6","!m-0","border-t","border-gray-200","bg-gray-50"],["mat-button","",1,"!text-gray-600","hover:!bg-gray-100","!px-6","!py-2","!font-medium","!rounded-lg","transition-colors","duration-200",3,"click","disabled"],["mat-raised-button","","color","primary",1,"!bg-gradient-to-r","!from-purple-600","!to-purple-700","hover:!from-purple-700","hover:!to-purple-800","!text-white","!shadow-lg","hover:!shadow-xl","!px-6","!py-2","!font-semibold","!rounded-lg","transition-all","duration-200","transform","hover:!scale-105","disabled:!opacity-50","disabled:!cursor-not-allowed","disabled:hover:!scale-100",3,"click","disabled"],[1,"flex","items-center","gap-2"],["matInput","","type","number","formControlName","serviceFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","cleaningFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","resortFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","other","readonly","",1,"!bg-gray-100","!text-gray-600"],[1,"text-sm","font-semibold","text-orange-700","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-orange-500","text-lg"],["matInput","","type","number","readonly","",1,"!bg-gray-100","!text-gray-600",3,"value"],[1,"text-sm","text-orange-600","mb-1"],[1,"text-green-600","text-sm"],[1,"text-sm","font-medium","text-green-600"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-3","p-2","bg-orange-100","border","border-orange-200","rounded","text-xs","text-orange-800"],[1,"text-orange-600","text-sm"],[1,"font-medium","text-orange-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,i){if(e&1&&(n(0,"div",0),a(1,` Update Pricing
`),t(),n(2,"div",1)(3,"form",2)(4,"div",3)(5,"h4",4)(6,"mat-icon",5),a(7,"lock"),t(),a(8," Base Pricing (Read-only) "),t(),n(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),a(12,"Subtotal"),t(),y(13,"input",8),n(14,"span",9),a(15),t(),n(16,"mat-hint"),a(17,"Based on room rates and duration"),t()(),n(18,"mat-form-field",7)(19,"mat-label"),a(20,"Taxes"),t(),y(21,"input",10),n(22,"span",9),a(23),t(),n(24,"mat-hint"),a(25,"Calculated from store tax rate"),t()()()(),u(26,Yi,10,4,"div",11),u(27,Ji,36,10,"div",12),n(28,"div",13)(29,"div",14)(30,"h4",15)(31,"mat-icon",16),a(32,"local_offer"),t(),a(33," Discounts (Editable) "),t(),n(34,"div",17)(35,"mat-form-field",7)(36,"mat-label"),a(37,"Discount Amount"),t(),y(38,"input",18),n(39,"span",9),a(40),t(),n(41,"mat-hint"),a(42,"Reduce total amount"),t()(),n(43,"mat-form-field",7)(44,"mat-label"),a(45,"Discount Reason"),t(),y(46,"input",19),t(),n(47,"mat-form-field",7)(48,"mat-label"),a(49,"Discount Code"),t(),y(50,"input",20),t()()(),n(51,"div",21)(52,"h4",22)(53,"mat-icon",23),a(54,"payment"),t(),a(55," Payment Amount (Editable) "),t(),n(56,"div",6)(57,"mat-form-field",7)(58,"mat-label"),a(59,"Amount Paid"),t(),y(60,"input",24),n(61,"span",9),a(62),t(),n(63,"mat-hint"),a(64,"Total amount received from guest"),t()(),n(65,"div",25)(66,"div",26),a(67,"Current Status"),t(),n(68,"div",27),a(69),x(70,"titlecase"),t()()()()(),n(71,"div",28)(72,"h4",29)(73,"mat-icon",30),a(74,"calculate"),t(),a(75," Updated Summary "),t(),n(76,"div",31)(77,"div",32)(78,"span",33),a(79,"Subtotal:"),t(),n(80,"span",34),a(81),x(82,"currency"),t()(),n(83,"div",32)(84,"span",33),a(85,"Taxes:"),t(),n(86,"span",34),a(87),x(88,"currency"),t()(),n(89,"div",32)(90,"span",33),a(91,"Total Fees:"),t(),n(92,"span",34),a(93),x(94,"currency"),t()(),u(95,Xi,6,7,"div",32),n(96,"div",32)(97,"span",33),a(98,"Discount:"),t(),n(99,"span",35),a(100),x(101,"currency"),t()(),y(102,"mat-divider",36),n(103,"div",37)(104,"span",38),a(105,"New Total:"),t(),n(106,"span",38),a(107),x(108,"currency"),t()(),n(109,"div",32)(110,"span",33),a(111,"Amount Paid:"),t(),n(112,"span",35),a(113),x(114,"currency"),t()(),n(115,"div",37)(116,"span"),a(117,"New Balance:"),t(),n(118,"span"),a(119),x(120,"currency"),t()()()(),n(121,"div",39)(122,"h4",40),a(123,"Original Pricing (for reference)"),t(),n(124,"div",41)(125,"div",32)(126,"span"),a(127,"Original Total:"),t(),n(128,"span"),a(129),x(130,"currency"),t()(),n(131,"div",32)(132,"span"),a(133,"Original Balance:"),t(),n(134,"span"),a(135),x(136,"currency"),t()(),n(137,"div",32)(138,"span"),a(139,"Original Amount Paid:"),t(),n(140,"span"),a(141),x(142,"currency"),t()()()()()(),n(143,"div",42)(144,"button",43),h("click",function(){return i.onCancel()}),a(145," Cancel "),t(),n(146,"button",44),h("click",function(){return i.onSave()}),u(147,en,5,0,"span",45)(148,tn,4,0,"span",45),t()()),e&2){let s,d,f,C,I;l(3),g("formGroup",i.pricingForm),l(12),_("",i.currency,"\xA0"),l(8),_("",i.currency,"\xA0"),l(3),p(i.data.reservation.pricing.fees&&(i.data.reservation.pricing.fees.serviceFee||i.data.reservation.pricing.fees.cleaningFee||i.data.reservation.pricing.fees.resortFee||i.data.reservation.pricing.fees.other)?26:-1),l(),p(i.hasApprovedExtensions()?27:-1),l(13),_("",i.currency,"\xA0"),l(22),_("",i.currency,"\xA0"),l(6),B("text-green-600",(i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)==="paid")("text-orange-600",(i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)==="partial")("text-gray-600",(i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)==="pending"),l(),_(" ",A(70,34,(i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)||"pending")," "),l(12),m(T(82,36,(s=i.pricingForm.get("subtotal"))==null?null:s.value,i.currency,"symbol","1.2-2")),l(6),m(T(88,41,(d=i.pricingForm.get("taxes"))==null?null:d.value,i.currency,"symbol","1.2-2")),l(6),m(T(94,46,(((f=i.pricingForm.get("fees.serviceFee"))==null?null:f.value)||0)+(((f=i.pricingForm.get("fees.cleaningFee"))==null?null:f.value)||0)+(((f=i.pricingForm.get("fees.resortFee"))==null?null:f.value)||0)+(((f=i.pricingForm.get("fees.other"))==null?null:f.value)||0),i.currency,"symbol","1.2-2")),l(2),p(i.hasApprovedExtensions()?95:-1),l(5),_("-",T(101,51,(C=i.pricingForm.get("discounts.amount"))==null?null:C.value,i.currency,"symbol","1.2-2")),l(7),m(T(108,56,i.currentTotal,i.currency,"symbol","1.2-2")),l(6),m(T(114,61,(I=i.pricingForm.get("paid"))==null?null:I.value,i.currency,"symbol","1.2-2")),l(2),B("text-red-600",i.currentBalance>0)("text-green-600",i.currentBalance<0)("text-gray-900",i.currentBalance===0),l(4),m(T(120,66,i.currentBalance,i.currency,"symbol","1.2-2")),l(10),m(T(130,71,i.data.reservation.pricing.total,i.currency,"symbol","1.2-2")),l(6),m(T(136,76,i.data.reservation.pricing.balance,i.currency,"symbol","1.2-2")),l(6),m(T(142,81,i.data.reservation.pricing.paid,i.currency,"symbol","1.2-2")),l(3),g("disabled",i.loading()),l(2),g("disabled",i.loading()||i.pricingForm.invalid),l(),p(i.loading()?147:148)}},dependencies:[j,Ee,K,le,te,J,ie,X,ee,oe,ne,ae,Gt,W,we,Oe,Ie,z,Y,ue,me,ce,se,de,Pe,$,H,L,ge,Re],styles:["[_nghost-%COMP%]{display:block}.mat-mdc-dialog-container[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;overflow:visible}.mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;background-color:#f9fafb}.mat-mdc-dialog-content[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;background-color:#f9fafb}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.pricing-summary[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:.5rem;padding:1rem}.pricing-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.pricing-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pricing-summary[_ngcontent-%COMP%]   .summary-row.total-row[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;border-top:2px solid #cbd5e1;padding-top:.75rem;margin-top:.75rem}.reference-pricing[_ngcontent-%COMP%]{background-color:#f0f9ff;border:1px solid #bae6fd;border-radius:.5rem;padding:1rem;font-size:.875rem}.loading-spinner[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}.loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#7c3aed!important}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]:hover{background-color:#6d28d9!important}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af!important;color:#6b7280!important}.mat-mdc-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-color:#ef4444}@media (max-width: 768px){.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-mdc-dialog-container[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"]})};var nn=(r,o,e)=>({"bg-yellow-100 text-yellow-700 border-yellow-200":r,"bg-green-100 text-green-700 border-green-200":o,"bg-red-100 text-red-700 border-red-200":e}),an=(r,o,e)=>({"bg-green-100 text-green-800":r,"bg-yellow-100 text-yellow-800":o,"bg-red-100 text-red-800":e}),ui=(r,o)=>o.value,on=(r,o)=>o._id||r;function rn(r,o){if(r&1&&(n(0,"h1",40),a(1," Reservation Details "),t(),n(2,"p",41),a(3),t()),r&2){let e=c();l(3),_("Confirmation: ",e.reservation().confirmationNumber)}}function ln(r,o){r&1&&(n(0,"h1",40),a(1,"Reservation Details"),t(),n(2,"p",41),a(3,"Loading reservation information..."),t())}function sn(r,o){r&1&&(n(0,"mat-icon",44),a(1,"refresh"),t())}function dn(r,o){if(r&1&&(n(0,"mat-icon",53),a(1),t()),r&2){let e=c(2);fe("color",e.getStatusColor(e.reservation().status)),l(),m(e.getStatusIcon(e.reservation().status))}}function cn(r,o){r&1&&(n(0,"div",24),a(1," No status changes available "),t())}function mn(r,o){if(r&1){let e=P();n(0,"button",54),h("click",function(){let s=E(e).$implicit,d=c(2);return S(d.updateReservationStatus(s.value))}),n(1,"mat-icon",55),a(2),t(),n(3,"span"),a(4),t()()}if(r&2){let e=o.$implicit;l(),fe("color",e.color),l(),m(e.icon),l(2),m(e.label)}}function un(r,o){r&1&&(n(0,"div",48),a(1," \u{1F4A1} Confirm reservation before check-in "),t())}function pn(r,o){r&1&&(n(0,"div",49),a(1," \u{1F4A1} Ready for check-in "),t())}function gn(r,o){if(r&1){let e=P();n(0,"button",56),h("click",function(){E(e);let s=c(2);return S(s.editReservation())}),n(1,"mat-icon",57),a(2,"edit"),t(),a(3," Edit Reservation "),t()}}function vn(r,o){if(r&1){let e=P();n(0,"button",58),h("click",function(){E(e);let s=c(2);return S(s.requestExtension())}),n(1,"mat-icon",57),a(2,"schedule"),t(),a(3," Extend Stay "),t()}if(r&2){let e=c(2);g("disabled",e.statusUpdating())}}function _n(r,o){if(r&1&&(n(0,"div",10)(1,"div",42)(2,"button",43),u(3,sn,2,0,"mat-icon",44)(4,dn,2,3,"mat-icon",45),a(5),x(6,"titlecase"),n(7,"mat-icon",46),a(8,"expand_more"),t()(),n(9,"mat-menu",13,4)(11,"div",22),a(12," Change Status "),t(),u(13,cn,2,0,"div",24),Q(14,mn,5,4,"button",47,ui),u(16,un,2,0,"div",48),u(17,pn,2,0,"div",49),t()(),u(18,gn,4,0,"button",50),u(19,vn,4,1,"button",51),n(20,"button",52)(21,"mat-icon"),a(22,"more_vert"),t()()()),r&2){let e=q(10),i=c(),s=q(15);l(2),fe("background-color",i.getStatusColor(i.reservation().status)+"20")("color",i.getStatusColor(i.reservation().status))("border-color",i.getStatusColor(i.reservation().status)+"40"),g("matMenuTriggerFor",e)("disabled",i.statusUpdating()),l(),p(i.statusUpdating()?3:4),l(2),_(" ",A(6,16,i.reservation().status)," "),l(8),p(i.getAvailableStatusOptions().length===0?13:-1),l(),Z(i.getAvailableStatusOptions()),l(2),p(i.reservation()&&i.reservation().status==="pending"?16:-1),l(),p(i.reservation()&&i.reservation().status==="confirmed"?17:-1),l(),p(i.canEdit()?18:-1),l(),p(i.canRequestExtension()?19:-1),l(),g("matMenuTriggerFor",s)}}function xn(r,o){r&1&&(n(0,"div",11),y(1,"mat-spinner",59),n(2,"span",60),a(3,"Loading reservation details..."),t()())}function fn(r,o){if(r&1){let e=P();n(0,"div",12)(1,"div",61)(2,"div",62)(3,"mat-icon",63),a(4,"error_outline"),t()(),n(5,"h3",64),a(6,"Failed to Load Reservation"),t(),n(7,"p",65),a(8),t(),n(9,"button",66),h("click",function(){E(e);let s=c();return S(s.goBack())}),a(10," Back to Reservations "),t()()()}if(r&2){let e=c();l(8),m(e.error())}}function bn(r,o){if(r&1&&(n(0,"div",41),a(1),t()),r&2){let e=c(2);l(),_("Expected: ",e.reservation().expectedCheckInTime)}}function hn(r,o){if(r&1&&(n(0,"div",41),a(1),t()),r&2){let e=c(2);l(),_("Expected: ",e.reservation().expectedCheckOutTime)}}function Cn(r,o){if(r&1&&(n(0,"div",115)(1,"label",75),a(2,"Notes"),t(),n(3,"div",118),a(4),t()()),r&2){let e=c().$implicit;l(4),m(e.notes)}}function yn(r,o){r&1&&(n(0,"mat-icon",44),a(1,"refresh"),t())}function En(r,o){r&1&&(n(0,"mat-icon",53),a(1,"check_circle"),t())}function Sn(r,o){r&1&&(n(0,"mat-icon",44),a(1,"refresh"),t())}function kn(r,o){r&1&&(n(0,"mat-icon",53),a(1,"cancel"),t())}function Dn(r,o){if(r&1){let e=P();n(0,"div",116)(1,"button",119),h("click",function(){E(e);let s=c().$implicit,d=c(3);return S(d.approveExtension(s._id))}),u(2,yn,2,0,"mat-icon",44)(3,En,2,0,"mat-icon",53),a(4," Approve Extension "),t(),n(5,"button",120),h("click",function(){E(e);let s=c().$implicit,d=c(3);return S(d.rejectExtension(s._id))}),u(6,Sn,2,0,"mat-icon",44)(7,kn,2,0,"mat-icon",53),a(8," Reject Extension "),t()()}if(r&2){let e=c().$implicit,i=c(3);l(),g("disabled",i.processingExtension()===e._id),l(),p(i.processingExtension()===e._id&&i.processingAction()==="approve"?2:3),l(3),g("disabled",i.processingExtension()===e._id),l(),p(i.processingExtension()===e._id&&i.processingAction()==="reject"?6:7)}}function Pn(r,o){if(r&1&&(n(0,"div")(1,"span",91),a(2,"Reference:"),t(),n(3,"span",128),a(4),t()()),r&2){let e=c(3).$implicit;l(4),m(e.paymentInfo.transactionReference)}}function Mn(r,o){if(r&1&&(n(0,"div",127)(1,"span",129),a(2,"Payment Notes:"),t(),n(3,"div",130),a(4),t()()),r&2){let e=c(3).$implicit;l(4),m(e.paymentInfo.notes)}}function Rn(r,o){if(r&1&&(n(0,"div",122)(1,"div",123)(2,"mat-icon",53),a(3,"payment"),t(),n(4,"span",97),a(5,"Payment Information"),t()(),n(6,"div",124)(7,"div")(8,"span",91),a(9,"Status:"),t(),n(10,"span",125),a(11),x(12,"titlecase"),t()(),n(13,"div")(14,"span",91),a(15,"Method:"),t(),n(16,"span",126),a(17),x(18,"titlecase"),t()(),n(19,"div")(20,"span",91),a(21,"Amount:"),t(),n(22,"span",126),a(23),x(24,"currency"),t()(),u(25,Pn,5,1,"div"),t(),u(26,Mn,5,1,"div",127),t()),r&2){let e,i=c(2).$implicit,s=c(3);l(10),g("ngClass",We(13,an,i.paymentInfo.status==="paid",i.paymentInfo.status==="partial",i.paymentInfo.status==="pending")),l(),_(" ",A(12,6,i.paymentInfo.status)," "),l(6),m(A(18,8,i.paymentInfo.method)),l(6),m(D(24,10,i.paymentInfo.amount,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(2),p(i.paymentInfo.transactionReference?25:-1),l(),p(i.paymentInfo.notes?26:-1)}}function wn(r,o){if(r&1&&(n(0,"div",121)(1,"mat-icon",53),a(2,"check_circle"),t(),a(3),t(),u(4,Rn,27,17,"div",122)),r&2){let e=c().$implicit,i=c(3);l(3),_(" Approved on ",i.formatExtensionDate(e.approvedAt)," "),l(),p(e.paymentInfo?4:-1)}}function In(r,o){if(r&1&&(n(0,"div",133),a(1),t()),r&2){let e=c(2).$implicit,i=c(3);l(),_("Rejected on ",i.formatExtensionDate(e.rejectedAt))}}function On(r,o){if(r&1&&(n(0,"div",117)(1,"div",131)(2,"mat-icon",53),a(3,"cancel"),t(),a(4," Rejection Reason "),t(),n(5,"div",132),a(6),t(),u(7,In,2,1,"div",133),t()),r&2){let e=c().$implicit;l(6),m(e.rejectionReason),l(),p(e.rejectedAt?7:-1)}}function Tn(r,o){if(r&1&&(n(0,"div",105)(1,"div",107)(2,"div",10)(3,"div",108)(4,"mat-icon",109),a(5,"hotel_class"),t()(),n(6,"div")(7,"h4",92),a(8,"Extension Request"),t(),n(9,"p",41),a(10),t()()(),n(11,"span",110),a(12),x(13,"titlecase"),t()(),n(14,"div",111)(15,"div")(16,"label",75),a(17,"Original Check-out"),t(),n(18,"div",112),a(19),t()(),n(20,"div")(21,"label",75),a(22,"Extended Check-out"),t(),n(23,"div",113),a(24),t()(),n(25,"div")(26,"label",75),a(27,"Additional Nights"),t(),n(28,"div",112),a(29),t()(),n(30,"div")(31,"label",75),a(32,"Extension Cost"),t(),n(33,"div",114),a(34),x(35,"currency"),t()()(),u(36,Cn,5,1,"div",115),u(37,Dn,9,4,"div",116),u(38,wn,5,2),u(39,On,8,2,"div",117),t()),r&2){let e,i=o.$implicit,s=c(3);l(10),m(s.formatExtensionDate(i.requestedAt)),l(),g("ngClass",We(17,nn,i.status==="pending",i.status==="approved",i.status==="rejected")),l(),_(" ",A(13,12,i.status)," "),l(7),m(s.formatExtensionDate(i.originalCheckOutDate)),l(5),m(s.formatExtensionDate(i.newCheckOutDate)),l(5),U("",i.additionalNights," night",i.additionalNights>1?"s":""),l(5),m(D(35,14,i.additionalCost,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(2),p(i.notes?36:-1),l(),p(i.status==="pending"?37:-1),l(),p(i.status==="approved"&&i.approvedAt?38:-1),l(),p(i.status==="rejected"&&i.rejectionReason?39:-1)}}function Fn(r,o){if(r&1&&(n(0,"div",106)(1,"div",134)(2,"mat-icon",77),a(3,"check_circle"),t(),n(4,"span",135),a(5,"Active Extension"),t()(),n(6,"div",136)(7,"p"),a(8,"Total extension cost: "),n(9,"strong"),a(10),x(11,"currency"),t()(),n(12,"p"),a(13,"Total additional nights: "),n(14,"strong"),a(15),t()()()()),r&2){let e,i=c(3);l(10),m(D(11,2,i.getTotalExtensionCost(),(e=i.storeStore.selectedStore())==null?null:e.currency)),l(5),m(i.getTotalExtensionNights())}}function An(r,o){if(r&1&&(n(0,"div",69)(1,"div",101)(2,"h3",71)(3,"mat-icon",102),a(4,"schedule"),t(),a(5," Stay Extensions "),n(6,"span",103),a(7),t()()(),n(8,"div",73)(9,"div",104),Q(10,Tn,40,21,"div",105,on),t(),u(12,Fn,16,5,"div",106),t()()),r&2){let e=c(2);l(7),U(" ",e.getExtensions().length," Extension",e.getExtensions().length>1?"s":""," "),l(3),Z(e.getExtensions()),l(2),p(e.hasActiveExtension()?12:-1)}}function Bn(r,o){if(r&1&&(n(0,"tr",83)(1,"td",137),a(2),t(),n(3,"td",138),a(4),t(),n(5,"td",138),a(6),t(),n(7,"td",138),a(8),t(),n(9,"td",137),a(10),x(11,"currency"),t()()),r&2){let e,i=o.$implicit,s=c(2);l(2),m(i.roomNumber+" ("+i.name+")"),l(2),m(i.roomType),l(2),m(i.adults),l(2),m(i.children),l(2),m(D(11,5,i.rate,(e=s.storeStore.selectedStore())==null?null:e.currency))}}function Nn(r,o){r&1&&(n(0,"span",87),a(1,"(Locked)"),t())}function Vn(r,o){if(r&1&&(n(0,"div",90)(1,"span",91),a(2,"Service Fee"),t(),n(3,"span",92),a(4),x(5,"currency"),t()()),r&2){let e,i=c(2);l(4),m(D(5,1,(e=i.reservation().pricing.fees)==null?null:e.serviceFee,(e=i.storeStore.selectedStore())==null?null:e.currency))}}function Un(r,o){if(r&1&&(n(0,"div",90)(1,"span",91),a(2,"Cleaning Fee"),t(),n(3,"span",92),a(4),x(5,"currency"),t()()),r&2){let e,i=c(2);l(4),m(D(5,1,(e=i.reservation().pricing.fees)==null?null:e.cleaningFee,(e=i.storeStore.selectedStore())==null?null:e.currency))}}function Gn(r,o){if(r&1&&(n(0,"div",90)(1,"span",91),a(2,"Resort Fee"),t(),n(3,"span",92),a(4),x(5,"currency"),t()()),r&2){let e,i=c(2);l(4),m(D(5,1,(e=i.reservation().pricing.fees)==null?null:e.resortFee,(e=i.storeStore.selectedStore())==null?null:e.currency))}}function qn(r,o){if(r&1&&(n(0,"div",90)(1,"span",91),a(2,"Discount"),t(),n(3,"span",96),a(4),x(5,"currency"),t()()),r&2){let e,i=c(2);l(4),_("-",D(5,1,(e=i.reservation().pricing.discounts)==null?null:e.amount,(e=i.storeStore.selectedStore())==null?null:e.currency))}}function jn(r,o){if(r&1&&(n(0,"div",90)(1,"span",91),a(2),t(),n(3,"span",139),a(4),x(5,"currency"),t()()),r&2){let e,i=c(2);l(2),_("Extensions (",i.getTotalExtensionNights()," nights)"),l(2),_("+",D(5,2,i.getTotalExtensionCost(),(e=i.storeStore.selectedStore())==null?null:e.currency))}}function zn(r,o){r&1&&(n(0,"span",87),a(1,"(Locked)"),t())}function $n(r,o){if(r&1&&(n(0,"button",140)(1,"mat-icon"),a(2,"more_vert"),t()()),r&2){c(3);let e=q(39);g("matMenuTriggerFor",e)}}function Ln(r,o){r&1&&(n(0,"div",141)(1,"mat-icon"),a(2,"lock"),t()())}function Hn(r,o){r&1&&(n(0,"mat-icon",143),a(1,"refresh"),t())}function Wn(r,o){if(r&1&&(n(0,"div")(1,"label",75),a(2,"Last Transaction"),t(),n(3,"div",112),a(4),x(5,"currency"),t()()),r&2){let e,i=c(3);l(4),U(" ",D(5,2,i.transactionHistory()[i.transactionHistory().length-1].amount,(e=i.storeStore.selectedStore())==null?null:e.currency)," on ",i.formatDateTime(i.transactionHistory()[i.transactionHistory().length-1].date)," ")}}function Qn(r,o){if(r&1&&(n(0,"div",69)(1,"div",70)(2,"div",86)(3,"h3",71)(4,"mat-icon"),a(5),t(),a(6," Payment Information "),u(7,zn,2,0,"span",87),t(),u(8,$n,3,1,"button",140)(9,Ln,3,0,"div",141),t()(),n(10,"div",73)(11,"div",89)(12,"div")(13,"label",75),a(14,"Payment Method"),t(),n(15,"div",112),a(16),x(17,"titlecase"),t()(),n(18,"div")(19,"label",75),a(20,"Payment Status"),t(),n(21,"div",142),u(22,Hn,2,0,"mat-icon",143),n(23,"span",144),a(24),x(25,"titlecase"),t()()(),u(26,Wn,6,5,"div"),t()()()),r&2){let e,i,s,d=c(2);l(4),B("text-indigo-600",!d.isCheckedOut())("text-gray-400",d.isCheckedOut()),l(),_(" ",d.isCheckedOut()?"lock":"credit_card"," "),l(2),p(d.isCheckedOut()?7:-1),l(),p(d.canEditPaymentInfo()?8:d.isCheckedOut()?9:-1),l(8),m(A(17,13,(e=d.reservation().paymentInfo)==null?null:e.method)),l(6),p(d.statusUpdating()?22:-1),l(),V(((i=d.reservation().paymentInfo)==null?null:i.status)==="paid"?"bg-green-100 text-green-800":((i=d.reservation().paymentInfo)==null?null:i.status)==="refunded"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),l(),_(" ",A(25,15,(s=d.reservation().paymentInfo)==null?null:s.status)," "),l(2),p(d.transactionHistory().length>0?26:-1)}}function Zn(r,o){if(r&1&&(n(0,"tr",83)(1,"td",138),a(2),t(),n(3,"td",137),a(4),x(5,"currency"),t(),n(6,"td",138),a(7),x(8,"titlecase"),t(),n(9,"td",138),a(10),t(),n(11,"td",145)(12,"span",144),a(13),x(14,"titlecase"),t()()()),r&2){let e,i=o.$implicit,s=c(3);l(2),m(s.formatDateTime(i.date)),l(2),m(D(5,7,i.amount,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(3),m(A(8,10,i.method)),l(3),m(i.reference),l(2),V(i.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),l(),_(" ",A(14,12,i.status)," ")}}function Kn(r,o){if(r&1&&(n(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",77),a(4,"receipt"),t(),a(5," Transaction History "),t()(),n(6,"div",73)(7,"div",79)(8,"table",80)(9,"thead")(10,"tr",81)(11,"th",82),a(12,"Date"),t(),n(13,"th",82),a(14,"Amount"),t(),n(15,"th",82),a(16,"Method"),t(),n(17,"th",82),a(18,"Reference"),t(),n(19,"th",82),a(20,"Status"),t()()(),n(21,"tbody"),Q(22,Zn,15,14,"tr",83,he),t()()()()()),r&2){let e=c(2);l(22),Z(e.transactionHistory())}}function Yn(r,o){if(r&1&&(n(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",72),a(4,"message"),t(),a(5," Special Requests "),t()(),n(6,"div",73)(7,"p",146),a(8),t()()()),r&2){let e=c(3);l(8),m(e.reservation().specialRequests)}}function Jn(r,o){if(r&1&&(n(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",102),a(4,"note"),t(),a(5," Internal Notes "),t()(),n(6,"div",73)(7,"p",146),a(8),t()()()),r&2){let e=c(3);l(8),m(e.reservation().internalNotes)}}function Xn(r,o){if(r&1&&(n(0,"div",99),u(1,Yn,9,1,"div",69),u(2,Jn,9,1,"div",69),t()),r&2){let e=c(2);l(),p(e.reservation().specialRequests?1:-1),l(),p(e.reservation().internalNotes?2:-1)}}function ea(r,o){if(r&1&&(n(0,"div",41),a(1),t()),r&2){let e=c().$implicit;l(),_("Age: ",e.age)}}function ta(r,o){if(r&1&&(n(0,"div",41),a(1),t()),r&2){let e=c().$implicit;l(),m(e.relationship)}}function ia(r,o){if(r&1&&(n(0,"div",148)(1,"div",92),a(2),t(),u(3,ea,2,1,"div",41),u(4,ta,2,1,"div",41),t()),r&2){let e=o.$implicit;l(2),U("",e.firstName," ",e.lastName),l(),p(e.age?3:-1),l(),p(e.relationship?4:-1)}}function na(r,o){if(r&1&&(n(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",77),a(4,"group"),t(),a(5," Additional Guests "),t()(),n(6,"div",73)(7,"div",147),Q(8,ia,5,4,"div",148,he),t()()()),r&2){let e=c(2);l(8),Z(e.reservation().guestDetails.additionalGuests)}}function aa(r,o){if(r&1&&(n(0,"div")(1,"label",75),a(2,"Last Updated"),t(),n(3,"div",41),a(4),t()()),r&2){let e=c(2);l(4),m(e.formatDateTime(e.reservation().updatedAt))}}function oa(r,o){if(r&1&&(n(0,"div")(1,"label",75),a(2,"Actual Check-in"),t(),n(3,"div",41),a(4),t()()),r&2){let e=c(2);l(4),m(e.formatDateTime(e.reservation().actualCheckInDate))}}function ra(r,o){if(r&1&&(n(0,"div")(1,"label",75),a(2,"Actual Check-out"),t(),n(3,"div",41),a(4),t()()),r&2){let e=c(2);l(4),m(e.formatDateTime(e.reservation().actualCheckOutDate))}}function la(r,o){if(r&1&&(n(0,"div")(1,"label",152),a(2,"Refund Amount"),t(),n(3,"div",153),a(4),x(5,"currency"),t()()),r&2){let e,i=c(3);l(4),m(D(5,1,i.getRefundAmount(),(e=i.storeStore.selectedStore())==null?null:e.currency))}}function sa(r,o){if(r&1&&(n(0,"div")(1,"label",152),a(2,"Cancellation Fee"),t(),n(3,"div",153),a(4),x(5,"currency"),t()()),r&2){let e,i=c(3);l(4),m(D(5,1,i.getCancellationFee(),(e=i.storeStore.selectedStore())==null?null:e.currency))}}function da(r,o){if(r&1&&(n(0,"div",100)(1,"div",149)(2,"h3",150)(3,"mat-icon",151),a(4,"cancel"),t(),a(5," Cancellation Information "),t()(),n(6,"div",73)(7,"div",74)(8,"div")(9,"label",152),a(10,"Cancelled"),t(),n(11,"div",153),a(12),t()(),n(13,"div")(14,"label",152),a(15,"Reason"),t(),n(16,"div",153),a(17),t()(),u(18,la,6,4,"div"),u(19,sa,6,4,"div"),t()()()),r&2){let e=c(2);l(12),m(e.formatDateTime(e.reservation().cancellation.cancelledAt)),l(5),m(e.reservation().cancellation.reason),l(),p(e.hasRefundAmount()?18:-1),l(),p(e.hasCancellationFee()?19:-1)}}function ca(r,o){if(r&1){let e=P();n(0,"div",12)(1,"div",67)(2,"div",68)(3,"div",69)(4,"div",70)(5,"h3",71)(6,"mat-icon",72),a(7,"person"),t(),a(8," Guest Information "),t()(),n(9,"div",73)(10,"div",74)(11,"div")(12,"label",75),a(13,"Guest Name"),t(),n(14,"div",76),a(15),t()(),n(16,"div")(17,"label",75),a(18,"Email"),t(),n(19,"div",41),a(20),t()(),n(21,"div")(22,"label",75),a(23,"Phone"),t(),n(24,"div",41),a(25),t()(),n(26,"div")(27,"label",75),a(28,"Occupancy"),t(),n(29,"div",41),a(30),t()()()()(),n(31,"div",69)(32,"div",70)(33,"h3",71)(34,"mat-icon",77),a(35,"calendar_today"),t(),a(36," Stay Information "),t()(),n(37,"div",73)(38,"div",74)(39,"div")(40,"label",75),a(41,"Check-in Date"),t(),n(42,"div",76),a(43),t(),u(44,bn,2,1,"div",41),t(),n(45,"div")(46,"label",75),a(47,"Check-out Date"),t(),n(48,"div",76),a(49),t(),u(50,hn,2,1,"div",41),t(),n(51,"div")(52,"label",75),a(53,"Number of Nights"),t(),n(54,"div",76),a(55),t()(),n(56,"div")(57,"label",75),a(58,"Booking Source"),t(),n(59,"div",41),a(60),x(61,"titlecase"),t()()()()(),u(62,An,13,3,"div",69),n(63,"div",69)(64,"div",70)(65,"h3",71)(66,"mat-icon",78),a(67,"hotel"),t(),a(68," Room Details "),t()(),n(69,"div",73)(70,"div",79)(71,"table",80)(72,"thead")(73,"tr",81)(74,"th",82),a(75,"Room Number"),t(),n(76,"th",82),a(77,"Room Type"),t(),n(78,"th",82),a(79,"Adults"),t(),n(80,"th",82),a(81,"Children"),t(),n(82,"th",82),a(83,"Rate per Night"),t()()(),n(84,"tbody"),Q(85,Bn,12,8,"tr",83,he),t()()()()()(),n(87,"div",84)(88,"div",69)(89,"div",85)(90,"div",86)(91,"h3",71)(92,"mat-icon"),a(93),t(),a(94," Pricing Summary "),u(95,Nn,2,0,"span",87),t(),n(96,"button",88),h("click",function(){E(e);let s=c();return S(s.openPricingUpdateDialog())}),n(97,"mat-icon"),a(98),t()()()(),n(99,"div",73)(100,"div",89)(101,"div",90)(102,"span",91),a(103,"Subtotal"),t(),n(104,"span",92),a(105),x(106,"currency"),t()(),n(107,"div",90)(108,"span",91),a(109,"Taxes"),t(),n(110,"span",92),a(111),x(112,"currency"),t()(),u(113,Vn,6,4,"div",90),u(114,Un,6,4,"div",90),u(115,Gn,6,4,"div",90),u(116,qn,6,4,"div",90),u(117,jn,6,5,"div",90),y(118,"hr",93),n(119,"div",94)(120,"span",95),a(121,"Total"),t(),n(122,"span",95),a(123),x(124,"currency"),t()(),n(125,"div",90)(126,"span",91),a(127,"Paid"),t(),n(128,"span",96),a(129),x(130,"currency"),t()(),n(131,"div",90)(132,"span",91),a(133,"Balance"),t(),n(134,"span",97),a(135),x(136,"currency"),t()()()()(),u(137,Qn,27,17,"div",69),t()(),n(138,"div",98),u(139,Kn,24,0,"div",69),u(140,Xn,3,2,"div",99),u(141,na,10,0,"div",69),n(142,"div",69)(143,"div",70)(144,"h3",71)(145,"mat-icon",78),a(146,"info"),t(),a(147," Booking Information "),t()(),n(148,"div",73)(149,"div",74)(150,"div")(151,"label",75),a(152,"Created"),t(),n(153,"div",41),a(154),t()(),u(155,aa,5,1,"div"),u(156,oa,5,1,"div"),u(157,ra,5,1,"div"),t()()(),u(158,da,20,4,"div",100),t()()}if(r&2){let e,i,s,d,f,C,I,O,be,v=c();l(15),m(v.guestName()),l(5),m(v.guestEmail()),l(5),m(v.guestPhone()),l(5),U("",v.reservation().guestDetails.totalAdults," Adults, ",v.reservation().guestDetails.totalChildren," Children"),l(13),m(v.formatDate(v.reservation().checkInDate)),l(),p(v.reservation().expectedCheckInTime?44:-1),l(5),m(v.formatDate(v.reservation().checkOutDate)),l(),p(v.reservation().expectedCheckOutTime?50:-1),l(5),m(v.reservation().numberOfNights),l(5),m(A(61,52,v.reservation().bookingSource)),l(2),p(v.hasExtensions()?62:-1),l(23),Z(v.roomDetails()),l(4),B("from-gray-50",v.isCheckedOut())("to-gray-100",v.isCheckedOut())("border-gray-200",v.isCheckedOut()),l(3),B("text-purple-600",!v.isCheckedOut())("text-gray-400",v.isCheckedOut()),l(),_(" ",v.isCheckedOut()?"lock":"account_balance_wallet"," "),l(2),p(v.isCheckedOut()?95:-1),l(),B("text-gray-400",!v.canEditPricing())("cursor-not-allowed",!v.canEditPricing()),g("matTooltip",v.canEditPricing()?"Update Pricing (Owner Authorization Required)":"Cannot edit pricing for checked-out reservations")("disabled",!v.canEditPricing()),l(2),m(v.canEditPricing()?"edit":"lock"),l(7),m(D(106,54,v.reservation().pricing.subtotal,(e=v.storeStore.selectedStore())==null?null:e.currency)),l(6),m(D(112,57,v.reservation().pricing.taxes,(i=v.storeStore.selectedStore())==null?null:i.currency)),l(2),p((s=v.reservation().pricing.fees)!=null&&s.serviceFee?113:-1),l(),p((d=v.reservation().pricing.fees)!=null&&d.cleaningFee?114:-1),l(),p((f=v.reservation().pricing.fees)!=null&&f.resortFee?115:-1),l(),p((C=v.reservation().pricing.discounts)!=null&&C.amount?116:-1),l(),p(v.getTotalExtensionCost()>0?117:-1),l(6),m(D(124,60,v.getFinalTotal(),(I=v.storeStore.selectedStore())==null?null:I.currency)),l(6),m(D(130,63,v.reservation().pricing.paid,(O=v.storeStore.selectedStore())==null?null:O.currency)),l(5),V(v.reservation().pricing.balance>0?"text-red-600":"text-green-600"),l(),_(" ",D(136,66,v.reservation().pricing.balance,(be=v.storeStore.selectedStore())==null?null:be.currency)," "),l(2),p(v.reservation().paymentInfo?137:-1),l(2),p(v.transactionHistory().length>0?139:-1),l(),p(v.reservation().specialRequests||v.reservation().internalNotes?140:-1),l(),p(v.hasAdditionalGuests()?141:-1),l(13),m(v.formatDateTime(v.reservation().createdAt)),l(),p(v.reservation().updatedAt!==v.reservation().createdAt?155:-1),l(),p(v.reservation().actualCheckInDate?156:-1),l(),p(v.reservation().actualCheckOutDate?157:-1),l(),p(v.hasCancellation()?158:-1)}}function ma(r,o){if(r&1){let e=P();n(0,"button",25),h("click",function(){E(e);let s=c();return S(s.editReservation())}),n(1,"mat-icon",26),a(2,"edit"),t(),n(3,"span"),a(4,"Edit Reservation"),t()()}}function ua(r,o){if(r&1){let e=P();n(0,"button",35),h("click",function(){E(e);let s=c();return S(s.requestExtension())}),n(1,"mat-icon",36),a(2,"schedule"),t(),n(3,"span"),a(4,"Request Stay Extension"),t()()}if(r&2){let e=c();g("disabled",e.statusUpdating())}}function pa(r,o){r&1&&(n(0,"mat-icon",20),a(1,"download"),t())}function ga(r,o){r&1&&(n(0,"mat-icon",21),a(1,"picture_as_pdf"),t())}function va(r,o){if(r&1){let e=P();y(0,"mat-divider",154),n(1,"button",155),h("click",function(){E(e);let s=c();return S(s.deleteReservation())}),n(2,"mat-icon",21),a(3,"delete"),t(),n(4,"span"),a(5,"Delete Reservation"),t()()}}function _a(r,o){r&1&&(n(0,"div",23)(1,"mat-icon",156),a(2,"lock"),t(),n(3,"span"),a(4,"Payment information is locked for checked-out reservations"),t()())}function xa(r,o){r&1&&(n(0,"div",24),a(1," No status changes available "),t())}function fa(r,o){if(r&1){let e=P();n(0,"button",54),h("click",function(){let s=E(e).$implicit,d=c(2);return S(d.updatePaymentStatus(s.value))}),n(1,"mat-icon",55),a(2),t(),n(3,"span"),a(4),t()()}if(r&2){let e=o.$implicit;l(),fe("color",e.color),l(),m(e.icon),l(2),m(e.label)}}function ba(r,o){if(r&1){let e=P();Q(0,fa,5,4,"button",47,ui),n(2,"button",25),h("click",function(){E(e);let s=c();return S(s.showPaymentDialog(s.reservation()))}),n(3,"mat-icon",157),a(4,"edit"),t(),n(5,"span"),a(6,"Edit Payment Information"),t()(),n(7,"div",49),a(8,' \u{1F4A1} Use "Edit Payment Information" to update method and status details '),t()}if(r&2){let e=c();Z(e.getAvailablePaymentStatusOptions())}}function ha(r,o){if(r&1){let e=P();n(0,"button",158),h("click",function(){E(e);let s=c();return S(s.sendReservationEmail("confirmation"))}),n(1,"mat-icon",36),a(2,"check_circle"),t(),n(3,"span"),a(4,"Send Confirmation Email"),t()()}}function Ca(r,o){if(r&1){let e=P();n(0,"button",159),h("click",function(){E(e);let s=c();return S(s.sendReservationEmail("checkin"))}),n(1,"mat-icon",160),a(2,"login"),t(),n(3,"span"),a(4,"Send Check-in Notification"),t()()}}function ya(r,o){r&1&&(n(0,"div",31)(1,"mat-icon",53),a(2,"bluetooth_connected"),t(),n(3,"span"),a(4,"Printer Connected"),t()())}function Ea(r,o){r&1&&(n(0,"div",32)(1,"mat-icon",53),a(2,"bluetooth_disabled"),t(),n(3,"span"),a(4,"Printer Not Connected"),t()())}function Sa(r,o){r&1&&(n(0,"mat-icon",34),a(1,"print"),t())}function ka(r,o){r&1&&(n(0,"mat-icon",26),a(1,"print"),t())}function Da(r,o){if(r&1){let e=P();n(0,"button",161),h("click",function(){E(e);let s=c();return S(s.disconnectFromPrinter())}),n(1,"mat-icon",21),a(2,"bluetooth_disabled"),t(),n(3,"span"),a(4,"Disconnect Printer"),t()()}if(r&2){let e=c();g("disabled",e.printing()||e.statusUpdating())}}function Pa(r,o){if(r&1){let e=P();n(0,"button",162),h("click",function(){E(e);let s=c();return S(s.connectToPrinter())}),n(1,"mat-icon",26),a(2,"bluetooth"),t(),n(3,"span"),a(4,"Connect to Printer"),t()()}if(r&2){let e=c();g("disabled",e.printing()||e.statusUpdating())}}var mi=class r{router=b(Mt);route=b(Pt);location=b(yt);reservationService=b(xe);bluetoothPrinterService=b(ri);storeStore=b(pe);snackBar=b(Se);dialog=b(Kt);reservation=R(null);loading=R(!1);error=R(null);statusUpdating=R(!1);printerConnected=R(!1);printing=R(!1);exportingPDF=R(!1);statusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"confirmed",label:"Confirmed",icon:"check_circle",color:"#10b981"},{value:"checked_in",label:"Checked In",icon:"login",color:"#3b82f6"},{value:"checked_out",label:"Checked Out",icon:"logout",color:"#6b7280"},{value:"cancelled",label:"Cancelled",icon:"cancel",color:"#ef4444"},{value:"no_show",label:"No Show",icon:"person_off",color:"#f97316"}];roomDetails=F(()=>{let o=this.reservation();return!o||!o.rooms?[]:o.rooms.map(e=>{let i=typeof e.room=="string"?{roomNumber:e.room,roomType:"Unknown"}:e.room;return{name:i.name||"N/A",roomNumber:i.roomNumber||"Unknown",roomType:typeof i.roomType=="object"&&i.roomType?.name||"Unknown",adults:e.guests?.adults||0,children:e.guests?.children||0,rate:i.priceOverride||0}})});transactionHistory=F(()=>{let o=this.reservation();return!o||!o.paymentInfo?.transactions?[]:o.paymentInfo.transactions});guestName=F(()=>{let o=this.reservation();if(!o||!o.guestDetails?.primaryGuest)return"Unknown Guest";let e=o.guestDetails.primaryGuest;return`${e.firstName||""} ${e.lastName||""}`.trim()||"Unknown Guest"});guestEmail=F(()=>this.reservation()?.guestDetails?.primaryGuest?.email||"No email provided");guestPhone=F(()=>this.reservation()?.guestDetails?.primaryGuest?.phone||"No phone provided");hasAdditionalGuests=F(()=>{let o=this.reservation();return o?.guestDetails?.additionalGuests&&o.guestDetails.additionalGuests.length>0});hasCancellation=F(()=>this.reservation()?.cancellation?.isCancelled);hasRefundAmount=F(()=>{let o=this.reservation();return o?.cancellation?.refundAmount&&o.cancellation.refundAmount>0});hasCancellationFee=F(()=>{let o=this.reservation();return o?.cancellation?.cancellationFee&&o.cancellation.cancellationFee>0});getRefundAmount=F(()=>this.reservation()?.cancellation?.refundAmount||0);getCancellationFee=F(()=>this.reservation()?.cancellation?.cancellationFee||0);paymentStatusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"paid",label:"Paid",icon:"check_circle",color:"#10b981"},{value:"partial",label:"Partial",icon:"donut_small",color:"#3b82f6"},{value:"refunded",label:"Refunded",icon:"undo",color:"#6b7280"}];getAvailablePaymentStatusOptions=F(()=>{let o=this.reservation();if(!o)return[];let e=o.paymentInfo?.status||"pending";return this.paymentStatusOptions.filter(i=>i.value!==e)});ngOnInit(){let o=this.route.snapshot.paramMap.get("id");o?this.loadReservation(o):this.error.set("No reservation ID provided"),this.printerConnected.set(this.bluetoothPrinterService.isConnected())}loadReservation(o){return k(this,null,function*(){this.loading.set(!0),this.error.set(null);try{if(!this.storeStore.selectedStore()?._id)throw new Error("No store selected");this.reservationService.getReservationById(o).subscribe({next:i=>{this.reservation.set(i),this.loading.set(!1)},error:i=>{console.error("Error loading reservation:",i),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}catch(e){console.error("Error loading reservation:",e),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}goBack(){this.location.back()}editReservation(){this.reservation()&&this.router.navigate(["/menu/hms/front-desk/reservations/edit",this.reservation()._id])}canEdit(){let o=this.reservation();return o?.status!=="cancelled"&&o?.status!=="checked_out"&&o?.status!=="no_show"&&o?.status!=="checked_in"&&!o?.actualCheckInDate}canDelete(){let o=this.reservation();return o?["pending","cancelled","no_show"].includes(o.status):!1}deleteReservation(){let o=this.reservation();if(!o)return;let e=this.storeStore.selectedStore();if(!e?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let i={storeId:e._id,actionDescription:`delete reservation ${o.confirmationNumber}`,reservationId:o._id};this.dialog.open(Xe,{data:i,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(d=>{d?.authorized&&d.pin&&this.performReservationDeletion(o,d.pin)})}performReservationDeletion(o,e){this.statusUpdating.set(!0),this.reservationService.deleteReservationWithPin(o._id,e).subscribe({next:i=>{this.snackBar.open(`Reservation ${o.confirmationNumber} deleted successfully`,"Close",{duration:5e3}),this.router.navigate(["/dashboard/hms/front-desk/reservations"])},error:i=>{console.error("Error deleting reservation:",i),this.snackBar.open(i.message||"Failed to delete reservation","Close",{duration:5e3,panelClass:["error-snackbar"]})},complete:()=>{this.statusUpdating.set(!1)}})}canCheckIn(){return this.reservation()?.status==="confirmed"}canCheckOut(){return this.reservation()?.status==="checked_in"}canCancel(){let o=this.reservation();return o?.status!=="cancelled"&&o?.status!=="checked_out"&&o?.status!=="no_show"}canRequestExtension(){return this.reservation()?.status==="checked_in"}isCheckedOut(){return this.reservation()?.status==="checked_out"}canEditPricing(){return!this.isCheckedOut()&&!this.loading()}canEditPaymentInfo(){return!this.isCheckedOut()&&!this.statusUpdating()}checkInReservation(){return k(this,null,function*(){if(this.reservation()){if(!this.canCheckIn()){this.snackBar.open('Guests can only be checked in when reservation status is "Confirmed"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_in")}catch(e){console.error("Error checking in reservation:",e),this.snackBar.open("Failed to check in reservation","Close",{duration:3e3})}}})}checkOutReservation(){return k(this,null,function*(){if(this.reservation()){if(!this.canCheckOut()){this.snackBar.open('Guests can only be checked out when reservation status is "Checked In"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_out")}catch(e){console.error("Error checking out reservation:",e),this.snackBar.open("Failed to check out reservation","Close",{duration:3e3})}}})}cancelReservation(){return k(this,null,function*(){if(!(!this.reservation()||!this.canCancel()))try{this.snackBar.open("Cancellation functionality coming soon","Close",{duration:3e3})}catch(e){console.error("Error cancelling reservation:",e),this.snackBar.open("Failed to cancel reservation","Close",{duration:3e3})}})}requestExtension(){return k(this,null,function*(){let o=this.reservation();if(!o||!this.canRequestExtension()){this.snackBar.open("Extensions can only be requested for checked-in guests","Close",{duration:5e3,panelClass:["error-snackbar"]});return}let e={reservation:o,currentCheckOutDate:new Date(o.checkOutDate)};this.dialog.open(Ge,{width:"600px",maxWidth:"90vw",data:e,disableClose:!0}).afterClosed().subscribe(s=>k(this,null,function*(){if(s?.success&&s.extension)try{yield this.loadReservation(o._id),this.snackBar.open("Extension request submitted successfully. Awaiting approval.","Close",{duration:5e3})}catch(d){console.error("Error reloading reservation after extension request:",d),this.snackBar.open("Extension request submitted, but failed to refresh data. Please refresh the page.","Close",{duration:5e3})}}))})}updateReservationStatus(o){return k(this,null,function*(){let e=this.reservation();if(!(!e||e.status===o)){if(o==="checked_in"){this.showCheckInDialog(e);return}if(o==="checked_out"){this.performCheckOut();return}if(!this.isValidStatusTransition(e.status,o)){this.snackBar.open(this.getStatusTransitionError(e.status,o),"Close",{duration:5e3,panelClass:["error-snackbar"]});return}(o==="cancelled"||o==="no_show")&&!confirm(`Are you sure you want to change the status to ${o}?`)||(yield this.performStatusUpdate(o))}})}updatePaymentStatus(o){let e=this.reservation();if(e){if(this.isCheckedOut()){this.snackBar.open("Cannot update payment status for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}o==="paid"?this.showPaymentDialog(e):this.performPaymentStatusUpdate(o)}}showPaymentDialog(o){if(this.isCheckedOut()){this.snackBar.open("Cannot edit payment information for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}let e={reservation:o,isCheckoutFlow:!1};this.dialog.open(Je,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&s.paymentData&&(s.paymentData.amount!==void 0?console.error("Amount-based payment not supported in regular update flow"):s.paymentData.status&&this.processPayment(s.paymentData))})}processPayment(o){return k(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.updatePaymentInfo(e._id,o).toPromise();let i=yield this.reservationService.getReservationById(e._id).toPromise();i&&this.reservation.set(i),this.snackBar.open("Payment information updated successfully","Close",{duration:5e3})}catch(i){console.error("Error updating payment info:",i);let s="Failed to update payment information";i?.error?.error?s=i.error.error:i instanceof Error&&(s=i.message),this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performPaymentStatusUpdate(o){return k(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let i=yield this.reservationService.updateReservation(e._id,{paymentInfo:rt(ot({},e.paymentInfo),{status:o})}).toPromise();i&&(this.reservation.set(i),this.snackBar.open(`Payment status updated to ${o}`,"Close",{duration:3e3}))}catch(i){console.error("Error updating payment status:",i);let s=i instanceof Error?i.message:"Failed to update payment status";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}showCheckInDialog(o){let e={reservation:o};this.dialog.open(oi,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&this.performCheckIn(s)})}performCheckIn(o){return k(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let i=yield this.reservationService.checkInReservationWithRooms(e._id).toPromise();i&&(this.reservation.set(i),this.snackBar.open("Guest checked in successfully! Room status updated to occupied.","Close",{duration:5e3}))}catch(i){console.error("Error during check-in:",i);let s=i instanceof Error?i.message:"Failed to check in guest";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performCheckOut(){return k(this,null,function*(){let o=this.reservation();if(o){if(this.requiresPaymentBeforeCheckout(o)){this.showPaymentRequiredDialog(o);return}this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(o._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during check-out:",e);let i=e instanceof Error?e.message:"Failed to check out guest";this.snackBar.open(i,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}requiresPaymentBeforeCheckout(o){let e=o.pricing.balance>0,i=o.paymentInfo?.status!=="paid";return e&&i}showPaymentRequiredDialog(o){let e={reservation:o,isCheckoutFlow:!0};this.dialog.open(Je,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&s.paymentData&&(s.paymentData.amount!==void 0?this.processPaymentAndCheckout(s.paymentData):console.error("Expected amount-based payment data for checkout flow"))})}processPaymentAndCheckout(o){return k(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.processPayment(e._id,{amount:o.amount,method:o.method,reference:o.reference||`PAY-${Date.now()}`}).toPromise();let i=yield this.reservationService.getReservationById(e._id).toPromise();i&&(this.reservation.set(i),this.snackBar.open(`Payment of ${this.formatCurrency(o.amount)} recorded successfully`,"Close",{duration:3e3}),i.pricing.balance<=0||i.paymentInfo?.status==="paid"?setTimeout(()=>{this.proceedWithCheckout()},1500):this.snackBar.open("Payment recorded, but outstanding balance remains. Please complete payment before checkout.","Close",{duration:5e3,panelClass:["warning-snackbar"]}))}catch(i){console.error("Error processing payment for checkout:",i);let s=i instanceof Error?i.message:"Failed to process payment";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}proceedWithCheckout(){return k(this,null,function*(){let o=this.reservation();if(o){this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(o._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during checkout after payment:",e);let i=e instanceof Error?e.message:"Failed to complete checkout";this.snackBar.open(i,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performStatusUpdate(o){return k(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let i=yield this.reservationService.updateReservationStatus(e._id,o).toPromise();i&&(this.reservation.set(i),this.snackBar.open(`Status updated to ${o}`,"Close",{duration:3e3}))}catch(i){console.error("Error updating reservation status:",i);let s=i instanceof Error?i.message:"Failed to update status";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}getAvailableStatusOptions(){let o=this.reservation()?.status;return this.statusOptions.filter(e=>e.value!==o&&this.isValidStatusTransition(o||"",e.value))}isValidStatusTransition(o,e){return{pending:["confirmed","cancelled","no_show"],confirmed:["checked_in","cancelled","no_show"],checked_in:["checked_out"],checked_out:[],cancelled:[],no_show:[]}[o]?.includes(e)||!1}getStatusTransitionError(o,e){switch(e){case"checked_in":return'Guests can only be checked in when reservation status is "Confirmed"';case"checked_out":return'Guests can only be checked out when reservation status is "Checked In"';case"confirmed":return o==="checked_in"?"Cannot change back to confirmed after check-in":o==="checked_out"?"Cannot change back to confirmed after check-out":"Invalid status transition";default:return`Cannot change status from "${o}" to "${e}"`}}getStatusColor(o){return{pending:"#f59e0b",confirmed:"#10b981",checked_in:"#3b82f6",checked_out:"#6b7280",cancelled:"#ef4444",no_show:"#f97316"}[o]||"#6b7280"}getStatusIcon(o){return{pending:"schedule",confirmed:"check_circle",checked_in:"login",checked_out:"logout",cancelled:"cancel",no_show:"person_off"}[o]||"help"}formatDate(o){return o?new Date(o).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}formatDateTime(o){return o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}sendReservationEmail(o="details"){return k(this,null,function*(){let e=this.reservation();if(!e)return;let i=this.guestEmail();if(!i||i==="No email provided"){this.snackBar.open("No email address available for this guest","Close",{duration:5e3,panelClass:["error-snackbar"]});return}this.statusUpdating.set(!0);try{let s=yield this.reservationService.sendReservationEmail(e._id,{emailType:o}).toPromise();if(s?.success)this.snackBar.open(s.message||`${o.charAt(0).toUpperCase()+o.slice(1)} email sent successfully to ${i}`,"Close",{duration:5e3});else throw new Error("Email sending failed")}catch(s){console.error("Error sending reservation email:",s);let d=s instanceof Error?s.message:"Failed to send reservation email";this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}connectToPrinter(){return k(this,null,function*(){if(!this.bluetoothPrinterService.isBluetoothSupported()){this.snackBar.open("Web Bluetooth is not supported in this browser","Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{this.statusUpdating.set(!0),yield this.bluetoothPrinterService.connectToPrinter(),this.printerConnected.set(!0);let o=this.bluetoothPrinterService.getConnectedDeviceInfo();this.snackBar.open(`Connected to printer: ${o?.name||"Unknown Printer"}`,"Close",{duration:3e3})}catch(o){console.error("Error connecting to printer:",o),this.printerConnected.set(!1);let e=o instanceof Error?o.message:"Failed to connect to printer";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}disconnectFromPrinter(){return k(this,null,function*(){try{yield this.bluetoothPrinterService.disconnectPrinter(),this.printerConnected.set(!1),this.snackBar.open("Disconnected from printer","Close",{duration:3e3})}catch(o){console.error("Error disconnecting from printer:",o),this.snackBar.open("Failed to disconnect from printer","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}printReservation(){return k(this,null,function*(){let o=this.reservation();if(o){if(!this.bluetoothPrinterService.isConnected())if(confirm("Printer not connected. Would you like to connect to a printer first?"))try{if(yield this.connectToPrinter(),!this.bluetoothPrinterService.isConnected())return}catch{return}else return;this.printing.set(!0);try{let e=this.storeStore.selectedStore();yield this.bluetoothPrinterService.printReservation(o,e),this.snackBar.open("Reservation printed successfully","Close",{duration:3e3})}catch(e){console.error("Error printing reservation:",e);let i=e instanceof Error?e.message:"Failed to print reservation";this.snackBar.open(i,"Close",{duration:5e3,panelClass:["error-snackbar"]}),i.includes("not connected")&&this.printerConnected.set(!1)}finally{this.printing.set(!1)}}})}testPrint(){return k(this,null,function*(){if(!this.bluetoothPrinterService.isConnected()){this.snackBar.open("Please connect to a printer first","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.printing.set(!0);try{yield this.bluetoothPrinterService.testPrint(),this.snackBar.open("Test print completed successfully","Close",{duration:3e3})}catch(o){console.error("Error during test print:",o);let e=o instanceof Error?o.message:"Test print failed";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.printing.set(!1)}})}exportReservationToPDF(){return k(this,null,function*(){let o=this.reservation();if(o){this.exportingPDF.set(!0);try{let e=yield this.reservationService.exportReservationToPDF(o._id).toPromise();if(e){let i=window.URL.createObjectURL(e),s=document.createElement("a");s.href=i,s.download=`reservation-${o.confirmationNumber}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(i),this.snackBar.open("Reservation details exported to PDF successfully!","Close",{duration:3e3})}}catch(e){console.error("Error exporting reservation to PDF:",e);let i=e instanceof Error?e.message:"Failed to export reservation to PDF";this.snackBar.open(i,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.exportingPDF.set(!1)}}})}openPricingUpdateDialog(){let o=this.reservation();if(!o)return;if(this.isCheckedOut()){this.snackBar.open("Cannot edit pricing for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}let e=this.storeStore.selectedStore();if(!e?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let i={storeId:e._id,actionDescription:`update pricing for reservation ${o.confirmationNumber}`,reservationId:o._id};this.dialog.open(Xe,{data:i,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(d=>{d?.authorized&&d.pin&&this.proceedWithPricingUpdate(o)})}proceedWithPricingUpdate(o){let e={reservation:o};this.dialog.open(qe,{data:e,width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!1,autoFocus:!1,panelClass:"pricing-update-dialog"}).afterClosed().subscribe(s=>{s?.success&&s.updatedReservation&&(this.reservation.set(s.updatedReservation),this.snackBar.open("Pricing updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))})}formatCurrency(o){if(!o&&o!==0)return"N/A";let e=this.storeStore.selectedStore(),i=e?.currencyCode||e?.currency||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:i}).format(o)}catch{return console.warn(`Invalid currency code: ${i}, falling back to USD`),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o)}}hasExtensions(){let o=this.reservation();return!!(o?.extensions&&o.extensions.length>0)}getExtensions(){return this.reservation()?.extensions||[]}hasActiveExtension(){return!!this.reservation()?.currentExtension?.isActive}getTotalExtensionCost(){let o=this.reservation();return o?.currentExtension?.isActive&&o.currentExtension?.totalExtensionCost?o.currentExtension.totalExtensionCost:this.getExtensions().filter(i=>i.status==="approved").reduce((i,s)=>i+(s.additionalCost||0),0)}getTotalExtensionNights(){let o=this.reservation();return o?.currentExtension?.isActive&&o.currentExtension?.totalExtensionNights?o.currentExtension.totalExtensionNights:this.getExtensions().filter(i=>i.status==="approved").reduce((i,s)=>i+(s.additionalNights||0),0)}getFinalTotal(){return this.reservation()?.pricing?.total||0}formatExtensionDate(o){if(!o)return"N/A";try{return(typeof o=="string"?new Date(o):o).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return console.warn("Invalid date format:",o),"Invalid Date"}}processingExtension=R(null);processingAction=R(null);approveExtension(o){return k(this,null,function*(){let e=this.reservation();if(!e)return;let i=e.extensions?.find(C=>C._id===o);if(!i){this.snackBar.open("Extension not found","Close",{duration:3e3});return}let s={extensionId:o,reservationId:e._id,extensionCost:i.additionalCost,currency:this.storeStore.selectedStore()?.currency||"USD",additionalNights:i.additionalNights},f=yield this.dialog.open(Be,{data:s,width:"500px",disableClose:!0}).afterClosed().toPromise();if(f){this.processingExtension.set(o),this.processingAction.set("approve");try{let C=yield this.reservationService.approveExtension(e._id,o,"Extension approved from reservation details",f).toPromise();C?.reservation&&(this.reservation.set(C.reservation),this.snackBar.open("Extension approved successfully with payment information!","Close",{duration:3e3,panelClass:["success-snackbar"]}))}catch(C){console.error("Error approving extension:",C),this.snackBar.open(C.message||"Failed to approve extension","Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.processingExtension.set(null),this.processingAction.set(null)}}})}rejectExtension(o){return k(this,null,function*(){let e=this.reservation();if(!e)return;let i=prompt("Please provide a reason for rejection:");if(i){this.processingExtension.set(o),this.processingAction.set("reject");try{let s=yield this.reservationService.rejectExtension(e._id,o,i,"Extension rejected from reservation details").toPromise();s?.reservation&&(this.reservation.set(s.reservation),this.snackBar.open("Extension rejected successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))}catch(s){console.error("Error rejecting extension:",s),this.snackBar.open(s.message||"Failed to reject extension","Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.processingExtension.set(null),this.processingAction.set(null)}}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=N({type:r,selectors:[["app-reservation-details"]],decls:80,vars:23,consts:[["actionsMenu","matMenu"],["paymentMenu","matMenu"],["emailMenu","matMenu"],["printMenu","matMenu"],["statusMenu","matMenu"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","border-b","border-blue-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-6"],[1,"flex","items-center","gap-4"],["type","button",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","justify-center","items-center","py-12","bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"!shadow-xl","!border","!border-gray-200","!rounded-lg"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"matMenuTriggerFor"],[1,"mr-3","!text-gray-600"],[1,"ml-auto","!text-gray-400"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-red-600","animate-spin"],[1,"mr-3","!text-red-600"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","border-b","border-gray-100"],[1,"px-3","py-2","text-xs","text-gray-400","italic","flex","items-center","gap-2"],[1,"px-3","py-2","text-xs","text-gray-400","italic"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click"],[1,"mr-3","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors"],[1,"px-3","py-2","text-xs","text-gray-600","bg-gray-50","border-t","border-gray-100","mt-1"],[1,"px-3","py-2","text-xs","border-b","border-gray-100"],[1,"flex","items-center","gap-2","text-green-600"],[1,"flex","items-center","gap-2","text-gray-500"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-blue-600","animate-spin"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-green-600"],[1,"px-3","py-2","border-t","border-gray-100","mt-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"disabled"],[1,"text-3xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600"],[1,"relative"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","border-2","flex","items-center","gap-2","hover:opacity-80","transition-all","duration-200","disabled:opacity-50",3,"matMenuTriggerFor","disabled"],[1,"text-sm","animate-spin"],[1,"text-sm",3,"color"],[1,"text-xs","opacity-60"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors"],[1,"px-3","py-2","text-xs","text-amber-600","bg-amber-50","border-t","border-amber-100","mt-1"],[1,"px-3","py-2","text-xs","text-blue-600","bg-blue-50","border-t","border-blue-100","mt-1"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-green-700","bg-green-50","border","border-green-200","rounded-lg","hover:bg-green-100","hover:border-green-300","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"matMenuTriggerFor"],[1,"text-sm"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"click"],[1,"mr-3","!text-base"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"text-lg"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-green-700","bg-green-50","border","border-green-200","rounded-lg","hover:bg-green-100","hover:border-green-300","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["diameter","40",1,"!text-blue-600"],[1,"ml-3","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center"],[1,"w-16","h-16","bg-red-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-red-500"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],["type","button",1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors","duration-200",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"text-blue-600"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-green-600"],[1,"text-purple-600"],[1,"overflow-x-auto"],[1,"min-w-full"],[1,"border-b","border-gray-200"],[1,"text-left","py-3","px-4","font-semibold","text-gray-700"],[1,"border-b","border-gray-100","hover:bg-gray-50"],[1,"space-y-6"],[1,"bg-gradient-to-r","from-purple-50","to-purple-100","px-6","py-4","border-b","border-purple-200"],[1,"flex","justify-between","items-center"],[1,"text-xs","text-gray-500","font-normal"],["mat-icon-button","",1,"text-gray-600","hover:text-purple-600","hover:bg-purple-50","transition-colors","duration-200",3,"click","matTooltip","disabled"],[1,"space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium","text-gray-900"],[1,"border-gray-200"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-gray-900"],[1,"font-medium","text-green-600"],[1,"font-medium"],[1,"mt-8","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-red-50","border","border-red-200","rounded-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-orange-50","to-amber-50","px-6","py-4","border-b","border-orange-200"],[1,"text-orange-600"],[1,"ml-2","px-2","py-1","bg-orange-100","text-orange-700","text-xs","font-medium","rounded-full"],[1,"space-y-4"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200"],[1,"mt-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-10","h-10","bg-orange-100","rounded-full","flex","items-center","justify-center"],[1,"text-orange-600","text-sm"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","border",3,"ngClass"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"text-sm","text-gray-900"],[1,"text-sm","text-gray-900","font-medium"],[1,"text-sm","font-medium","text-orange-600"],[1,"mb-3"],[1,"mt-3","flex","gap-2"],[1,"mt-3","p-3","bg-red-50","border","border-red-200","rounded"],[1,"text-sm","text-gray-600","bg-white","p-3","rounded","border"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-green-600","border","border-green-600","rounded-lg","hover:bg-green-700","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-red-600","bg-white","border","border-red-300","rounded-lg","hover:bg-red-50","hover:border-red-400","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","gap-2","text-sm","text-green-600"],[1,"mt-3","p-3","bg-blue-50","border","border-blue-200","rounded"],[1,"flex","items-center","gap-2","text-sm","text-blue-600","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3","text-sm"],[1,"ml-2","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"ml-2","font-medium","text-gray-900"],[1,"mt-2","pt-2","border-t","border-blue-200"],[1,"ml-2","font-mono","text-sm","text-gray-900"],[1,"text-gray-600","text-sm"],[1,"mt-1","text-sm","text-gray-700"],[1,"flex","items-center","gap-2","text-sm","text-red-600","mb-1"],[1,"text-sm","text-red-700"],[1,"text-xs","text-red-500","mt-1"],[1,"flex","items-center","gap-2","mb-2"],[1,"font-medium","text-green-800"],[1,"text-sm","text-green-700"],[1,"py-3","px-4","font-medium","text-gray-900"],[1,"py-3","px-4","text-gray-600"],[1,"font-medium","text-orange-600"],["matTooltip","Payment options",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"matMenuTriggerFor"],["matTooltip","Cannot edit payment info for checked-out reservations",1,"p-2","text-gray-400"],[1,"flex","items-center","gap-2"],[1,"text-sm","animate-spin","text-blue-600"],[1,"inline-flex","px-2","py-1","text-xs","font-medium","rounded-full"],[1,"py-3","px-4"],[1,"text-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-gray-50","border","border-gray-200","rounded-lg","p-4"],[1,"bg-red-100","px-6","py-4","border-b","border-red-200"],[1,"text-lg","font-semibold","text-red-900","flex","items-center","gap-2"],[1,"text-red-600"],[1,"block","text-sm","font-medium","text-red-700","mb-1"],[1,"text-sm","text-red-600"],[1,"!border-gray-200","my-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click"],[1,"!text-sm"],[1,"mr-3","!text-base","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors",3,"click"],[1,"mr-3","!text-purple-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"click","disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"click","disabled"]],template:function(e,i){if(e&1){let s=P();n(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"button",9),h("click",function(){return E(s),S(i.goBack())}),n(5,"mat-icon"),a(6,"arrow_back"),t()(),n(7,"div"),u(8,rn,4,1)(9,ln,4,0),t()(),u(10,_n,23,18,"div",10),t()()(),u(11,xn,4,0,"div",11),u(12,fn,11,1,"div",12),u(13,ca,159,69,"div",12),n(14,"mat-menu",13,0),u(16,ma,5,0,"button",14),n(17,"button",15)(18,"mat-icon",16),a(19,"print"),t(),n(20,"span"),a(21,"Print Details"),t(),n(22,"mat-icon",17),a(23,"chevron_right"),t()(),n(24,"button",15)(25,"mat-icon",16),a(26,"email"),t(),n(27,"span"),a(28,"Send Email"),t(),n(29,"mat-icon",17),a(30,"chevron_right"),t()(),u(31,ua,5,1,"button",18),n(32,"button",19),h("click",function(){return E(s),S(i.exportReservationToPDF())}),u(33,pa,2,0,"mat-icon",20)(34,ga,2,0,"mat-icon",21),n(35,"span"),a(36),t()(),u(37,va,6,0),t(),n(38,"mat-menu",13,1)(40,"div",22),a(41," Update Payment Information "),t(),u(42,_a,5,0,"div",23)(43,xa,2,0,"div",24)(44,ba,9,0),t(),n(45,"mat-menu",13,2)(47,"div",22),a(48," Email Options "),t(),n(49,"button",25),h("click",function(){return E(s),S(i.sendReservationEmail("details"))}),n(50,"mat-icon",26),a(51,"description"),t(),n(52,"span"),a(53,"Send Reservation Details"),t()(),u(54,ha,5,0,"button",27),u(55,Ca,5,0,"button",28),n(56,"div",29),a(57),t()(),n(58,"mat-menu",13,3)(60,"div",22),a(61," Print Options "),t(),n(62,"div",30),u(63,ya,5,0,"div",31)(64,Ea,5,0,"div",32),t(),n(65,"button",33),h("click",function(){return E(s),S(i.printReservation())}),u(66,Sa,2,0,"mat-icon",34)(67,ka,2,0,"mat-icon",26),n(68,"span"),a(69),t()(),n(70,"button",35),h("click",function(){return E(s),S(i.testPrint())}),n(71,"mat-icon",36),a(72,"check_circle"),t(),n(73,"span"),a(74,"Test Print"),t()(),n(75,"div",37),u(76,Da,5,1,"button",38)(77,Pa,5,1,"button",39),t(),n(78,"div",29),a(79," \u{1F5A8}\uFE0F Uses Bluetooth thermal printers with ESC/POS commands "),t()()}if(e&2){let s=q(46),d=q(59);l(8),p(i.reservation()?8:9),l(2),p(i.reservation()&&!i.loading()?10:-1),l(),p(i.loading()?11:-1),l(),p(i.error()&&!i.loading()?12:-1),l(),p(i.reservation()&&!i.loading()&&!i.error()?13:-1),l(3),p(i.canEdit()?16:-1),l(),g("matMenuTriggerFor",d),l(7),g("matMenuTriggerFor",s),l(7),p(i.canRequestExtension()?31:-1),l(),g("disabled",i.exportingPDF()||i.statusUpdating()),l(),p(i.exportingPDF()?33:34),l(3),m(i.exportingPDF()?"Exporting...":"Export to PDF"),l(),p(i.canDelete()?37:-1),l(5),p(i.isCheckedOut()?42:i.getAvailablePaymentStatusOptions().length===0?43:44),l(12),p(i.reservation()&&(i.reservation().status==="confirmed"||i.reservation().status==="checked_in"||i.reservation().status==="checked_out")?54:-1),l(),p(i.reservation()&&(i.reservation().status==="checked_in"||i.reservation().status==="checked_out")?55:-1),l(2),_(" \u{1F4E7} Email will be sent to: ",i.guestEmail()," "),l(6),p(i.printerConnected()?63:64),l(2),g("disabled",i.printing()||i.statusUpdating()),l(),p(i.printing()?66:67),l(3),m(i.printing()?"Printing...":"Print Reservation"),l(),g("disabled",i.printing()||i.statusUpdating()||!i.printerConnected()),l(6),p(i.printerConnected()?76:77)}},dependencies:[j,Et,Ee,K,De,z,Vt,H,L,Yt,Xt,Jt,Wt,Lt,$t,Ht,Ae,Fe,Te,$,W,ge,Re,Zt,Qt],styles:[".reservation-details-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{margin:24px auto;max-width:400px}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#f44336}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:24px 24px 0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px 24px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e9ecef;margin:0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-weight:500;border-radius:20px;padding:8px 16px;font-size:12px;text-transform:uppercase;letter-spacing:.5px}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1f2937}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:#3b82f6;font-weight:600}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-body-content{padding:0}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table{box-shadow:none;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-row{background-color:#f8f9fa}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{font-weight:600;color:#374151;border-bottom:1px solid #e5e7eb;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-cell{color:#1f2937;border-bottom:1px solid #f3f4f6;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:hover{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:last-child .mat-mdc-cell{border-bottom:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip{font-size:11px;font-weight:500;height:24px;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip.status-chip{border:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary{background-color:#3b82f6;color:#fff}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary:hover{background-color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-menu-panel{border-radius:8px;box-shadow:0 4px 16px #0000001f}.reservation-details-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .gap-2[_ngcontent-%COMP%]{gap:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-4[_ngcontent-%COMP%]{gap:1rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-6[_ngcontent-%COMP%]{gap:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}@media (min-width: 768px){.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}.reservation-details-container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex}.reservation-details-container[_ngcontent-%COMP%]   .items-center[_ngcontent-%COMP%]{align-items:center}.reservation-details-container[_ngcontent-%COMP%]   .items-start[_ngcontent-%COMP%]{align-items:flex-start}.reservation-details-container[_ngcontent-%COMP%]   .justify-center[_ngcontent-%COMP%]{justify-content:center}.reservation-details-container[_ngcontent-%COMP%]   .justify-between[_ngcontent-%COMP%]{justify-content:space-between}.reservation-details-container[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]{width:100%}.reservation-details-container[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%]{padding:.75rem}.reservation-details-container[_ngcontent-%COMP%]   .p-4[_ngcontent-%COMP%]{padding:1rem}.reservation-details-container[_ngcontent-%COMP%]   .py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.reservation-details-container[_ngcontent-%COMP%]   .pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.reservation-details-container[_ngcontent-%COMP%]   .text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.reservation-details-container[_ngcontent-%COMP%]   .text-lg[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.reservation-details-container[_ngcontent-%COMP%]   .text-4xl[_ngcontent-%COMP%]{font-size:2.25rem;line-height:2.5rem}.reservation-details-container[_ngcontent-%COMP%]   .font-medium[_ngcontent-%COMP%]{font-weight:500}.reservation-details-container[_ngcontent-%COMP%]   .font-semibold[_ngcontent-%COMP%]{font-weight:600}.reservation-details-container[_ngcontent-%COMP%]   .rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .border-t[_ngcontent-%COMP%]{border-top-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#111827}.reservation-details-container[_ngcontent-%COMP%]   .text-blue-600[_ngcontent-%COMP%]{color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]   .text-green-600[_ngcontent-%COMP%]{color:#059669}.reservation-details-container[_ngcontent-%COMP%]   .text-purple-600[_ngcontent-%COMP%]{color:#9333ea}.reservation-details-container[_ngcontent-%COMP%]   .text-orange-600[_ngcontent-%COMP%]{color:#ea580c}.reservation-details-container[_ngcontent-%COMP%]   .text-red-600[_ngcontent-%COMP%]{color:#dc2626}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .bg-red-50[_ngcontent-%COMP%]{background-color:#fef2f2}.reservation-details-container[_ngcontent-%COMP%]   .border-red-200[_ngcontent-%COMP%]{border-color:#fecaca}.reservation-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.5}.reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}@media print{.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   .mat-mdc-menu-trigger[_ngcontent-%COMP%]{display:none!important}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #ccc}}@media (prefers-color-scheme: dark){.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background-color:#374151;color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#9ca3af}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#4b5563}}"]})};export{mi as ReservationDetailsComponent};
