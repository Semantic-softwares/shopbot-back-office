import{a as Be}from"./chunk-DL4VC65Q.js";import{a as L,b as ke,c as Ve}from"./chunk-V6Q2J3ZF.js";import{a as Pe}from"./chunk-LO5LXT4F.js";import{a as Ie}from"./chunk-YZQZHEMG.js";import{f as Fe}from"./chunk-XSZYAESL.js";import"./chunk-LCNY3JPX.js";import{a as Re}from"./chunk-4QMHOUIB.js";import{a as w,b as Ee}from"./chunk-5NCGVO7F.js";import{a as De}from"./chunk-HOFFRLAS.js";import{a as Le}from"./chunk-OFQMF3WN.js";import{a as v,b as xe,c as Se,d as Ce,e as ge,f as he,g as Me,h as Te,i as ye,j as be,k as ve,l as we}from"./chunk-BAU4EBFS.js";import{a as Z,b as ee,c as te,d as ae}from"./chunk-4P4GBQE7.js";import{i as U}from"./chunk-ZKQYDJ5W.js";import"./chunk-LCF3SYDV.js";import"./chunk-ZLVLWRZH.js";import{d as _e}from"./chunk-HJGFVW6K.js";import"./chunk-TVH27JLT.js";import"./chunk-G4CZ6LK2.js";import"./chunk-I564X6SI.js";import"./chunk-VTDH2LYT.js";import{b as de,c as ce,d as ue}from"./chunk-63HT37SK.js";import{a as le,e as se,h as me}from"./chunk-YJCGHVXK.js";import"./chunk-UHBDKNKX.js";import{a as pe,b as fe}from"./chunk-3ZLH5HUN.js";import{A as oe,b as ie,g as ne,l as re}from"./chunk-O5GCTPYR.js";import"./chunk-EGLRIU4H.js";import{a as O}from"./chunk-5TL46KBL.js";import"./chunk-53AK2UWQ.js";import"./chunk-BFT2MTJY.js";import{a as K,c as X,h as Y}from"./chunk-JONI64R4.js";import"./chunk-H7INH462.js";import"./chunk-OOL2KACG.js";import"./chunk-KZJMNFJ3.js";import{b as G,c as J}from"./chunk-G6I3OKXX.js";import{Z as W,_ as j,ba as z}from"./chunk-4Z2XUZY2.js";import{e as $,g as q}from"./chunk-F436VINI.js";import{u as A}from"./chunk-H22US2IH.js";import{Gc as N,Ib as g,Jb as h,Ob as c,Pb as n,Qb as r,Rb as u,Vb as _,Wb as x,Yb as D,ac as M,bb as s,cc as p,fa as d,gc as T,hc as y,ic as b,ka as S,la as C,mc as V,qb as k,rc as l,sc as P,tc as E,wb as f,xc as B,yc as H,za as I,zc as Q}from"./chunk-P5WOETP4.js";import{a as R,b as F}from"./chunk-GAL4ENT6.js";var Qe=()=>[5,10,20,50];function Ne(e,a){e&1&&(n(0,"div",5),u(1,"mat-spinner",9),r())}function Ae(e,a){if(e&1&&u(0,"app-no-record",6),e&2){let t,i=p();c("message",((t=i.taxSets.error())==null?null:t.message)||"Unable to load tax sets. Please try again.")}}function $e(e,a){e&1&&(n(0,"th",27),l(1,"Tax Set Title"),r())}function qe(e,a){if(e&1&&(n(0,"td",28)(1,"span",29),l(2),r()()),e&2){let t=a.$implicit;s(2),P(t.attributes==null?null:t.attributes.title)}}function We(e,a){e&1&&(n(0,"th",27),l(1,"Currency"),r())}function je(e,a){if(e&1&&(n(0,"td",28),l(1),r()),e&2){let t=a.$implicit;s(),E(" ",t.attributes==null?null:t.attributes.currency," ")}}function ze(e,a){e&1&&(n(0,"th",27),l(1,"Tax Count"),r())}function Oe(e,a){if(e&1&&(n(0,"td",28),l(1),r()),e&2){let t=a.$implicit;s(),E(" ",(t.attributes==null||t.attributes.taxes==null?null:t.attributes.taxes.length)||0," ")}}function Ue(e,a){e&1&&(n(0,"th",30),l(1,"Actions"),r())}function Ge(e,a){if(e&1){let t=D();n(0,"td",31)(1,"button",32)(2,"mat-icon"),l(3,"more_vert"),r()(),n(4,"mat-menu",null,1)(6,"button",33),M("click",function(){let o=S(t).$implicit,m=p(2);return C(m.editTaxSet(o))}),n(7,"mat-icon"),l(8,"edit"),r(),n(9,"span"),l(10,"Edit"),r()(),n(11,"button",34),M("click",function(){let o=S(t).$implicit,m=p(2);return C(m.deleteTaxSet(o))}),n(12,"mat-icon"),l(13,"delete"),r(),n(14,"span"),l(15,"Delete"),r()()()()}if(e&2){let t=V(5);s(),c("matMenuTriggerFor",t)}}function Je(e,a){e&1&&u(0,"tr",35)}function Ke(e,a){e&1&&u(0,"tr",36)}function Xe(e,a){if(e&1){let t=D();n(0,"mat-card",7)(1,"mat-card-content",10)(2,"div",11)(3,"mat-form-field",12)(4,"mat-label"),l(5,"Search tax sets"),r(),n(6,"input",13),Q("ngModelChange",function(o){S(t);let m=p();return H(m.searchText,o)||(m.searchText=o),C(o)}),M("input",function(){S(t);let o=p();return C(o.applyFilter())}),r(),n(7,"mat-icon",14),l(8,"search"),r()()(),n(9,"table",15,0),_(11,16),f(12,$e,2,0,"th",17)(13,qe,3,1,"td",18),x(),_(14,19),f(15,We,2,0,"th",17)(16,je,2,1,"td",18),x(),_(17,20),f(18,ze,2,0,"th",17)(19,Oe,2,1,"td",18),x(),_(20,21),f(21,Ue,2,0,"th",22)(22,Ge,16,1,"td",23),x(),f(23,Je,1,0,"tr",24)(24,Ke,1,0,"tr",25),r(),u(25,"mat-paginator",26),r()()}if(e&2){let t=p();s(6),B("ngModel",t.searchText),s(3),c("dataSource",t.dataSource),s(14),c("matHeaderRowDef",t.displayedColumns),s(),c("matRowDefColumns",t.displayedColumns),s(),c("pageSizeOptions",N(5,Qe))}}function Ye(e,a){e&1&&u(0,"app-no-record",8)}var He=class e{taxSetService=d(Be);router=d(q);dialog=d(Fe);snackBar=d(O);storeStore=d(U);route=d($);paginator;sort;table;searchText="";displayedColumns=["title","currency","taxes_count","actions"];dataSource=new we([]);taxSets=_e({params:()=>({propertyId:this.storeStore.selectedStore()?.channex?.propertyId}),stream:({params:a})=>this.taxSetService.getTaxSets(a.propertyId)});constructor(){I(()=>{let a=this.taxSets.value();if(a?.data){let t=a.data.map(i=>F(R({id:i.id},i.attributes),{attributes:i.attributes}));this.dataSource.data=t}})}ngAfterViewInit(){this.dataSource&&this.paginator&&this.sort&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}applyFilter(){this.dataSource&&(this.dataSource.filter=this.searchText.trim().toLowerCase(),this.paginator&&this.paginator.firstPage())}createTaxSet(){this.router.navigate(["../create"],{relativeTo:this.route})}editTaxSet(a){this.router.navigate(["../edit",a.id],{relativeTo:this.route})}deleteTaxSet(a){this.dialog.open(Pe,{data:{title:"Delete Tax Set",message:`Are you sure you want to delete the tax set "${a.attributes?.title}"?`}}).afterClosed().subscribe(i=>{i&&this.taxSetService.deleteTaxSet(a.id).subscribe({next:()=>{this.snackBar.open("Tax set deleted successfully","Close",{duration:3e3}),this.taxSets.reload()},error:o=>{let m=o.error?.message||"Failed to delete tax set";this.snackBar.open(m,"Close",{duration:5e3})}})})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=k({type:e,selectors:[["app-channel-manager-list-tax-sets"]],viewQuery:function(t,i){if(t&1&&(T(w,5),T(L,5),T(v,5)),t&2){let o;y(o=b())&&(i.paginator=o.first),y(o=b())&&(i.sort=o.first),y(o=b())&&(i.table=o.first)}},decls:10,vars:4,consts:[["table",""],["menu","matMenu"],["title","Tax Sets","subtitle","Manage your tax sets","actionLabel","Create Tax Set"],["actions",""],["matButton","filled","color","primary",3,"click"],[1,"flex","justify-center","items-center","py-20"],["icon","error_outline","title","Failed to Load Tax Sets",3,"message"],["appearance","outlined",1,"mt-6"],["icon","assignment","title","No Tax Sets Found","message","No tax sets have been created yet. Create your first tax set to get started."],["diameter","50"],[1,"p-0"],[1,"p-4","border-b","border-gray-200"],["appearance","outline",1,"w-full","md:w-80"],["matInput","","placeholder","Search by title...",3,"ngModelChange","input","ngModel"],["matSuffix",""],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","currency"],["matColumnDef","taxes_count"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"font-semibold","text-gray-900"],["mat-header-cell",""],["mat-cell","",1,"text-right"],["mat-icon-button","","matTooltip","More options",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"text-red-600",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){t&1&&(n(0,"app-page-header",2),_(1,3),n(2,"button",4),M("click",function(){return i.createTaxSet()}),n(3,"mat-icon"),l(4,"add"),r(),l(5," Create Tax Set "),r(),x(),r(),g(6,Ne,2,0,"div",5),g(7,Ae,1,1,"app-no-record",6),g(8,Xe,26,6,"mat-card",7),g(9,Ye,1,0,"app-no-record",8)),t&2&&(s(6),h(i.taxSets.isLoading()?6:-1),s(),h(i.taxSets.error()?7:-1),s(),h(!i.taxSets.isLoading()&&i.dataSource&&i.dataSource.data.length>0?8:-1),s(),h(!i.taxSets.isLoading()&&(!i.dataSource||i.dataSource.data.length===0)&&!i.taxSets.error()?9:-1))},dependencies:[A,ve,v,Se,Me,Ce,xe,Te,ge,he,ye,be,Ee,w,Ve,L,ke,Y,K,X,de,me,le,se,ue,ce,z,j,W,J,G,ae,ee,Z,te,fe,pe,De,Le,Ie,Re,oe,ie,ne,re],encapsulation:2,changeDetection:0})};export{He as ChannelManagerListTaxSets};
