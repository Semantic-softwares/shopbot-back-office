import{a as O,b as q}from"./chunk-VCE2LHCK.js";import"./chunk-HFTRPIKU.js";import{b as P}from"./chunk-KR7TMRYR.js";import{a as N}from"./chunk-7QB7BEGO.js";import{a as D}from"./chunk-EUHZN2UI.js";import{a as T}from"./chunk-YEWYHM4L.js";import{g as B}from"./chunk-PZG5LZPC.js";import{C as R,E as w,g as C,h as M,m as k,s as F,t as _}from"./chunk-2UT4NYMV.js";import{a as I,b as G}from"./chunk-MNFAJ2ZP.js";import"./chunk-N3VBTGB6.js";import"./chunk-4KLRET2M.js";import{Y as E,_ as y}from"./chunk-KSQJ4KAT.js";import"./chunk-RDMIWI4X.js";import"./chunk-AGZJ637K.js";import"./chunk-VYX7HJYX.js";import"./chunk-FORATDN3.js";import{Eb as h,Fb as b,Kb as g,Lb as i,Mb as e,Nb as o,Rb as f,Sb as p,Yb as x,Za as d,ca as m,mb as v,nc as t,ta as c}from"./chunk-53XJD7JZ.js";import{a as u,b as S}from"./chunk-EQDQRRRY.js";function z(a,n){a&1&&(f(0),i(1,"mat-icon",25),t(2,"refresh"),e(),t(3," Saving... "),p())}function V(a,n){a&1&&(f(0),i(1,"mat-icon",26),t(2,"save"),e(),t(3," Save Notification Settings "),p())}var j=class a{fb=m(R);snackBar=m(N);storeService=m(T);storeStore=m(D);loading=c(!1);saving=c(!1);notificationSettingsForm;ngOnInit(){this.initializeForm(),this.loadSettings()}initializeForm(){this.notificationSettingsForm=this.fb.group({reservationConfirmation:[!0],checkInReminder:[!0],checkOutReminder:[!0],paymentConfirmation:[!0],cancellationNotice:[!0],guestFeedbackRequest:[!1],smsNotifications:[!1],pushNotifications:[!0]})}loadSettings(){this.loading.set(!0);let n=this.storeStore.selectedStore();n?.hotelSettings?.notifications&&this.notificationSettingsForm.patchValue(n.hotelSettings.notifications),this.loading.set(!1)}saveNotificationSettings(){if(this.storeStore.selectedStore()){this.saving.set(!0);let n=this.storeStore.selectedStore(),s=this.notificationSettingsForm.value,l={hotelSettings:S(u({},n.hotelSettings),{notifications:s})};this.storeService.updateStore(n._id,l).subscribe({next:()=>{this.storeService.getStore(n._id).subscribe({next:r=>{this.storeStore.updateStore(r),this.storeService.saveStoreLocally(r),this.saving.set(!1),this.snackBar.open("Notification settings saved successfully!","Close",{duration:3e3})},error:r=>{console.error("Error fetching updated store:",r),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data.","Close",{duration:5e3})}})},error:r=>{console.error("Error saving notification settings:",r),this.saving.set(!1),this.snackBar.open("Failed to save notification settings.","Close",{duration:5e3})}})}}static \u0275fac=function(s){return new(s||a)};static \u0275cmp=v({type:a,selectors:[["app-notifications-settings"]],decls:92,vars:3,consts:[[1,"py-6"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"text-red-600"],[1,"p-6","space-y-6"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-500"],["formControlName","reservationConfirmation","color","primary"],["formControlName","checkInReminder","color","primary"],["formControlName","checkOutReminder","color","primary"],["formControlName","paymentConfirmation","color","primary"],["formControlName","cancellationNotice","color","primary"],["formControlName","guestFeedbackRequest","color","primary"],[1,"text-green-600"],["formControlName","smsNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"font-semibold","text-green-900","mb-2","flex","items-center","gap-2"],[1,"text-sm","text-green-800","space-y-1"],["type","submit","mat-raised-button","","color","primary",1,"w-full",3,"disabled"],[1,"animate-spin","mr-2"],[1,"mr-2"]],template:function(s,l){s&1&&(i(0,"div",0)(1,"form",1),x("ngSubmit",function(){return l.saveNotificationSettings()}),i(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5)(6,"mat-icon",6),t(7,"person"),e(),t(8," Guest Notifications "),e()(),i(9,"div",7)(10,"div",8)(11,"div",9)(12,"div")(13,"label",10),t(14,"Reservation Confirmation"),e(),i(15,"p",11),t(16,"Send confirmation emails for new reservations"),e()(),o(17,"mat-slide-toggle",12),e(),i(18,"div",9)(19,"div")(20,"label",10),t(21,"Check-in Reminder"),e(),i(22,"p",11),t(23,"Remind guests about upcoming check-ins"),e()(),o(24,"mat-slide-toggle",13),e(),i(25,"div",9)(26,"div")(27,"label",10),t(28,"Check-out Reminder"),e(),i(29,"p",11),t(30,"Remind guests about check-out times"),e()(),o(31,"mat-slide-toggle",14),e(),i(32,"div",9)(33,"div")(34,"label",10),t(35,"Payment Confirmation"),e(),i(36,"p",11),t(37,"Send receipts for payments"),e()(),o(38,"mat-slide-toggle",15),e(),i(39,"div",9)(40,"div")(41,"label",10),t(42,"Cancellation Notice"),e(),i(43,"p",11),t(44,"Notify guests about cancellations"),e()(),o(45,"mat-slide-toggle",16),e(),i(46,"div",9)(47,"div")(48,"label",10),t(49,"Feedback Request"),e(),i(50,"p",11),t(51,"Request feedback after checkout"),e()(),o(52,"mat-slide-toggle",17),e()()()(),i(53,"div",3)(54,"div",4)(55,"h3",5)(56,"mat-icon",18),t(57,"communication"),e(),t(58," Communication Channels "),e()(),i(59,"div",7)(60,"div",8)(61,"div",9)(62,"div")(63,"label",10),t(64,"SMS Notifications"),e(),i(65,"p",11),t(66,"Send important updates via SMS"),e()(),o(67,"mat-slide-toggle",19),e(),i(68,"div",9)(69,"div")(70,"label",10),t(71,"Push Notifications"),e(),i(72,"p",11),t(73,"Send real-time browser notifications"),e()(),o(74,"mat-slide-toggle",20),e()(),i(75,"div",21)(76,"h5",22)(77,"mat-icon",18),t(78,"tips_and_updates"),e(),t(79," Best Practices "),e(),i(80,"ul",23)(81,"li"),t(82,"\u2022 Keep notifications relevant and timely"),e(),i(83,"li"),t(84,"\u2022 Avoid overwhelming guests with messages"),e(),i(85,"li"),t(86,"\u2022 Test notification content before enabling"),e(),i(87,"li"),t(88,"\u2022 Respect guest communication preferences"),e()()(),i(89,"button",24),h(90,z,4,0,"ng-container")(91,V,4,0,"ng-container"),e()()()()()()),s&2&&(d(),g("formGroup",l.notificationSettingsForm),d(88),g("disabled",l.saving()),d(),b(l.saving()?90:91))},dependencies:[w,k,C,M,_,F,B,y,E,G,I,q,O,P],styles:["[_nghost-%COMP%]{display:block}"]})};export{j as NotificationsSettings};
