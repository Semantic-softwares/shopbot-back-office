import{a as O}from"./chunk-CZ2MIGG7.js";import{c as oe}from"./chunk-UAGP56HF.js";import"./chunk-QXGZPCFY.js";import{g as ie}from"./chunk-HA7VDR7W.js";import{a as re,b as ne}from"./chunk-7C3RSL2D.js";import{o as X,p as Y,q as ee}from"./chunk-FSA22CPB.js";import{b as ae}from"./chunk-6U4I4OYM.js";import"./chunk-M2YK6UF7.js";import{H as $}from"./chunk-BVQK7CK4.js";import{a as te}from"./chunk-AGZJ637K.js";import{c as K}from"./chunk-7EKHSXIM.js";import"./chunk-TQDHD3WD.js";import{B as J,j as W,k as N,p as Q,q as Z,t as q}from"./chunk-DWCYWQVU.js";import{Cc as w,E as S,Ec as C,Jb as u,Kb as e,Lb as t,Mb as f,Qb as U,Ub as g,Vb as R,X as p,_a as o,aa as L,ba as P,fa as v,fc as b,g as G,h as y,ic as i,jc as c,kb as M,kc as _,la as B,lb as V,lc as E,ma as F,n as x,qb as k,s as T,va as m}from"./chunk-5AECHVKR.js";import"./chunk-EQDQRRRY.js";var se=(()=>{class l{static \u0275fac=function(r){return new(r||l)};static \u0275mod=V({type:l});static \u0275inj=P({imports:[O,$,O,$]})}return l})();var D=class l{http=v(J);baseUrl=te.apiUrl+"/analytics";dashboardStatsSubject=new y(null);dashboardStats$=this.dashboardStatsSubject.asObservable();recentActivitiesSubject=new y([]);recentActivities$=this.recentActivitiesSubject.asObservable();loadingSubject=new y(!1);loading$=this.loadingSubject.asObservable();errorSubject=new y(null);error$=this.errorSubject.asObservable();getDashboardStats(){return this.loadingSubject.next(!0),this.errorSubject.next(null),this.http.get(`${this.baseUrl}/dashboard`).pipe(T(n=>(this.dashboardStatsSubject.next(n),this.loadingSubject.next(!1),n)),S(n=>{console.error("Error fetching dashboard stats:",n),this.errorSubject.next("Failed to load dashboard statistics"),this.loadingSubject.next(!1);let a={totalRooms:50,availableRooms:12,occupancyRate:76,checkedInGuests:38,todayCheckins:8,todayCheckouts:5,todayRevenue:4250,monthlyRevenue:125e3,lastUpdated:new Date};return this.dashboardStatsSubject.next(a),x(a)}))}getOccupancyTrend(n=7){return this.http.get(`${this.baseUrl}/occupancy-trend?days=${n}`).pipe(S(a=>{console.error("Error fetching occupancy trend:",a);let r=Array.from({length:n},(s,h)=>{let d=new Date;return d.setDate(d.getDate()-(n-1-h)),{date:d.toISOString().split("T")[0],occupancyRate:Math.floor(Math.random()*40)+60,occupiedRooms:Math.floor(Math.random()*20)+30,totalRooms:50}});return x(r)}))}getRevenueTrend(n=7){return this.http.get(`${this.baseUrl}/revenue-trend?days=${n}`).pipe(S(a=>{console.error("Error fetching revenue trend:",a);let r=Array.from({length:n},(s,h)=>{let d=new Date;return d.setDate(d.getDate()-(n-1-h)),{date:d.toISOString().split("T")[0],revenue:Math.floor(Math.random()*3e3)+2e3,reservationCount:Math.floor(Math.random()*10)+5}});return x(r)}))}getRecentActivities(n=10){return this.http.get(`${this.baseUrl}/recent-activities?limit=${n}`).pipe(T(a=>(this.recentActivitiesSubject.next(a),a)),S(a=>{console.error("Error fetching recent activities:",a);let r=[{id:"1",title:"John Doe checked in to room 205",icon:"check_in",type:"Check-in",time:"15m ago",timestamp:new Date(Date.now()-15*60*1e3)},{id:"2",title:"New reservation by Sarah Wilson",icon:"book_online",type:"Reservation",time:"32m ago",timestamp:new Date(Date.now()-32*60*1e3)},{id:"3",title:"Mike Johnson checked out from room 102",icon:"check_out",type:"Check-out",time:"1h ago",timestamp:new Date(Date.now()-60*60*1e3)},{id:"4",title:"Room 301 maintenance completed",icon:"build",type:"Maintenance",time:"2h ago",timestamp:new Date(Date.now()-2*60*60*1e3)},{id:"5",title:"Payment received from Lisa Chen",icon:"payment",type:"Payment",time:"3h ago",timestamp:new Date(Date.now()-3*60*60*1e3)}];return this.recentActivitiesSubject.next(r),x(r)}))}refreshData(){this.getDashboardStats().subscribe(),this.getRecentActivities().subscribe()}clearError(){this.errorSubject.next(null)}static \u0275fac=function(a){return new(a||l)};static \u0275prov=L({token:l,factory:l.\u0275fac,providedIn:"root"})};function ce(l,n){if(l&1){let a=U();e(0,"div",56)(1,"div",10)(2,"div",52)(3,"mat-icon",57),i(4,"error"),t(),e(5,"span",58),i(6),t()(),e(7,"button",59),g("click",function(){B(a);let s=R();return F(s.clearError())}),e(8,"mat-icon"),i(9,"close"),t()()()()}if(l&2){let a=R();o(6),c(a.error())}}function me(l,n){if(l&1&&(e(0,"div",60)(1,"div",61)(2,"mat-icon",62),i(3),t()(),e(4,"div",63)(5,"p",64),i(6),t(),e(7,"p",65),i(8),t()(),e(9,"div",55),i(10),t()()),l&2){let a=n.$implicit;o(3),c(a.icon),o(3),c(a.title),o(2),c(a.time),o(2),c(a.type)}}function pe(l,n){l&1&&(e(0,"div",66)(1,"mat-icon",67),i(2,"history"),t(),e(3,"p"),i(4,"Recent activity will appear here"),t()())}var de=class l{router=v(K);analyticsService=v(D);destroy$=new G;storeStore=v(ae);get currency(){return this.storeStore.selectedStore()?.currencyCode||this.storeStore.selectedStore()?.currency||"$"}get defaultValue(){return"0"}dashboardStats=m(null);recentActivities=m([]);loading=m(!1);error=m(null);lastUpdated=m(new Date);occupancyChartData=m({labels:[],datasets:[{data:[],label:"Occupancy Rate (%)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:!0,tension:.4}]});occupancyChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(n){return n+"%"}}}}};revenueChartData=m({labels:[],datasets:[{data:[],label:"Daily Revenue",backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]});revenueChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:n=>this.currency+n}}}};ngOnInit(){this.analyticsService.dashboardStats$.pipe(p(this.destroy$)).subscribe(n=>{this.dashboardStats.set(n),n&&this.lastUpdated.set(n.lastUpdated)}),this.analyticsService.recentActivities$.pipe(p(this.destroy$)).subscribe(n=>{this.recentActivities.set(n)}),this.analyticsService.loading$.pipe(p(this.destroy$)).subscribe(n=>{this.loading.set(n)}),this.analyticsService.error$.pipe(p(this.destroy$)).subscribe(n=>{this.error.set(n)}),this.refreshData(),this.loadChartData()}loadChartData(){this.analyticsService.getOccupancyTrend(7).pipe(p(this.destroy$)).subscribe(n=>{this.occupancyChartData.set({labels:n.map(a=>new Date(a.date).toLocaleDateString("en-US",{weekday:"short"})),datasets:[{data:n.map(a=>a.occupancyRate),label:"Occupancy Rate (%)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:!0,tension:.4}]})}),this.analyticsService.getRevenueTrend(7).pipe(p(this.destroy$)).subscribe(n=>{this.revenueChartData.set({labels:n.map(a=>new Date(a.date).toLocaleDateString("en-US",{weekday:"short"})),datasets:[{data:n.map(a=>a.revenue),label:`Daily Revenue (${this.currency})`,backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:1}]})})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}refreshData(){this.analyticsService.refreshData(),this.loadChartData()}clearError(){this.analyticsService.clearError()}navigateTo(n){this.router.navigate([n],{relativeTo:this.router.routerState.root})}static \u0275fac=function(a){return new(a||l)};static \u0275cmp=M({type:l,selectors:[["app-overview"]],decls:134,vars:38,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-50","to-blue-50","p-4","md:p-6","lg:p-8"],[1,"max-w-7xl","mx-auto","space-y-6"],[1,"text-center","space-y-2"],[1,"flex","items-center","justify-center","space-x-4"],[1,"text-3xl","md:text-4xl","font-bold","text-gray-800"],["mat-icon-button","",1,"!text-blue-600","hover:!bg-blue-50",3,"click","disabled"],[1,"text-gray-600","text-lg"],["class","bg-red-50 border border-red-200 rounded-lg p-4 max-w-2xl mx-auto",4,"ngIf"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","hover:shadow-lg","transition-all","duration-300","p-6"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide"],[1,"text-3xl","font-bold","text-gray-900","mt-2"],[1,"text-sm","text-emerald-600","mt-1"],[1,"font-medium"],[1,"p-3","bg-blue-50","rounded-lg"],[1,"text-blue-600","!text-2xl"],[1,"text-sm","text-amber-600","mt-1"],[1,"p-3","bg-emerald-50","rounded-lg"],[1,"text-emerald-600","!text-2xl"],[1,"text-sm","text-purple-600","mt-1"],[1,"p-3","bg-purple-50","rounded-lg"],[1,"text-purple-600","!text-2xl"],[1,"text-sm","text-green-600","mt-1"],[1,"p-3","bg-green-50","rounded-lg"],[1,"text-green-600","!text-2xl"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-6"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-lg","font-semibold","text-gray-800"],[1,"flex","items-center","space-x-2","text-sm","text-gray-500"],[1,"w-3","h-3","bg-blue-500","rounded-full"],[1,"h-64","relative"],["baseChart","","type","line",1,"!h-full","!w-full",3,"data","options"],[1,"w-3","h-3","bg-green-500","rounded-full"],["baseChart","","type","bar",1,"!h-full","!w-full",3,"data","options"],[1,"text-lg","font-semibold","text-gray-800","mb-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["mat-stroked-button","",1,"!h-20","!flex","!flex-col","!items-center","!justify-center","!space-y-2","!border-blue-200","hover:!bg-blue-50","hover:!border-blue-300","!transition-all","!duration-200",3,"click"],[1,"!text-blue-600"],[1,"!text-sm","!font-medium","!text-gray-700"],["mat-stroked-button","",1,"!h-20","!flex","!flex-col","!items-center","!justify-center","!space-y-2","!border-emerald-200","hover:!bg-emerald-50","hover:!border-emerald-300","!transition-all","!duration-200",3,"click"],[1,"!text-emerald-600"],["mat-stroked-button","",1,"!h-20","!flex","!flex-col","!items-center","!justify-center","!space-y-2","!border-purple-200","hover:!bg-purple-50","hover:!border-purple-300","!transition-all","!duration-200",3,"click"],[1,"!text-purple-600"],["mat-stroked-button","",1,"!h-20","!flex","!flex-col","!items-center","!justify-center","!space-y-2","!border-amber-200","hover:!bg-amber-50","hover:!border-amber-300","!transition-all","!duration-200",3,"click"],[1,"!text-amber-600"],["mat-button","",1,"!text-blue-600","!text-sm"],[1,"space-y-4"],["class","flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",4,"ngFor","ngForOf"],["class","text-center py-8 text-gray-500",4,"ngIf"],[1,"bg-white","rounded-xl","shadow-sm","border","border-gray-100","p-4"],[1,"flex","items-center","space-x-2"],[1,"w-2","h-2","bg-green-500","rounded-full"],[1,"text-sm","text-gray-600"],[1,"text-xs","text-gray-400"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","max-w-2xl","mx-auto"],[1,"text-red-600"],[1,"text-red-800"],["mat-icon-button","",1,"!text-red-600",3,"click"],[1,"flex","items-center","space-x-4","p-3","bg-gray-50","rounded-lg"],[1,"p-2","bg-blue-100","rounded-lg"],[1,"!text-blue-600","!text-lg"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-xs","text-gray-500"],[1,"text-center","py-8","text-gray-500"],[1,"!text-3xl","mb-2"]],template:function(a,r){if(a&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),i(5,"Hotel Management Dashboard"),t(),e(6,"button",5),g("click",function(){return r.refreshData()}),e(7,"mat-icon"),i(8,"refresh"),t()()(),e(9,"p",6),i(10,"Welcome back! Here's what's happening at your hotel today."),t(),k(11,ce,10,1,"div",7),t(),e(12,"div",8)(13,"div",9)(14,"div",10)(15,"div")(16,"p",11),i(17,"Total Rooms"),t(),e(18,"p",12),i(19),t(),e(20,"p",13)(21,"span",14),i(22),t(),i(23," Available "),t()(),e(24,"div",15)(25,"mat-icon",16),i(26,"hotel"),t()()()(),e(27,"div",9)(28,"div",10)(29,"div")(30,"p",11),i(31,"Occupancy Rate"),t(),e(32,"p",12),i(33),t(),e(34,"p",17)(35,"span",14),i(36),t(),i(37," Guests "),t()(),e(38,"div",18)(39,"mat-icon",19),i(40,"people"),t()()()(),e(41,"div",9)(42,"div",10)(43,"div")(44,"p",11),i(45,"Today's Check-ins"),t(),e(46,"p",12),i(47),t(),e(48,"p",20)(49,"span",14),i(50),t(),i(51," Check-outs "),t()(),e(52,"div",21)(53,"mat-icon",22),i(54,"event_available"),t()()()(),e(55,"div",9)(56,"div",10)(57,"div")(58,"p",11),i(59,"Today's Revenue"),t(),e(60,"p",12),i(61),w(62,"number"),t(),e(63,"p",23)(64,"span",14),i(65),w(66,"number"),t(),i(67," This Month "),t()(),e(68,"div",24)(69,"mat-icon",25),i(70,"trending_up"),t()()()()(),e(71,"div",26)(72,"div",27)(73,"div",28)(74,"h3",29),i(75,"Weekly Occupancy"),t(),e(76,"div",30),f(77,"div",31),e(78,"span"),i(79,"Occupancy Rate"),t()()(),e(80,"div",32),f(81,"canvas",33),t()(),e(82,"div",27)(83,"div",28)(84,"h3",29),i(85,"Revenue Trend"),t(),e(86,"div",30),f(87,"div",34),e(88,"span"),i(89,"Daily Revenue"),t()()(),e(90,"div",32),f(91,"canvas",35),t()()(),e(92,"div",27)(93,"h3",36),i(94,"Quick Actions"),t(),e(95,"div",37)(96,"button",38),g("click",function(){return r.navigateTo("./reservations")}),e(97,"mat-icon",39),i(98,"book_online"),t(),e(99,"span",40),i(100,"New Reservation"),t()(),e(101,"button",41),g("click",function(){return r.navigateTo("./checkin-checkout")}),e(102,"mat-icon",42),i(103,"how_to_reg"),t(),e(104,"span",40),i(105,"Check-In / Out"),t()(),e(106,"button",43),g("click",function(){return r.navigateTo("./guests")}),e(107,"mat-icon",44),i(108,"person_add"),t(),e(109,"span",40),i(110,"Manage Guests"),t()(),e(111,"button",45),g("click",function(){return r.navigateTo("./rooms")}),e(112,"mat-icon",46),i(113,"hotel"),t(),e(114,"span",40),i(115,"Room Management"),t()()()(),e(116,"div",27)(117,"div",28)(118,"h3",29),i(119,"Recent Activity"),t(),e(120,"button",47),i(121,"View All"),t()(),e(122,"div",48),k(123,me,11,4,"div",49)(124,pe,5,0,"div",50),t()(),e(125,"div",51)(126,"div",10)(127,"div",52),f(128,"div",53),e(129,"span",54),i(130,"System Status: Online"),t()(),e(131,"div",55),i(132),w(133,"date"),t()()()()()),a&2){let s,h,d,A,z,I,j,H;o(6),u("disabled",r.loading()),o(),b("animate-spin",r.loading()),o(4),u("ngIf",r.error()),o(7),b("animate-pulse",r.loading()),o(),_(" ",((s=r.dashboardStats())==null?null:s.totalRooms)||r.defaultValue," "),o(3),c(((h=r.dashboardStats())==null?null:h.availableRooms)||r.defaultValue),o(10),b("animate-pulse",r.loading()),o(),_(" ",((d=r.dashboardStats())==null?null:d.occupancyRate)||r.defaultValue,"% "),o(3),c(((A=r.dashboardStats())==null?null:A.checkedInGuests)||r.defaultValue),o(10),b("animate-pulse",r.loading()),o(),_(" ",((z=r.dashboardStats())==null?null:z.todayCheckins)||r.defaultValue," "),o(3),c(((I=r.dashboardStats())==null?null:I.todayCheckouts)||r.defaultValue),o(10),b("animate-pulse",r.loading()),o(),E(" ",r.currency,"",C(62,29,(j=r.dashboardStats())==null?null:j.todayRevenue,"1.0-0")||r.defaultValue," "),o(4),E("",r.currency,"",C(66,32,(H=r.dashboardStats())==null?null:H.monthlyRevenue,"1.0-0")||r.defaultValue),o(16),u("data",r.occupancyChartData())("options",r.occupancyChartOptions),o(10),u("data",r.revenueChartData())("options",r.revenueChartOptions),o(32),u("ngForOf",r.recentActivities()),o(),u("ngIf",!r.recentActivities()||r.recentActivities().length===0),o(8),_(" Last updated: ",C(133,35,r.lastUpdated(),"short")," ")}},dependencies:[q,W,N,Z,Q,ie,ne,re,ee,Y,X,se,oe],encapsulation:2})};export{de as OverviewComponent};
