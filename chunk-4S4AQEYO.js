import{a as Ni}from"./chunk-4KRXC7QO.js";import{a as Oi}from"./chunk-PBLWMDWC.js";import{a as wi}from"./chunk-HJ3IDALV.js";import{a as Mi,b as Ti,c as Di}from"./chunk-67365OOW.js";import{a as Ai,b as ki}from"./chunk-24SFQJLQ.js";import{a as xi,b as yi,c as Ci,h as Si}from"./chunk-DOHPGGLS.js";import"./chunk-MS4AQ6UA.js";import{a as Ei,b as Ri}from"./chunk-YVYCFWPM.js";import{a as Ii,b as Fi}from"./chunk-LIUA42FM.js";import"./chunk-JQGESV5S.js";import"./chunk-IX32NZKS.js";import{d as Rt}from"./chunk-XQNDMVIO.js";import{c as pi,d as ui}from"./chunk-3632TDEK.js";import{a as wt,b as Ot}from"./chunk-I24LUS2H.js";import"./chunk-F5X5MWHG.js";import{a as gi,b as fi}from"./chunk-H476YUNT.js";import{a as bi,b as _i}from"./chunk-LPJWQZ4I.js";import"./chunk-EEQKDLYL.js";import{c as vi}from"./chunk-NGGCDKIH.js";import"./chunk-JTD73F4Y.js";import{a as ri,b as si,c as li,d as di,e as mi,h as ci}from"./chunk-JGZ2V5AL.js";import{B as Jt,D as Xt,b as Gt,d as b,e as Pt,g as Lt,h as Vt,i as zt,k as $t,m as Bt,n as qt,o as jt,p as Ht,q as Ut,r as Qt,s as Wt,w as Kt,x as Yt,y as Zt}from"./chunk-CXVWFC6J.js";import"./chunk-JTLCVARK.js";import{a as ei,b as ti,c as ii,d as ni,f as oi,g as ai}from"./chunk-HA7VDR7W.js";import{a as ye,b as Ce}from"./chunk-7C3RSL2D.js";import{a as Nt}from"./chunk-COYOKZWK.js";import{b as xe}from"./chunk-OHZSVTBE.js";import"./chunk-VIOSJ367.js";import{b as Mt,f as Tt,g as Dt}from"./chunk-TEL7Y7UN.js";import{a as St,l as Et,m as It,o as Ft,p as At,q as kt}from"./chunk-FSA22CPB.js";import{b as hi}from"./chunk-6U4I4OYM.js";import"./chunk-M2YK6UF7.js";import{B as xt,F as yt,G as Ct,H as Te,a as pt,e as ut,h as ht,n as gt,p as ft,q as vt,y as bt,z as _t}from"./chunk-BVQK7CK4.js";import"./chunk-AGZJ637K.js";import{a as mt,c as ct}from"./chunk-7EKHSXIM.js";import"./chunk-TQDHD3WD.js";import{g as ot,j as at,m as Me,o as rt,q as st,s as lt,t as dt}from"./chunk-DWCYWQVU.js";import{$b as w,$c as ie,Aa as We,Ba as Ke,Bb as Z,Ca as ae,Cc as U,Db as c,Dc as ve,Ea as re,Eb as p,Ec as be,Fa as se,G as Re,Gb as ge,Gc as it,Hb as J,Ib as X,Jb as h,Kb as a,L as Ie,Lb as o,Mb as f,Mc as _e,Pb as j,Qb as B,Rb as ee,Ub as R,V as L,Vb as u,W as pe,Wb as le,X as S,Xb as de,Xc as te,Yb as P,Zb as me,_a as l,_b as D,a as qe,aa as He,ab as K,ad as nt,ba as ue,cb as Ye,da as Ue,dc as H,ec as Xe,fa as g,fb as Ze,fc as V,g as W,hc as fe,ic as s,jc as N,kb as $,kc as _,la as k,lb as he,lc as A,ma as M,mb as O,mc as Fe,n as ce,ob as q,qb as T,s as je,sb as Y,tb as Je,uc as et,va as v,vc as Ae,xc as ke,za as Qe,zc as tt}from"./chunk-5AECHVKR.js";import{a as $e,b as Be}from"./chunk-EQDQRRRY.js";var Qi=["*"];function Wi(n,i){n&1&&de(0)}var De=(()=>{class n{_elementRef=g(re);constructor(){}focus(){this._elementRef.nativeElement.focus()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["","cdkStepHeader",""]],hostAttrs:["role","tab"]})}return n})(),we=(()=>{class n{template=g(K);constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["","cdkStepLabel",""]]})}return n})();var Q={NUMBER:"number",EDIT:"edit",DONE:"done",ERROR:"error"},Ki=new Ue("STEPPER_GLOBAL_OPTIONS"),Se=(()=>{class n{_stepperOptions;_stepper=g(ne);_displayDefaultIndicatorType;stepLabel;_childForms;content;stepControl;get interacted(){return this._interacted()}set interacted(e){this._interacted.set(e)}_interacted=v(!1);interactedStream=new Y;label;errorMessage;ariaLabel;ariaLabelledby;get state(){return this._state()}set state(e){this._state.set(e)}_state=v(void 0);get editable(){return this._editable()}set editable(e){this._editable.set(e)}_editable=v(!0);optional=!1;get completed(){let e=this._completedOverride(),t=this._interacted();return e??(t&&(!this.stepControl||this.stepControl.valid))}set completed(e){this._completedOverride.set(e)}_completedOverride=v(null);index=v(-1);isSelected=_e(()=>this._stepper.selectedIndex===this.index());indicatorType=_e(()=>{let e=this.isSelected(),t=this.completed,r=this._state()??Q.NUMBER,d=this._editable();return this._showError()&&this.hasError&&!e?Q.ERROR:this._displayDefaultIndicatorType?!t||e?Q.NUMBER:d?Q.EDIT:Q.DONE:t&&!e?Q.DONE:t&&e?r:d&&e?Q.EDIT:r});isNavigable=_e(()=>{let e=this.isSelected();return this.completed||e||!this._stepper.linear});get hasError(){let e=this._customError();return e??this._getDefaultError()}set hasError(e){this._customError.set(e)}_customError=v(null);_getDefaultError(){return this.interacted&&!!this.stepControl?.invalid}constructor(){let e=g(Ki,{optional:!0});this._stepperOptions=e||{},this._displayDefaultIndicatorType=this._stepperOptions.displayDefaultIndicatorType!==!1}select(){this._stepper.selected=this}reset(){this._interacted.set(!1),this._completedOverride()!=null&&this._completedOverride.set(!1),this._customError()!=null&&this._customError.set(!1),this.stepControl&&(this._childForms?.forEach(e=>e.resetForm?.()),this.stepControl.reset())}ngOnChanges(){this._stepper._stateChanged()}_markAsInteracted(){this._interacted()||(this._interacted.set(!0),this.interactedStream.emit(this))}_showError(){return this._stepperOptions.showError??this._customError()!=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["cdk-step"]],contentQueries:function(t,r,d){if(t&1&&(P(d,we,5),P(d,Pt,5)),t&2){let m;D(m=w())&&(r.stepLabel=m.first),D(m=w())&&(r._childForms=m)}},viewQuery:function(t,r){if(t&1&&me(K,7),t&2){let d;D(d=w())&&(r.content=d.first)}},inputs:{stepControl:"stepControl",label:"label",errorMessage:"errorMessage",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],state:"state",editable:[2,"editable","editable",ie],optional:[2,"optional","optional",ie],completed:[2,"completed","completed",ie],hasError:[2,"hasError","hasError",ie]},outputs:{interactedStream:"interacted"},exportAs:["cdkStep"],features:[Ke],ngContentSelectors:Qi,decls:1,vars:0,template:function(t,r){t&1&&(le(),T(0,Wi,1,0,"ng-template"))},encapsulation:2,changeDetection:0})}return n})(),ne=(()=>{class n{_dir=g(yt,{optional:!0});_changeDetectorRef=g(te);_elementRef=g(re);_destroyed=new W;_keyManager;_steps;steps=new se;_stepHeader;_sortedHeaders=new se;linear=!1;get selectedIndex(){return this._selectedIndex()}set selectedIndex(e){this._steps?(this._isValidIndex(e),this.selectedIndex!==e&&(this.selected?._markAsInteracted(),!this._anyControlsInvalidOrPending(e)&&(e>=this.selectedIndex||this.steps.toArray()[e].editable)&&this._updateSelectedItemIndex(e))):this._selectedIndex.set(e)}_selectedIndex=v(0);get selected(){return this.steps?this.steps.toArray()[this.selectedIndex]:void 0}set selected(e){this.selectedIndex=e&&this.steps?this.steps.toArray().indexOf(e):-1}selectionChange=new Y;selectedIndexChange=new Y;_groupId=g(bt).getId("cdk-stepper-");get orientation(){return this._orientation}set orientation(e){this._orientation=e,this._keyManager&&this._keyManager.withVerticalOrientation(e==="vertical")}_orientation="horizontal";constructor(){}ngAfterContentInit(){this._steps.changes.pipe(L(this._steps),S(this._destroyed)).subscribe(e=>{this.steps.reset(e.filter(t=>t._stepper===this)),this.steps.forEach((t,r)=>t.index.set(r)),this.steps.notifyOnChanges()})}ngAfterViewInit(){if(this._stepHeader.changes.pipe(L(this._stepHeader),S(this._destroyed)).subscribe(e=>{this._sortedHeaders.reset(e.toArray().sort((t,r)=>t._elementRef.nativeElement.compareDocumentPosition(r._elementRef.nativeElement)&Node.DOCUMENT_POSITION_FOLLOWING?-1:1)),this._sortedHeaders.notifyOnChanges()}),this._keyManager=new xt(this._sortedHeaders).withWrap().withHomeAndEnd().withVerticalOrientation(this._orientation==="vertical"),this._keyManager.updateActiveItem(this.selectedIndex),(this._dir?this._dir.change:ce()).pipe(L(this._layoutDirection()),S(this._destroyed)).subscribe(e=>this._keyManager?.withHorizontalOrientation(e)),this._keyManager.updateActiveItem(this.selectedIndex),this.steps.changes.subscribe(()=>{this.selected||this._selectedIndex.set(Math.max(this.selectedIndex-1,0))}),this._isValidIndex(this.selectedIndex)||this._selectedIndex.set(0),this.linear&&this.selectedIndex>0){let e=this.steps.toArray().slice(0,this._selectedIndex());for(let t of e)t._markAsInteracted()}}ngOnDestroy(){this._keyManager?.destroy(),this.steps.destroy(),this._sortedHeaders.destroy(),this._destroyed.next(),this._destroyed.complete()}next(){this.selectedIndex=Math.min(this._selectedIndex()+1,this.steps.length-1)}previous(){this.selectedIndex=Math.max(this._selectedIndex()-1,0)}reset(){this._updateSelectedItemIndex(0),this.steps.forEach(e=>e.reset()),this._stateChanged()}_getStepLabelId(e){return`${this._groupId}-label-${e}`}_getStepContentId(e){return`${this._groupId}-content-${e}`}_stateChanged(){this._changeDetectorRef.markForCheck()}_getAnimationDirection(e){let t=e-this._selectedIndex();return t<0?this._layoutDirection()==="rtl"?"next":"previous":t>0?this._layoutDirection()==="rtl"?"previous":"next":"current"}_getFocusIndex(){return this._keyManager?this._keyManager.activeItemIndex:this._selectedIndex()}_updateSelectedItemIndex(e){let t=this.steps.toArray(),r=this._selectedIndex();this.selectionChange.emit({selectedIndex:e,previouslySelectedIndex:r,selectedStep:t[e],previouslySelectedStep:t[r]}),this._keyManager&&(this._containsFocus()?this._keyManager.setActiveItem(e):this._keyManager.updateActiveItem(e)),this._selectedIndex.set(e),this.selectedIndexChange.emit(e),this._stateChanged()}_onKeydown(e){let t=_t(e),r=e.keyCode,d=this._keyManager;d?.activeItemIndex!=null&&!t&&(r===32||r===13)?(this.selectedIndex=d.activeItemIndex,e.preventDefault()):d?.setFocusOrigin("keyboard").onKeydown(e)}_anyControlsInvalidOrPending(e){return this.linear&&e>=0?this.steps.toArray().slice(0,e).some(t=>{let r=t.stepControl;return(r?r.invalid||r.pending||!t.interacted:!t.completed)&&!t.optional&&!t._completedOverride()}):!1}_layoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_containsFocus(){let e=this._elementRef.nativeElement,t=ht();return e===t||e.contains(t)}_isValidIndex(e){return e>-1&&(!this.steps||e<this.steps.length)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["","cdkStepper",""]],contentQueries:function(t,r,d){if(t&1&&(P(d,Se,5),P(d,De,5)),t&2){let m;D(m=w())&&(r._steps=m),D(m=w())&&(r._stepHeader=m)}},inputs:{linear:[2,"linear","linear",ie],selectedIndex:[2,"selectedIndex","selectedIndex",nt],selected:"selected",orientation:"orientation"},outputs:{selectionChange:"selectionChange",selectedIndexChange:"selectedIndexChange"},exportAs:["cdkStepper"]})}return n})(),Pi=(()=>{class n{_stepper=g(ne);type="submit";constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["button","cdkStepperNext",""]],hostVars:1,hostBindings:function(t,r){t&1&&R("click",function(){return r._stepper.next()}),t&2&&ee("type",r.type)},inputs:{type:"type"}})}return n})(),Li=(()=>{class n{_stepper=g(ne);type="button";constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["button","cdkStepperPrevious",""]],hostVars:1,hostBindings:function(t,r){t&1&&R("click",function(){return r._stepper.previous()}),t&2&&ee("type",r.type)},inputs:{type:"type"}})}return n})(),Vi=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=he({type:n});static \u0275inj=ue({imports:[Ct]})}return n})();var Yi=(n,i,e)=>({index:n,active:i,optional:e});function Zi(n,i){if(n&1&&j(0,2),n&2){let e=u();h("ngTemplateOutlet",e.iconOverrides[e.state])("ngTemplateOutletContext",tt(2,Yi,e.index,e.active,e.optional))}}function Ji(n,i){if(n&1&&(a(0,"span",7),s(1),o()),n&2){let e=u(2);l(),N(e._getDefaultTextForState(e.state))}}function Xi(n,i){if(n&1&&(a(0,"span",8),s(1),o()),n&2){let e=u(3);l(),N(e._intl.completedLabel)}}function en(n,i){if(n&1&&(a(0,"span",8),s(1),o()),n&2){let e=u(3);l(),N(e._intl.editableLabel)}}function tn(n,i){if(n&1&&(c(0,Xi,2,1,"span",8)(1,en,2,1,"span",8),a(2,"mat-icon",7),s(3),o()),n&2){let e=u(2);p(e.state==="done"?0:e.state==="edit"?1:-1),l(3),N(e._getDefaultTextForState(e.state))}}function nn(n,i){if(n&1&&c(0,Ji,2,1,"span",7)(1,tn,4,2),n&2){let e,t=u();p((e=t.state)==="number"?0:1)}}function on(n,i){n&1&&(a(0,"div",4),j(1,9),o()),n&2&&(l(),h("ngTemplateOutlet",i.template))}function an(n,i){if(n&1&&(a(0,"div",4),s(1),o()),n&2){let e=u();l(),N(e.label)}}function rn(n,i){if(n&1&&(a(0,"div",5),s(1),o()),n&2){let e=u();l(),N(e._intl.optionalLabel)}}function sn(n,i){if(n&1&&(a(0,"div",6),s(1),o()),n&2){let e=u();l(),N(e.errorMessage)}}var zi=["*"];function ln(n,i){}function dn(n,i){if(n&1&&(de(0),T(1,ln,0,0,"ng-template",0)),n&2){let e=u();l(),h("cdkPortalOutlet",e._portal)}}var mn=["animatedContainer"],$i=n=>({step:n});function cn(n,i){n&1&&de(0)}function pn(n,i){n&1&&f(0,"div",7)}function un(n,i){if(n&1&&(j(0,6),c(1,pn,1,0,"div",7)),n&2){let e=i.$implicit,t=i.$index,r=i.$count;u(2);let d=H(4);h("ngTemplateOutlet",d)("ngTemplateOutletContext",ke(3,$i,e)),l(),p(t!==r-1?1:-1)}}function hn(n,i){if(n&1&&(a(0,"div",8,1),j(2,9),o()),n&2){let e=i.$implicit,t=i.$index,r=u(2);fe("mat-horizontal-stepper-content-"+r._getAnimationDirection(t)),h("id",r._getStepContentId(t)),Z("aria-labelledby",r._getStepLabelId(t))("inert",r.selectedIndex===t?null:""),l(2),h("ngTemplateOutlet",e.content)}}function gn(n,i){if(n&1&&(a(0,"div",2)(1,"div",3),J(2,un,2,5,null,null,ge),o(),a(4,"div",4),J(5,hn,3,6,"div",5,ge),o()()),n&2){let e=u();l(2),X(e.steps),l(3),X(e.steps)}}function fn(n,i){if(n&1&&(a(0,"div",10),j(1,6),a(2,"div",11,1)(4,"div",12)(5,"div",13),j(6,9),o()()()()),n&2){let e=i.$implicit,t=i.$index,r=i.$index,d=i.$count,m=u(2),x=H(4);l(),h("ngTemplateOutlet",x)("ngTemplateOutletContext",ke(10,$i,e)),l(),V("mat-stepper-vertical-line",r!==d-1)("mat-vertical-content-container-active",m.selectedIndex===t),Z("inert",m.selectedIndex===t?null:""),l(2),h("id",m._getStepContentId(t)),Z("aria-labelledby",m._getStepLabelId(t)),l(2),h("ngTemplateOutlet",e.content)}}function vn(n,i){if(n&1&&J(0,fn,7,12,"div",10,ge),n&2){let e=u();X(e.steps)}}function bn(n,i){if(n&1){let e=B();a(0,"mat-step-header",14),R("click",function(){let r=k(e).step;return M(r.select())})("keydown",function(r){k(e);let d=u();return M(d._onKeydown(r))}),o()}if(n&2){let e=i.step,t=u();V("mat-horizontal-stepper-header",t.orientation==="horizontal")("mat-vertical-stepper-header",t.orientation==="vertical"),h("tabIndex",t._getFocusIndex()===e.index()?0:-1)("id",t._getStepLabelId(e.index()))("index",e.index())("state",e.indicatorType())("label",e.stepLabel||e.label)("selected",e.isSelected())("active",e.isNavigable())("optional",e.optional)("errorMessage",e.errorMessage)("iconOverrides",t._iconOverrides)("disableRipple",t.disableRipple||!e.isNavigable())("color",e.color||t.color),Z("aria-posinset",e.index()+1)("aria-setsize",t.steps.length)("aria-controls",t._getStepContentId(e.index()))("aria-selected",e.isSelected())("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null)("aria-disabled",e.isNavigable()?null:!0)}}var Oe=(()=>{class n extends we{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ae(n)))(r||n)}})();static \u0275dir=O({type:n,selectors:[["","matStepLabel",""]],features:[q]})}return n})(),Ee=(()=>{class n{changes=new W;optionalLabel="Optional";completedLabel="Completed";editableLabel="Editable";static \u0275fac=function(t){return new(t||n)};static \u0275prov=He({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function _n(n){return n||new Ee}var xn={provide:Ee,deps:[[new Qe,new We,Ee]],useFactory:_n},Ne=(()=>{class n extends De{_intl=g(Ee);_focusMonitor=g(gt);_intlSubscription;state;label;errorMessage;iconOverrides;index;selected;active;optional;disableRipple;color;constructor(){super();let e=g(ft);e.load(St),e.load(vt);let t=g(te);this._intlSubscription=this._intl.changes.subscribe(()=>t.markForCheck())}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._intlSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,t){e?this._focusMonitor.focusVia(this._elementRef,e,t):this._elementRef.nativeElement.focus(t)}_stringLabel(){return this.label instanceof Oe?null:this.label}_templateLabel(){return this.label instanceof Oe?this.label:null}_getHostElement(){return this._elementRef.nativeElement}_getDefaultTextForState(e){return e=="number"?`${this.index+1}`:e=="edit"?"create":e=="error"?"warning":e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["mat-step-header"]],hostAttrs:["role","tab",1,"mat-step-header"],hostVars:2,hostBindings:function(t,r){t&2&&fe("mat-"+(r.color||"primary"))},inputs:{state:"state",label:"label",errorMessage:"errorMessage",iconOverrides:"iconOverrides",index:"index",selected:"selected",active:"active",optional:"optional",disableRipple:"disableRipple",color:"color"},features:[q],decls:10,vars:17,consts:[["matRipple","",1,"mat-step-header-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-step-icon-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-step-label"],[1,"mat-step-text-label"],[1,"mat-step-optional"],[1,"mat-step-sub-label-error"],["aria-hidden","true"],[1,"cdk-visually-hidden"],[3,"ngTemplateOutlet"]],template:function(t,r){if(t&1&&(f(0,"div",0),a(1,"div")(2,"div",1),c(3,Zi,1,6,"ng-container",2)(4,nn,2,1),o()(),a(5,"div",3),c(6,on,2,1,"div",4)(7,an,2,1,"div",4),c(8,rn,2,1,"div",5),c(9,sn,2,1,"div",6),o()),t&2){let d;h("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disableRipple),l(),fe(et("mat-step-icon-state-",r.state," mat-step-icon")),V("mat-step-icon-selected",r.selected),l(2),p(r.iconOverrides&&r.iconOverrides[r.state]?3:4),l(2),V("mat-step-label-active",r.active)("mat-step-label-selected",r.selected)("mat-step-label-error",r.state=="error"),l(),p((d=r._templateLabel())?6:r._stringLabel()?7:-1,d),l(2),p(r.optional&&r.state!="error"?8:-1),l(),p(r.state==="error"?9:-1)}},dependencies:[Et,Me,ye],styles:[`.mat-step-header{overflow:hidden;outline:none;cursor:pointer;position:relative;box-sizing:content-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-step-header:focus .mat-focus-indicator::before{content:""}.mat-step-header:hover[aria-disabled=true]{cursor:default}.mat-step-header:hover:not([aria-disabled]),.mat-step-header:hover[aria-disabled=false]{background-color:var(--mat-stepper-header-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-inverse-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-hover-state-layer-shape, var(--mat-sys-corner-medium))}.mat-step-header.cdk-keyboard-focused,.mat-step-header.cdk-program-focused{background-color:var(--mat-stepper-header-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-inverse-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));border-radius:var(--mat-stepper-header-focus-state-layer-shape, var(--mat-sys-corner-medium))}@media(hover: none){.mat-step-header:hover{background:none}}@media(forced-colors: active){.mat-step-header{outline:solid 1px}.mat-step-header[aria-selected=true] .mat-step-label{text-decoration:underline}.mat-step-header[aria-disabled=true]{outline-color:GrayText}.mat-step-header[aria-disabled=true] .mat-step-label,.mat-step-header[aria-disabled=true] .mat-step-icon,.mat-step-header[aria-disabled=true] .mat-step-optional{color:GrayText}}.mat-step-optional{font-size:12px;color:var(--mat-stepper-header-optional-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-sub-label-error{font-size:12px;font-weight:normal}.mat-step-icon{border-radius:50%;height:24px;width:24px;flex-shrink:0;position:relative;color:var(--mat-stepper-header-icon-foreground-color, var(--mat-sys-surface));background-color:var(--mat-stepper-header-icon-background-color, var(--mat-sys-on-surface-variant))}.mat-step-icon-content{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);display:flex}.mat-step-icon .mat-icon{font-size:16px;height:16px;width:16px}.mat-step-icon-state-error{background-color:var(--mat-stepper-header-error-state-icon-background-color, transparent);color:var(--mat-stepper-header-error-state-icon-foreground-color, var(--mat-sys-error))}.mat-step-icon-state-error .mat-icon{font-size:24px;height:24px;width:24px}.mat-step-label{display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:50px;vertical-align:middle;font-family:var(--mat-stepper-header-label-text-font, var(--mat-sys-title-small-font));font-size:var(--mat-stepper-header-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-stepper-header-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-active{color:var(--mat-stepper-header-selected-state-label-text-color, var(--mat-sys-on-surface-variant))}.mat-step-label.mat-step-label-error{color:var(--mat-stepper-header-error-state-label-text-color, var(--mat-sys-error));font-size:var(--mat-stepper-header-error-state-label-text-size, var(--mat-sys-title-small-size))}.mat-step-label.mat-step-label-selected{font-size:var(--mat-stepper-header-selected-state-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-stepper-header-selected-state-label-text-weight, var(--mat-sys-title-small-weight))}.mat-step-text-label{text-overflow:ellipsis;overflow:hidden}.mat-step-header .mat-step-header-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-step-icon-selected{background-color:var(--mat-stepper-header-selected-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-selected-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-done{background-color:var(--mat-stepper-header-done-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-done-state-icon-foreground-color, var(--mat-sys-on-primary))}.mat-step-icon-state-edit{background-color:var(--mat-stepper-header-edit-state-icon-background-color, var(--mat-sys-primary));color:var(--mat-stepper-header-edit-state-icon-foreground-color, var(--mat-sys-on-primary))}
`],encapsulation:2,changeDetection:0})}return n})(),yn=(()=>{class n{templateRef=g(K);name;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["ng-template","matStepperIcon",""]],inputs:{name:[0,"matStepperIcon","name"]}})}return n})(),Cn=(()=>{class n{_template=g(K);constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275dir=O({type:n,selectors:[["ng-template","matStepContent",""]]})}return n})(),Ge=(()=>{class n extends Se{_errorStateMatcher=g(xe,{skipSelf:!0});_viewContainerRef=g(Ze);_isSelected=qe.EMPTY;stepLabel=void 0;color;_lazyContent;_portal;ngAfterContentInit(){this._isSelected=this._stepper.steps.changes.pipe(pe(()=>this._stepper.selectionChange.pipe(je(e=>e.selectedStep===this),L(this._stepper.selected===this)))).subscribe(e=>{e&&this._lazyContent&&!this._portal&&(this._portal=new Mt(this._lazyContent._template,this._viewContainerRef))})}ngOnDestroy(){this._isSelected.unsubscribe()}isErrorState(e,t){let r=this._errorStateMatcher.isErrorState(e,t),d=!!(e&&e.invalid&&this.interacted);return r||d}static \u0275fac=(()=>{let e;return function(r){return(e||(e=ae(n)))(r||n)}})();static \u0275cmp=$({type:n,selectors:[["mat-step"]],contentQueries:function(t,r,d){if(t&1&&(P(d,Oe,5),P(d,Cn,5)),t&2){let m;D(m=w())&&(r.stepLabel=m.first),D(m=w())&&(r._lazyContent=m.first)}},hostAttrs:["hidden",""],inputs:{color:"color"},exportAs:["matStep"],features:[Ae([{provide:xe,useExisting:n},{provide:Se,useExisting:n}]),q],ngContentSelectors:zi,decls:1,vars:0,consts:[[3,"cdkPortalOutlet"]],template:function(t,r){t&1&&(le(),T(0,dn,2,1,"ng-template"))},dependencies:[Tt],encapsulation:2,changeDetection:0})}return n})(),Pe=(()=>{class n extends ne{_ngZone=g(Je);_renderer=g(Ye);_animationsDisabled=ut();_cleanupTransition;_isAnimating=v(!1);_stepHeader=void 0;_animatedContainers;_steps=void 0;steps=new se;_icons;animationDone=new Y;disableRipple;color;labelPosition="end";headerPosition="top";_iconOverrides={};get animationDuration(){return this._animationDuration}set animationDuration(e){this._animationDuration=/^\d+$/.test(e)?e+"ms":e}_animationDuration="";_isServer=!g(pt).isBrowser;constructor(){super();let t=g(re).nativeElement.nodeName.toLowerCase();this.orientation=t==="mat-vertical-stepper"?"vertical":"horizontal"}ngAfterContentInit(){super.ngAfterContentInit(),this._icons.forEach(({name:e,templateRef:t})=>this._iconOverrides[e]=t),this.steps.changes.pipe(S(this._destroyed)).subscribe(()=>this._stateChanged()),this.selectedIndexChange.pipe(S(this._destroyed)).subscribe(()=>{let e=this._getAnimationDuration();e==="0ms"||e==="0s"?this._onAnimationDone():this._isAnimating.set(!0)}),this._ngZone.runOutsideAngular(()=>{this._animationsDisabled||setTimeout(()=>{this._elementRef.nativeElement.classList.add("mat-stepper-animations-enabled"),this._cleanupTransition=this._renderer.listen(this._elementRef.nativeElement,"transitionend",this._handleTransitionend)},200)})}ngAfterViewInit(){if(super.ngAfterViewInit(),typeof queueMicrotask=="function"){let e=!1;this._animatedContainers.changes.pipe(L(null),S(this._destroyed)).subscribe(()=>queueMicrotask(()=>{e||(e=!0,this.animationDone.emit()),this._stateChanged()}))}}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTransition?.()}_getAnimationDuration(){return this._animationsDisabled?"0ms":this.animationDuration?this.animationDuration:this.orientation==="horizontal"?"500ms":"225ms"}_handleTransitionend=e=>{let t=e.target;if(!t)return;let r=this.orientation==="horizontal"&&e.propertyName==="transform"&&t.classList.contains("mat-horizontal-stepper-content-current"),d=this.orientation==="vertical"&&e.propertyName==="grid-template-rows"&&t.classList.contains("mat-vertical-content-container-active");(r||d)&&this._animatedContainers.find(x=>x.nativeElement===t)&&this._onAnimationDone()};_onAnimationDone(){this._isAnimating.set(!1),this.animationDone.emit()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$({type:n,selectors:[["mat-stepper"],["mat-vertical-stepper"],["mat-horizontal-stepper"],["","matStepper",""]],contentQueries:function(t,r,d){if(t&1&&(P(d,Ge,5),P(d,yn,5)),t&2){let m;D(m=w())&&(r._steps=m),D(m=w())&&(r._icons=m)}},viewQuery:function(t,r){if(t&1&&(me(Ne,5),me(mn,5)),t&2){let d;D(d=w())&&(r._stepHeader=d),D(d=w())&&(r._animatedContainers=d)}},hostAttrs:["role","tablist"],hostVars:15,hostBindings:function(t,r){t&2&&(Z("aria-orientation",r.orientation),Xe("--mat-stepper-animation-duration",r._getAnimationDuration()),V("mat-stepper-horizontal",r.orientation==="horizontal")("mat-stepper-vertical",r.orientation==="vertical")("mat-stepper-label-position-end",r.orientation==="horizontal"&&r.labelPosition=="end")("mat-stepper-label-position-bottom",r.orientation==="horizontal"&&r.labelPosition=="bottom")("mat-stepper-header-position-bottom",r.headerPosition==="bottom")("mat-stepper-animating",r._isAnimating()))},inputs:{disableRipple:"disableRipple",color:"color",labelPosition:"labelPosition",headerPosition:"headerPosition",animationDuration:"animationDuration"},outputs:{animationDone:"animationDone"},exportAs:["matStepper","matVerticalStepper","matHorizontalStepper"],features:[Ae([{provide:ne,useExisting:n}]),q],ngContentSelectors:zi,decls:5,vars:2,consts:[["stepTemplate",""],["animatedContainer",""],[1,"mat-horizontal-stepper-wrapper"],[1,"mat-horizontal-stepper-header-container"],[1,"mat-horizontal-content-container"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id","class"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mat-stepper-horizontal-line"],["role","tabpanel",1,"mat-horizontal-stepper-content",3,"id"],[3,"ngTemplateOutlet"],[1,"mat-step"],[1,"mat-vertical-content-container"],["role","tabpanel",1,"mat-vertical-stepper-content",3,"id"],[1,"mat-vertical-content"],[3,"click","keydown","tabIndex","id","index","state","label","selected","active","optional","errorMessage","iconOverrides","disableRipple","color"]],template:function(t,r){if(t&1&&(le(),c(0,cn,1,0),c(1,gn,7,0,"div",2)(2,vn,2,0),T(3,bn,1,23,"ng-template",null,0,it)),t&2){let d;p(r._isServer?0:-1),l(),p((d=r.orientation)==="horizontal"?1:d==="vertical"?2:-1)}},dependencies:[Me,Ne],styles:[`.mat-stepper-vertical,.mat-stepper-horizontal{display:block;font-family:var(--mat-stepper-container-text-font, var(--mat-sys-body-medium-font));background:var(--mat-stepper-container-color, var(--mat-sys-surface))}.mat-horizontal-stepper-header-container{white-space:nowrap;display:flex;align-items:center}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header-container{align-items:flex-start}.mat-stepper-header-position-bottom .mat-horizontal-stepper-header-container{order:1}.mat-stepper-horizontal-line{border-top-width:1px;border-top-style:solid;flex:auto;height:0;margin:0 -16px;min-width:32px;border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-stepper-horizontal-line{margin:0;min-width:0;position:relative;top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{border-top-width:1px;border-top-style:solid;content:"";display:inline-block;height:0;position:absolute;width:calc(50% - 20px)}.mat-horizontal-stepper-header{display:flex;overflow:hidden;align-items:center;padding:0 24px;height:var(--mat-stepper-header-height, 72px)}.mat-horizontal-stepper-header .mat-step-icon{margin-right:8px;flex:none}[dir=rtl] .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:8px}.mat-horizontal-stepper-header::before,.mat-horizontal-stepper-header::after{border-top-color:var(--mat-stepper-line-color, var(--mat-sys-outline))}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::before,.mat-stepper-label-position-bottom .mat-horizontal-stepper-header::after{top:calc(calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) + 12px)}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header{box-sizing:border-box;flex-direction:column;height:auto}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::after,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::after{right:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:first-child)::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:not(:last-child)::before{left:0}[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:last-child::before,[dir=rtl] .mat-stepper-label-position-bottom .mat-horizontal-stepper-header:first-child::after{display:none}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-icon{margin-right:0;margin-left:0}.mat-stepper-label-position-bottom .mat-horizontal-stepper-header .mat-step-label{padding:16px 0 0 0;text-align:center;width:100%}.mat-vertical-stepper-header{display:flex;align-items:center;height:24px;padding:calc((var(--mat-stepper-header-height, 72px) - 24px) / 2) 24px}.mat-vertical-stepper-header .mat-step-icon{margin-right:12px}[dir=rtl] .mat-vertical-stepper-header .mat-step-icon{margin-right:0;margin-left:12px}.mat-horizontal-stepper-wrapper{display:flex;flex-direction:column}.mat-horizontal-stepper-content{visibility:hidden;overflow:hidden;outline:0;height:0}.mat-stepper-animations-enabled .mat-horizontal-stepper-content{transition:transform var(--mat-stepper-animation-duration, 0) cubic-bezier(0.35, 0, 0.25, 1)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-previous{transform:translate3d(-100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-next{transform:translate3d(100%, 0, 0)}.mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{visibility:visible;transform:none;height:auto}.mat-stepper-horizontal:not(.mat-stepper-animating) .mat-horizontal-stepper-content.mat-horizontal-stepper-content-current{overflow:visible}.mat-horizontal-content-container{overflow:hidden;padding:0 24px 24px 24px}@media(forced-colors: active){.mat-horizontal-content-container{outline:solid 1px}}.mat-stepper-header-position-bottom .mat-horizontal-content-container{padding:24px 24px 0 24px}.mat-vertical-content-container{display:grid;grid-template-rows:0fr;grid-template-columns:100%;margin-left:36px;border:0;position:relative}.mat-stepper-animations-enabled .mat-vertical-content-container{transition:grid-template-rows var(--mat-stepper-animation-duration, 0) cubic-bezier(0.4, 0, 0.2, 1)}.mat-vertical-content-container.mat-vertical-content-container-active{grid-template-rows:1fr}.mat-step:last-child .mat-vertical-content-container{border:none}@media(forced-colors: active){.mat-vertical-content-container{outline:solid 1px}}[dir=rtl] .mat-vertical-content-container{margin-left:0;margin-right:36px}@supports not (grid-template-rows: 0fr){.mat-vertical-content-container{height:0}.mat-vertical-content-container.mat-vertical-content-container-active{height:auto}}.mat-stepper-vertical-line::before{content:"";position:absolute;left:0;border-left-width:1px;border-left-style:solid;border-left-color:var(--mat-stepper-line-color, var(--mat-sys-outline));top:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2));bottom:calc(8px - calc((var(--mat-stepper-header-height, 72px) - 24px) / 2))}[dir=rtl] .mat-stepper-vertical-line::before{left:auto;right:0}.mat-vertical-stepper-content{overflow:hidden;outline:0;visibility:hidden}.mat-stepper-animations-enabled .mat-vertical-stepper-content{transition:visibility var(--mat-stepper-animation-duration, 0) linear}.mat-vertical-content-container-active>.mat-vertical-stepper-content{visibility:visible}.mat-vertical-content{padding:0 24px 24px 24px}
`],encapsulation:2,changeDetection:0})}return n})(),Bi=(()=>{class n extends Pi{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ae(n)))(r||n)}})();static \u0275dir=O({type:n,selectors:[["button","matStepperNext",""]],hostAttrs:[1,"mat-stepper-next"],hostVars:1,hostBindings:function(t,r){t&2&&ee("type",r.type)},features:[q]})}return n})(),qi=(()=>{class n extends Li{static \u0275fac=(()=>{let e;return function(r){return(e||(e=ae(n)))(r||n)}})();static \u0275dir=O({type:n,selectors:[["button","matStepperPrevious",""]],hostAttrs:[1,"mat-stepper-previous"],hostVars:1,hostBindings:function(t,r){t&2&&ee("type",r.type)},features:[q]})}return n})(),ji=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=he({type:n});static \u0275inj=ue({providers:[xn,xe],imports:[Te,Dt,Vi,Ce,It,Pe,Ne,Te]})}return n})();var En=(n,i)=>i._id;function Rn(n,i){n&1&&(a(0,"mat-icon",12),s(1,"refresh"),o())}function In(n,i){n&1&&(a(0,"mat-icon",13),s(1,"save"),o())}function Fn(n,i){if(n&1&&(a(0,"div",14),f(1,"mat-spinner",107),a(2,"span",108),s(3),o()()),n&2){let e=u();l(3),_(" ",e.isEditing()?"Loading reservation...":"Creating reservation..."," ")}}function An(n,i){if(n&1){let e=B();a(0,"div",15)(1,"div",109)(2,"mat-icon",110),s(3,"error"),o(),a(4,"div")(5,"h3",111),s(6,"Error"),o(),a(7,"p",112),s(8),o(),a(9,"button",113),R("click",function(){k(e);let r=u();return M(r.clearError())}),s(10,"Dismiss"),o()()()()}if(n&2){let e=u();l(8),N(e.error())}}function kn(n,i){n&1&&(a(0,"mat-error"),s(1," Check-in date is required "),o())}function Mn(n,i){n&1&&(a(0,"mat-error"),s(1," Check-out date is required "),o())}function Tn(n,i){if(n&1&&(a(0,"div",29)(1,"div",114)(2,"mat-icon",13),s(3,"info"),o(),a(4,"span",115),s(5),o()()()),n&2){let e=u();l(5),_("",e.numberOfNights()," night(s) stay")}}function Dn(n,i){if(n&1&&s(0),n&2){let e=u();_("(",e.getSelectedRoomsCount()," selected)")}}function wn(n,i){n&1&&(a(0,"div",31),f(1,"mat-spinner",116),a(2,"span",108),s(3,"Searching available rooms..."),o()())}function On(n,i){if(n&1&&f(0,"mat-checkbox",123),n&2){let e=u().$implicit,t=u(2);h("checked",t.isRoomSelected(e))("disabled",!0)}}function Nn(n,i){n&1&&(a(0,"span",124),s(1," Not Available "),o())}function Gn(n,i){if(n&1&&(a(0,"span",135),s(1),o()),n&2){let e=i.$implicit;l(),_(" ",e," ")}}function Pn(n,i){if(n&1&&(a(0,"div",130)(1,"p",132),s(2,"Amenities:"),o(),a(3,"div",133),T(4,Gn,2,1,"span",134),o()()),n&2){let e=u().$implicit,t=u(2);l(4),h("ngForOf",t.getRoomAmenities(e))}}function Ln(n,i){if(n&1&&(a(0,"div",131)(1,"div",126)(2,"span",136),s(3),o(),a(4,"span",137),s(5),o()()()),n&2){let e=u().$implicit,t=u(2);l(3),_("",t.numberOfNights()," nights total:"),l(2),A("",t.currency,"",t.getRoomRate(e)*t.numberOfNights())}}function Vn(n,i){if(n&1){let e=B();a(0,"div",118),R("click",function(){let r=k(e).$implicit,d=u(2);return M(d.isRoomAvailable(r)&&d.toggleRoomSelection(r))}),a(1,"div",119)(2,"div")(3,"h3",120),s(4),o(),a(5,"p",121),s(6),o()(),a(7,"div",122),c(8,On,1,2,"mat-checkbox",123)(9,Nn,2,0,"span",124),o()(),a(10,"div",125)(11,"div",126)(12,"span",127),s(13,"Rate per night:"),o(),a(14,"span",128),s(15),o()(),a(16,"div",126)(17,"span",127),s(18,"Capacity:"),o(),a(19,"span",129),s(20),o()(),c(21,Pn,5,1,"div",130),c(22,Ln,6,3,"div",131),o()()}if(n&2){let e=i.$implicit,t=u(2);V("border-blue-500",t.isRoomSelected(e)&&t.isRoomAvailable(e))("bg-blue-50",t.isRoomSelected(e)&&t.isRoomAvailable(e))("border-gray-300",!t.isRoomSelected(e)&&t.isRoomAvailable(e))("border-red-300",!t.isRoomAvailable(e))("bg-red-50",!t.isRoomAvailable(e))("opacity-50",!t.isRoomAvailable(e))("cursor-not-allowed",!t.isRoomAvailable(e)),l(4),A("",e.roomNumber," (",e.name,")"),l(2),N(t.getRoomTypeName(e)),l(2),p(t.isRoomAvailable(e)?8:9),l(7),A("",t.currency,"",t.getRoomRate(e)),l(5),A("",t.getRoomAdultCapacity(e),"A + ",t.getRoomChildrenCapacity(e),"C"),l(),p(t.getRoomAmenities(e).length>0?21:-1),l(),p(t.numberOfNights()>0&&t.isRoomAvailable(e)?22:-1)}}function zn(n,i){if(n&1&&(a(0,"div",32),T(1,Vn,23,24,"div",117),o()),n&2){let e=u();l(),h("ngForOf",e.availableRooms())}}function $n(n,i){n&1&&(a(0,"div",33)(1,"mat-icon",138),s(2,"hotel"),o(),a(3,"p"),s(4,"No rooms available for the selected dates"),o(),a(5,"p",139),s(6,"Please try different dates"),o()())}function Bn(n,i){n&1&&(a(0,"div",34)(1,"div",140)(2,"mat-icon",13),s(3,"warning"),o(),a(4,"span",115),s(5," Please select at least one room to continue "),o()()())}function qn(n,i){if(n&1&&(a(0,"div",74)(1,"span"),s(2),U(3,"titlecase"),o(),a(4,"span",115),s(5),o()()),n&2){let e=i.$implicit,t=u(2);l(2),A("",e.roomNumber," - ",ve(3,4,e.type)),l(3),A("",t.currency,"",t.getRoomRate(e)*t.numberOfNights())}}function jn(n,i){if(n&1&&(a(0,"div",35)(1,"h4",141),s(2),o(),a(3,"div",142),T(4,qn,6,6,"div",143),o()()),n&2){let e=u();l(2),_("Selected Rooms (",e.getSelectedRoomsCount(),")"),l(2),h("ngForOf",e.getSelectedRoomsDetails())}}function Hn(n,i){if(n&1&&(a(0,"div",36)(1,"div",144)(2,"mat-icon",13),s(3,"info"),o(),a(4,"span",115),s(5),o()()()),n&2){let e=u();l(5),A(" Selected rooms can accommodate up to ",e.maxAdultsAllowed()," adults and ",e.maxChildrenAllowed()," children ")}}function Un(n,i){n&1&&f(0,"mat-spinner",57)}function Qn(n,i){if(n&1&&(a(0,"mat-option",59)(1,"div",145)(2,"span",115),s(3),o(),a(4,"span",146),s(5),o()()()),n&2){let e=i.$implicit;h("value",e),l(3),A("",e.firstName," ",e.lastName),l(2),A("",e.phone," \u2022 ",e.email)}}function Wn(n,i){n&1&&(a(0,"mat-option",147)(1,"span",148),s(2,"No guests found"),o()())}function Kn(n,i){if(n&1&&c(0,Wn,3,0,"mat-option",147),n&2){let e=u();p(e.guestSearchControl.value&&e.guestSearchControl.value.length>=2&&!e.guestSearchLoading()?0:-1)}}function Yn(n,i){if(n&1){let e=B();a(0,"div",60)(1,"div",149)(2,"div",122)(3,"mat-icon",150),s(4,"person"),o(),a(5,"div")(6,"p",151),s(7),o(),a(8,"p",152),s(9),o()()(),a(10,"button",153),R("click",function(){k(e);let r=u();return M(r.onGuestSearchClear())}),a(11,"mat-icon"),s(12,"clear"),o()()()()}if(n&2){let e=u();l(7),A(" ",e.selectedGuest().firstName," ",e.selectedGuest().lastName," "),l(2),A(" ",e.selectedGuest().email," \u2022 ",e.selectedGuest().phone," ")}}function Zn(n,i){n&1&&(a(0,"div",61)(1,"div",122)(2,"mat-icon",154),s(3,"info"),o(),a(4,"p",155),s(5," No existing guest found. Fill in the details below to create a new guest record. "),o()()())}function Jn(n,i){n&1&&(a(0,"mat-error"),s(1," First name is required "),o())}function Xn(n,i){n&1&&(a(0,"mat-error"),s(1," Last name is required "),o())}function eo(n,i){n&1&&(a(0,"mat-error"),s(1," Email is required "),o())}function to(n,i){n&1&&(a(0,"mat-error"),s(1," Please enter a valid email "),o())}function io(n,i){n&1&&(a(0,"mat-error"),s(1," Phone number is required "),o())}function no(n,i){n&1&&(a(0,"mat-error"),s(1," Total adults is required "),o())}function oo(n,i){n&1&&(a(0,"mat-error"),s(1," At least 1 adult is required "),o())}function ao(n,i){if(n&1&&(a(0,"mat-error"),s(1),o()),n&2){let e=u();l(),_(" Cannot exceed ",e.maxAdultsAllowed()," adults (room capacity limit) ")}}function ro(n,i){n&1&&(a(0,"mat-error"),s(1," Children count cannot be negative "),o())}function so(n,i){if(n&1&&(a(0,"mat-error"),s(1),o()),n&2){let e=u();l(),_(" Cannot exceed ",e.maxChildrenAllowed()," children (room capacity limit) ")}}function lo(n,i){n&1&&(s(0," - "),a(1,"strong"),s(2,"Limit reached"),o())}function mo(n,i){if(n&1&&(a(0,"div",73)(1,"div",156)(2,"mat-icon",157),s(3,"info"),o(),a(4,"span"),s(5),c(6,lo,3,0),o()()()),n&2){let e=u();l(),V("text-gray-600",e.canAddMoreAdditionalGuests())("text-orange-600",!e.canAddMoreAdditionalGuests()&&e.additionalGuests.length<e.getMaxAdditionalGuestsAllowed())("text-red-600",e.additionalGuests.length>=e.getMaxAdditionalGuestsAllowed()),l(4),Fe(" Maximum ",e.getMaxAdditionalGuestsAllowed()," additional guest(s) allowed (",e.additionalGuests.length,"/",e.getMaxAdditionalGuestsAllowed()," added) "),l(),p(e.additionalGuests.length>=e.getMaxAdditionalGuestsAllowed()?6:-1)}}function co(n,i){if(n&1){let e=B();a(0,"div",160)(1,"div",161)(2,"h4",162),s(3),o(),a(4,"button",163),R("click",function(){let r=k(e).index,d=u(2);return M(d.removeAdditionalGuest(r))}),a(5,"mat-icon"),s(6,"remove"),o()()(),a(7,"div",78)(8,"mat-form-field",23)(9,"mat-label"),s(10,"First Name"),o(),f(11,"input",164),o(),a(12,"mat-form-field",23)(13,"mat-label"),s(14,"Last Name"),o(),f(15,"input",165),o(),a(16,"mat-form-field",23)(17,"mat-label"),s(18,"Age"),o(),f(19,"input",166),o(),a(20,"mat-form-field",23)(21,"mat-label"),s(22,"Relationship"),o(),f(23,"input",167),o()()()}if(n&2){let e=i.index;h("formGroupName",e),l(3),_("Guest ",e+2)}}function po(n,i){if(n&1&&(a(0,"mat-card-content")(1,"div",63)(2,"div",158),T(3,co,24,2,"div",159),o()()()),n&2){let e=u();l(3),h("ngForOf",e.additionalGuests.controls)}}function uo(n,i){if(n&1&&(a(0,"div",74)(1,"span"),s(2),U(3,"titlecase"),o(),a(4,"span",115),s(5),U(6,"currency"),o()()),n&2){let e=i.$implicit,t=u(2);l(2),Fe("",e.roomNumber," (",ve(3,4,t.getRoomTypeName(e)),") \xD7 ",t.numberOfNights()," nights"),l(3),N(be(6,6,t.getRoomRate(e)*t.numberOfNights(),t.currency))}}function ho(n,i){if(n&1&&(a(0,"div",61)(1,"h4",141),s(2,"Room Rate Breakdown"),o(),a(3,"div",142),T(4,uo,7,9,"div",143),o()()),n&2){let e=u();l(4),h("ngForOf",e.selectedRoomDetails())}}function go(n,i){if(n&1&&(a(0,"mat-option",59),s(1),U(2,"titlecase"),o()),n&2){let e=i.$implicit;h("value",e),l(),_(" ",ve(2,2,e)," ")}}function fo(n,i){n&1&&(a(0,"mat-icon",12),s(1,"refresh"),o())}function vo(n,i){n&1&&(a(0,"mat-icon",13),s(1,"save"),o())}var Hi=class n{router=g(ct);route=g(mt);location=g(ot);fb=g(Jt);reservationService=g(Oi);roomsService=g(wi);guestService=g(Ni);authService=g(Nt);storeStore=g(hi);snackBar=g(wt);cdr=g(te);destroy$=new W;reservationForm;reservationDetailsGroup;loading=v(!1);error=v(null);isEditing=v(!1);editingReservation=v(null);availableRooms=v([]);roomSearchLoading=v(!1);totalAmount=v(0);numberOfNights=v(0);taxAmount=v(0);discountAmount=v(0);maxAdultsAllowed=v(0);maxChildrenAllowed=v(0);selectedRoomDetails=v([]);guestSearchResults=v([]);selectedGuest=v(null);guestSearchLoading=v(!1);guestSearchControl=new $t("");filteredGuests=v([]);roomTypes=["standard","deluxe","suite","presidential"];paymentMethods=["cash","card","bank_transfer","mobile_money","online"];currentUser=vi(this.authService.currentUser,{initialValue:null});guestTypes=[{value:"individual",label:"Individual"},{value:"business",label:"Business"},{value:"group",label:"Group"}];constructor(){this.initializeForm()}ngOnInit(){this.setupFormSubscriptions(),this.checkIfEditing(),this.setupGuestAutocomplete()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeForm(){this.reservationForm=this.fb.group({guestDetails:this.fb.group({primaryGuest:this.fb.group({firstName:["",[b.required,b.minLength(2)]],lastName:["",[b.required,b.minLength(2)]],email:["",[b.required,b.email]],phone:["",[b.required,b.pattern(/^\+?[\d\s-()]+$/)]]}),additionalGuests:this.fb.array([]),totalAdults:[1,[b.required,b.min(1)]],totalChildren:[0,[b.min(0)]]}),checkInDate:[null,b.required],checkOutDate:[null,b.required],expectedCheckInTime:["15:00"],expectedCheckOutTime:["11:00"],rooms:this.fb.array([]),specialRequests:[""],internalNotes:[""],paymentInfo:this.fb.group({method:["card",b.required],status:["pending"]}),pricing:this.fb.group({subtotal:[0,[b.required,b.min(0)]],taxes:[0,[b.min(0)]],fees:this.fb.group({serviceFee:[0],cleaningFee:[0],resortFee:[0],other:[0]}),discounts:this.fb.group({amount:[0],reason:[""],code:[""]}),total:[{value:0,disabled:!0}],paid:[0],balance:[{value:0,disabled:!0}]}),store:this.storeStore.selectedStore()?._id||"",createdBy:this.currentUser()?._id||"",bookingSource:["walk_in"],status:["pending"]}),this.reservationDetailsGroup=this.fb.group({checkInDate:this.reservationForm.get("checkInDate"),checkOutDate:this.reservationForm.get("checkOutDate"),roomsSelected:[!1,b.requiredTrue]})}createRoomForm(){return this.fb.group({roomId:["",b.required]})}setupFormSubscriptions(){[this.reservationForm.get("checkInDate"),this.reservationForm.get("checkOutDate")].forEach(t=>{t?.valueChanges.pipe(S(this.destroy$),Re(300),Ie()).subscribe(()=>{this.calculateNights(),this.searchAvailableRooms()})}),["pricing.subtotal","pricing.taxes","pricing.fees.serviceFee","pricing.fees.cleaningFee","pricing.discounts.amount"].forEach(t=>{this.reservationForm.get(t)?.valueChanges.pipe(S(this.destroy$)).subscribe(r=>{t==="pricing.discounts.amount"&&console.log("\u{1F4B0} DISCOUNT INPUT CHANGED:",{path:t,newValue:r,typeOf:typeof r,rawFormValue:this.reservationForm.get("pricing.discounts.amount")?.value}),this.calculateTotal()})}),this.reservationForm.get("pricing.discounts")?.valueChanges.pipe(S(this.destroy$)).subscribe(t=>{console.log("\u{1F3AF} ENTIRE DISCOUNT OBJECT CHANGED:",{discountObject:t,amount:t?.amount,amountType:typeof t?.amount})}),this.rooms.valueChanges.pipe(S(this.destroy$)).subscribe(()=>{this.updateRoomCapacityLimits(),this.calculatePricingFromRooms()})}checkIfEditing(){let i=this.route.snapshot.paramMap.get("id");i&&(this.isEditing.set(!0),this.loadReservationForEditing(i))}loadReservationForEditing(i){this.loading.set(!0),this.reservationService.getReservationById(i).pipe(S(this.destroy$)).subscribe({next:e=>{this.editingReservation.set(e),this.populateFormWithReservation(e),this.loading.set(!1)},error:e=>{this.error.set("Failed to load reservation for editing"),this.loading.set(!1),console.error("Error loading reservation:",e)}})}populateFormWithReservation(i){console.log("Populating form with reservation:",i),this.reservationForm.patchValue({guestDetails:{primaryGuest:i.guestDetails.primaryGuest,totalAdults:i.guestDetails.totalAdults,totalChildren:i.guestDetails.totalChildren},checkInDate:new Date(i.checkInDate),checkOutDate:new Date(i.checkOutDate),expectedCheckInTime:i.expectedCheckInTime||"15:00",expectedCheckOutTime:i.expectedCheckOutTime||"11:00",specialRequests:i.specialRequests||"",internalNotes:i.internalNotes||"",paymentInfo:{method:i.paymentInfo?.method||"card",status:i.paymentInfo?.status||"pending"},pricing:{subtotal:i.pricing?.subtotal||0,taxes:i.pricing?.taxes||0,fees:{serviceFee:i.pricing?.fees?.serviceFee||0,cleaningFee:i.pricing?.fees?.cleaningFee||0,resortFee:i.pricing?.fees?.resortFee||0,other:i.pricing?.fees?.other||0},discounts:{amount:i.pricing?.discounts?.amount||0,reason:i.pricing?.discounts?.reason||"",code:i.pricing?.discounts?.code||""},total:i.pricing?.total||0,paid:i.pricing?.paid||0,balance:i.pricing?.balance||0},bookingSource:i.bookingSource||"walk_in",status:i.status}),console.log("Populating additional guests IMMEDIATELY:",i.guestDetails.additionalGuests),this.populateAdditionalGuests(i.guestDetails.additionalGuests||[]),this.searchAvailableRooms(),setTimeout(()=>{console.log("Available rooms after search:",this.availableRooms().length),this.populateRooms(i.rooms),this.calculateNights(),this.calculateTotal(),this.updateRoomCapacityLimits(),this.updateStepValidation(),this.totalAmount.set(i.pricing?.total||0),this.taxAmount.set(i.pricing?.taxes||0),this.discountAmount.set(i.pricing?.discounts?.amount||0),this.cdr.detectChanges(),setTimeout(()=>{console.log("Final form state check:"),console.log("Additional guests count:",this.additionalGuests.length),console.log("Additional guests value:",this.additionalGuests.value),console.log("Selected rooms count:",this.rooms.length),console.log("Selected rooms value:",this.rooms.value),this.forceUIRefresh()},100)},1500)}populateRooms(i){console.log("populateRooms called with:",i);let e=this.reservationForm.get("rooms");e.clear(),i.forEach((t,r)=>{let d=this.createRoomForm(),m=typeof t.room=="string"?t.room:t.room._id;console.log(`Setting room ${r} ID to:`,m),d.patchValue({roomId:m}),e.push(d)}),console.log("Final rooms array length:",e.length),console.log("Rooms form values:",e.value),console.log("Available rooms for matching:",this.availableRooms().map(t=>({id:t.id,_id:t._id,roomNumber:t.roomNumber})))}populateAdditionalGuests(i){console.log("=== POPULATING ADDITIONAL GUESTS ==="),console.log("Input data:",i);let e=this.reservationForm.get("guestDetails.additionalGuests");for(;e.length!==0;)e.removeAt(0);console.log("Cleared existing forms, array length:",e.length),i&&i.length>0&&i.forEach((t,r)=>{console.log(`Processing additional guest ${r}:`,t);let d=this.createAdditionalGuestForm();d.patchValue({firstName:t.firstName||"",lastName:t.lastName||"",age:t.age||null,relationship:t.relationship||""}),console.log(`Guest form ${r} value after patch:`,d.value),e.push(d),console.log(`Added guest form ${r}, array length now:`,e.length)}),e.markAsDirty(),e.updateValueAndValidity(),console.log("=== FINAL ADDITIONAL GUESTS STATE ==="),console.log("Array length:",e.length),console.log("Array value:",e.value),console.log("Array valid:",e.valid),console.log("======================================"),this.cdr.detectChanges()}calculateNights(){let i=this.reservationForm.get("checkInDate")?.value,e=this.reservationForm.get("checkOutDate")?.value;if(i&&e){let t=Math.abs(e.getTime()-i.getTime()),r=Math.ceil(t/(1e3*60*60*24));console.log("Calculated nights:",r,"from",i,"to",e),this.numberOfNights.set(r),this.calculatePricingFromRooms(),this.calculateTotal()}else console.log("Cannot calculate nights - missing dates:",{checkIn:i,checkOut:e}),this.numberOfNights.set(0)}calculateTotal(){let i=this.reservationForm.get("pricing")?.value;if(!i){console.log("No pricing data available");return}let e=this.reservationForm.get("pricing.discounts.amount"),t=e?.value,r=i.discounts?.amount;console.log("\u{1F50D} DISCOUNT VALUE INVESTIGATION:",{"Step 1 - Direct control value":t,"Step 2 - Pricing object discount":r,"Step 3 - Values match":t===r,"Step 4 - Control path exists":!!e,"Step 5 - Pricing object exists":!!i.discounts,"Step 6 - Full pricing.discounts":i.discounts});let d=i.subtotal||0,m=i.taxes||0,x=i.fees?.serviceFee||0,y=i.fees?.cleaningFee||0,C=i.fees?.resortFee||0,G=i.fees?.other||0,E=this.reservationForm.get("pricing.discounts.amount")?.value||0;console.log("\u{1F527} FIXED DISCOUNT READING:",{"OLD way (pricing.discounts?.amount)":i.discounts?.amount,"NEW way (direct form control)":E,"Fix applied":!0}),console.log("\u{1F9EE} RAW PRICING VALUES:",{"Raw discount input":i.discounts?.amount,"Type of discount":typeof i.discounts?.amount,"Full discount object":i.discounts,"Full pricing object":i});let z=x+y+C+G,I=d+m+z-E,F=I-(i.paid||0);console.log("\u{1F50D} DETAILED PRICING CALCULATION:",{subtotal:`\u20A6${d.toLocaleString()}`,taxes:`\u20A6${m.toLocaleString()}`,fees:{serviceFee:`\u20A6${x.toLocaleString()}`,cleaningFee:`\u20A6${y.toLocaleString()}`,resortFee:`\u20A6${C.toLocaleString()}`,otherFees:`\u20A6${G.toLocaleString()}`,totalFees:`\u20A6${z.toLocaleString()}`},discounts:`\u20A6${E.toLocaleString()}`,calculation:`\u20A6${d.toLocaleString()} + \u20A6${m.toLocaleString()} + \u20A6${z.toLocaleString()} - \u20A6${E.toLocaleString()} = \u20A6${I.toLocaleString()}`,total:`\u20A6${I.toLocaleString()}`,balance:`\u20A6${F.toLocaleString()}`,paid:`\u20A6${(i.paid||0).toLocaleString()}`}),this.taxAmount.set(m),this.discountAmount.set(E),this.totalAmount.set(Math.max(0,I)),this.reservationForm.get("pricing.total")?.setValue(I),this.reservationForm.get("pricing.balance")?.setValue(F)}updateRoomCapacityLimits(){let i=this.rooms.value,e=this.availableRooms(),t=0,r=0,d=[];i.forEach(m=>{if(m.roomId){let x=e.find(y=>y._id===m.roomId||y.id===m.roomId);if(x){let y=this.getRoomCapacityObject(x);y&&(t+=y.adults||0,r+=y.children||0),d.push(x)}}}),this.maxAdultsAllowed.set(t),this.maxChildrenAllowed.set(r),this.selectedRoomDetails.set(d),this.updateGuestCountValidation(),this.enforceAdditionalGuestsLimit()}getRoomCapacityObject(i){if(i.capacity){if(typeof i.capacity=="object"&&"adults"in i.capacity)return i.capacity;if(typeof i.capacity=="number")return{adults:i.capacity,children:0}}if(typeof i.roomType=="object"&&i.roomType.capacity){if(typeof i.roomType.capacity=="object")return i.roomType.capacity;if(typeof i.roomType.capacity=="number")return{adults:i.roomType.capacity,children:0}}return i.maxOccupancy&&typeof i.maxOccupancy=="number"?{adults:i.maxOccupancy,children:0}:null}enforceAdditionalGuestsLimit(){let i=this.getMaxAdditionalGuestsAllowed(),e=this.additionalGuests.length;if(e>i){let t=e-i;for(let r=0;r<t;r++)this.additionalGuests.removeAt(this.additionalGuests.length-1)}}updateGuestCountValidation(){let i=this.reservationForm.get("guestDetails.totalAdults"),e=this.reservationForm.get("guestDetails.totalChildren");i&&this.maxAdultsAllowed()>0&&(i.setValidators([b.required,b.min(1),b.max(this.maxAdultsAllowed())]),i.updateValueAndValidity()),e&&this.maxChildrenAllowed()>0&&(e.setValidators([b.min(0),b.max(this.maxChildrenAllowed())]),e.updateValueAndValidity())}calculatePricingFromRooms(){console.log("\u{1F3E8} calculatePricingFromRooms() CALLED - checking if this corrupts discount...");let i=this.rooms.value,e=this.availableRooms(),t=this.numberOfNights(),r=this.reservationForm.get("pricing.discounts.amount")?.value;if(console.log("\u{1F4B0} DISCOUNT VALUE BEFORE ROOM PRICING:",r),console.log("calculatePricingFromRooms called:",{selectedRooms:i,availableRoomsCount:e.length,nights:t}),t===0){console.log("No nights calculated, skipping pricing calculation");return}let d=0;i.forEach((E,z)=>{if(E.roomId){console.log(`Processing room selection ${z}:`,E);let I=e.find(F=>F._id===E.roomId||F.id===E.roomId);if(I){let F=this.getRoomRate(I),oe=F*t;console.log("Found room:",{roomNumber:I.roomNumber,roomId:I._id||I.id,roomRate:F,nights:t,roomTotal:oe}),d+=oe}else console.log(`Room not found for ID: ${E.roomId}`),console.log("Available room IDs:",e.map(F=>({id:F.id,_id:F._id})))}}),console.log("Final pricing calculation:",{subtotal:d,nights:t,selectedRoomsCount:i.length});let m=this.storeStore.selectedStore(),x=m?.tax?m.tax/100:0,y=d*x;console.log("Tax calculation:",{storeTax:m?.tax,taxRate:x,taxes:y});let C=this.reservationForm.get("pricing")?.value||{};this.reservationForm.patchValue({pricing:Be($e({},C),{subtotal:d,taxes:y})}),console.log("\u{1F527} PRESERVED PRICING VALUES:",{preserved:C,newSubtotal:d,newTaxes:y,preservedDiscount:C.discounts?.amount});let G=this.reservationForm.get("pricing.discounts.amount")?.value;console.log("\u{1F4B0} DISCOUNT VALUE AFTER ROOM PRICING:",{before:C.discounts?.amount,after:G,changed:C.discounts?.amount!==G}),this.calculateTotal(),this.cdr.markForCheck()}searchAvailableRooms(){let i=this.reservationForm.get("checkInDate")?.value,e=this.reservationForm.get("checkOutDate")?.value,t=this.storeStore.selectedStore()?._id;if(!i||!e||!t)return;this.roomSearchLoading.set(!0),this.availableRooms.set([]);let r=new Date(i).toISOString().split("T")[0],d=new Date(e).toISOString().split("T")[0];this.roomsService.getAvailableRooms(t,r,d).pipe(S(this.destroy$)).subscribe({next:m=>{this.availableRooms.set(m),this.roomSearchLoading.set(!1),console.log("Available rooms loaded:",m),console.log("Current form rooms after loading:",this.rooms.value),this.isEditing()&&(console.log("Edit mode detected, triggering UI updates"),setTimeout(()=>{console.log("Forcing change detection for room selection UI"),this.cdr.detectChanges(),this.rooms.controls.forEach((x,y)=>{let C=x.get("roomId")?.value,G=m.find(E=>E._id===C||E.id===C);console.log(`Room ${y}: ID=${C}, Found=${!!G}, RoomNumber=${G?.roomNumber}`)})},100))},error:m=>{console.error("Error fetching available rooms:",m),this.roomSearchLoading.set(!1),this.snackBar.open("Failed to load available rooms","Close",{duration:3e3}),this.availableRooms.set([])}})}isRoomSelected(i){let e=i._id||i.id,t=this.rooms.controls.map(d=>d.get("roomId")?.value),r=t.includes(e);return this.isEditing()&&console.log(`Checking if room ${e} (${i.roomNumber}) is selected:`,{isSelected:r,selectedRoomIds:t,roomsControlsLength:this.rooms.controls.length,roomsValue:this.rooms.value}),r}toggleRoomSelection(i){if(console.log("toggleRoomSelection called with room:",i),console.log("isRoomAvailable:",this.isRoomAvailable(i)),!this.isRoomAvailable(i)){console.log("Room not available, returning early");return}let e=i._id||i.id;console.log("Room ID:",e);let t=this.rooms.controls.findIndex(r=>r.get("roomId")?.value===e);if(console.log("Existing index:",t),console.log("Current rooms.controls length:",this.rooms.controls.length),t>=0)console.log("Removing room at index:",t),this.rooms.removeAt(t);else{console.log("Adding new room");let r=this.createRoomForm();r.patchValue({roomId:e}),this.rooms.push(r),console.log("Room added, new length:",this.rooms.controls.length)}this.updateStepValidation(),this.rooms.markAsTouched(),this.rooms.updateValueAndValidity(),this.reservationForm.updateValueAndValidity(),this.updateRoomCapacityLimits(),this.calculatePricingFromRooms(),console.log("Final rooms count:",this.getSelectedRoomsCount())}updateStepValidation(){let i=this.getSelectedRoomsCount()>0;this.reservationDetailsGroup.get("roomsSelected")?.setValue(i)}getSelectedRoomsCount(){return this.rooms.length}getSelectedRoomsDetails(){let i=this.availableRooms();return this.rooms.controls.map(e=>{let t=e.get("roomId")?.value;return i.find(r=>r.id===t)}).filter(e=>e)}get rooms(){return this.reservationForm.get("rooms")}get additionalGuests(){return this.reservationForm.get("guestDetails.additionalGuests")}createAdditionalGuestForm(){return this.fb.group({firstName:[""],lastName:[""],age:[null],relationship:[""]})}addAdditionalGuest(){this.canAddMoreAdditionalGuests()&&this.additionalGuests.push(this.createAdditionalGuestForm())}removeAdditionalGuest(i){this.additionalGuests.removeAt(i)}canAddMoreAdditionalGuests(){let i=this.maxAdultsAllowed(),e=this.reservationForm.get("guestDetails.totalAdults")?.value||1,t=this.additionalGuests.length,r=Math.max(0,i-1);return t<r&&i>0}getMaxAdditionalGuestsAllowed(){let i=this.maxAdultsAllowed();return Math.max(0,i-1)}getAdditionalGuestsWarningMessage(){let i=this.getMaxAdditionalGuestsAllowed();return i===0?"Selected rooms only accommodate the primary guest":`Selected rooms can accommodate maximum ${i} additional guest(s)`}get currency(){return this.storeStore.selectedStore()?.currencyCode||this.storeStore.selectedStore()?.currency||"$"}isStepOneComplete(){let i=this.reservationForm.get("checkInDate")?.valid,e=this.reservationForm.get("checkOutDate")?.valid,t=this.getSelectedRoomsCount()>0;return!!(i&&e&&t)}isStepTwoComplete(){return this.reservationForm.get("guestDetails")?.valid||!1}isStepThreeComplete(){return this.reservationForm.get("pricing")?.valid||!1}onSubmit(){if(this.reservationForm.valid){let i=this.reservationForm.getRawValue(),e=this.storeStore.selectedStore(),t=this.currentUser();if(!e?._id){this.snackBar.open("No store selected. Please select a store first.","Close",{duration:3e3,panelClass:["error-snackbar"]});return}if(!t?._id){this.snackBar.open("User not authenticated. Please log in again.","Close",{duration:3e3,panelClass:["error-snackbar"]});return}if(!i.rooms||i.rooms.length===0){this.snackBar.open("Please select at least one room.","Close",{duration:3e3,panelClass:["error-snackbar"]});return}if(!i.guestDetails?.primaryGuest?.firstName||!i.guestDetails?.primaryGuest?.email){this.snackBar.open("Please provide guest information.","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.handleGuestAndCreateReservation(i)}else this.markFormGroupTouched(this.reservationForm),this.snackBar.open("Please fill in all required fields","Close",{duration:3e3,panelClass:["error-snackbar"]})}handleGuestAndCreateReservation(i){let e=this.selectedGuest();if(e?._id){console.log("Using existing guest:",e);let t=this.transformFormToReservationDto(i,e._id);this.isEditing()?this.updateReservation(t):this.createReservation(t)}else{console.log("Creating new guest first");let t={firstName:i.guestDetails.primaryGuest.firstName,lastName:i.guestDetails.primaryGuest.lastName,email:i.guestDetails.primaryGuest.email,phone:i.guestDetails.primaryGuest.phone};this.loading.set(!0),this.guestService.createGuest(t).pipe(S(this.destroy$)).subscribe({next:r=>{console.log("New guest created:",r),this.selectedGuest.set(r);let d=this.transformFormToReservationDto(i,r._id);this.isEditing()?this.updateReservation(d):this.createReservation(d)},error:r=>{this.loading.set(!1),console.error("Error creating guest:",r),this.snackBar.open("Failed to create guest. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}}transformFormToReservationDto(i,e){let t=new Date(i.checkInDate),r=new Date(i.checkOutDate),d=this.storeStore.selectedStore(),m=this.currentUser(),x=r.getTime()-t.getTime(),y=Math.ceil(x/(1e3*3600*24));return{store:d?._id||"",guest:e,createdBy:m?._id||"",numberOfNights:y,guestDetails:{primaryGuest:i.guestDetails.primaryGuest,additionalGuests:i.guestDetails.additionalGuests||[],totalAdults:i.guestDetails.totalAdults,totalChildren:i.guestDetails.totalChildren},rooms:i.rooms.map(C=>({room:C.roomId,guests:{adults:C.guests?.adults||i.guestDetails.totalAdults||1,children:C.guests?.children||i.guestDetails.totalChildren||0}})),checkInDate:t,checkOutDate:r,expectedCheckInTime:i.expectedCheckInTime||"15:00",expectedCheckOutTime:i.expectedCheckOutTime||"11:00",bookingSource:i.bookingSource||"walk_in",pricing:{subtotal:i.pricing.subtotal||0,taxes:i.pricing.taxes||0,fees:i.pricing.fees||{serviceFee:0,cleaningFee:0,resortFee:0,other:0},discounts:i.pricing.discounts||{amount:0,reason:"",code:""},total:i.pricing.total||0,paid:i.pricing.paid||0},paymentInfo:{method:i.paymentInfo?.method||"cash",status:i.paymentInfo?.status||"pending",transactions:i.paymentInfo?.transactions||[]},specialRequests:i.specialRequests||"",internalNotes:i.internalNotes||""}}createReservation(i){console.log("Creating reservation with COMPLETE data structure:"),console.log("\u2705 Store:",i.store),console.log("\u2705 Guest:",i.guest),console.log("\u2705 CreatedBy:",i.createdBy),console.log("\u2705 NumberOfNights:",i.numberOfNights),console.log("\u2705 GuestDetails:",i.guestDetails),console.log("\u2705 PaymentInfo with transactions:",i.paymentInfo),console.log("FULL PAYLOAD:",JSON.stringify(i,null,2)),this.loading.set(!0),this.reservationService.createReservation(i).pipe(S(this.destroy$)).subscribe({next:e=>{this.loading.set(!1),console.log("Reservation created successfully:",e),this.snackBar.open("Reservation created successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["../list"],{relativeTo:this.route})},error:e=>{this.loading.set(!1),this.error.set("Failed to create reservation"),console.error("Error creating reservation:",e),this.snackBar.open("Failed to create reservation","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}updateReservation(i){let e=this.editingReservation()?._id;if(!e)return;let t={guest:i.guest,guestDetails:i.guestDetails,rooms:i.rooms,checkInDate:i.checkInDate,checkOutDate:i.checkOutDate,numberOfNights:i.numberOfNights,expectedCheckInTime:i.expectedCheckInTime,expectedCheckOutTime:i.expectedCheckOutTime,pricing:i.pricing,paymentInfo:i.paymentInfo,specialRequests:i.specialRequests,internalNotes:i.internalNotes};this.loading.set(!0),this.reservationService.updateReservation(e,t).pipe(S(this.destroy$)).subscribe({next:r=>{this.loading.set(!1),this.snackBar.open("Reservation updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.router.navigate(["../list"],{relativeTo:this.route})},error:r=>{this.loading.set(!1),this.error.set("Failed to update reservation"),this.snackBar.open("Failed to update reservation","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}markFormGroupTouched(i){Object.keys(i.controls).forEach(e=>{let t=i.get(e);t instanceof zt?this.markFormGroupTouched(t):t?.markAsTouched()})}getRoomAdultCapacity(i){return this.getRoomCapacityObject(i)?.adults||0}getRoomChildrenCapacity(i){return this.getRoomCapacityObject(i)?.children||0}getRoomAmenities(i){return i.amenities&&i.amenities.length>0?i.amenities:typeof i.roomType=="object"&&i.roomType.amenities?i.roomType.amenities:[]}getRoomTypeName(i){return typeof i.roomType=="object"&&i.roomType.name?i.roomType.name:typeof i.roomType=="string"?"Room Type":"Unknown"}isRoomAvailable(i){if("isAvailable"in i)return i.isAvailable;let e=i;return e.status==="available"&&e.active===!0}getRoomRate(i){return"rate"in i&&i.rate?i.rate:i.priceOverride?i.priceOverride:typeof i.roomType=="object"&&i.roomType.basePrice?i.roomType.basePrice:0}setupGuestAutocomplete(){this.guestSearchControl.valueChanges.pipe(L(""),Re(300),Ie(),pe(i=>!i||i.length<2?(this.filteredGuests.set([]),ce({guests:[],total:0,page:1,totalPages:0})):(this.guestSearchLoading.set(!0),this.guestService.searchGuests(i,1,10))),S(this.destroy$)).subscribe({next:i=>{this.filteredGuests.set(i.guests),this.guestSearchLoading.set(!1)},error:i=>{console.error("Error searching guests:",i),this.filteredGuests.set([]),this.guestSearchLoading.set(!1)}})}onGuestSelected(i){this.selectedGuest.set(i),this.guestSearchControl.setValue(`${i.firstName} ${i.lastName}`),this.populateGuestDetails(i)}displayGuestFn(i){return i?`${i.firstName} ${i.lastName}`:""}getGuestDisplayText(i){return`${i.firstName} ${i.lastName} \u2022 ${i.phone}`}populateGuestDetails(i){let e=this.reservationForm.get("guestDetails.primaryGuest");e&&e.patchValue({firstName:i.firstName,lastName:i.lastName,email:i.email,phone:i.phone,dateOfBirth:i.dateOfBirth,nationality:i.nationality}),this.reservationForm.patchValue({guest:i._id}),this.snackBar.open(`Guest ${i.firstName} ${i.lastName} selected`,"Close",{duration:3e3})}onGuestSearchClear(){this.selectedGuest.set(null),this.guestSearchControl.setValue(""),this.filteredGuests.set([]);let i=this.reservationForm.get("guestDetails.primaryGuest");i&&i.patchValue({firstName:"",lastName:"",email:"",phone:"",dateOfBirth:null,nationality:""}),this.reservationForm.patchValue({guest:null})}onCancel(){this.location.back()}clearError(){this.error.set(null)}forceUIRefresh(){console.log("Forcing UI refresh..."),this.rooms.updateValueAndValidity(),this.additionalGuests.updateValueAndValidity(),this.cdr.detectChanges(),console.log("UI refresh - Additional guests:",{length:this.additionalGuests.length,value:this.additionalGuests.value}),console.log("UI refresh - Selected rooms:",{length:this.rooms.length,value:this.rooms.value})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=$({type:n,selectors:[["app-reservation-form"]],decls:314,vars:75,consts:[["stepper",""],["checkInPicker",""],["checkOutPicker",""],["guestAuto","matAutocomplete"],[1,"bg-white","shadow-sm","border-b","border-gray-200"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-4"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-600","mt-1"],[1,"flex","space-x-3"],["mat-stroked-button","",1,"border-gray-300","text-gray-700","hover:bg-gray-50",3,"click"],["mat-raised-button","","color","primary",1,"bg-blue-600","hover:bg-blue-700","text-white",3,"click","disabled"],[1,"animate-spin","mr-2"],[1,"mr-2"],[1,"flex","justify-center","items-center","py-12"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","m-4"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[3,"ngSubmit","formGroup"],["orientation","horizontal","linear","true"],["label","Reservation Details",3,"stepControl","completed"],[1,"space-y-6"],[1,"shadow-sm"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-4"],["appearance","outline"],["matInput","","formControlName","checkInDate","required","",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","checkOutDate","required","",3,"matDatepicker"],["matInput","","type","time","formControlName","expectedCheckInTime"],["matInput","","type","time","formControlName","expectedCheckOutTime"],[1,"mt-4","p-4","bg-blue-50","rounded-lg"],[1,"flex","justify-between","items-center","w-full"],[1,"flex","items-center","justify-center","py-8"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"text-center","py-8","text-gray-500"],[1,"mt-4","p-4","bg-orange-50","border","border-orange-200","rounded-lg"],[1,"mt-6","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"mt-4","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"space-y-4"],["appearance","outline",1,"w-full"],["matInput","","formControlName","specialRequests","rows","3","placeholder","Any special requests or preferences..."],["matInput","","formControlName","internalNotes","rows","2","placeholder","Internal notes (not visible to guest)..."],["formControlName","bookingSource"],["value","direct"],["value","phone"],["value","online"],["value","walk_in"],["value","booking_com"],["value","expedia"],["value","airbnb"],[1,"flex","justify-end"],["mat-button","","matStepperNext","","type","button",1,"bg-blue-600","text-white","hover:bg-blue-700"],["label","Guest Information",3,"stepControl","completed"],[1,"guest-search-section","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"text-sm","text-gray-600","mb-4"],["matInput","","placeholder","Type guest name...",3,"formControl","matAutocomplete","disabled"],["matSuffix",""],["diameter","20","matSuffix",""],[3,"optionSelected","displayWith"],[3,"value"],[1,"bg-green-50","border","border-green-200","rounded-lg","p-4","mb-4"],[1,"bg-blue-50","border","border-blue-200","rounded-lg","p-4","mb-4"],[1,"my-4"],["formGroupName","guestDetails"],["formGroupName","primaryGuest",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["matInput","","formControlName","firstName","required",""],["matInput","","formControlName","lastName","required",""],["matInput","","type","email","formControlName","email","required",""],["matInput","","formControlName","phone","required",""],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mt-4"],["matInput","","type","number","formControlName","totalAdults","min","1","required","",3,"max"],["matInput","","type","number","formControlName","totalChildren","min","0",3,"max"],["mat-icon-button","","type","button",1,"text-blue-600","hover:text-blue-800","disabled:text-gray-400","disabled:cursor-not-allowed",3,"click","disabled","matTooltip"],[1,"px-6","pb-2"],[1,"flex","justify-between"],["mat-button","","matStepperPrevious","","type","button",1,"text-gray-600"],["label","Pricing & Payment",3,"stepControl","completed"],["formGroupName","pricing",1,"space-y-4"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["matInput","","type","number","formControlName","subtotal","min","0","step","0.01","readonly",""],["matPrefix",""],["matInput","","type","number","formControlName","taxes","min","0","step","0.01","readonly",""],["formGroupName","fees"],[1,"font-medium","text-gray-900","mb-3"],["matInput","","type","number","formControlName","serviceFee","min","0","step","0.01"],["matInput","","type","number","formControlName","cleaningFee","min","0","step","0.01"],["matInput","","type","number","formControlName","resortFee","min","0","step","0.01"],["matInput","","type","number","formControlName","other","min","0","step","0.01"],["formGroupName","discounts"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["matInput","","type","number","formControlName","amount","min","0","step","0.01"],["matInput","","formControlName","reason","placeholder","e.g., Senior discount"],["matInput","","formControlName","code","placeholder","e.g., SAVE20"],["matInput","","type","number","formControlName","paid","min","0","step","0.01"],[1,"bg-gray-50","rounded-lg","p-4","space-y-2"],[1,"text-gray-600"],[1,"font-semibold"],[1,"flex","justify-between","text-lg","font-bold","text-green-600"],["formGroupName","paymentInfo",1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["formControlName","method","required",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","status"],["value","pending"],["value","partial"],["value","paid"],["value","refunded"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white",3,"disabled"],["diameter","40"],[1,"ml-3","text-gray-600"],[1,"flex"],[1,"text-red-500","mr-2"],[1,"text-red-800","font-medium"],[1,"text-red-700","text-sm","mt-1"],["mat-button","",1,"mt-2",3,"click"],[1,"flex","items-center","text-blue-700"],[1,"font-medium"],["diameter","30"],["class","border rounded-lg p-4 cursor-pointer transition-all duration-200 hover:shadow-md",3,"border-blue-500","bg-blue-50","border-gray-300","border-red-300","bg-red-50","opacity-50","cursor-not-allowed","click",4,"ngFor","ngForOf"],[1,"border","rounded-lg","p-4","cursor-pointer","transition-all","duration-200","hover:shadow-md",3,"click"],[1,"flex","justify-between","items-start","mb-3"],[1,"font-semibold","text-lg","text-gray-900"],[1,"text-sm","text-gray-600","capitalize"],[1,"flex","items-center"],["color","primary",3,"checked","disabled"],[1,"text-red-500","text-xs","font-medium","px-2","py-1","bg-red-100","rounded"],[1,"space-y-2"],[1,"flex","justify-between","items-center"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-blue-600"],[1,"text-sm","font-medium"],[1,"mt-3"],[1,"mt-3","pt-2","border-t","border-gray-200"],[1,"text-xs","text-gray-500","mb-1"],[1,"flex","flex-wrap","gap-1"],["class","text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",4,"ngFor","ngForOf"],[1,"text-xs","bg-gray-100","text-gray-700","px-2","py-1","rounded"],[1,"text-sm","font-medium","text-gray-700"],[1,"font-bold","text-green-600"],[1,"text-4xl","mb-2"],[1,"text-sm"],[1,"flex","items-center","text-orange-700"],[1,"font-medium","text-blue-900","mb-2"],[1,"space-y-1","text-sm"],["class","flex justify-between",4,"ngFor","ngForOf"],[1,"flex","items-center","text-green-700"],[1,"flex","flex-col"],[1,"text-sm","text-gray-500"],["disabled",""],[1,"text-gray-500"],[1,"flex","items-center","justify-between"],[1,"text-green-600","mr-2"],[1,"font-medium","text-green-800"],[1,"text-sm","text-green-600"],["mat-icon-button","","matTooltip","Clear selection and create new guest",3,"click"],[1,"text-blue-600","mr-2"],[1,"text-sm","text-blue-800"],[1,"flex","items-center","text-sm"],[1,"mr-2","text-sm"],["formArrayName","additionalGuests",1,"space-y-4"],["class","border border-gray-200 rounded-lg p-4",3,"formGroupName",4,"ngFor","ngForOf"],[1,"border","border-gray-200","rounded-lg","p-4",3,"formGroupName"],[1,"flex","justify-between","items-start","mb-4"],[1,"font-medium","text-gray-900"],["mat-icon-button","","type","button",1,"text-red-600","hover:text-red-800",3,"click"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","type","number","formControlName","age","min","0"],["matInput","","formControlName","relationship"]],template:function(e,t){if(e&1){let r=B();a(0,"div",4)(1,"div",5)(2,"div",6)(3,"div")(4,"h1",7),s(5),o(),a(6,"p",8),s(7),o()(),a(8,"div",9)(9,"button",10),R("click",function(){return k(r),M(t.onCancel())}),s(10," Cancel "),o(),a(11,"button",11),R("click",function(){return k(r),M(t.onSubmit())}),c(12,Rn,2,0,"mat-icon",12)(13,In,2,0,"mat-icon",13),s(14),o()()()()(),c(15,Fn,4,1,"div",14),c(16,An,11,1,"div",15),a(17,"div",16)(18,"form",17),R("ngSubmit",function(){return k(r),M(t.onSubmit())}),a(19,"mat-stepper",18,0)(21,"mat-step",19)(22,"div",20)(23,"mat-card",21)(24,"mat-card-header")(25,"mat-card-title"),s(26,"Stay Dates & Times"),o(),a(27,"mat-card-subtitle"),s(28,"Check-in and check-out information"),o()(),a(29,"mat-card-content")(30,"div",22)(31,"mat-form-field",23)(32,"mat-label"),s(33,"Check-in Date"),o(),f(34,"input",24)(35,"mat-datepicker-toggle",25)(36,"mat-datepicker",null,1),c(38,kn,2,0,"mat-error"),o(),a(39,"mat-form-field",23)(40,"mat-label"),s(41,"Check-out Date"),o(),f(42,"input",26)(43,"mat-datepicker-toggle",25)(44,"mat-datepicker",null,2),c(46,Mn,2,0,"mat-error"),o(),a(47,"mat-form-field",23)(48,"mat-label"),s(49,"Check-in Time"),o(),f(50,"input",27),o(),a(51,"mat-form-field",23)(52,"mat-label"),s(53,"Check-out Time"),o(),f(54,"input",28),o()(),c(55,Tn,6,1,"div",29),o()(),a(56,"mat-card",21)(57,"mat-card-header")(58,"div",30)(59,"div")(60,"mat-card-title"),s(61,"Room Selection"),o(),a(62,"mat-card-subtitle"),s(63,"Choose rooms for the stay "),c(64,Dn,1,1),o()()()(),a(65,"mat-card-content"),c(66,wn,4,0,"div",31),c(67,zn,2,1,"div",32),c(68,$n,7,0,"div",33),c(69,Bn,6,0,"div",34),c(70,jn,5,2,"div",35),c(71,Hn,6,2,"div",36),o()(),a(72,"mat-card",21)(73,"mat-card-header")(74,"mat-card-title"),s(75,"Additional Information"),o()(),a(76,"mat-card-content",37)(77,"mat-form-field",38)(78,"mat-label"),s(79,"Special Requests"),o(),f(80,"textarea",39),o(),a(81,"mat-form-field",38)(82,"mat-label"),s(83,"Internal Notes"),o(),f(84,"textarea",40),o(),a(85,"mat-form-field",23)(86,"mat-label"),s(87,"Booking Source"),o(),a(88,"mat-select",41)(89,"mat-option",42),s(90,"Direct"),o(),a(91,"mat-option",43),s(92,"Phone"),o(),a(93,"mat-option",44),s(94,"Online"),o(),a(95,"mat-option",45),s(96,"Walk-in"),o(),a(97,"mat-option",46),s(98,"Booking.com"),o(),a(99,"mat-option",47),s(100,"Expedia"),o(),a(101,"mat-option",48),s(102,"Airbnb"),o()()()()(),a(103,"div",49)(104,"button",50),s(105," Next: Guest Information "),o()()()(),a(106,"mat-step",51)(107,"div",20)(108,"mat-card",21)(109,"mat-card-header")(110,"mat-card-title"),s(111,"Primary Guest"),o(),a(112,"mat-card-subtitle"),s(113,"Main contact and billing information"),o()(),a(114,"mat-card-content")(115,"div",52)(116,"h3",53),s(117,"Search Existing Guest"),o(),a(118,"p",54),s(119,"Search by name to find existing guest records"),o(),a(120,"mat-form-field",38)(121,"mat-label"),s(122,"Search by guest name"),o(),f(123,"input",55),a(124,"mat-icon",56),s(125,"search"),o(),c(126,Un,1,0,"mat-spinner",57),o(),a(127,"mat-autocomplete",58,3),R("optionSelected",function(m){return k(r),M(t.onGuestSelected(m.option.value))}),J(129,Qn,6,5,"mat-option",59,En,!1,Kn,1,1),o(),c(132,Yn,13,4,"div",60),c(133,Zn,6,0,"div",61),f(134,"mat-divider",62),o(),a(135,"div",63)(136,"div",64)(137,"mat-form-field",23)(138,"mat-label"),s(139,"First Name"),o(),f(140,"input",65),c(141,Jn,2,0,"mat-error"),o(),a(142,"mat-form-field",23)(143,"mat-label"),s(144,"Last Name"),o(),f(145,"input",66),c(146,Xn,2,0,"mat-error"),o(),a(147,"mat-form-field",23)(148,"mat-label"),s(149,"Email"),o(),f(150,"input",67),c(151,eo,2,0,"mat-error"),c(152,to,2,0,"mat-error"),o(),a(153,"mat-form-field",23)(154,"mat-label"),s(155,"Phone"),o(),f(156,"input",68),c(157,io,2,0,"mat-error"),o()(),a(158,"div",69)(159,"mat-form-field",23)(160,"mat-label"),s(161,"Total Adults"),o(),f(162,"input",70),c(163,no,2,0,"mat-error"),c(164,oo,2,0,"mat-error"),c(165,ao,2,1,"mat-error"),o(),a(166,"mat-form-field",23)(167,"mat-label"),s(168,"Total Children"),o(),f(169,"input",71),c(170,ro,2,0,"mat-error"),c(171,so,2,1,"mat-error"),o()()()()(),a(172,"mat-card",21)(173,"mat-card-header")(174,"div",30)(175,"div")(176,"mat-card-title"),s(177,"Additional Guests"),o(),a(178,"mat-card-subtitle"),s(179,"Add accompanying guests (optional)"),o()(),a(180,"button",72),R("click",function(){return k(r),M(t.addAdditionalGuest())}),a(181,"mat-icon"),s(182,"add"),o()()()(),c(183,mo,7,10,"div",73),c(184,po,4,1,"mat-card-content"),o(),a(185,"div",74)(186,"button",75),s(187," Previous "),o(),a(188,"button",50),s(189," Next: Pricing & Payment "),o()()()(),a(190,"mat-step",76)(191,"div",20)(192,"mat-card",21)(193,"mat-card-header")(194,"mat-card-title"),s(195,"Pricing Details"),o(),a(196,"mat-card-subtitle"),s(197,"Automatically calculated based on room selection and stay duration"),o()(),a(198,"mat-card-content")(199,"div",77),c(200,ho,5,1,"div",61),a(201,"div",78)(202,"mat-form-field",23)(203,"mat-label"),s(204,"Subtotal (Auto-calculated)"),o(),f(205,"input",79),a(206,"span",80),s(207),o(),a(208,"mat-hint"),s(209,"Based on room rates and stay duration"),o()(),a(210,"mat-form-field",23)(211,"mat-label"),s(212,"Taxes (Auto-calculated)"),o(),f(213,"input",81),a(214,"span",80),s(215),o(),a(216,"mat-hint"),s(217,"Dynamic tax rate applied"),o()()(),a(218,"div",82)(219,"h4",83),s(220,"Additional Fees"),o(),a(221,"div",78)(222,"mat-form-field",23)(223,"mat-label"),s(224,"Service Fee"),o(),f(225,"input",84),a(226,"span",80),s(227),o()(),a(228,"mat-form-field",23)(229,"mat-label"),s(230,"Cleaning Fee"),o(),f(231,"input",85),a(232,"span",80),s(233),o()(),a(234,"mat-form-field",23)(235,"mat-label"),s(236,"Resort Fee"),o(),f(237,"input",86),a(238,"span",80),s(239),o()(),a(240,"mat-form-field",23)(241,"mat-label"),s(242,"Other Fees"),o(),f(243,"input",87),a(244,"span",80),s(245),o()()()(),a(246,"div",88)(247,"h4",83),s(248,"Discounts"),o(),a(249,"div",89)(250,"mat-form-field",23)(251,"mat-label"),s(252,"Discount Amount"),o(),f(253,"input",90),a(254,"span",80),s(255),o()(),a(256,"mat-form-field",23)(257,"mat-label"),s(258,"Reason"),o(),f(259,"input",91),o(),a(260,"mat-form-field",23)(261,"mat-label"),s(262,"Promo Code"),o(),f(263,"input",92),o()()(),a(264,"div",78)(265,"mat-form-field",23)(266,"mat-label"),s(267,"Amount Paid"),o(),f(268,"input",93),a(269,"span",80),s(270),o()()(),a(271,"div",94)(272,"div",74)(273,"span",95),s(274,"Total Amount:"),o(),a(275,"span",96),s(276),U(277,"number"),o()(),a(278,"div",97)(279,"span"),s(280,"Balance Due:"),o(),a(281,"span"),s(282),U(283,"number"),o()()()()()(),a(284,"mat-card",21)(285,"mat-card-header")(286,"mat-card-title"),s(287,"Payment Information"),o()(),a(288,"mat-card-content")(289,"div",98)(290,"mat-form-field",23)(291,"mat-label"),s(292,"Payment Method"),o(),a(293,"mat-select",99),T(294,go,3,4,"mat-option",100),o()(),a(295,"mat-form-field",23)(296,"mat-label"),s(297,"Payment Status"),o(),a(298,"mat-select",101)(299,"mat-option",102),s(300,"Pending"),o(),a(301,"mat-option",103),s(302,"Partial"),o(),a(303,"mat-option",104),s(304,"Paid"),o(),a(305,"mat-option",105),s(306,"Refunded"),o()()()()()(),a(307,"div",74)(308,"button",75),s(309," Previous "),o(),a(310,"button",106),c(311,fo,2,0,"mat-icon",12)(312,vo,2,0,"mat-icon",13),s(313),o()()()()()()()}if(e&2){let r,d,m,x,y,C,G,E,z,I,F,oe,Le,Ve=H(37),ze=H(45),Ui=H(128);l(5),_(" ",t.isEditing()?"Edit Reservation":"New Reservation"," "),l(2),_(" ",t.isEditing()?"Update reservation details":"Create a new guest reservation"," "),l(4),h("disabled",t.loading()||t.reservationForm.invalid),l(),p(t.loading()?12:13),l(2),_(" ",t.isEditing()?"Update Reservation":"Create Reservation"," "),l(),p(t.loading()?15:-1),l(),p(t.error()&&!t.loading()?16:-1),l(2),h("formGroup",t.reservationForm),l(3),h("stepControl",t.reservationDetailsGroup)("completed",t.isStepOneComplete()),l(13),h("matDatepicker",Ve),l(),h("for",Ve),l(3),p((r=t.reservationForm.get("checkInDate"))!=null&&r.hasError("required")?38:-1),l(4),h("matDatepicker",ze),l(),h("for",ze),l(3),p((d=t.reservationForm.get("checkOutDate"))!=null&&d.hasError("required")?46:-1),l(9),p(t.numberOfNights()>0?55:-1),l(9),p(t.getSelectedRoomsCount()>0?64:-1),l(2),p(t.roomSearchLoading()?66:-1),l(),p(!t.roomSearchLoading()&&t.availableRooms().length>0?67:-1),l(),p(!t.roomSearchLoading()&&t.availableRooms().length===0?68:-1),l(),p(!t.roomSearchLoading()&&t.availableRooms().length>0&&t.getSelectedRoomsCount()===0?69:-1),l(),p(t.getSelectedRoomsCount()>0?70:-1),l(),p(t.maxAdultsAllowed()>0?71:-1),l(35),h("stepControl",t.reservationForm.get("guestDetails"))("completed",t.isStepTwoComplete()),l(17),h("formControl",t.guestSearchControl)("matAutocomplete",Ui)("disabled",t.guestSearchLoading()),l(3),p(t.guestSearchLoading()?126:-1),l(),h("displayWith",t.displayGuestFn),l(2),X(t.filteredGuests()),l(3),p(t.selectedGuest()?132:-1),l(),p(!t.selectedGuest()&&t.guestSearchControl.value&&t.guestSearchControl.value.length>=2&&t.filteredGuests().length===0&&!t.guestSearchLoading()?133:-1),l(8),p((m=t.reservationForm.get("guestDetails.primaryGuest.firstName"))!=null&&m.hasError("required")?141:-1),l(5),p((x=t.reservationForm.get("guestDetails.primaryGuest.lastName"))!=null&&x.hasError("required")?146:-1),l(5),p((y=t.reservationForm.get("guestDetails.primaryGuest.email"))!=null&&y.hasError("required")?151:-1),l(),p((C=t.reservationForm.get("guestDetails.primaryGuest.email"))!=null&&C.hasError("email")?152:-1),l(5),p((G=t.reservationForm.get("guestDetails.primaryGuest.phone"))!=null&&G.hasError("required")?157:-1),l(5),h("max",t.maxAdultsAllowed()||999),l(),p((E=t.reservationForm.get("guestDetails.totalAdults"))!=null&&E.hasError("required")?163:-1),l(),p((z=t.reservationForm.get("guestDetails.totalAdults"))!=null&&z.hasError("min")?164:-1),l(),p((I=t.reservationForm.get("guestDetails.totalAdults"))!=null&&I.hasError("max")?165:-1),l(4),h("max",t.maxChildrenAllowed()||999),l(),p((F=t.reservationForm.get("guestDetails.totalChildren"))!=null&&F.hasError("min")?170:-1),l(),p((oe=t.reservationForm.get("guestDetails.totalChildren"))!=null&&oe.hasError("max")?171:-1),l(9),h("disabled",!t.canAddMoreAdditionalGuests())("matTooltip",t.canAddMoreAdditionalGuests()?"Add additional guest":t.getAdditionalGuestsWarningMessage()),l(3),p(t.maxAdultsAllowed()>0?183:-1),l(),p(t.additionalGuests.length>0?184:-1),l(6),h("stepControl",t.reservationForm.get("pricing"))("completed",t.isStepThreeComplete()),l(10),p(t.selectedRoomDetails().length>0&&t.numberOfNights()>0?200:-1),l(7),_("",t.currency,"\xA0"),l(8),_("",t.currency,"\xA0"),l(12),_("",t.currency,"\xA0"),l(6),_("",t.currency,"\xA0"),l(6),_("",t.currency,"\xA0"),l(6),_("",t.currency,"\xA0"),l(10),_("",t.currency,"\xA0"),l(15),_("",t.currency,"\xA0"),l(6),A("",t.currency,"",be(277,69,t.totalAmount(),"1.2-2")),l(6),A("",t.currency,"",be(283,72,t.totalAmount()-(((Le=t.reservationForm.get("pricing.paid"))==null?null:Le.value)||0),"1.2-2")),l(12),h("ngForOf",t.paymentMethods),l(16),h("disabled",t.loading()||t.reservationForm.invalid),l(),p(t.loading()?311:312),l(2),_(" ",t.isEditing()?"Update Reservation":"Create Reservation"," ")}},dependencies:[dt,at,st,rt,lt,Xt,Bt,Gt,qt,Lt,Vt,Zt,Yt,Kt,jt,Ht,Wt,Ut,Qt,ai,ei,ii,oi,ni,ti,ui,pi,ci,ri,li,si,di,mi,Ri,Ei,Rt,kt,At,Ft,Ce,ye,Si,xi,yi,Ci,ki,Ai,ji,Ge,Pe,Bi,qi,fi,gi,Fi,Ii,Ot,_i,bi,Di,Mi,Ti],styles:[".mat-mdc-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;box-shadow:0 1px 3px #0000001a}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-header[_ngcontent-%COMP%]{background-color:#f9fafb;border-bottom:1px solid #e5e7eb}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-title[_ngcontent-%COMP%]{color:#111827;font-weight:600}.mat-mdc-card[_ngcontent-%COMP%]   .mat-mdc-card-subtitle[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem}.pricing-summary[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:.5rem;padding:1rem;border:1px solid #e5e7eb}.pricing-summary[_ngcontent-%COMP%]   .pricing-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.5rem 0}.pricing-summary[_ngcontent-%COMP%]   .pricing-row.total[_ngcontent-%COMP%]{border-top:1px solid #d1d5db;padding-top:.75rem;margin-top:.5rem;font-weight:600;font-size:1.125rem}.additional-guest-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.5rem;padding:1rem;background-color:#f9fafb}.additional-guest-card[_ngcontent-%COMP%]   .guest-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.additional-guest-card[_ngcontent-%COMP%]   .guest-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin:0}.room-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:.5rem;padding:1rem;background-color:#fff}.room-card[_ngcontent-%COMP%]   .room-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.room-card[_ngcontent-%COMP%]   .room-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;color:#111827;margin:0}@media (max-width: 768px){.grid[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.pricing-summary[_ngcontent-%COMP%]{margin-left:1rem;margin-right:1rem}}"]})};export{Hi as ReservationFormComponent};
