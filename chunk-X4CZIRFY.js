import{a as ge,b as xe}from"./chunk-24SFQJLQ.js";import{a as ce,b as pe}from"./chunk-YVYCFWPM.js";import{a as ue,b as fe}from"./chunk-LIUA42FM.js";import{d as te}from"./chunk-XQNDMVIO.js";import{b as O,c as V,d as G}from"./chunk-3632TDEK.js";import{a as j,b as L,d as le,e as de,f as se,g as Q}from"./chunk-H55FNLX4.js";import{a as A,b as oe,d as re,e as w,h as U}from"./chunk-JGZ2V5AL.js";import{B as N,D as R,b as D,d as f,g as E,h as P,m as I,n as ne,p as F,s as T,w as ie,x as ae}from"./chunk-CXVWFC6J.js";import{a as B,b as q}from"./chunk-7C3RSL2D.js";import{p as S,q as k}from"./chunk-FSA22CPB.js";import{b as me}from"./chunk-6U4I4OYM.js";import{o as Z,q as ee,t as M}from"./chunk-DWCYWQVU.js";import{Cc as v,Db as l,Dc as Y,Eb as d,Ec as y,Jb as g,Kb as n,Lb as e,Mb as x,Qb as H,Ub as u,Vb as C,_a as o,fa as p,hc as J,ic as t,kb as h,kc as s,la as $,lc as b,ma as z,va as _}from"./chunk-5AECHVKR.js";function ke(a,r){a&1&&(n(0,"div",25)(1,"div",31)(2,"mat-icon",32),t(3,"warning"),e(),n(4,"span",33),t(5," Please confirm all room readiness requirements before proceeding with check-in. "),e()()())}function De(a,r){a&1&&(n(0,"mat-icon",29),t(1,"refresh"),e())}function Ee(a,r){a&1&&(n(0,"mat-icon",30),t(1,"check_in"),e())}var Ce=class a{dialogRef=p(j);fb=p(N);data=p(L);loading=_(!1);checkInForm=this.fb.group({isClean:[!1,f.requiredTrue],isMaintained:[!1,f.requiredTrue],amenitiesReady:[!1,f.requiredTrue],notes:[""]});get isFormValid(){return this.checkInForm.valid}get roomNumbers(){return this.data.reservation.rooms?this.data.reservation.rooms.map(r=>{let m=r.room;return typeof m=="string"?m:m.roomNumber||m._id}).join(", "):""}onCancel(){this.dialogRef.close({confirmed:!1})}onConfirm(){if(!this.isFormValid)return;let r=this.checkInForm.value,m={confirmed:!0,roomChecks:{isClean:r.isClean||!1,isMaintained:r.isMaintained||!1,amenitiesReady:r.amenitiesReady||!1},notes:r.notes||void 0};this.dialogRef.close(m)}static \u0275fac=function(m){return new(m||a)};static \u0275cmp=h({type:a,selectors:[["app-check-in-confirmation-dialog"]],decls:65,vars:10,consts:[[1,"p-6","min-w-[500px]"],[1,"flex","items-center","gap-3","mb-6"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center"],[1,"text-blue-600","text-2xl"],[1,"text-xl","font-bold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-semibold","text-gray-900"],[1,"text-sm","text-gray-500"],[1,"text-sm","text-gray-700"],[1,"space-y-4","mb-6",3,"formGroup"],[1,"font-semibold","text-gray-900","mb-3"],[1,"space-y-3"],[1,"flex","items-center","gap-3"],["formControlName","isClean","color","primary"],[1,"text-sm"],[1,"text-green-600","text-lg"],["formControlName","isMaintained","color","primary"],[1,"text-blue-600","text-lg"],["formControlName","amenitiesReady","color","primary"],[1,"text-purple-600","text-lg"],["appearance","outline",1,"w-full"],["matInput","","formControlName","notes","rows","3","placeholder","Any special notes or observations..."],["matSuffix",""],[1,"bg-amber-50","border","border-amber-200","rounded-lg","p-3","mb-6"],[1,"flex","justify-end","gap-3"],["mat-button","",1,"px-6","py-2",3,"click"],["mat-raised-button","","color","primary",1,"px-6","py-2","!bg-blue-600","hover:!bg-blue-700",3,"click","disabled"],[1,"animate-spin","mr-2"],[1,"mr-2"],[1,"flex","items-center","gap-2"],[1,"text-amber-600"],[1,"text-sm","text-amber-800","font-medium"]],template:function(m,i){m&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-icon",3),t(4,"check_in"),e()(),n(5,"div")(6,"h2",4),t(7,"Confirm Check-In"),e(),n(8,"p",5),t(9),e()()(),n(10,"div",6)(11,"div",7)(12,"h3",8),t(13,"Guest Information"),e(),n(14,"span",9),t(15),e()(),n(16,"div",10)(17,"div")(18,"strong"),t(19,"Name:"),e(),t(20),e(),n(21,"div")(22,"strong"),t(23,"Adults:"),e(),t(24),n(25,"strong"),t(26,"Children:"),e(),t(27),e()()(),n(28,"form",11)(29,"div")(30,"h3",12),t(31,"Room Readiness Checklist"),e(),n(32,"div",13)(33,"div",14)(34,"mat-checkbox",15)(35,"span",16),t(36,"Room is clean and housekeeping complete"),e()(),n(37,"mat-icon",17),t(38,"cleaning_services"),e()(),n(39,"div",14)(40,"mat-checkbox",18)(41,"span",16),t(42,"All maintenance issues resolved"),e()(),n(43,"mat-icon",19),t(44,"build"),e()(),n(45,"div",14)(46,"mat-checkbox",20)(47,"span",16),t(48,"Amenities and supplies are stocked"),e()(),n(49,"mat-icon",21),t(50,"inventory_2"),e()()()(),n(51,"mat-form-field",22)(52,"mat-label"),t(53,"Check-in Notes (Optional)"),e(),x(54,"textarea",23),n(55,"mat-icon",24),t(56,"note_add"),e()()(),l(57,ke,6,0,"div",25),n(58,"div",26)(59,"button",27),u("click",function(){return i.onCancel()}),t(60," Cancel "),e(),n(61,"button",28),u("click",function(){return i.onConfirm()}),l(62,De,2,0,"mat-icon",29)(63,Ee,2,0,"mat-icon",30),t(64," Confirm Check-In "),e()()()),m&2&&(o(9),s("Reservation ",i.data.reservation.confirmationNumber),o(6),s("Room(s): ",i.roomNumbers),o(5),b(" ",i.data.reservation.guestDetails.primaryGuest.firstName," ",i.data.reservation.guestDetails.primaryGuest.lastName),o(4),s(" ",i.data.reservation.guestDetails.totalAdults," | "),o(3),s(" ",i.data.reservation.guestDetails.totalChildren),o(),g("formGroup",i.checkInForm),o(29),d(i.isFormValid?-1:57),o(4),g("disabled",!i.isFormValid||i.loading()),o(),d(i.loading()?62:63))},dependencies:[M,Q,k,S,q,B,xe,ge,O,U,A,w,G,V,R,I,D,E,P,F,T],styles:[".check-in-dialog[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-checkbox[_ngcontent-%COMP%]{margin-right:8px}.check-in-dialog[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#fafafa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};function Pe(a,r){a&1&&t(0," Payment Required for Checkout ")}function Ie(a,r){a&1&&t(0," Update Payment ")}function Fe(a,r){a&1&&(n(0,"div",4)(1,"div",37)(2,"mat-icon",38),t(3,"warning"),e(),n(4,"div",39)(5,"strong"),t(6,"Payment Required:"),e(),t(7," This reservation has an outstanding balance that must be cleared before checkout. "),e()()())}function Te(a,r){a&1&&(n(0,"mat-error"),t(1,"Amount is required"),e())}function Ne(a,r){a&1&&(n(0,"mat-error"),t(1,"Amount must be greater than 0"),e())}function Re(a,r){a&1&&(n(0,"mat-error"),t(1,"Amount cannot exceed balance due"),e())}function Ae(a,r){a&1&&(n(0,"mat-error"),t(1,"Payment method is required"),e())}function we(a,r){if(a&1){let m=H();n(0,"button",31),u("click",function(){$(m);let c=C();return z(c.setAmount(100))}),t(1),e()}if(a&2){let m=C();o(),s(" ",m.currency,"100 ")}}function Ue(a,r){if(a&1){let m=H();n(0,"button",31),u("click",function(){$(m);let c=C();return z(c.setAmount(50))}),t(1),e()}if(a&2){let m=C();o(),s(" ",m.currency,"50 ")}}function Oe(a,r){a&1&&t(0," Cancel Checkout ")}function Ve(a,r){a&1&&t(0," Cancel ")}function Ge(a,r){a&1&&x(0,"mat-spinner",36)}function Be(a,r){if(a&1&&t(0),a&2){let m=C();s(" ",m.processing()?"Processing...":"Pay & Checkout"," ")}}function qe(a,r){if(a&1&&t(0),a&2){let m=C();s(" ",m.processing()?"Processing...":"Record Payment"," ")}}var be=class a{fb=p(N);dialogRef=p(j);data=p(L);storeStore=p(me);processing=_(!1);paymentForm=this.fb.group({amount:[this.data.reservation.pricing.balance||0,[f.required,f.min(.01),f.max(this.data.reservation.pricing.balance||0)]],method:["",f.required],reference:[""],notes:[""]});get currency(){return this.storeStore.selectedStore()?.currencyCode||this.storeStore.selectedStore()?.currency||"$"}setAmount(r){this.paymentForm.patchValue({amount:r})}onCancel(){this.dialogRef.close({confirmed:!1})}onConfirm(){if(this.paymentForm.valid){this.processing.set(!0);let r={confirmed:!0,paymentData:{amount:this.paymentForm.value.amount,method:this.paymentForm.value.method,reference:this.paymentForm.value.reference||void 0,notes:this.paymentForm.value.notes||void 0}};setTimeout(()=>{this.processing.set(!1),this.dialogRef.close(r)},1e3)}}static \u0275fac=function(m){return new(m||a)};static \u0275cmp=h({type:a,selectors:[["app-payment-update-dialog"]],decls:99,vars:43,consts:[[1,"payment-dialog"],[1,"dialog-header"],["mat-dialog-title","",1,"text-xl","font-semibold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600","mb-4"],[1,"bg-amber-50","border","border-amber-200","rounded-lg","p-3","mb-4"],[1,"space-y-4"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-600"],[1,"font-semibold"],[1,"font-semibold","text-green-600"],[1,"space-y-4",3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matPrefix",""],["matInput","","type","number","step","0.01","min","0","formControlName","amount","placeholder","0.00",3,"max"],["matSuffix",""],["formControlName","method"],["value","cash"],["value","credit_card"],["value","debit_card"],["value","bank_transfer"],["value","check"],["value","mobile_payment"],["value","other"],["matInput","","formControlName","reference","placeholder","Transaction ID, Check number, etc."],["matInput","","formControlName","notes","rows","3","placeholder","Additional payment notes..."],[1,"space-y-2"],[1,"text-sm","font-medium","text-gray-700"],[1,"flex","flex-wrap","gap-2"],["type","button",1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","text-gray-700","rounded-md","transition-colors",3,"click"],["type","button",1,"px-3","py-1","text-sm","bg-gray-100","hover:bg-gray-200","text-gray-700","rounded-md","transition-colors"],["align","end",1,"gap-2","pt-4"],["mat-button","",1,"text-gray-600","hover:text-gray-800",3,"click"],["mat-raised-button","","color","primary",1,"min-w-[160px]",3,"click","disabled"],["diameter","20",1,"mr-2"],[1,"flex","items-center"],[1,"text-amber-600","mr-2"],[1,"text-sm","text-amber-800"]],template:function(m,i){if(m&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),l(3,Pe,1,0)(4,Ie,1,0),e(),n(5,"p",3),t(6),e(),l(7,Fe,8,0,"div",4),e(),n(8,"mat-dialog-content",5)(9,"div",6)(10,"h3",7),t(11,"Current Payment Status"),e(),n(12,"div",8)(13,"div")(14,"span",9),t(15,"Total Amount:"),e(),n(16,"div",10),t(17),v(18,"number"),e()(),n(19,"div")(20,"span",9),t(21,"Amount Paid:"),e(),n(22,"div",11),t(23),v(24,"number"),e()(),n(25,"div")(26,"span",9),t(27,"Balance Due:"),e(),n(28,"div",10),t(29),v(30,"number"),e()(),n(31,"div")(32,"span",9),t(33,"Payment Status:"),e(),n(34,"div",10),t(35),v(36,"titlecase"),e()()()(),n(37,"form",12)(38,"div",13)(39,"mat-form-field",14)(40,"mat-label"),t(41,"Payment Amount"),e(),n(42,"span",15),t(43),e(),x(44,"input",16),n(45,"mat-icon",17),t(46,"attach_money"),e(),l(47,Te,2,0,"mat-error"),l(48,Ne,2,0,"mat-error"),l(49,Re,2,0,"mat-error"),e(),n(50,"mat-form-field",14)(51,"mat-label"),t(52,"Payment Method"),e(),n(53,"mat-select",18)(54,"mat-option",19),t(55,"Cash"),e(),n(56,"mat-option",20),t(57,"Credit Card"),e(),n(58,"mat-option",21),t(59,"Debit Card"),e(),n(60,"mat-option",22),t(61,"Bank Transfer"),e(),n(62,"mat-option",23),t(63,"Check"),e(),n(64,"mat-option",24),t(65,"Mobile Payment"),e(),n(66,"mat-option",25),t(67,"Other"),e()(),l(68,Ae,2,0,"mat-error"),e()(),n(69,"mat-form-field",14)(70,"mat-label"),t(71,"Reference Number (Optional)"),e(),x(72,"input",26),n(73,"mat-icon",17),t(74,"receipt"),e()(),n(75,"mat-form-field",14)(76,"mat-label"),t(77,"Notes (Optional)"),e(),x(78,"textarea",27),n(79,"mat-icon",17),t(80,"note"),e()(),n(81,"div",28)(82,"h4",29),t(83,"Quick Amounts"),e(),n(84,"div",30)(85,"button",31),u("click",function(){return i.setAmount(i.data.reservation.pricing.balance)}),t(86),v(87,"number"),e(),l(88,we,2,1,"button",32),l(89,Ue,2,1,"button",32),e()()()(),n(90,"mat-dialog-actions",33)(91,"button",34),u("click",function(){return i.onCancel()}),l(92,Oe,1,0)(93,Ve,1,0),e(),n(94,"button",35),u("click",function(){return i.onConfirm()}),l(95,Ge,1,0,"mat-spinner",36),n(96,"span"),l(97,Be,1,1)(98,qe,1,1),e()()()()),m&2){let c,K,W,X;o(3),d(i.data.isCheckoutFlow?3:4),o(3),s(" Confirmation: ",i.data.reservation.confirmationNumber," "),o(),d(i.data.isCheckoutFlow?7:-1),o(10),b("",i.currency,"",y(18,29,i.data.reservation.pricing.total,"1.2-2")),o(6),b("",i.currency,"",y(24,32,i.data.reservation.pricing.paid,"1.2-2")),o(5),J(i.data.reservation.pricing.balance>0?"text-red-600":"text-green-600"),o(),b(" ",i.currency,"",y(30,35,i.data.reservation.pricing.balance,"1.2-2")," "),o(5),J((i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)==="paid"?"text-green-600":"text-orange-600"),o(),s(" ",Y(36,38,i.data.reservation.paymentInfo==null?null:i.data.reservation.paymentInfo.status)," "),o(2),g("formGroup",i.paymentForm),o(6),s("",i.currency,"\xA0"),o(),g("max",i.data.reservation.pricing.balance),o(3),d((c=i.paymentForm.get("amount"))!=null&&c.hasError("required")?47:-1),o(),d((K=i.paymentForm.get("amount"))!=null&&K.hasError("min")?48:-1),o(),d((W=i.paymentForm.get("amount"))!=null&&W.hasError("max")?49:-1),o(19),d((X=i.paymentForm.get("method"))!=null&&X.hasError("required")?68:-1),o(18),b(" Full Balance (",i.currency,"",y(87,40,i.data.reservation.pricing.balance,"1.2-2"),") "),o(2),d(i.data.reservation.pricing.balance>=100?88:-1),o(),d(i.data.reservation.pricing.balance>=50?89:-1),o(3),d(i.data.isCheckoutFlow?92:93),o(2),g("disabled",i.paymentForm.invalid||i.processing()),o(),d(i.processing()?95:-1),o(2),d(i.data.isCheckoutFlow?97:98)}},dependencies:[M,ee,Z,R,I,D,ne,E,P,ae,ie,F,T,Q,le,se,de,k,S,O,U,A,oe,re,w,G,V,pe,ce,te,q,B,fe,ue],styles:[".payment-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.dialog-header[_ngcontent-%COMP%]{padding-bottom:16px;border-bottom:1px solid #e5e7eb;margin-bottom:16px}mat-dialog-content[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}mat-dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;margin-top:16px;padding-top:16px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-bottom:0}"]})};export{Ce as a,be as b};
