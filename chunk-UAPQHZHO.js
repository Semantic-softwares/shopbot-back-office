import{a as ri}from"./chunk-EFUWAWAO.js";import{c as ai,d as Be}from"./chunk-HVECVKGX.js";import{a as Ae}from"./chunk-4NBRFK5Q.js";import{a as oi}from"./chunk-QIKVM7YD.js";import{a as _e}from"./chunk-WNTRC45I.js";import"./chunk-OVEDFEGH.js";import"./chunk-NKN4KZXX.js";import"./chunk-WN4JDJ5Y.js";import{g as Xt}from"./chunk-B3QUAYVA.js";import"./chunk-HZC625BF.js";import{a as ei,b as ti,c as ii,h as ni}from"./chunk-QOMDDN6I.js";import{k as Yt}from"./chunk-SNJMCTTD.js";import{a as Bt}from"./chunk-BTIPWJHT.js";import"./chunk-AR7G356Q.js";import{a as Pt}from"./chunk-YCI4GSMN.js";import"./chunk-BA3SXM5W.js";import{a as zt,b as we}from"./chunk-XPW44I4H.js";import{d as At}from"./chunk-2NVE2BM3.js";import{a as Me,b as Re}from"./chunk-W6FIBOPD.js";import{b as $,c as ce,d as me}from"./chunk-7JNU3RG5.js";import{a as Ee}from"./chunk-GGWIF4RR.js";import{c as Jt}from"./chunk-PFBPZS4P.js";import{a as ge,b as ve,c as Kt,e as Oe,f as Te,g as Fe,h as W}from"./chunk-GS72R6E5.js";import"./chunk-TKDVIZGU.js";import{a as Ie,b as pe}from"./chunk-CRWXVOET.js";import{a as Zt}from"./chunk-GGOIOYKP.js";import{a as Qt}from"./chunk-LXK533WH.js";import{a as $t,b as Lt,c as Ht,d as Wt}from"./chunk-EMC432UM.js";import{a as ue}from"./chunk-PQXLVIGM.js";import{a as jt}from"./chunk-ZXNLXZXA.js";import"./chunk-KAQLA7HR.js";import"./chunk-Y7XAAAUB.js";import"./chunk-TRTRKQKZ.js";import"./chunk-5WBVJVYM.js";import{g as ke}from"./chunk-X7SU23UW.js";import{a as le,b as qt,c as se,d as De,e as Pe,h as de}from"./chunk-3SKQMCZR.js";import{C as ae,D as Gt,E as re,a as Vt,b as J,d as M,g as Y,h as X,m as ee,n as te,q as Ut,s as ie,t as ne,x as Se,y as oe}from"./chunk-EQD33MW2.js";import"./chunk-UJ5WOJLI.js";import"./chunk-ADMJOUL4.js";import"./chunk-O4QGXHKX.js";import"./chunk-3R2L4BJM.js";import"./chunk-Y4VWLT32.js";import"./chunk-CDKFCYZ5.js";import{b as L,c as H}from"./chunk-2HLT5ZQQ.js";import{H as Je,U as Tt,V as Ft,X as Nt,Y as K,_ as z,f as Mt,g as Rt,i as wt,w as It,y as Ot}from"./chunk-UUZHPQZB.js";import"./chunk-CQ6SLR32.js";import"./chunk-C3MGKPDK.js";import{e as kt,g as Dt}from"./chunk-QAO3BBZ5.js";import"./chunk-KTA4MFBX.js";import{g as yt,i as Et,n as ye,o as St,r as Z,t as j}from"./chunk-HUSU2JWO.js";import{$b as _t,Ac as ht,Ba as Le,Cb as He,Eb as c,Ec as Qe,Fb as m,Gb as xe,Hb as vt,Hc as x,Ib as N,Ic as F,Jb as V,Jc as D,Kb as b,Lb as o,Lc as O,Mb as i,Nb as k,Rc as T,Ub as P,Uc as Ct,Y as at,Yb as h,Za as l,_ as rt,_b as u,aa as ze,ac as xt,bc as ft,ca as f,cb as ct,cc as We,cd as Ze,dc as he,ec as Ce,fb as mt,gb as ut,gd as G,ha as E,hd as Ke,ia as S,ic as q,ja as lt,jc as fe,kc as A,la as st,mb as B,mc as U,nb as pt,nc as a,ob as gt,oc as p,pa as $e,pc as v,qa as dt,qc as Q,rc as bt,ta as R}from"./chunk-HCNG3XRF.js";import{a as nt,b as ot,f as y}from"./chunk-EQDQRRRY.js";function pi(r,n){r&1&&a(0," Should equal the full extension cost ")}function gi(r,n){r&1&&a(0," Enter the amount paid so far ")}function vi(r,n){r&1&&a(0," Enter 0 for pending payment ")}function _i(r,n){r&1&&(o(0,"mat-icon",31),a(1,"refresh"),i())}var Ne=class r{dialogRef=f(ge);fb=f(ae);data=f(ve);submitting=R(!1);paymentForm=this.fb.group({paymentStatus:["paid",[M.required]],paymentMethod:["",[M.required]],paymentAmount:[0,[M.required,M.min(0)]],transactionReference:[""],notes:[""]});ngOnInit(){this.paymentForm.patchValue({paymentAmount:this.data.extensionCost}),this.paymentForm.get("paymentStatus")?.valueChanges.subscribe(n=>{let e=this.paymentForm.get("paymentAmount");n==="paid"?(e?.setValue(this.data.extensionCost),e?.setValidators([M.required,M.min(this.data.extensionCost)])):n==="pending"?(e?.setValue(0),e?.setValidators([M.required,M.min(0),M.max(0)])):e?.setValidators([M.required,M.min(.01),M.max(this.data.extensionCost-.01)]),e?.updateValueAndValidity()})}onSubmit(){if(this.paymentForm.valid){this.submitting.set(!0);let n={paymentStatus:this.paymentForm.value.paymentStatus,paymentMethod:this.paymentForm.value.paymentMethod,paymentAmount:this.paymentForm.value.paymentAmount,transactionReference:this.paymentForm.value.transactionReference||void 0,notes:this.paymentForm.value.notes||void 0};this.dialogRef.close(n)}}onCancel(){this.dialogRef.close(null)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=B({type:r,selectors:[["app-extension-payment-dialog"]],decls:81,vars:11,consts:[[1,"max-w-md"],[1,"flex","items-center","gap-3","p-6","border-b","border-gray-200"],[1,"text-green-600"],[1,"text-xl","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"p-6","space-y-4",3,"ngSubmit","formGroup"],[1,"bg-gray-50","rounded-lg","p-4","space-y-2"],[1,"font-medium","text-gray-900"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-600"],[1,"font-medium","ml-2"],["appearance","outline",1,"w-full"],["formControlName","paymentStatus"],["value","paid"],["value","partial"],["value","pending"],["formControlName","paymentMethod"],["value","cash"],["value","credit_card"],["value","debit_card"],["value","bank_transfer"],["value","mobile_payment"],["value","check"],["value","other"],["matInput","","type","number","step","0.01","min","0","formControlName","paymentAmount","placeholder","0.00",3,"max"],["matSuffix",""],["matInput","","formControlName","transactionReference","placeholder","Optional transaction ID or reference"],["matInput","","rows","3","formControlName","notes","placeholder","Optional notes about the payment..."],[1,"flex","justify-end","gap-3","pt-4","border-t","border-gray-200"],["type","button","mat-button","",1,"px-6",3,"click"],["type","submit","mat-flat-button","","color","primary",1,"px-6",3,"disabled"],[1,"animate-spin","mr-2"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"mat-icon",2),a(3,"payment"),i(),o(4,"div")(5,"h2",3),a(6,"Extension Payment"),i(),o(7,"p",4),a(8,"Update payment information for extension approval"),i()()(),o(9,"form",5),h("ngSubmit",function(){return t.onSubmit()}),o(10,"div",6)(11,"h3",7),a(12,"Extension Details"),i(),o(13,"div",8)(14,"div")(15,"span",9),a(16,"Additional Nights:"),i(),o(17,"span",10),a(18),i()(),o(19,"div")(20,"span",9),a(21,"Extension Cost:"),i(),o(22,"span",10),a(23),x(24,"currency"),i()()()(),o(25,"mat-form-field",11)(26,"mat-label"),a(27,"Payment Status"),i(),o(28,"mat-select",12)(29,"mat-option",13),a(30,"Paid (Full Amount)"),i(),o(31,"mat-option",14),a(32,"Partial Payment"),i(),o(33,"mat-option",15),a(34,"Pending Payment"),i()(),o(35,"mat-hint"),a(36,"Select the current payment status for this extension"),i()(),o(37,"mat-form-field",11)(38,"mat-label"),a(39,"Payment Method"),i(),o(40,"mat-select",16)(41,"mat-option",17),a(42,"Cash"),i(),o(43,"mat-option",18),a(44,"Credit Card"),i(),o(45,"mat-option",19),a(46,"Debit Card"),i(),o(47,"mat-option",20),a(48,"Bank Transfer"),i(),o(49,"mat-option",21),a(50,"Mobile Payment"),i(),o(51,"mat-option",22),a(52,"Check"),i(),o(53,"mat-option",23),a(54,"Other"),i()()(),o(55,"mat-form-field",11)(56,"mat-label"),a(57,"Payment Amount"),i(),k(58,"input",24),o(59,"span",25),a(60),i(),o(61,"mat-hint"),c(62,pi,1,0)(63,gi,1,0)(64,vi,1,0),i()(),o(65,"mat-form-field",11)(66,"mat-label"),a(67,"Transaction Reference"),i(),k(68,"input",26),o(69,"mat-hint"),a(70,"Payment confirmation number, receipt ID, etc."),i()(),o(71,"mat-form-field",11)(72,"mat-label"),a(73,"Payment Notes"),i(),k(74,"textarea",27),i(),o(75,"div",28)(76,"button",29),h("click",function(){return t.onCancel()}),a(77," Cancel "),i(),o(78,"button",30),c(79,_i,2,0,"mat-icon",31),a(80," Approve Extension "),i()()()()),e&2){let s;l(9),b("formGroup",t.paymentForm),l(9),p(t.data.additionalNights),l(5),p(D(24,8,t.data.extensionCost,t.data.currency)),l(35),b("max",t.data.extensionCost),l(2),p(t.data.currency),l(2),m(((s=t.paymentForm.get("paymentStatus"))==null?null:s.value)==="paid"?62:((s=t.paymentForm.get("paymentStatus"))==null?null:s.value)==="partial"?63:64),l(16),b("disabled",t.paymentForm.invalid||t.submitting()),l(),m(t.submitting()?79:-1)}},dependencies:[j,re,ee,J,te,Y,X,oe,Se,ne,ie,W,$,de,le,se,Pe,me,ce,we,zt,At,z,K,H,L,Z],encapsulation:2})};var xi=["input"],fi=["formField"],bi=["*"],Ue=class{source;value;constructor(n,e){this.source=n,this.value=e}},hi={provide:Vt,useExisting:at(()=>it),multi:!0},di=new ze("MatRadioGroup"),Ci=new ze("mat-radio-default-options",{providedIn:"root",factory:()=>({color:"accent",disabledInteractive:!1})}),it=(()=>{class r{_changeDetector=f(Ze);_value=null;_name=f(Je).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new $e;_radios;color;get name(){return this._name}set name(e){this._name=e,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(e){this._labelPosition=e==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(e){this._selected=e,this.value=e?e.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markRadiosForCheck()}get required(){return this._required}set required(e){this._required=e,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(e=>e===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(e=>{e.name=this.name,e._markForCheck()})}_updateSelectedRadioFromValue(){let e=this._selected!==null&&this._selected.value===this._value;this._radios&&!e&&(this._selected=null,this._radios.forEach(t=>{t.checked=this.value===t.value,t.checked&&(this._selected=t)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new Ue(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(e=>e._markForCheck())}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetector.markForCheck()}static \u0275fac=function(t){return new(t||r)};static \u0275dir=gt({type:r,selectors:[["mat-radio-group"]],contentQueries:function(t,s,d){if(t&1&&ft(d,Ge,5),t&2){let _;he(_=Ce())&&(s._radios=_)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",G],required:[2,"required","required",G],disabledInteractive:[2,"disabledInteractive","disabledInteractive",G]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[ht([hi,{provide:di,useExisting:r}])]})}return r})(),Ge=(()=>{class r{_elementRef=f(Le);_changeDetector=f(Ze);_focusMonitor=f(It);_radioDispatcher=f(jt);_defaultOptions=f(Ci,{optional:!0});_ngZone=f(dt);_renderer=f(mt);_uniqueId=f(Je).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(e){this._checked!==e&&(this._checked=e,e&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!e&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),e&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(e){this._value!==e&&(this._value=e,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===e),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(e){this._labelPosition=e}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(e){this._setDisabled(e)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(e){e!==this._required&&this._changeDetector.markForCheck(),this._required=e}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(e){this._color=e}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new $e;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations=Mt();_injector=f(st);constructor(){f(Ot).load(Rt);let e=f(di,{optional:!0}),t=f(new Ct("tabindex"),{optional:!0});this.radioGroup=e,this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,t&&(this.tabIndex=Ke(t,0))}focus(e,t){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((e,t)=>{e!==this.id&&t===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{!e&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new Ue(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(e){if(e.stopPropagation(),!this.checked&&!this.disabled){let t=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),t&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(e){this._onInputInteraction(e),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(e){this._disabled!==e&&(this._disabled=e,this._changeDetector.markForCheck())}_onInputClick=e=>{this.disabled&&this.disabledInteractive&&e.preventDefault()};_updateTabIndex(){let e=this.radioGroup,t;if(!e||!e.selected||this.disabled?t=this.tabIndex:t=e.selected===this?this.tabIndex:-1,t!==this._previousTabIndex){let s=this._inputElement?.nativeElement;s&&(s.setAttribute("tabindex",t+""),this._previousTabIndex=t,ct(()=>{queueMicrotask(()=>{e&&e.selected&&e.selected!==this&&document.activeElement===s&&(e.selected?._inputElement.nativeElement.focus(),document.activeElement===s&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=B({type:r,selectors:[["mat-radio-button"]],viewQuery:function(t,s){if(t&1&&(We(xi,5),We(fi,7,Le)),t&2){let d;he(d=Ce())&&(s._inputElement=d.first),he(d=Ce())&&(s._rippleTrigger=d.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(t,s){t&1&&h("focus",function(){return s._inputElement.nativeElement.focus()}),t&2&&(He("id",s.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),A("mat-primary",s.color==="primary")("mat-accent",s.color==="accent")("mat-warn",s.color==="warn")("mat-mdc-radio-checked",s.checked)("mat-mdc-radio-disabled",s.disabled)("mat-mdc-radio-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",G],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Ke(e)],checked:[2,"checked","checked",G],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",G],required:[2,"required","required",G],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",G]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:bi,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(t,s){if(t&1){let d=P();_t(),o(0,"div",2,0)(2,"div",3)(3,"div",4),h("click",function(C){return E(d),S(s._onTouchTargetClick(C))}),i(),o(4,"input",5,1),h("change",function(C){return E(d),S(s._onInputInteraction(C))}),i(),o(6,"div",6),k(7,"div",7)(8,"div",8),i(),o(9,"div",9),k(10,"div",10),i()(),o(11,"label",11),xt(12),i()()}t&2&&(b("labelPosition",s.labelPosition),l(2),A("mdc-radio--disabled",s.disabled),l(2),b("id",s.inputId)("checked",s.checked)("disabled",s.disabled&&!s.disabledInteractive)("required",s.required),He("name",s.name)("value",s.value)("aria-label",s.ariaLabel)("aria-labelledby",s.ariaLabelledby)("aria-describedby",s.ariaDescribedby)("aria-disabled",s.disabled&&s.disabledInteractive?"true":null),l(5),b("matRippleTrigger",s._rippleTrigger.nativeElement)("matRippleDisabled",s._isRippleDisabled())("matRippleCentered",!0),l(2),b("for",s.inputId))},dependencies:[Tt,Pt],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-hover-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-pressed-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px);top:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mat-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0);border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),background-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}@media(forced-colors: active){.mat-mdc-radio-button .mdc-radio__inner-circle{background-color:CanvasText !important}}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mat-radio-state-layer-size, 40px);height:var(--mat-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-selected-focus-icon-color, var(--mat-sys-primary, currentColor))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle{background-color:var(--mat-radio-disabled-selected-icon-color, var(--mat-sys-on-surface, currentColor));opacity:var(--mat-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button label{cursor:pointer}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mat-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:var(--mat-radio-touch-target-size, 48px);width:var(--mat-radio-touch-target-size, 48px);transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return r})(),ci=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=pt({type:r});static \u0275inj=rt({imports:[Ft,Ge,wt]})}return r})();function ki(r,n){r&1&&(o(0,"mat-error"),a(1," New check-out date is required "),i())}function Di(r,n){r&1&&(o(0,"div",26),k(1,"mat-spinner",28),o(2,"span",29),a(3,"Checking availability..."),i()())}function Pi(r,n){if(r&1&&(o(0,"div",53)(1,"mat-icon",60),a(2,"savings"),i(),a(3),i()),r&2){let e=u(5);l(3),v(" Save ",e.formatCurrency(e.getDiscountAmount())," per night ")}}function Mi(r,n){r&1&&(o(0,"mat-error"),a(1," Discounted rate is required "),i())}function Ri(r,n){r&1&&(o(0,"mat-error"),a(1," Rate must be greater than 0 "),i())}function wi(r,n){r&1&&(o(0,"mat-error"),a(1," Rate cannot be higher than the original rate "),i())}function Ii(r,n){if(r&1&&(o(0,"div",55)(1,"mat-form-field",15)(2,"mat-label"),a(3,"Discounted Rate per Night"),i(),k(4,"input",61),o(5,"span",62),a(6),i(),o(7,"mat-hint"),a(8),i(),c(9,Mi,2,0,"mat-error"),c(10,Ri,2,0,"mat-error"),c(11,wi,2,0,"mat-error"),i()()),r&2){let e,t,s,d,_,C=u(5);l(4),b("max",(e=C.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.originalRate),l(2),v("",((t=C.storeStore.selectedStore())==null?null:t.currency)||"$","\xA0"),l(2),v("Rate must be less than or equal to ",C.formatCurrency(((s=C.availability())==null||s.pricingBreakdown==null?null:s.pricingBreakdown.originalRate)||0)),l(),m((d=C.extensionForm.get("discountedRate"))!=null&&d.hasError("required")?9:-1),l(),m((_=C.extensionForm.get("discountedRate"))!=null&&_.hasError("min")?10:-1),l(),m(C.validateDiscountedRate()?-1:11)}}function Oi(r,n){if(r&1&&(o(0,"div",58),a(1),i()),r&2){let e,t=u(5);l(),v(" Total Savings: ",t.formatCurrency(t.getDiscountAmount()*(((e=t.availability())==null?null:e.extensionDays)||0))," ")}}function Ti(r,n){if(r&1&&(o(0,"div",36)(1,"div",38)(2,"label",14),a(3,"Choose Rate Option:"),i(),o(4,"div",39),a(5,"2 options available"),i()(),o(6,"mat-radio-group",40)(7,"div",41)(8,"mat-radio-button",42)(9,"div",43),a(10," ORIGINAL "),i(),o(11,"div",44)(12,"div",45)(13,"div",46),a(14,"Same Rate"),i(),o(15,"div",47),a(16,"Continue with the original room rate"),i()(),o(17,"div",48)(18,"div",49),a(19),i(),o(20,"div",39),a(21,"per night"),i()()()()(),o(22,"div",41)(23,"mat-radio-button",50)(24,"div",44)(25,"div",45)(26,"div",51),a(27,"Discounted Rate"),i(),o(28,"div",52),a(29,"Apply a custom discount to the original rate"),i(),c(30,Pi,4,1,"div",53),i(),o(31,"div",48)(32,"div",54),a(33),i(),o(34,"div",39),a(35,"per night"),i()()()()()(),c(36,Ii,12,6,"div",55),o(37,"div",56)(38,"div",57)(39,"div")(40,"div",14),a(41,"Total Extension Cost"),i(),o(42,"div",39),a(43),i(),c(44,Oi,2,1,"div",58),i(),o(45,"div",59),a(46),i()()()()),r&2){let e,t,s,d=u(4);l(19),v(" ",d.formatCurrency(((e=d.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.originalRate)||0)," "),l(11),m(d.getDiscountAmount()>0?30:-1),l(3),v(" ",d.formatCurrency(d.getSelectedRate())," "),l(3),m(((t=d.extensionForm.get("selectedPricingStrategy"))==null?null:t.value)==="discounted_rate"?36:-1),l(7),Q(" ",(s=d.availability())==null?null:s.extensionDays," nights \xD7 ",d.formatCurrency(d.getSelectedRate())," "),l(),m(d.getDiscountAmount()>0?44:-1),l(2),v(" ",d.formatCurrency(d.getTotalCost())," ")}}function Fi(r,n){if(r&1&&(o(0,"div",76)(1,"span",67),a(2),i(),o(3,"span",68),a(4),i()()),r&2){let e=n.$implicit,t=u(6);l(2),v("",t.getModifierDisplayName(e),":"),l(),U(t.getModifierValueClass(e)),l(),v(" ",t.getModifierValueDisplay(e)," ")}}function Ai(r,n){if(r&1&&(o(0,"div",9)(1,"div",75),a(2,"ADJUSTMENTS:"),i(),N(3,Fi,5,4,"div",76,vt),i()),r&2){let e,t=u(5);l(3),V((e=t.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.appliedModifiers)}}function Bi(r,n){if(r&1&&(o(0,"div",37)(1,"h5",63)(2,"mat-icon",64),a(3,"receipt"),i(),a(4," Pricing Breakdown "),i(),o(5,"div",65)(6,"div",66)(7,"span",67),a(8,"Base Rate per Night:"),i(),o(9,"span",68),a(10),i()(),c(11,Ai,5,0,"div",9),o(12,"div",69)(13,"div",70)(14,"span"),a(15,"Final Rate per Night:"),i(),o(16,"span",71),a(17),i()()(),o(18,"div",72)(19,"div",57)(20,"span",73),a(21,"Total Extension Cost:"),i(),o(22,"span",74),a(23),i()()()()()),r&2){let e,t,s,d,_=u(4);l(10),p(_.formatCurrency(((e=_.availability())==null||e.pricingBreakdown==null?null:e.pricingBreakdown.baseRatePerNight)||0)),l(),m(!((t=_.availability())==null||t.pricingBreakdown==null||t.pricingBreakdown.appliedModifiers==null)&&t.pricingBreakdown.appliedModifiers.length?11:-1),l(6),p(_.formatCurrency(((s=_.availability())==null||s.pricingBreakdown==null?null:s.pricingBreakdown.finalRatePerNight)||0)),l(6),p(_.formatCurrency(((d=_.availability())==null?null:d.estimatedCost)||0))}}function Ni(r,n){if(r&1&&(o(0,"div",18)(1,"div",34)(2,"div",9)(3,"div",10),a(4,"Additional Nights"),i(),o(5,"div",35),a(6),i()(),o(7,"div",9)(8,"div",10),a(9,"Extension Days"),i(),o(10,"div",35),a(11),i()()(),c(12,Ti,47,8,"div",36),c(13,Bi,24,4,"div",37),i()),r&2){let e,t,s,d,_=u(3);l(6),p((e=_.availability())==null?null:e.maxExtensionNights),l(5),p((t=_.availability())==null?null:t.extensionDays),l(),m(!((s=_.availability())==null||s.pricingBreakdown==null)&&s.pricingBreakdown.originalRate?12:-1),l(),m((d=_.availability())!=null&&d.pricingBreakdown?13:-1)}}function Vi(r,n){r&1&&(o(0,"div",33)(1,"mat-icon",77),a(2,"warning"),i(),o(3,"div",78)(4,"div",68),a(5,"Room conflicts prevent extension beyond this date"),i(),o(6,"div",79),a(7,"Please choose an earlier date or check with front desk for alternative options."),i()()())}function Ui(r,n){if(r&1&&(o(0,"div",30)(1,"div",31)(2,"mat-icon"),a(3),i(),o(4,"h4",32),a(5),i()(),c(6,Ni,14,4,"div",18),c(7,Vi,8,0,"div",33),i()),r&2){let e,t,s,d,_,C,w,I=u(2);U((e=I.availability())!=null&&e.isAvailable?"border-green-200 bg-green-50":"border-red-200 bg-red-50"),l(2),U((t=I.availability())!=null&&t.isAvailable?"text-green-600":"text-red-600"),l(),v(" ",(s=I.availability())!=null&&s.isAvailable?"check_circle":"cancel"," "),l(),U((d=I.availability())!=null&&d.isAvailable?"text-green-800":"text-red-800"),l(),v(" ",(_=I.availability())!=null&&_.isAvailable?"Extension Available":"Extension Unavailable"," "),l(),m((C=I.availability())!=null&&C.isAvailable?6:-1),l(),m(!((w=I.availability())!=null&&w.isAvailable)&&(!((w=I.availability())==null||w.conflictingReservations==null)&&w.conflictingReservations.length)?7:-1)}}function Gi(r,n){if(r&1&&(o(0,"div",18),c(1,Di,4,0,"div",26),c(2,Ui,8,10,"div",27),i()),r&2){let e=u();l(),m(e.availabilityChecking()?1:-1),l(),m(e.availability()&&!e.availabilityChecking()?2:-1)}}function qi(r,n){if(r&1&&(o(0,"div",20)(1,"mat-icon",80),a(2,"error"),i(),o(3,"div",81)(4,"div",68),a(5,"Extension Request Failed"),i(),o(6,"div"),a(7),i()()()),r&2){let e=u();l(7),p(e.errorMessage())}}function ji(r,n){r&1&&k(0,"mat-spinner",25)}function zi(r,n){r&1&&(o(0,"span"),a(1,"Request Extension"),i())}function $i(r,n){r&1&&(o(0,"span"),a(1,"Processing..."),i())}var qe=class r{dialogRef=f(ge);data=f(ve);fb=f(ae);reservationService=f(_e);storeStore=f(ue);extensionForm;isLoading=R(!1);availabilityChecking=R(!1);availability=R(null);errorMessage=R("");constructor(){let n=new Date(this.data.currentCheckOutDate);n.setDate(n.getDate()+1),this.extensionForm=this.fb.group({newCheckOutDate:["",[M.required]],selectedPricingStrategy:["same_rate",M.required],discountedRate:[{value:"",disabled:!0}],notes:[""]}),this.minExtensionDate=n,this.extensionForm.get("selectedPricingStrategy")?.valueChanges.subscribe(e=>{this.onPricingStrategyChange(e)})}minExtensionDate;get reservation(){return this.data.reservation}get currentCheckOutDate(){return this.data.currentCheckOutDate}get selectedStore(){return this.storeStore.selectedStore}formatCurrency(n){let t=this.selectedStore()?.currency||"USD";return`${{USD:"$",EUR:"\u20AC",GBP:"\xA3",NGN:"\u20A6",GHS:"\u20B5",KES:"KSh",ZAR:"R",CAD:"C$",AUD:"A$"}[t]||t+" "}${n.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}getPricingStrategyDisplayName(n){return{same_rate:"Original Booking Rate",current_rate:"Current Room Rate",extension_rate:"Extension Rate",dynamic_rate:"Dynamic Pricing",loyalty_rate:"Loyalty Rate"}[n]||n}getModifierDisplayName(n){if(n.type==="percentage"){let e=((n.value-1)*100).toFixed(0);return e>="0"?`+${e}%`:`${e}%`}else return`${n.value>0?"+":""}${this.formatCurrency(n.value)}`}onDateChange(){return y(this,null,function*(){let n=this.extensionForm.get("newCheckOutDate")?.value;yield this.checkAvailability()})}checkAvailability(){return y(this,null,function*(){let n=this.extensionForm.get("newCheckOutDate")?.value;if(n){this.availabilityChecking.set(!0),this.errorMessage.set("");try{let e=yield this.reservationService.checkExtensionAvailability(this.reservation._id,n.toISOString()).toPromise();this.availability.set(e)}catch(e){this.errorMessage.set(e.message||"Failed to check availability"),this.availability.set(null)}finally{this.availabilityChecking.set(!1)}}})}calculateEstimatedCost(n){return this.calculateNights(n)*100}calculateNights(n){let e=n.getTime()-this.currentCheckOutDate.getTime();return Math.ceil(e/(1e3*3600*24))}submitExtension(){return y(this,null,function*(){if(!this.extensionForm.valid){this.markFormGroupTouched();return}if(!this.availability()?.isAvailable){this.errorMessage.set("Extension is not available for the selected dates");return}this.isLoading.set(!0),this.errorMessage.set("");try{let e=this.extensionForm.value,t=this.calculateNights(e.newCheckOutDate),s={newCheckOutDate:e.newCheckOutDate.toISOString(),additionalNights:t,selectedPricingStrategy:e.selectedPricingStrategy,selectedRate:this.getSelectedRate(),discountedRate:e.selectedPricingStrategy==="discounted_rate"?this.getDiscountedRateValue():null,totalCost:this.getTotalCost(),notes:e.notes||""},d=yield this.reservationService.requestExtension(this.reservation._id,s).toPromise();this.dialogRef.close({success:!0,extension:d?.extension})}catch(e){this.errorMessage.set(e.message||"Failed to request extension")}finally{this.isLoading.set(!1)}})}markFormGroupTouched(){Object.keys(this.extensionForm.controls).forEach(n=>{this.extensionForm.get(n)?.markAsTouched()})}getModifierValueDisplay(n){return n.type==="percentage"?`${n.value>0?"+":""}${n.value}%`:`${n.value>0?"+":""}${this.formatCurrency(n.value)}`}getModifierValueClass(n){return n.value>0?"text-red-600 font-medium":"text-green-600 font-medium"}getModifierDescription(n){let e={seasonal:"Applied based on current season",loyalty:"Discount for loyalty program members",length_of_stay:"Discount for extended stays",last_minute:"Discount for booking within 24 hours",occupancy:"Rate adjusted based on current occupancy levels",weekend:"Additional charge for weekend stays",holiday:"Premium rate during holiday periods"};return n.description||e[n.type]||""}get rateOptions(){let n=this.availability()?.pricingBreakdown;return!n||!n.originalRate?[]:[{id:"same_rate",name:"Same Rate",description:"Continue with the original room rate",rate:n.originalRate,isRecommended:!0,badge:"ORIGINAL",savings:0},{id:"discounted_rate",name:"Discounted Rate",description:"Apply a custom discount to the original rate",rate:this.getDiscountedRateValue()||n.originalRate,isRecommended:!1,badge:null,savings:this.getDiscountAmount()}]}getDiscountedRateValue(){let n=this.extensionForm.get("discountedRate")?.value;return n?parseFloat(n):0}getDiscountAmount(){let n=this.availability()?.pricingBreakdown?.originalRate||0,e=this.getDiscountedRateValue();return e>0?Math.max(0,n-e):0}getSelectedRate(){let n=this.extensionForm.get("selectedPricingStrategy")?.value;if(n==="same_rate")return this.availability()?.pricingBreakdown?.originalRate||0;if(n==="discounted_rate"){let e=this.getDiscountedRateValue();return e>0?e:this.availability()?.pricingBreakdown?.originalRate||0}return 0}getTotalCost(){let n=this.availability()?.extensionDays||0,e=this.getSelectedRate();return n*e}getSavings(n){return n.savings||0}hasSavings(n){return(n.savings||0)>0}onPricingStrategyChange(n){let e=this.extensionForm.get("discountedRate");if(n==="discounted_rate"){e?.enable(),e?.setValidators([M.required,M.min(1)]);let t=this.availability()?.pricingBreakdown?.originalRate||0;e?.setValue(t)}else e?.disable(),e?.clearValidators(),e?.setValue("");e?.updateValueAndValidity()}validateDiscountedRate(){if(this.extensionForm.get("selectedPricingStrategy")?.value==="discounted_rate"){let e=this.availability()?.pricingBreakdown?.originalRate||0,t=this.getDiscountedRateValue();return t>0&&t<=e}return!0}onCancel(){this.dialogRef.close({success:!1})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=B({type:r,selectors:[["app-extension-dialog"]],decls:59,vars:19,consts:[["picker",""],["mat-dialog-title","",1,"flex","items-center","gap-3","border-b","border-gray-200"],[1,"text-xl","font-semibold","text-gray-800","m-0"],[1,"text-sm","text-gray-600","m-0","mt-1"],[1,"py-6"],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"text-sm","font-medium","text-gray-700","mb-3","flex","items-center","gap-2"],[1,"text-gray-600","!text-base"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],[1,"space-y-1"],[1,"text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"text-sm","text-gray-900"],[1,"space-y-6",3,"formGroup"],[1,"space-y-2"],[1,"text-sm","font-medium","text-gray-700"],["appearance","outline",1,"w-full"],["matInput","","formControlName","newCheckOutDate","placeholder","Choose date",3,"dateChange","matDatepicker"],["matIconSuffix","",3,"for"],[1,"space-y-4"],["matInput","","formControlName","notes","rows","3","placeholder","Add any special requests or notes for the extension"],[1,"flex","items-start","gap-3","p-4","bg-red-50","border","border-red-200","rounded-md"],[1,"flex","justify-end","gap-3","pt-6","border-t","border-gray-200","mt-6"],["mat-button","","type","button",1,"px-4","py-2",3,"click","disabled"],["mat-raised-button","","color","primary","type","button",1,"px-6","py-2","min-w-[140px]",3,"click","disabled"],[1,"flex","items-center","justify-center","gap-2"],["diameter","16"],[1,"flex","items-center","justify-center","gap-3","py-8"],[1,"border","rounded-lg","p-4",3,"class"],["diameter","24"],[1,"text-sm","text-gray-600"],[1,"border","rounded-lg","p-4"],[1,"flex","items-center","gap-3","mb-4"],[1,"text-base","font-medium"],[1,"flex","items-start","gap-3","p-3","bg-amber-50","border","border-amber-200","rounded-md"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-900","font-semibold"],[1,"space-y-4","border-t","pt-4"],[1,"bg-white","rounded-md","p-4","border","border-gray-200"],[1,"flex","items-center","justify-between"],[1,"text-xs","text-gray-500"],["formControlName","selectedPricingStrategy",1,"space-y-3"],[1,"relative"],["value","same_rate",1,"w-full","block","p-4","border","border-blue-200","bg-blue-50","rounded-lg","hover:bg-blue-100","transition-colors"],[1,"absolute","top-2","right-2","px-2","py-1","text-xs","font-bold","rounded-full","bg-blue-100","text-blue-800"],[1,"flex","items-start","justify-between","mt-1"],[1,"flex-1","min-w-0","pr-4"],[1,"text-sm","font-semibold","text-blue-900"],[1,"text-xs","mt-1","text-blue-700"],[1,"text-right"],[1,"text-lg","font-bold","text-blue-600"],["value","discounted_rate",1,"w-full","block","p-4","border","border-green-200","bg-green-50","rounded-lg","hover:bg-green-100","transition-colors"],[1,"text-sm","font-semibold","text-green-900"],[1,"text-xs","mt-1","text-green-700"],[1,"inline-flex","items-center","mt-2","px-2","py-1","bg-green-100","text-green-800","text-xs","font-medium","rounded-full"],[1,"text-lg","font-bold","text-green-600"],[1,"mt-4"],[1,"bg-gray-100","rounded-lg","p-4","mt-4"],[1,"flex","justify-between","items-center"],[1,"text-xs","text-green-600","font-medium","mt-1"],[1,"text-xl","font-bold","text-blue-600"],[1,"!text-xs","mr-1"],["matInput","","type","number","min","1","step","0.01","formControlName","discountedRate","placeholder","Enter discounted rate",3,"max"],["matTextPrefix",""],[1,"text-sm","font-medium","text-gray-900","mb-3","flex","items-center","gap-2"],[1,"!text-base","text-blue-600"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium"],[1,"border-t","pt-2","mt-3"],[1,"flex","justify-between","font-semibold"],[1,"text-blue-600"],[1,"bg-blue-50","rounded","p-2","mt-3"],[1,"font-semibold","text-blue-900"],[1,"text-lg","font-bold","text-blue-700"],[1,"text-xs","font-medium","text-gray-500","mt-2","mb-1"],[1,"flex","justify-between","text-xs"],[1,"text-amber-600","!text-base","mt-0.5"],[1,"text-sm","text-amber-800"],[1,"text-xs","mt-1"],[1,"text-red-600","!text-base","mt-0.5"],[1,"text-sm","text-red-800"]],template:function(e,t){if(e&1){let s=P();o(0,"div",1)(1,"div")(2,"span",2),a(3,"Extend Reservation"),i(),o(4,"p",3),a(5),i()()(),o(6,"mat-dialog-content",4)(7,"div",5)(8,"h3",6)(9,"mat-icon",7),a(10,"info"),i(),a(11," Current Reservation Details "),i(),o(12,"div",8)(13,"div",9)(14,"div",10),a(15,"Check-out Date"),i(),o(16,"div",11),a(17),x(18,"date"),i()(),o(19,"div",9)(20,"div",10),a(21,"Room(s)"),i(),o(22,"div",11),a(23),i()(),o(24,"div",9)(25,"div",10),a(26,"Confirmation"),i(),o(27,"div",11),a(28),i()()()(),o(29,"form",12)(30,"div",13)(31,"label",14),a(32,"New Check-out Date"),i(),o(33,"mat-form-field",15)(34,"mat-label"),a(35,"Select new check-out date"),i(),o(36,"input",16),h("dateChange",function(){return E(s),S(t.onDateChange())}),i(),k(37,"mat-datepicker-toggle",17)(38,"mat-datepicker",null,0),c(40,ki,2,0,"mat-error"),i()(),c(41,Gi,3,2,"div",18),o(42,"div",13)(43,"label",14),a(44,"Notes (Optional)"),i(),o(45,"mat-form-field",15)(46,"mat-label"),a(47,"Special requests or notes"),i(),o(48,"textarea",19),a(49,"        "),i()()(),c(50,qi,8,1,"div",20),i()(),o(51,"mat-dialog-actions",21)(52,"button",22),h("click",function(){return E(s),S(t.onCancel())}),a(53," Cancel "),i(),o(54,"button",23),h("click",function(){return E(s),S(t.submitExtension())}),o(55,"div",24),c(56,ji,1,0,"mat-spinner",25),c(57,zi,2,0,"span"),c(58,$i,2,0,"span"),i()()()}if(e&2){let s,d,_,C=q(39);l(5),Q(" Request extension for ",t.reservation==null||t.reservation.guestDetails==null||t.reservation.guestDetails.primaryGuest==null?null:t.reservation.guestDetails.primaryGuest.firstName," ",t.reservation==null||t.reservation.guestDetails==null||t.reservation.guestDetails.primaryGuest==null?null:t.reservation.guestDetails.primaryGuest.lastName," "),l(12),p(D(18,16,t.currentCheckOutDate,"mediumDate")),l(6),v("",t.reservation==null||t.reservation.rooms==null?null:t.reservation.rooms.length," room(s)"),l(5),p(t.reservation==null?null:t.reservation.confirmationNumber),l(),b("formGroup",t.extensionForm),l(7),b("matDatepicker",C),l(),b("for",C),l(3),m((s=t.extensionForm.get("newCheckOutDate"))!=null&&s.hasError("required")?40:-1),l(),m((d=t.extensionForm.get("newCheckOutDate"))!=null&&d.value?41:-1),l(9),m(t.errorMessage()?50:-1),l(2),b("disabled",t.isLoading()),l(2),b("disabled",!t.extensionForm.valid||!((_=t.availability())!=null&&_.isAvailable)||t.isLoading()),l(2),m(t.isLoading()?56:-1),l(),m(t.isLoading()?-1:57),l(),m(t.isLoading()?58:-1)}},dependencies:[j,Gt,ee,J,te,Y,X,oe,Se,re,ne,ie,W,Oe,Fe,Te,$,de,le,se,qt,De,Pe,me,ce,z,K,ni,ei,ti,ii,Bt,Re,Me,H,L,ke,pe,ci,it,Ge,St],styles:[".mat-mdc-dialog-container[_ngcontent-%COMP%]{--mdc-dialog-container-color: white;--mdc-dialog-supporting-text-color: #374151}.mat-mdc-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]   .mdc-radio__native-control[_ngcontent-%COMP%]:enabled:checked + .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__outer-circle[_ngcontent-%COMP%]{border-color:#2563eb}.mat-mdc-radio-button.mat-mdc-radio-checked[_ngcontent-%COMP%]   .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__inner-circle[_ngcontent-%COMP%]{border-color:#2563eb;background-color:#2563eb}.mat-mdc-radio-button[_ngcontent-%COMP%]:hover   .mdc-radio__native-control[_ngcontent-%COMP%]:enabled:not(:checked) + .mdc-radio__background[_ngcontent-%COMP%]   .mdc-radio__outer-circle[_ngcontent-%COMP%]{border-color:#3b82f6}.mat-mdc-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]   .mat-mdc-form-field-flex[_ngcontent-%COMP%]   .mat-mdc-form-field-infix[_ngcontent-%COMP%]{padding:12px 0}@media(max-width:640px){.mat-mdc-dialog-container[_ngcontent-%COMP%]{margin:16px;width:calc(100vw - 32px);max-width:none}}"]})};function Hi(r,n){if(r&1&&(o(0,"mat-form-field",7)(1,"mat-label"),a(2,"Service Fee"),i(),k(3,"input",46),o(4,"span",9),a(5),i()()),r&2){let e=u(2);l(5),v("",e.currency,"\xA0")}}function Wi(r,n){if(r&1&&(o(0,"mat-form-field",7)(1,"mat-label"),a(2,"Cleaning Fee"),i(),k(3,"input",47),o(4,"span",9),a(5),i()()),r&2){let e=u(2);l(5),v("",e.currency,"\xA0")}}function Qi(r,n){if(r&1&&(o(0,"mat-form-field",7)(1,"mat-label"),a(2,"Resort Fee"),i(),k(3,"input",48),o(4,"span",9),a(5),i()()),r&2){let e=u(2);l(5),v("",e.currency,"\xA0")}}function Zi(r,n){if(r&1&&(o(0,"mat-form-field",7)(1,"mat-label"),a(2,"Other Fees"),i(),k(3,"input",49),o(4,"span",9),a(5),i()()),r&2){let e=u(2);l(5),v("",e.currency,"\xA0")}}function Ki(r,n){if(r&1&&(o(0,"div",11)(1,"h4",4)(2,"mat-icon",5),a(3,"lock"),i(),a(4," Additional Fees (Read-only) "),i(),o(5,"div",6),c(6,Hi,6,1,"mat-form-field",7),c(7,Wi,6,1,"mat-form-field",7),c(8,Qi,6,1,"mat-form-field",7),c(9,Zi,6,1,"mat-form-field",7),i()()),r&2){let e=u();l(6),m(e.data.reservation.pricing.fees.serviceFee?6:-1),l(),m(e.data.reservation.pricing.fees.cleaningFee?7:-1),l(),m(e.data.reservation.pricing.fees.resortFee?8:-1),l(),m(e.data.reservation.pricing.fees.other?9:-1)}}function Ji(r,n){if(r&1&&(o(0,"div",12)(1,"h4",50)(2,"mat-icon",51),a(3,"lock"),i(),a(4," Extension Charges (Read-only) "),i(),o(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),a(8,"Extension Cost"),i(),k(9,"input",52),o(10,"span",9),a(11),i(),o(12,"mat-hint"),a(13),i()(),o(14,"div",25)(15,"div",53),a(16,"Extension Status"),i(),o(17,"div",45)(18,"mat-icon",54),a(19,"check_circle"),i(),o(20,"span",55),a(21,"Approved & Included"),i()(),o(22,"div",56),a(23," Cannot be modified in pricing dialog "),i()()(),o(24,"div",57)(25,"div",45)(26,"mat-icon",58),a(27,"info"),i(),o(28,"span")(29,"strong"),a(30),i(),a(31," totaling "),o(32,"strong"),a(33),x(34,"currency"),i(),a(35," have been approved and are automatically included in the total. "),i()()()()),r&2){let e=u();l(9),b("value",e.getApprovedExtensionCost()),l(2),v("",e.currency,"\xA0"),l(2),v("",e.getApprovedExtensionNights()," additional nights"),l(17),v("",e.getApprovedExtensionNights()," extension night(s)"),l(3),p(O(34,5,e.getApprovedExtensionCost(),e.currency,"symbol","1.2-2"))}}function Yi(r,n){if(r&1&&(o(0,"div",32)(1,"span",33),a(2),i(),o(3,"span",59),a(4),x(5,"currency"),i()()),r&2){let e=u();l(2),v("Extensions (",e.getApprovedExtensionNights()," nights):"),l(2),v("+",O(5,2,e.getApprovedExtensionCost(),e.currency,"symbol","1.2-2"))}}function Xi(r,n){r&1&&(o(0,"span",45),lt(),o(1,"svg",60),k(2,"circle",61)(3,"path",62),i(),a(4," Updating... "),i())}function en(r,n){r&1&&(o(0,"span",45)(1,"mat-icon"),a(2,"save"),i(),a(3," Update Pricing "),i())}var je=class r{constructor(n){this.data=n;if(this.data.reservation.status==="checked_out"){this.pricingForm=this.fb.group({}),setTimeout(()=>{this.dialogRef.close({confirmed:!1,error:"Cannot edit pricing for checked-out reservations"})});return}let e=this.data.reservation.pricing;this.pricingForm=this.fb.group({subtotal:[{value:e.subtotal||0,disabled:!0}],taxes:[{value:e.taxes||0,disabled:!0}],fees:this.fb.group({serviceFee:[{value:e.fees?.serviceFee||0,disabled:!0}],cleaningFee:[{value:e.fees?.cleaningFee||0,disabled:!0}],resortFee:[{value:e.fees?.resortFee||0,disabled:!0}],other:[{value:e.fees?.other||0,disabled:!0}]}),paid:[e.paid||0,[M.min(0)]]}),this.pricingForm.valueChanges.subscribe(()=>{this.calculateTotal()})}fb=f(ae);dialogRef=f(ge);reservationService=f(_e);storeStore=f(ue);snackBar=f(Ee);pricingForm;loading=R(!1);get currency(){return this.storeStore.selectedStore()?.currency||this.storeStore.selectedStore()?.currencyCode||"USD"}getApprovedExtensionCost(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(e=>e.status==="approved").reduce((e,t)=>e+(t.additionalCost||0),0):0}getApprovedExtensionNights(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(e=>e.status==="approved").reduce((e,t)=>e+(t.additionalNights||0),0):0}hasApprovedExtensions(){return this.getApprovedExtensionCost()>0}get currentTotal(){let n=this.data.reservation.pricing,e=this.pricingForm.value,t=n.subtotal||0,s=n.taxes||0,d=n.fees?.serviceFee||0,_=n.fees?.cleaningFee||0,C=n.fees?.resortFee||0,w=n.fees?.other||0,I=this.getApprovedExtensionCost(),be=e.discounts?.amount||0,g=d+_+C+w;return t+s+g+I-be}get currentBalance(){let n=this.pricingForm.get("paid")?.value||0;return this.currentTotal-n}calculateTotal(){}onCancel(){this.dialogRef.close({success:!1})}onSave(){if(this.pricingForm.invalid){this.snackBar.open("Please fill in all required fields correctly","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.loading.set(!0);let n=this.pricingForm.value,e=this.data.reservation.pricing,t={subtotal:e.subtotal,taxes:e.taxes,fees:{serviceFee:e.fees?.serviceFee||0,cleaningFee:e.fees?.cleaningFee||0,resortFee:e.fees?.resortFee||0,other:e.fees?.other||0},discounts:{amount:n.discounts.amount,reason:n.discounts.reason,code:n.discounts.code},total:this.currentTotal,paid:n.paid||0,balance:this.currentBalance}}static \u0275fac=function(e){return new(e||r)(ut(ve))};static \u0275cmp=B({type:r,selectors:[["app-pricing-update-dialog"]],decls:149,vars:86,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"!p-6","!max-h-[70vh]","overflow-y-auto"],[1,"space-y-6",3,"formGroup"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200","mb-6","shadow-sm"],[1,"text-sm","font-semibold","text-gray-700","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-gray-500","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","type","number","formControlName","subtotal","readonly","",1,"!bg-gray-100","!text-gray-600"],["matPrefix",""],["matInput","","type","number","formControlName","taxes","readonly","",1,"!bg-gray-100","!text-gray-600"],["formGroupName","fees",1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200","mb-6","shadow-sm"],[1,"bg-orange-50","rounded-lg","p-4","border","border-orange-200","mb-6","shadow-sm"],[1,"space-y-6"],["formGroupName","discounts",1,"bg-green-50","rounded-lg","p-4","border","border-green-200","shadow-sm","hover:shadow-md","transition-shadow","duration-200"],[1,"text-lg","font-semibold","text-green-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-green-600"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-4"],["matInput","","type","number","formControlName","amount","min","0","step","0.01","placeholder","0.00"],["matInput","","formControlName","reason","placeholder","e.g., Staff discount"],["matInput","","formControlName","code","placeholder","e.g., STAFF10"],[1,"bg-blue-50","rounded-lg","p-4","border","border-blue-200","shadow-sm","hover:shadow-md","transition-shadow","duration-200"],[1,"text-lg","font-semibold","text-blue-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-blue-600"],["matInput","","type","number","formControlName","paid","min","0","step","0.01","placeholder","0.00"],[1,"flex","flex-col","justify-center"],[1,"text-sm","text-gray-600","mb-1"],[1,"text-lg","font-medium"],[1,"bg-gradient-to-br","from-purple-50","to-indigo-50","rounded-lg","p-4","border","border-purple-200","shadow-sm"],[1,"text-lg","font-semibold","text-purple-900","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-purple-600"],[1,"space-y-2","text-sm"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium"],[1,"font-medium","text-green-600"],[1,"my-2"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-gray-900"],[1,"bg-gradient-to-br","from-blue-50","to-cyan-50","rounded-lg","p-4","border","border-blue-200","shadow-sm"],[1,"text-sm","font-semibold","text-blue-900","mb-2","uppercase","tracking-wide"],[1,"text-xs","text-blue-800","space-y-1"],["mat-dialog-actions","",1,"flex","items-center","justify-end","gap-3","!p-6","!m-0","border-t","border-gray-200","bg-gray-50"],["mat-button","",1,"!text-gray-600","hover:!bg-gray-100","!px-6","!py-2","!font-medium","!rounded-lg","transition-colors","duration-200",3,"click","disabled"],["mat-raised-button","","color","primary",1,"!bg-gradient-to-r","!from-purple-600","!to-purple-700","hover:!from-purple-700","hover:!to-purple-800","!text-white","!shadow-lg","hover:!shadow-xl","!px-6","!py-2","!font-semibold","!rounded-lg","transition-all","duration-200","transform","hover:!scale-105","disabled:!opacity-50","disabled:!cursor-not-allowed","disabled:hover:!scale-100",3,"click","disabled"],[1,"flex","items-center","gap-2"],["matInput","","type","number","formControlName","serviceFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","cleaningFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","resortFee","readonly","",1,"!bg-gray-100","!text-gray-600"],["matInput","","type","number","formControlName","other","readonly","",1,"!bg-gray-100","!text-gray-600"],[1,"text-sm","font-semibold","text-orange-700","mb-3","flex","items-center","gap-2","uppercase","tracking-wide"],[1,"text-orange-500","text-lg"],["matInput","","type","number","readonly","",1,"!bg-gray-100","!text-gray-600",3,"value"],[1,"text-sm","text-orange-600","mb-1"],[1,"text-green-600","text-sm"],[1,"text-sm","font-medium","text-green-600"],[1,"text-xs","text-gray-500","mt-1"],[1,"mt-3","p-2","bg-orange-100","border","border-orange-200","rounded","text-xs","text-orange-800"],[1,"text-orange-600","text-sm"],[1,"font-medium","text-orange-600"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(e,t){if(e&1&&(o(0,"div",0),a(1,` Update Pricing
`),i(),o(2,"div",1)(3,"form",2)(4,"div",3)(5,"h4",4)(6,"mat-icon",5),a(7,"lock"),i(),a(8," Base Pricing (Read-only) "),i(),o(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),a(12,"Subtotal"),i(),k(13,"input",8),o(14,"span",9),a(15),i(),o(16,"mat-hint"),a(17,"Based on room rates and duration"),i()(),o(18,"mat-form-field",7)(19,"mat-label"),a(20,"Taxes"),i(),k(21,"input",10),o(22,"span",9),a(23),i(),o(24,"mat-hint"),a(25,"Calculated from store tax rate"),i()()()(),c(26,Ki,10,4,"div",11),c(27,Ji,36,10,"div",12),o(28,"div",13)(29,"div",14)(30,"h4",15)(31,"mat-icon",16),a(32,"local_offer"),i(),a(33," Discounts (Editable) "),i(),o(34,"div",17)(35,"mat-form-field",7)(36,"mat-label"),a(37,"Discount Amount"),i(),k(38,"input",18),o(39,"span",9),a(40),i(),o(41,"mat-hint"),a(42,"Reduce total amount"),i()(),o(43,"mat-form-field",7)(44,"mat-label"),a(45,"Discount Reason"),i(),k(46,"input",19),i(),o(47,"mat-form-field",7)(48,"mat-label"),a(49,"Discount Code"),i(),k(50,"input",20),i()()(),o(51,"div",21)(52,"h4",22)(53,"mat-icon",23),a(54,"payment"),i(),a(55," Payment Amount (Editable) "),i(),o(56,"div",6)(57,"mat-form-field",7)(58,"mat-label"),a(59,"Amount Paid"),i(),k(60,"input",24),o(61,"span",9),a(62),i(),o(63,"mat-hint"),a(64,"Total amount received from guest"),i()(),o(65,"div",25)(66,"div",26),a(67,"Current Status"),i(),o(68,"div",27),a(69),x(70,"titlecase"),i()()()()(),o(71,"div",28)(72,"h4",29)(73,"mat-icon",30),a(74,"calculate"),i(),a(75," Updated Summary "),i(),o(76,"div",31)(77,"div",32)(78,"span",33),a(79,"Subtotal:"),i(),o(80,"span",34),a(81),x(82,"currency"),i()(),o(83,"div",32)(84,"span",33),a(85,"Taxes:"),i(),o(86,"span",34),a(87),x(88,"currency"),i()(),o(89,"div",32)(90,"span",33),a(91,"Total Fees:"),i(),o(92,"span",34),a(93),x(94,"currency"),i()(),c(95,Yi,6,7,"div",32),o(96,"div",32)(97,"span",33),a(98,"Discount:"),i(),o(99,"span",35),a(100),x(101,"currency"),i()(),k(102,"mat-divider",36),o(103,"div",37)(104,"span",38),a(105,"New Total:"),i(),o(106,"span",38),a(107),x(108,"currency"),i()(),o(109,"div",32)(110,"span",33),a(111,"Amount Paid:"),i(),o(112,"span",35),a(113),x(114,"currency"),i()(),o(115,"div",37)(116,"span"),a(117,"New Balance:"),i(),o(118,"span"),a(119),x(120,"currency"),i()()()(),o(121,"div",39)(122,"h4",40),a(123,"Original Pricing (for reference)"),i(),o(124,"div",41)(125,"div",32)(126,"span"),a(127,"Original Total:"),i(),o(128,"span"),a(129),x(130,"currency"),i()(),o(131,"div",32)(132,"span"),a(133,"Original Balance:"),i(),o(134,"span"),a(135),x(136,"currency"),i()(),o(137,"div",32)(138,"span"),a(139,"Original Amount Paid:"),i(),o(140,"span"),a(141),x(142,"currency"),i()()()()()(),o(143,"div",42)(144,"button",43),h("click",function(){return t.onCancel()}),a(145," Cancel "),i(),o(146,"button",44),h("click",function(){return t.onSave()}),c(147,Xi,5,0,"span",45)(148,en,4,0,"span",45),i()()),e&2){let s,d,_,C,w;l(3),b("formGroup",t.pricingForm),l(12),v("",t.currency,"\xA0"),l(8),v("",t.currency,"\xA0"),l(3),m(t.data.reservation.pricing.fees&&(t.data.reservation.pricing.fees.serviceFee||t.data.reservation.pricing.fees.cleaningFee||t.data.reservation.pricing.fees.resortFee||t.data.reservation.pricing.fees.other)?26:-1),l(),m(t.hasApprovedExtensions()?27:-1),l(13),v("",t.currency,"\xA0"),l(22),v("",t.currency,"\xA0"),l(6),A("text-green-600",(t.data.reservation.paymentInfo==null?null:t.data.reservation.paymentInfo.status)==="paid")("text-orange-600",(t.data.reservation.paymentInfo==null?null:t.data.reservation.paymentInfo.status)==="partial")("text-gray-600",(t.data.reservation.paymentInfo==null?null:t.data.reservation.paymentInfo.status)==="pending"),l(),v(" ",F(70,34,(t.data.reservation.paymentInfo==null?null:t.data.reservation.paymentInfo.status)||"pending")," "),l(12),p(O(82,36,(s=t.pricingForm.get("subtotal"))==null?null:s.value,t.currency,"symbol","1.2-2")),l(6),p(O(88,41,(d=t.pricingForm.get("taxes"))==null?null:d.value,t.currency,"symbol","1.2-2")),l(6),p(O(94,46,(((_=t.pricingForm.get("fees.serviceFee"))==null?null:_.value)||0)+(((_=t.pricingForm.get("fees.cleaningFee"))==null?null:_.value)||0)+(((_=t.pricingForm.get("fees.resortFee"))==null?null:_.value)||0)+(((_=t.pricingForm.get("fees.other"))==null?null:_.value)||0),t.currency,"symbol","1.2-2")),l(2),m(t.hasApprovedExtensions()?95:-1),l(5),v("-",O(101,51,(C=t.pricingForm.get("discounts.amount"))==null?null:C.value,t.currency,"symbol","1.2-2")),l(7),p(O(108,56,t.currentTotal,t.currency,"symbol","1.2-2")),l(6),p(O(114,61,(w=t.pricingForm.get("paid"))==null?null:w.value,t.currency,"symbol","1.2-2")),l(2),A("text-red-600",t.currentBalance>0)("text-green-600",t.currentBalance<0)("text-gray-900",t.currentBalance===0),l(4),p(O(120,66,t.currentBalance,t.currency,"symbol","1.2-2")),l(10),p(O(130,71,t.data.reservation.pricing.total,t.currency,"symbol","1.2-2")),l(6),p(O(136,76,t.data.reservation.pricing.balance,t.currency,"symbol","1.2-2")),l(6),p(O(142,81,t.data.reservation.pricing.paid,t.currency,"symbol","1.2-2")),l(3),b("disabled",t.loading()),l(2),b("disabled",t.loading()||t.pricingForm.invalid),l(),m(t.loading()?147:148)}},dependencies:[j,re,ee,J,te,Y,X,oe,ne,ie,Ut,W,Oe,Fe,Te,z,K,me,ce,de,le,se,De,$,H,L,pe,Ie,ye,Z],styles:["[_nghost-%COMP%]{display:block}.mat-mdc-dialog-container[_ngcontent-%COMP%]{max-width:90vw;max-height:90vh;overflow:visible}.mat-mdc-dialog-title[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb;background-color:#f9fafb}.mat-mdc-dialog-content[_ngcontent-%COMP%]{background-color:#fff}.mat-mdc-dialog-actions[_ngcontent-%COMP%]{border-top:1px solid #e5e7eb;background-color:#f9fafb}.mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}.mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.pricing-summary[_ngcontent-%COMP%]{background-color:#f8fafc;border:1px solid #e2e8f0;border-radius:.5rem;padding:1rem}.pricing-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}.pricing-summary[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pricing-summary[_ngcontent-%COMP%]   .summary-row.total-row[_ngcontent-%COMP%]{font-weight:600;font-size:1.125rem;border-top:2px solid #cbd5e1;padding-top:.75rem;margin-top:.75rem}.reference-pricing[_ngcontent-%COMP%]{background-color:#f0f9ff;border:1px solid #bae6fd;border-radius:.5rem;padding:1rem;font-size:.875rem}.loading-spinner[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem}.loading-spinner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:1rem;height:1rem}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]{background-color:#7c3aed!important}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]:hover{background-color:#6d28d9!important}.mat-mdc-raised-button.mat-primary[_ngcontent-%COMP%]:disabled{background-color:#9ca3af!important;color:#6b7280!important}.mat-mdc-form-field.mat-form-field-invalid[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{border-color:#ef4444}@media(max-width:768px){.grid-cols-2[_ngcontent-%COMP%], .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:1fr}.mat-mdc-dialog-container[_ngcontent-%COMP%]{margin:1rem;max-width:calc(100vw - 2rem)}}"]})};var tn=(r,n,e)=>({"bg-yellow-100 text-yellow-700 border-yellow-200":r,"bg-green-100 text-green-700 border-green-200":n,"bg-red-100 text-red-700 border-red-200":e}),nn=(r,n,e)=>({"bg-green-100 text-green-800":r,"bg-yellow-100 text-yellow-800":n,"bg-red-100 text-red-800":e}),ui=(r,n)=>n.value,on=(r,n)=>n._id||r;function an(r,n){if(r&1&&(o(0,"h1",40),a(1," Reservation Details "),i(),o(2,"p",41),a(3),i()),r&2){let e=u();l(3),v("Confirmation: ",e.reservation().confirmationNumber)}}function rn(r,n){r&1&&(o(0,"h1",40),a(1,"Reservation Details"),i(),o(2,"p",41),a(3,"Loading reservation information..."),i())}function ln(r,n){r&1&&(o(0,"mat-icon",44),a(1,"refresh"),i())}function sn(r,n){if(r&1&&(o(0,"mat-icon",53),a(1),i()),r&2){let e=u(2);fe("color",e.getStatusColor(e.reservation().status)),l(),p(e.getStatusIcon(e.reservation().status))}}function dn(r,n){r&1&&(o(0,"div",24),a(1," No status changes available "),i())}function cn(r,n){if(r&1){let e=P();o(0,"button",54),h("click",function(){let s=E(e).$implicit,d=u(2);return S(d.updateReservationStatus(s.value))}),o(1,"mat-icon",55),a(2),i(),o(3,"span"),a(4),i()()}if(r&2){let e=n.$implicit;l(),fe("color",e.color),l(),p(e.icon),l(2),p(e.label)}}function mn(r,n){r&1&&(o(0,"div",48),a(1," \u{1F4A1} Confirm reservation before check-in "),i())}function un(r,n){r&1&&(o(0,"div",49),a(1," \u{1F4A1} Ready for check-in "),i())}function pn(r,n){if(r&1){let e=P();o(0,"button",56),h("click",function(){E(e);let s=u(2);return S(s.editReservation())}),o(1,"mat-icon",57),a(2,"edit"),i(),a(3," Edit Reservation "),i()}}function gn(r,n){if(r&1){let e=P();o(0,"button",58),h("click",function(){E(e);let s=u(2);return S(s.requestExtension())}),o(1,"mat-icon",57),a(2,"schedule"),i(),a(3," Extend Stay "),i()}if(r&2){let e=u(2);b("disabled",e.statusUpdating())}}function vn(r,n){if(r&1&&(o(0,"div",10)(1,"div",42)(2,"button",43),c(3,ln,2,0,"mat-icon",44)(4,sn,2,3,"mat-icon",45),a(5),x(6,"titlecase"),o(7,"mat-icon",46),a(8,"expand_more"),i()(),o(9,"mat-menu",13,4)(11,"div",22),a(12," Change Status "),i(),c(13,dn,2,0,"div",24),N(14,cn,5,4,"button",47,ui),c(16,mn,2,0,"div",48),c(17,un,2,0,"div",49),i()(),c(18,pn,4,0,"button",50),c(19,gn,4,1,"button",51),o(20,"button",52)(21,"mat-icon"),a(22,"more_vert"),i()()()),r&2){let e=q(10),t=u(),s=q(15);l(2),fe("background-color",t.getStatusColor(t.reservation().status)+"20")("color",t.getStatusColor(t.reservation().status))("border-color",t.getStatusColor(t.reservation().status)+"40"),b("matMenuTriggerFor",e)("disabled",t.statusUpdating()),l(),m(t.statusUpdating()?3:4),l(2),v(" ",F(6,16,t.reservation().status)," "),l(8),m(t.getAvailableStatusOptions().length===0?13:-1),l(),V(t.getAvailableStatusOptions()),l(2),m(t.reservation()&&t.reservation().status==="pending"?16:-1),l(),m(t.reservation()&&t.reservation().status==="confirmed"?17:-1),l(),m(t.canEdit()?18:-1),l(),m(t.canRequestExtension()?19:-1),l(),b("matMenuTriggerFor",s)}}function _n(r,n){r&1&&(o(0,"div",11),k(1,"mat-spinner",59),o(2,"span",60),a(3,"Loading reservation details..."),i()())}function xn(r,n){if(r&1){let e=P();o(0,"div",12)(1,"div",61)(2,"div",62)(3,"mat-icon",63),a(4,"error_outline"),i()(),o(5,"h3",64),a(6,"Failed to Load Reservation"),i(),o(7,"p",65),a(8),i(),o(9,"button",66),h("click",function(){E(e);let s=u();return S(s.goBack())}),a(10," Back to Reservations "),i()()()}if(r&2){let e=u();l(8),p(e.error())}}function fn(r,n){if(r&1&&(o(0,"div"),a(1),i()),r&2){let e=n.$implicit,t=u(3);l(),bt("",t.getGuestName(e.guest),": ",e.totalAdults," Adults, ",e.totalChildren," Children")}}function bn(r,n){if(r&1&&N(0,fn,2,3,"div",null,xe),r&2){let e=u(2);V(e.reservation().additionalGuests)}}function hn(r,n){r&1&&(o(0,"div"),a(1,"No additional guests"),i())}function Cn(r,n){if(r&1&&(o(0,"div",41),a(1),i()),r&2){let e=u(2);l(),v("Expected: ",e.reservation().expectedCheckInTime)}}function yn(r,n){if(r&1&&(o(0,"div",41),a(1),i()),r&2){let e=u(2);l(),v("Expected: ",e.reservation().expectedCheckOutTime)}}function En(r,n){if(r&1&&(o(0,"div",117)(1,"label",75),a(2,"Notes"),i(),o(3,"div",120),a(4),i()()),r&2){let e=u().$implicit;l(4),p(e.notes)}}function Sn(r,n){r&1&&(o(0,"mat-icon",44),a(1,"refresh"),i())}function kn(r,n){r&1&&(o(0,"mat-icon",53),a(1,"check_circle"),i())}function Dn(r,n){r&1&&(o(0,"mat-icon",44),a(1,"refresh"),i())}function Pn(r,n){r&1&&(o(0,"mat-icon",53),a(1,"cancel"),i())}function Mn(r,n){if(r&1){let e=P();o(0,"div",118)(1,"button",121),h("click",function(){E(e);let s=u().$implicit,d=u(3);return S(d.approveExtension(s._id))}),c(2,Sn,2,0,"mat-icon",44)(3,kn,2,0,"mat-icon",53),a(4," Approve Extension "),i(),o(5,"button",122),h("click",function(){E(e);let s=u().$implicit,d=u(3);return S(d.rejectExtension(s._id))}),c(6,Dn,2,0,"mat-icon",44)(7,Pn,2,0,"mat-icon",53),a(8," Reject Extension "),i()()}if(r&2){let e=u().$implicit,t=u(3);l(),b("disabled",t.processingExtension()===e._id),l(),m(t.processingExtension()===e._id&&t.processingAction()==="approve"?2:3),l(3),b("disabled",t.processingExtension()===e._id),l(),m(t.processingExtension()===e._id&&t.processingAction()==="reject"?6:7)}}function Rn(r,n){if(r&1&&(o(0,"div")(1,"span",93),a(2,"Reference:"),i(),o(3,"span",130),a(4),i()()),r&2){let e=u(3).$implicit;l(4),p(e.paymentInfo.transactionReference)}}function wn(r,n){if(r&1&&(o(0,"div",129)(1,"span",131),a(2,"Payment Notes:"),i(),o(3,"div",132),a(4),i()()),r&2){let e=u(3).$implicit;l(4),p(e.paymentInfo.notes)}}function In(r,n){if(r&1&&(o(0,"div",124)(1,"div",125)(2,"mat-icon",53),a(3,"payment"),i(),o(4,"span",99),a(5,"Payment Information"),i()(),o(6,"div",126)(7,"div")(8,"span",93),a(9,"Status:"),i(),o(10,"span",127),a(11),x(12,"titlecase"),i()(),o(13,"div")(14,"span",93),a(15,"Method:"),i(),o(16,"span",128),a(17),x(18,"titlecase"),i()(),o(19,"div")(20,"span",93),a(21,"Amount:"),i(),o(22,"span",128),a(23),x(24,"currency"),i()(),c(25,Rn,5,1,"div"),i(),c(26,wn,5,1,"div",129),i()),r&2){let e,t=u(2).$implicit,s=u(3);l(10),b("ngClass",Qe(13,nn,t.paymentInfo.status==="paid",t.paymentInfo.status==="partial",t.paymentInfo.status==="pending")),l(),v(" ",F(12,6,t.paymentInfo.status)," "),l(6),p(F(18,8,t.paymentInfo.method)),l(6),p(D(24,10,t.paymentInfo.amount,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(2),m(t.paymentInfo.transactionReference?25:-1),l(),m(t.paymentInfo.notes?26:-1)}}function On(r,n){if(r&1&&(o(0,"div",123)(1,"mat-icon",53),a(2,"check_circle"),i(),a(3),i(),c(4,In,27,17,"div",124)),r&2){let e=u().$implicit,t=u(3);l(3),v(" Approved on ",t.formatExtensionDate(e.approvedAt)," "),l(),m(e.paymentInfo?4:-1)}}function Tn(r,n){if(r&1&&(o(0,"div",135),a(1),i()),r&2){let e=u(2).$implicit,t=u(3);l(),v("Rejected on ",t.formatExtensionDate(e.rejectedAt))}}function Fn(r,n){if(r&1&&(o(0,"div",119)(1,"div",133)(2,"mat-icon",53),a(3,"cancel"),i(),a(4," Rejection Reason "),i(),o(5,"div",134),a(6),i(),c(7,Tn,2,1,"div",135),i()),r&2){let e=u().$implicit;l(6),p(e.rejectionReason),l(),m(e.rejectedAt?7:-1)}}function An(r,n){if(r&1&&(o(0,"div",107)(1,"div",109)(2,"div",10)(3,"div",110)(4,"mat-icon",111),a(5,"hotel_class"),i()(),o(6,"div")(7,"h4",94),a(8,"Extension Request"),i(),o(9,"p",41),a(10),i()()(),o(11,"span",112),a(12),x(13,"titlecase"),i()(),o(14,"div",113)(15,"div")(16,"label",75),a(17,"Original Check-out"),i(),o(18,"div",114),a(19),i()(),o(20,"div")(21,"label",75),a(22,"Extended Check-out"),i(),o(23,"div",115),a(24),i()(),o(25,"div")(26,"label",75),a(27,"Additional Nights"),i(),o(28,"div",114),a(29),i()(),o(30,"div")(31,"label",75),a(32,"Extension Cost"),i(),o(33,"div",116),a(34),x(35,"currency"),i()()(),c(36,En,5,1,"div",117),c(37,Mn,9,4,"div",118),c(38,On,5,2),c(39,Fn,8,2,"div",119),i()),r&2){let e,t=n.$implicit,s=u(3);l(10),p(s.formatExtensionDate(t.requestedAt)),l(),b("ngClass",Qe(17,tn,t.status==="pending",t.status==="approved",t.status==="rejected")),l(),v(" ",F(13,12,t.status)," "),l(7),p(s.formatExtensionDate(t.originalCheckOutDate)),l(5),p(s.formatExtensionDate(t.newCheckOutDate)),l(5),Q("",t.additionalNights," night",t.additionalNights>1?"s":""),l(5),p(D(35,14,t.additionalCost,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(2),m(t.notes?36:-1),l(),m(t.status==="pending"?37:-1),l(),m(t.status==="approved"&&t.approvedAt?38:-1),l(),m(t.status==="rejected"&&t.rejectionReason?39:-1)}}function Bn(r,n){if(r&1&&(o(0,"div",108)(1,"div",136)(2,"mat-icon",77),a(3,"check_circle"),i(),o(4,"span",137),a(5,"Active Extension"),i()(),o(6,"div",138)(7,"p"),a(8,"Total extension cost: "),o(9,"strong"),a(10),x(11,"currency"),i()(),o(12,"p"),a(13,"Total additional nights: "),o(14,"strong"),a(15),i()()()()),r&2){let e,t=u(3);l(10),p(D(11,2,t.getTotalExtensionCost(),(e=t.storeStore.selectedStore())==null?null:e.currency)),l(5),p(t.getTotalExtensionNights())}}function Nn(r,n){if(r&1&&(o(0,"div",69)(1,"div",103)(2,"h3",71)(3,"mat-icon",104),a(4,"schedule"),i(),a(5," Stay Extensions "),o(6,"span",105),a(7),i()()(),o(8,"div",73)(9,"div",106),N(10,An,40,21,"div",107,on),i(),c(12,Bn,16,5,"div",108),i()()),r&2){let e=u(2);l(7),Q(" ",e.getExtensions().length," Extension",e.getExtensions().length>1?"s":""," "),l(3),V(e.getExtensions()),l(2),m(e.hasActiveExtension()?12:-1)}}function Vn(r,n){if(r&1){let e=P();o(0,"button",139),h("click",function(){E(e);let s=u(2);return S(s.openRoomChangeDialog())}),o(1,"mat-icon"),a(2,"swap_horiz"),i()()}}function Un(r,n){if(r&1&&(o(0,"tr",85)(1,"td",140),a(2),i(),o(3,"td",141),a(4),i(),o(5,"td",141),a(6),i(),o(7,"td",141),a(8),i(),o(9,"td",140),a(10),x(11,"currency"),i()()),r&2){let e,t=n.$implicit,s=u(2);l(2),p(t.roomNumber+" ("+t.name+")"),l(2),p(t.roomType),l(2),p(t.adults),l(2),p(t.children),l(2),p(D(11,5,t.rate,(e=s.storeStore.selectedStore())==null?null:e.currency))}}function Gn(r,n){r&1&&(o(0,"span",89),a(1,"(Locked)"),i())}function qn(r,n){if(r&1&&(o(0,"div",92)(1,"span",93),a(2,"Service Fee"),i(),o(3,"span",94),a(4),x(5,"currency"),i()()),r&2){let e,t=u(2);l(4),p(D(5,1,(e=t.reservation().pricing.fees)==null?null:e.serviceFee,(e=t.storeStore.selectedStore())==null?null:e.currency))}}function jn(r,n){if(r&1&&(o(0,"div",92)(1,"span",93),a(2,"Cleaning Fee"),i(),o(3,"span",94),a(4),x(5,"currency"),i()()),r&2){let e,t=u(2);l(4),p(D(5,1,(e=t.reservation().pricing.fees)==null?null:e.cleaningFee,(e=t.storeStore.selectedStore())==null?null:e.currency))}}function zn(r,n){if(r&1&&(o(0,"div",92)(1,"span",93),a(2,"Resort Fee"),i(),o(3,"span",94),a(4),x(5,"currency"),i()()),r&2){let e,t=u(2);l(4),p(D(5,1,(e=t.reservation().pricing.fees)==null?null:e.resortFee,(e=t.storeStore.selectedStore())==null?null:e.currency))}}function $n(r,n){if(r&1&&(o(0,"div",92)(1,"span",93),a(2,"Discount"),i(),o(3,"span",98),a(4),x(5,"currency"),i()()),r&2){let e,t=u(2);l(4),v("-",D(5,1,t.reservation().pricing.discounts,(e=t.storeStore.selectedStore())==null?null:e.currency))}}function Ln(r,n){if(r&1&&(o(0,"div",92)(1,"span",93),a(2),i(),o(3,"span",142),a(4),x(5,"currency"),i()()),r&2){let e,t=u(2);l(2),v("Extensions (",t.getTotalExtensionNights()," nights)"),l(2),v("+",D(5,2,t.getTotalExtensionCost(),(e=t.storeStore.selectedStore())==null?null:e.currency))}}function Hn(r,n){r&1&&(o(0,"span",89),a(1,"(Locked)"),i())}function Wn(r,n){if(r&1&&(o(0,"button",143)(1,"mat-icon"),a(2,"more_vert"),i()()),r&2){u(3);let e=q(39);b("matMenuTriggerFor",e)}}function Qn(r,n){r&1&&(o(0,"div",144)(1,"mat-icon"),a(2,"lock"),i()())}function Zn(r,n){r&1&&(o(0,"mat-icon",146),a(1,"refresh"),i())}function Kn(r,n){if(r&1&&(o(0,"div")(1,"label",75),a(2,"Last Transaction"),i(),o(3,"div",114),a(4),x(5,"currency"),i()()),r&2){let e,t=u(3);l(4),Q(" ",D(5,2,t.transactionHistory()[t.transactionHistory().length-1].amount,(e=t.storeStore.selectedStore())==null?null:e.currency)," on ",t.formatDateTime(t.transactionHistory()[t.transactionHistory().length-1].date)," ")}}function Jn(r,n){if(r&1&&(o(0,"div",69)(1,"div",70)(2,"div",88)(3,"h3",71)(4,"mat-icon"),a(5),i(),a(6," Payment Information "),c(7,Hn,2,0,"span",89),i(),c(8,Wn,3,1,"button",143)(9,Qn,3,0,"div",144),i()(),o(10,"div",73)(11,"div",91)(12,"div")(13,"label",75),a(14,"Payment Method"),i(),o(15,"div",114),a(16),x(17,"titlecase"),i()(),o(18,"div")(19,"label",75),a(20,"Payment Status"),i(),o(21,"div",145),c(22,Zn,2,0,"mat-icon",146),o(23,"span",147),a(24),x(25,"titlecase"),i()()(),c(26,Kn,6,5,"div"),i()()()),r&2){let e,t,s,d=u(2);l(4),A("text-indigo-600",!d.isCheckedOut())("text-gray-400",d.isCheckedOut()),l(),v(" ",d.isCheckedOut()?"lock":"credit_card"," "),l(2),m(d.isCheckedOut()?7:-1),l(),m(d.canEditPaymentInfo()?8:d.isCheckedOut()?9:-1),l(8),p(F(17,13,(e=d.reservation().paymentInfo)==null?null:e.method)),l(6),m(d.statusUpdating()?22:-1),l(),U(((t=d.reservation().paymentInfo)==null?null:t.status)==="paid"?"bg-green-100 text-green-800":((t=d.reservation().paymentInfo)==null?null:t.status)==="refunded"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"),l(),v(" ",F(25,15,(s=d.reservation().paymentInfo)==null?null:s.status)," "),l(2),m(d.transactionHistory().length>0?26:-1)}}function Yn(r,n){if(r&1&&(o(0,"tr",85)(1,"td",141),a(2),i(),o(3,"td",140),a(4),x(5,"currency"),i(),o(6,"td",141),a(7),x(8,"titlecase"),i(),o(9,"td",141),a(10),i(),o(11,"td",148)(12,"span",147),a(13),x(14,"titlecase"),i()()()),r&2){let e,t=n.$implicit,s=u(3);l(2),p(s.formatDateTime(t.date)),l(2),p(D(5,7,t.amount,(e=s.storeStore.selectedStore())==null?null:e.currency)),l(3),p(F(8,10,t.method)),l(3),p(t.reference),l(2),U(t.status==="completed"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),l(),v(" ",F(14,12,t.status)," ")}}function Xn(r,n){if(r&1&&(o(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",77),a(4,"receipt"),i(),a(5," Transaction History "),i()(),o(6,"div",73)(7,"div",81)(8,"table",82)(9,"thead")(10,"tr",83)(11,"th",84),a(12,"Date"),i(),o(13,"th",84),a(14,"Amount"),i(),o(15,"th",84),a(16,"Method"),i(),o(17,"th",84),a(18,"Reference"),i(),o(19,"th",84),a(20,"Status"),i()()(),o(21,"tbody"),N(22,Yn,15,14,"tr",85,xe),i()()()()()),r&2){let e=u(2);l(22),V(e.transactionHistory())}}function eo(r,n){if(r&1&&(o(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",72),a(4,"message"),i(),a(5," Special Requests "),i()(),o(6,"div",73)(7,"p",149),a(8),i()()()),r&2){let e=u(3);l(8),p(e.reservation().specialRequests)}}function to(r,n){if(r&1&&(o(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",104),a(4,"note"),i(),a(5," Internal Notes "),i()(),o(6,"div",73)(7,"p",149),a(8),i()()()),r&2){let e=u(3);l(8),p(e.reservation().internalNotes)}}function io(r,n){if(r&1&&(o(0,"div",101),c(1,eo,9,1,"div",69),c(2,to,9,1,"div",69),i()),r&2){let e=u(2);l(),m(e.reservation().specialRequests?1:-1),l(),m(e.reservation().internalNotes?2:-1)}}function no(r,n){if(r&1&&(o(0,"div",41),a(1),i()),r&2){let e=u(2).$implicit;l(),v("Adults: ",e.totalAdults)}}function oo(r,n){if(r&1&&(o(0,"div",41),a(1),i()),r&2){let e=u(2).$implicit;l(),v("Children: ",e.totalChildren)}}function ao(r,n){if(r&1&&(o(0,"div",94),a(1),i(),c(2,no,2,1,"div",41),c(3,oo,2,1,"div",41)),r&2){let e=u().$implicit,t=u(3);l(),p(t.getGuestName(e.guest)),l(),m(e.totalAdults?2:-1),l(),m(e.totalChildren?3:-1)}}function ro(r,n){r&1&&(o(0,"div",41),a(1,"Unknown Guest"),i())}function lo(r,n){if(r&1&&(o(0,"div",151),c(1,ao,4,3)(2,ro,2,0,"div",41),i()),r&2){let e=n.$implicit;l(),m(e.guest?1:2)}}function so(r,n){if(r&1&&(o(0,"div",69)(1,"div",70)(2,"h3",71)(3,"mat-icon",77),a(4,"group"),i(),a(5," Additional Guests "),i()(),o(6,"div",73)(7,"div",150),N(8,lo,3,1,"div",151,xe),i()()()),r&2){let e=u(2);l(8),V(e.reservation().additionalGuests)}}function co(r,n){if(r&1&&(o(0,"div")(1,"label",75),a(2,"Last Updated"),i(),o(3,"div",41),a(4),i()()),r&2){let e=u(2);l(4),p(e.formatDateTime(e.reservation().updatedAt))}}function mo(r,n){if(r&1&&(o(0,"div")(1,"label",75),a(2,"Actual Check-in"),i(),o(3,"div",41),a(4),i()()),r&2){let e=u(2);l(4),p(e.formatDateTime(e.reservation().actualCheckInDate))}}function uo(r,n){if(r&1&&(o(0,"div")(1,"label",75),a(2,"Actual Check-out"),i(),o(3,"div",41),a(4),i()()),r&2){let e=u(2);l(4),p(e.formatDateTime(e.reservation().actualCheckOutDate))}}function po(r,n){if(r&1&&(o(0,"div")(1,"label",155),a(2,"Refund Amount"),i(),o(3,"div",156),a(4),x(5,"currency"),i()()),r&2){let e,t=u(3);l(4),p(D(5,1,t.getRefundAmount(),(e=t.storeStore.selectedStore())==null?null:e.currency))}}function go(r,n){if(r&1&&(o(0,"div")(1,"label",155),a(2,"Cancellation Fee"),i(),o(3,"div",156),a(4),x(5,"currency"),i()()),r&2){let e,t=u(3);l(4),p(D(5,1,t.getCancellationFee(),(e=t.storeStore.selectedStore())==null?null:e.currency))}}function vo(r,n){if(r&1&&(o(0,"div",102)(1,"div",152)(2,"h3",153)(3,"mat-icon",154),a(4,"cancel"),i(),a(5," Cancellation Information "),i()(),o(6,"div",73)(7,"div",74)(8,"div")(9,"label",155),a(10,"Cancelled"),i(),o(11,"div",156),a(12),i()(),o(13,"div")(14,"label",155),a(15,"Reason"),i(),o(16,"div",156),a(17),i()(),c(18,po,6,4,"div"),c(19,go,6,4,"div"),i()()()),r&2){let e=u(2);l(12),p(e.formatDateTime(e.reservation().cancellation.cancelledAt)),l(5),p(e.reservation().cancellation.reason),l(),m(e.hasRefundAmount()?18:-1),l(),m(e.hasCancellationFee()?19:-1)}}function _o(r,n){if(r&1){let e=P();o(0,"div",12)(1,"div",67)(2,"div",68)(3,"div",69)(4,"div",70)(5,"h3",71)(6,"mat-icon",72),a(7,"person"),i(),a(8," Guest Information "),i()(),o(9,"div",73)(10,"div",74)(11,"div")(12,"label",75),a(13,"Guest Name"),i(),o(14,"div",76),a(15),i()(),o(16,"div")(17,"label",75),a(18,"Email"),i(),o(19,"div",41),a(20),i()(),o(21,"div")(22,"label",75),a(23,"Phone"),i(),o(24,"div",41),a(25),i()(),o(26,"div")(27,"label",75),a(28,"Occupancy"),i(),o(29,"div",41),c(30,bn,2,0)(31,hn,2,0,"div"),i()()()()(),o(32,"div",69)(33,"div",70)(34,"h3",71)(35,"mat-icon",77),a(36,"calendar_today"),i(),a(37," Stay Information "),i()(),o(38,"div",73)(39,"div",74)(40,"div")(41,"label",75),a(42,"Check-in Date"),i(),o(43,"div",76),a(44),i(),c(45,Cn,2,1,"div",41),i(),o(46,"div")(47,"label",75),a(48,"Check-out Date"),i(),o(49,"div",76),a(50),i(),c(51,yn,2,1,"div",41),i(),o(52,"div")(53,"label",75),a(54,"Number of Nights"),i(),o(55,"div",76),a(56),i()(),o(57,"div")(58,"label",75),a(59,"Booking Source"),i(),o(60,"div",41),a(61),x(62,"titlecase"),i()()()()(),c(63,Nn,13,3,"div",69),o(64,"div",69)(65,"div",70)(66,"div",78)(67,"h3",71)(68,"mat-icon",79),a(69,"hotel"),i(),a(70," Room Details "),i(),c(71,Vn,3,0,"button",80),i()(),o(72,"div",73)(73,"div",81)(74,"table",82)(75,"thead")(76,"tr",83)(77,"th",84),a(78,"Room Number"),i(),o(79,"th",84),a(80,"Room Type"),i(),o(81,"th",84),a(82,"Adults"),i(),o(83,"th",84),a(84,"Children"),i(),o(85,"th",84),a(86,"Rate per Night"),i()()(),o(87,"tbody"),N(88,Un,12,8,"tr",85,xe),i()()()()()(),o(90,"div",86)(91,"div",69)(92,"div",87)(93,"div",88)(94,"h3",71)(95,"mat-icon"),a(96),i(),a(97," Pricing Summary "),c(98,Gn,2,0,"span",89),i(),o(99,"button",90),h("click",function(){E(e);let s=u();return S(s.openPricingUpdateDialog())}),o(100,"mat-icon"),a(101),i()()()(),o(102,"div",73)(103,"div",91)(104,"div",92)(105,"span",93),a(106,"Subtotal"),i(),o(107,"span",94),a(108),x(109,"currency"),i()(),o(110,"div",92)(111,"span",93),a(112,"Taxes"),i(),o(113,"span",94),a(114),x(115,"currency"),i()(),c(116,qn,6,4,"div",92),c(117,jn,6,4,"div",92),c(118,zn,6,4,"div",92),c(119,$n,6,4,"div",92),c(120,Ln,6,5,"div",92),k(121,"hr",95),o(122,"div",96)(123,"span",97),a(124,"Total"),i(),o(125,"span",97),a(126),x(127,"currency"),i()(),o(128,"div",92)(129,"span",93),a(130,"Paid"),i(),o(131,"span",98),a(132),x(133,"currency"),i()(),o(134,"div",92)(135,"span",93),a(136,"Balance"),i(),o(137,"span",99),a(138),x(139,"currency"),i()()()()(),c(140,Jn,27,17,"div",69),i()(),o(141,"div",100),c(142,Xn,24,0,"div",69),c(143,io,3,2,"div",101),c(144,so,10,0,"div",69),o(145,"div",69)(146,"div",70)(147,"h3",71)(148,"mat-icon",79),a(149,"info"),i(),a(150," Booking Information "),i()(),o(151,"div",73)(152,"div",74)(153,"div")(154,"label",75),a(155,"Created"),i(),o(156,"div",41),a(157),i()(),c(158,co,5,1,"div"),c(159,mo,5,1,"div"),c(160,uo,5,1,"div"),i()()(),c(161,vo,20,4,"div",102),i()()}if(r&2){let e,t,s,d,_,C,w,I,be,g=u();l(15),p(g.guestName()),l(5),p(g.guestEmail()),l(5),p(g.guestPhone()),l(5),m(g.hasAdditionalGuests()?30:31),l(14),p(g.formatDate(g.reservation().checkInDate)),l(),m(g.reservation().expectedCheckInTime?45:-1),l(5),p(g.formatDate(g.reservation().checkOutDate)),l(),m(g.reservation().expectedCheckOutTime?51:-1),l(5),p(g.reservation().numberOfNights),l(5),p(F(62,52,g.reservation().bookingSource)),l(2),m(g.hasExtensions()?63:-1),l(8),m(!g.isCheckedOut()&&((e=g.reservation())==null?null:e.status)!=="cancelled"?71:-1),l(17),V(g.roomDetails()),l(4),A("from-gray-50",g.isCheckedOut())("to-gray-100",g.isCheckedOut())("border-gray-200",g.isCheckedOut()),l(3),A("text-purple-600",!g.isCheckedOut())("text-gray-400",g.isCheckedOut()),l(),v(" ",g.isCheckedOut()?"lock":"account_balance_wallet"," "),l(2),m(g.isCheckedOut()?98:-1),l(),A("text-gray-400",!g.canEditPricing())("cursor-not-allowed",!g.canEditPricing()),b("matTooltip",g.canEditPricing()?"Update Pricing (Owner Authorization Required)":"Cannot edit pricing for checked-out reservations")("disabled",!g.canEditPricing()),l(2),p(g.canEditPricing()?"edit":"lock"),l(7),p(D(109,54,g.reservation().pricing.subtotal,(t=g.storeStore.selectedStore())==null?null:t.currency)),l(6),p(D(115,57,g.reservation().pricing.taxes,(s=g.storeStore.selectedStore())==null?null:s.currency)),l(2),m((d=g.reservation().pricing.fees)!=null&&d.serviceFee?116:-1),l(),m((_=g.reservation().pricing.fees)!=null&&_.cleaningFee?117:-1),l(),m((C=g.reservation().pricing.fees)!=null&&C.resortFee?118:-1),l(),m(g.reservation().pricing.discounts?119:-1),l(),m(g.getTotalExtensionCost()>0?120:-1),l(6),p(D(127,60,g.getFinalTotal(),(w=g.storeStore.selectedStore())==null?null:w.currency)),l(6),p(D(133,63,g.reservation().pricing.paid,(I=g.storeStore.selectedStore())==null?null:I.currency)),l(5),U(g.reservation().pricing.balance>0?"text-red-600":"text-green-600"),l(),v(" ",D(139,66,g.reservation().pricing.balance,(be=g.storeStore.selectedStore())==null?null:be.currency)," "),l(2),m(g.reservation().paymentInfo?140:-1),l(2),m(g.transactionHistory().length>0?142:-1),l(),m(g.reservation().specialRequests||g.reservation().internalNotes?143:-1),l(),m(g.hasAdditionalGuests()?144:-1),l(13),p(g.formatDateTime(g.reservation().createdAt)),l(),m(g.reservation().updatedAt!==g.reservation().createdAt?158:-1),l(),m(g.reservation().actualCheckInDate?159:-1),l(),m(g.reservation().actualCheckOutDate?160:-1),l(),m(g.hasCancellation()?161:-1)}}function xo(r,n){if(r&1){let e=P();o(0,"button",25),h("click",function(){E(e);let s=u();return S(s.editReservation())}),o(1,"mat-icon",26),a(2,"edit"),i(),o(3,"span"),a(4,"Edit Reservation"),i()()}}function fo(r,n){if(r&1){let e=P();o(0,"button",35),h("click",function(){E(e);let s=u();return S(s.requestExtension())}),o(1,"mat-icon",36),a(2,"schedule"),i(),o(3,"span"),a(4,"Request Stay Extension"),i()()}if(r&2){let e=u();b("disabled",e.statusUpdating())}}function bo(r,n){r&1&&(o(0,"mat-icon",20),a(1,"download"),i())}function ho(r,n){r&1&&(o(0,"mat-icon",21),a(1,"picture_as_pdf"),i())}function Co(r,n){if(r&1){let e=P();k(0,"mat-divider",157),o(1,"button",158),h("click",function(){E(e);let s=u();return S(s.deleteReservation())}),o(2,"mat-icon",21),a(3,"delete"),i(),o(4,"span"),a(5,"Delete Reservation"),i()()}}function yo(r,n){r&1&&(o(0,"div",23)(1,"mat-icon",159),a(2,"lock"),i(),o(3,"span"),a(4,"Payment information is locked for checked-out reservations"),i()())}function Eo(r,n){r&1&&(o(0,"div",24),a(1," No status changes available "),i())}function So(r,n){if(r&1){let e=P();o(0,"button",162),h("click",function(){let s=E(e).$implicit,d=u(2);return S(d.updatePaymentStatus(s.value))}),o(1,"mat-icon",163),a(2),i(),o(3,"span"),a(4),i()()}if(r&2){let e=n.$implicit;l(),fe("color",e.color),l(),p(e.icon),l(2),p(e.label)}}function ko(r,n){if(r&1){let e=P();N(0,So,5,4,"button",160,ui),o(2,"button",25),h("click",function(){E(e);let s=u();return S(s.showPaymentDialog(s.reservation()))}),o(3,"mat-icon",161),a(4,"edit"),i(),o(5,"span"),a(6,"Edit Payment Information"),i()(),o(7,"div",49),a(8,' \u{1F4A1} Use "Edit Payment Information" to update method and status details '),i()}if(r&2){let e=u();V(e.getAvailablePaymentStatusOptions())}}function Do(r,n){if(r&1){let e=P();o(0,"button",164),h("click",function(){E(e);let s=u();return S(s.sendReservationEmail("confirmation"))}),o(1,"mat-icon",36),a(2,"check_circle"),i(),o(3,"span"),a(4,"Send Confirmation Email"),i()()}}function Po(r,n){if(r&1){let e=P();o(0,"button",165),h("click",function(){E(e);let s=u();return S(s.sendReservationEmail("checkin"))}),o(1,"mat-icon",166),a(2,"login"),i(),o(3,"span"),a(4,"Send Check-in Notification"),i()()}}function Mo(r,n){r&1&&(o(0,"div",31)(1,"mat-icon",53),a(2,"bluetooth_connected"),i(),o(3,"span"),a(4,"Printer Connected"),i()())}function Ro(r,n){r&1&&(o(0,"div",32)(1,"mat-icon",53),a(2,"bluetooth_disabled"),i(),o(3,"span"),a(4,"Printer Not Connected"),i()())}function wo(r,n){r&1&&(o(0,"mat-icon",34),a(1,"print"),i())}function Io(r,n){r&1&&(o(0,"mat-icon",26),a(1,"print"),i())}function Oo(r,n){if(r&1){let e=P();o(0,"button",167),h("click",function(){E(e);let s=u();return S(s.disconnectFromPrinter())}),o(1,"mat-icon",21),a(2,"bluetooth_disabled"),i(),o(3,"span"),a(4,"Disconnect Printer"),i()()}if(r&2){let e=u();b("disabled",e.printing()||e.statusUpdating())}}function To(r,n){if(r&1){let e=P();o(0,"button",168),h("click",function(){E(e);let s=u();return S(s.connectToPrinter())}),o(1,"mat-icon",26),a(2,"bluetooth"),i(),o(3,"span"),a(4,"Connect to Printer"),i()()}if(r&2){let e=u();b("disabled",e.printing()||e.statusUpdating())}}var mi=class r{router=f(Dt);route=f(kt);location=f(yt);reservationService=f(_e);bluetoothPrinterService=f(ri);storeStore=f(ue);snackBar=f(Ee);dialog=f(Kt);reservation=R(null);loading=R(!1);error=R(null);statusUpdating=R(!1);printerConnected=R(!1);printing=R(!1);exportingPDF=R(!1);statusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"confirmed",label:"Confirmed",icon:"check_circle",color:"#10b981"},{value:"checked_in",label:"Checked In",icon:"login",color:"#3b82f6"},{value:"checked_out",label:"Checked Out",icon:"logout",color:"#6b7280"},{value:"cancelled",label:"Cancelled",icon:"cancel",color:"#ef4444"},{value:"no_show",label:"No Show",icon:"person_off",color:"#f97316"}];roomDetails=T(()=>{let n=this.reservation();return!n||!n.rooms?[]:n.rooms.map(e=>{let t=typeof e.room=="string"?{roomNumber:e.room,roomType:"Unknown"}:e.room;return{name:t.name||"N/A",roomNumber:t.roomNumber||"Unknown",roomType:typeof t.roomType=="object"&&t.roomType?.name||"Unknown",adults:e.guests?.adults||0,children:e.guests?.children||0,rate:t.priceOverride||0}})});transactionHistory=T(()=>{let n=this.reservation();return!n||!n.paymentInfo?.transactions?[]:n.paymentInfo.transactions});guestName=T(()=>{let n=this.reservation();if(!n||!n.guest)return"Unknown Guest";let e=n.guest;return`${e.firstName||""} ${e.lastName||""}`.trim()||"Unknown Guest"});guestEmail=T(()=>this.reservation()?.guest?.email||"No email provided");guestPhone=T(()=>this.reservation()?.guest?.phone||"No phone provided");hasAdditionalGuests=T(()=>{let n=this.reservation();return n?.additionalGuests&&n.additionalGuests.length>0});getGuestName(n){return n&&`${n.firstName||""} ${n.lastName||""}`.trim()||"Unknown Guest"}hasCancellation=T(()=>this.reservation()?.cancellation?.isCancelled);hasRefundAmount=T(()=>{let n=this.reservation();return n?.cancellation?.refundAmount&&n.cancellation.refundAmount>0});hasCancellationFee=T(()=>{let n=this.reservation();return n?.cancellation?.cancellationFee&&n.cancellation.cancellationFee>0});getRefundAmount=T(()=>this.reservation()?.cancellation?.refundAmount||0);getCancellationFee=T(()=>this.reservation()?.cancellation?.cancellationFee||0);paymentStatusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"paid",label:"Paid",icon:"check_circle",color:"#10b981"},{value:"partial",label:"Partial",icon:"donut_small",color:"#3b82f6"},{value:"refunded",label:"Refunded",icon:"undo",color:"#6b7280"}];getAvailablePaymentStatusOptions=T(()=>{let n=this.reservation();if(!n)return[];let e=n.paymentInfo?.status||"pending";return this.paymentStatusOptions.filter(t=>t.value!==e)});ngOnInit(){let n=this.route.snapshot.paramMap.get("id");n?this.loadReservation(n):this.error.set("No reservation ID provided"),this.printerConnected.set(this.bluetoothPrinterService.isConnected())}loadReservation(n){return y(this,null,function*(){this.loading.set(!0),this.error.set(null);try{if(!this.storeStore.selectedStore()?._id)throw new Error("No store selected");this.reservationService.getReservationById(n).subscribe({next:t=>{this.reservation.set(t),this.loading.set(!1)},error:t=>{console.error("Error loading reservation:",t),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}catch(e){console.error("Error loading reservation:",e),this.error.set("Failed to load reservation details"),this.loading.set(!1)}})}goBack(){this.location.back()}editReservation(){this.reservation()&&this.router.navigate(["/menu/hms/front-desk/reservations/edit",this.reservation()._id])}canEdit(){let n=this.reservation();return n?.status!=="cancelled"&&n?.status!=="checked_out"&&n?.status!=="no_show"&&n?.status!=="checked_in"&&!n?.actualCheckInDate}canDelete(){let n=this.reservation();return n?["pending","cancelled","no_show"].includes(n.status):!1}deleteReservation(){let n=this.reservation();if(!n)return;let e=this.storeStore.selectedStore();if(!e?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let t={storeId:e._id,actionDescription:`delete reservation ${n.confirmationNumber}`,reservationId:n._id};this.dialog.open(Ae,{data:t,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(d=>{d?.authorized&&d.pin&&this.performReservationDeletion(n,d.pin)})}performReservationDeletion(n,e){this.statusUpdating.set(!0),this.reservationService.deleteReservationWithPin(n._id,e).subscribe({next:t=>{this.snackBar.open(`Reservation ${n.confirmationNumber} deleted successfully`,"Close",{duration:5e3}),this.router.navigate(["/dashboard/hms/front-desk/reservations"])},error:t=>{console.error("Error deleting reservation:",t),this.snackBar.open(t.message||"Failed to delete reservation","Close",{duration:5e3,panelClass:["error-snackbar"]})},complete:()=>{this.statusUpdating.set(!1)}})}canCheckIn(){return this.reservation()?.status==="confirmed"}canCheckOut(){return this.reservation()?.status==="checked_in"}canCancel(){let n=this.reservation();return n?.status!=="cancelled"&&n?.status!=="checked_out"&&n?.status!=="no_show"}canRequestExtension(){return this.reservation()?.status==="checked_in"}isCheckedOut(){return this.reservation()?.status==="checked_out"}canEditPricing(){return!this.isCheckedOut()&&!this.loading()}canEditPaymentInfo(){return!this.isCheckedOut()&&!this.statusUpdating()}checkInReservation(){return y(this,null,function*(){if(this.reservation()){if(!this.canCheckIn()){this.snackBar.open('Guests can only be checked in when reservation status is "Confirmed"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_in")}catch(e){console.error("Error checking in reservation:",e),this.snackBar.open("Failed to check in reservation","Close",{duration:3e3})}}})}checkOutReservation(){return y(this,null,function*(){if(this.reservation()){if(!this.canCheckOut()){this.snackBar.open('Guests can only be checked out when reservation status is "Checked In"',"Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{yield this.updateReservationStatus("checked_out")}catch(e){console.error("Error checking out reservation:",e),this.snackBar.open("Failed to check out reservation","Close",{duration:3e3})}}})}cancelReservation(){return y(this,null,function*(){if(!(!this.reservation()||!this.canCancel()))try{this.snackBar.open("Cancellation functionality coming soon","Close",{duration:3e3})}catch(e){console.error("Error cancelling reservation:",e),this.snackBar.open("Failed to cancel reservation","Close",{duration:3e3})}})}requestExtension(){return y(this,null,function*(){let n=this.reservation();if(!n||!this.canRequestExtension()){this.snackBar.open("Extensions can only be requested for checked-in guests","Close",{duration:5e3,panelClass:["error-snackbar"]});return}let e={reservation:n,currentCheckOutDate:new Date(n.checkOutDate)};this.dialog.open(qe,{width:"600px",maxWidth:"90vw",data:e,disableClose:!0}).afterClosed().subscribe(s=>y(this,null,function*(){if(s?.success&&s.extension)try{yield this.loadReservation(n._id),this.snackBar.open("Extension request submitted successfully. Awaiting approval.","Close",{duration:5e3})}catch(d){console.error("Error reloading reservation after extension request:",d),this.snackBar.open("Extension request submitted, but failed to refresh data. Please refresh the page.","Close",{duration:5e3})}}))})}updateReservationStatus(n){return y(this,null,function*(){let e=this.reservation();if(!(!e||e.status===n)){if(n==="reopen"){this.reopenReservation();return}if(n==="checked_in"){this.showCheckInDialog(e);return}if(n==="checked_out"){this.performCheckOut();return}if(!this.isValidStatusTransition(e.status,n)){this.snackBar.open(this.getStatusTransitionError(e.status,n),"Close",{duration:5e3,panelClass:["error-snackbar"]});return}(n==="cancelled"||n==="no_show")&&!confirm(`Are you sure you want to change the status to ${n}?`)||(yield this.performStatusUpdate(n))}})}updatePaymentStatus(n){let e=this.reservation();if(e){if(this.isCheckedOut()){this.snackBar.open("Cannot update payment status for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}n==="paid"?this.showPaymentDialog(e):this.performPaymentStatusUpdate(n)}}showPaymentDialog(n){if(this.isCheckedOut()){this.snackBar.open("Cannot edit payment information for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}let e={reservation:n,isCheckoutFlow:!1};this.dialog.open(Be,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&this.loadReservation(n._id)})}processPayment(n){return y(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.updatePaymentInfo(e._id,n).toPromise();let t=yield this.reservationService.getReservationById(e._id).toPromise();t&&this.reservation.set(t),this.snackBar.open("Payment information updated successfully","Close",{duration:5e3})}catch(t){console.error("Error updating payment info:",t);let s="Failed to update payment information";t?.error?.error?s=t.error.error:t instanceof Error&&(s=t.message),this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performPaymentStatusUpdate(n){return y(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let t=yield this.reservationService.updateReservation(e._id,{paymentInfo:ot(nt({},e.paymentInfo),{status:n})}).toPromise();t&&(this.reservation.set(t),this.snackBar.open(`Payment status updated to ${n}`,"Close",{duration:3e3}))}catch(t){console.error("Error updating payment status:",t);let s=t instanceof Error?t.message:"Failed to update payment status";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}showCheckInDialog(n){let e={reservation:n};this.dialog.open(ai,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&this.performCheckIn(s)})}performCheckIn(n){return y(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let t=yield this.reservationService.checkInReservationWithRooms(e._id).toPromise();t&&(this.reservation.set(t),this.snackBar.open("Guest checked in successfully! Room status updated to occupied.","Close",{duration:5e3}))}catch(t){console.error("Error during check-in:",t);let s=t instanceof Error?t.message:"Failed to check in guest";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performCheckOut(){return y(this,null,function*(){let n=this.reservation();if(n){if(this.requiresPaymentBeforeCheckout(n)){this.showPaymentRequiredDialog(n);return}this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(n._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during check-out:",e);let t=e instanceof Error?e.message:"Failed to check out guest";this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}requiresPaymentBeforeCheckout(n){let e=n.pricing.balance>0,t=n.paymentInfo?.status!=="paid";return e&&t}showPaymentRequiredDialog(n){let e={reservation:n,isCheckoutFlow:!0};this.dialog.open(Be,{data:e,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(s=>{s?.confirmed&&s.paymentData&&(s.paymentData.amount!==void 0?this.processPaymentAndCheckout(s.paymentData):console.error("Expected amount-based payment data for checkout flow"))})}processPaymentAndCheckout(n){return y(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{yield this.reservationService.processPayment(e._id,{amount:n.amount,method:n.method,reference:n.reference||`PAY-${Date.now()}`}).toPromise();let t=yield this.reservationService.getReservationById(e._id).toPromise();t&&(this.reservation.set(t),this.snackBar.open(`Payment of ${this.formatCurrency(n.amount)} recorded successfully`,"Close",{duration:3e3}),t.pricing.balance<=0||t.paymentInfo?.status==="paid"?setTimeout(()=>{this.proceedWithCheckout()},1500):this.snackBar.open("Payment recorded, but outstanding balance remains. Please complete payment before checkout.","Close",{duration:5e3,panelClass:["warning-snackbar"]}))}catch(t){console.error("Error processing payment for checkout:",t);let s=t instanceof Error?t.message:"Failed to process payment";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}proceedWithCheckout(){return y(this,null,function*(){let n=this.reservation();if(n){this.statusUpdating.set(!0);try{let e=yield this.reservationService.checkOutReservationWithRooms(n._id).toPromise();e&&(this.reservation.set(e),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3}))}catch(e){console.error("Error during checkout after payment:",e);let t=e instanceof Error?e.message:"Failed to complete checkout";this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}performStatusUpdate(n){return y(this,null,function*(){let e=this.reservation();if(e){this.statusUpdating.set(!0);try{let t=yield this.reservationService.updateReservationStatus(e._id,n).toPromise();t&&(this.reservation.set(t),this.snackBar.open(`Status updated to ${n}`,"Close",{duration:3e3}))}catch(t){console.error("Error updating reservation status:",t);let s=t instanceof Error?t.message:"Failed to update status";this.snackBar.open(s,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}})}reopenReservation(){return y(this,null,function*(){let n=this.reservation();if(!n)return;if(n.status!=="cancelled"&&n.status!=="checked_out"){this.snackBar.open("Only cancelled reservations can be reopened","Close",{duration:5e3,panelClass:["error-snackbar"]});return}let e=this.storeStore.selectedStore()?._id;if(!e){this.snackBar.open("Store information not available","Close",{duration:5e3,panelClass:["error-snackbar"]});return}this.dialog.open(Ae,{width:"400px",disableClose:!0,data:{storeId:e,actionDescription:"reopen this cancelled reservation",reservationId:n._id}}).afterClosed().subscribe(s=>y(this,null,function*(){if(s&&s.authorized&&s.pin){this.statusUpdating.set(!0);try{let d=yield this.reservationService.reopenReservation(n._id,s.pin).toPromise();d&&(this.reservation.set(d),this.snackBar.open("Reservation reopened successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}))}catch(d){console.error("Error reopening reservation:",d);let _="Failed to reopen reservation";(d instanceof Error&&d.message||d&&typeof d=="object"&&d.message)&&(_=d.message),this.snackBar.open(_,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}}}))})}getAvailableStatusOptions(){let n=this.reservation()?.status,e=this.statusOptions.filter(t=>t.value!==n&&this.isValidStatusTransition(n||"",t.value));return n==="cancelled"&&e.push({value:"reopen",label:"Reopen Reservation",color:"#10b981",icon:"refresh"}),e}isValidStatusTransition(n,e){return{pending:["confirmed","cancelled","no_show"],confirmed:["checked_in","cancelled","no_show"],checked_in:["checked_out"],checked_out:[],cancelled:[],no_show:[]}[n]?.includes(e)||!1}getStatusTransitionError(n,e){switch(e){case"checked_in":return'Guests can only be checked in when reservation status is "Confirmed"';case"checked_out":return'Guests can only be checked out when reservation status is "Checked In"';case"confirmed":return n==="checked_in"?"Cannot change back to confirmed after check-in":n==="checked_out"?"Cannot change back to confirmed after check-out":"Invalid status transition";default:return`Cannot change status from "${n}" to "${e}"`}}getStatusColor(n){return{pending:"#f59e0b",confirmed:"#10b981",checked_in:"#3b82f6",checked_out:"#6b7280",cancelled:"#ef4444",no_show:"#f97316"}[n]||"#6b7280"}getStatusIcon(n){return{pending:"schedule",confirmed:"check_circle",checked_in:"login",checked_out:"logout",cancelled:"cancel",no_show:"person_off"}[n]||"help"}formatDate(n){return n?new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}formatDateTime(n){return n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}sendReservationEmail(n="details"){return y(this,null,function*(){let e=this.reservation();if(!e)return;let t=this.guestEmail();if(!t||t==="No email provided"){this.snackBar.open("No email address available for this guest","Close",{duration:5e3,panelClass:["error-snackbar"]});return}this.statusUpdating.set(!0);try{let s=yield this.reservationService.sendReservationEmail(e._id,{emailType:n}).toPromise();if(s?.success)this.snackBar.open(s.message||`${n.charAt(0).toUpperCase()+n.slice(1)} email sent successfully to ${t}`,"Close",{duration:5e3});else throw new Error("Email sending failed")}catch(s){console.error("Error sending reservation email:",s);let d=s instanceof Error?s.message:"Failed to send reservation email";this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}connectToPrinter(){return y(this,null,function*(){if(!this.bluetoothPrinterService.isBluetoothSupported()){this.snackBar.open("Web Bluetooth is not supported in this browser","Close",{duration:5e3,panelClass:["error-snackbar"]});return}try{this.statusUpdating.set(!0),yield this.bluetoothPrinterService.connectToPrinter(),this.printerConnected.set(!0);let n=this.bluetoothPrinterService.getConnectedDeviceInfo();this.snackBar.open(`Connected to printer: ${n?.name||"Unknown Printer"}`,"Close",{duration:3e3})}catch(n){console.error("Error connecting to printer:",n),this.printerConnected.set(!1);let e=n instanceof Error?n.message:"Failed to connect to printer";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.statusUpdating.set(!1)}})}disconnectFromPrinter(){return y(this,null,function*(){try{yield this.bluetoothPrinterService.disconnectPrinter(),this.printerConnected.set(!1),this.snackBar.open("Disconnected from printer","Close",{duration:3e3})}catch(n){console.error("Error disconnecting from printer:",n),this.snackBar.open("Failed to disconnect from printer","Close",{duration:3e3,panelClass:["error-snackbar"]})}})}printReservation(){return y(this,null,function*(){let n=this.reservation();if(n){if(!this.bluetoothPrinterService.isConnected())if(confirm("Printer not connected. Would you like to connect to a printer first?"))try{if(yield this.connectToPrinter(),!this.bluetoothPrinterService.isConnected())return}catch{return}else return;this.printing.set(!0);try{let e=this.storeStore.selectedStore();yield this.bluetoothPrinterService.printReservation(n,e),this.snackBar.open("Reservation printed successfully","Close",{duration:3e3})}catch(e){console.error("Error printing reservation:",e);let t=e instanceof Error?e.message:"Failed to print reservation";this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]}),t.includes("not connected")&&this.printerConnected.set(!1)}finally{this.printing.set(!1)}}})}testPrint(){return y(this,null,function*(){if(!this.bluetoothPrinterService.isConnected()){this.snackBar.open("Please connect to a printer first","Close",{duration:3e3,panelClass:["error-snackbar"]});return}this.printing.set(!0);try{yield this.bluetoothPrinterService.testPrint(),this.snackBar.open("Test print completed successfully","Close",{duration:3e3})}catch(n){console.error("Error during test print:",n);let e=n instanceof Error?n.message:"Test print failed";this.snackBar.open(e,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.printing.set(!1)}})}exportReservationToPDF(){return y(this,null,function*(){let n=this.reservation();if(n){this.exportingPDF.set(!0);try{let e=yield this.reservationService.exportReservationToPDF(n._id).toPromise();if(e){let t=window.URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=`reservation-${n.confirmationNumber}.pdf`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(t),this.snackBar.open("Reservation details exported to PDF successfully!","Close",{duration:3e3})}}catch(e){console.error("Error exporting reservation to PDF:",e);let t=e instanceof Error?e.message:"Failed to export reservation to PDF";this.snackBar.open(t,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.exportingPDF.set(!1)}}})}openPricingUpdateDialog(){let n=this.reservation();if(!n)return;if(this.isCheckedOut()){this.snackBar.open("Cannot edit pricing for checked-out reservations","Close",{duration:3e3,panelClass:["error-snackbar"]});return}let e=this.storeStore.selectedStore();if(!e?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let t={storeId:e._id,actionDescription:`update pricing for reservation ${n.confirmationNumber}`,reservationId:n._id};this.dialog.open(Ae,{data:t,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(d=>{d?.authorized&&d.pin&&this.proceedWithPricingUpdate(n)})}proceedWithPricingUpdate(n){let e={reservation:n};this.dialog.open(je,{data:e,width:"800px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!1,autoFocus:!1,panelClass:"pricing-update-dialog"}).afterClosed().subscribe(s=>{s?.success&&s.updatedReservation&&(this.reservation.set(s.updatedReservation),this.snackBar.open("Pricing updated successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))})}formatCurrency(n){if(!n&&n!==0)return"N/A";let e=this.storeStore.selectedStore(),t=e?.currencyCode||e?.currency||"USD";try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(n)}catch{return console.warn(`Invalid currency code: ${t}, falling back to USD`),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n)}}hasExtensions(){let n=this.reservation();return!!(n?.extensions&&n.extensions.length>0)}getExtensions(){return this.reservation()?.extensions||[]}hasActiveExtension(){return!!this.reservation()?.currentExtension?.isActive}getTotalExtensionCost(){let n=this.reservation();return n?.currentExtension?.isActive&&n.currentExtension?.totalExtensionCost?n.currentExtension.totalExtensionCost:this.getExtensions().filter(t=>t.status==="approved").reduce((t,s)=>t+(s.additionalCost||0),0)}getTotalExtensionNights(){let n=this.reservation();return n?.currentExtension?.isActive&&n.currentExtension?.totalExtensionNights?n.currentExtension.totalExtensionNights:this.getExtensions().filter(t=>t.status==="approved").reduce((t,s)=>t+(s.additionalNights||0),0)}getFinalTotal(){return this.reservation()?.pricing?.total||0}formatExtensionDate(n){if(!n)return"N/A";try{return(typeof n=="string"?new Date(n):n).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return console.warn("Invalid date format:",n),"Invalid Date"}}processingExtension=R(null);processingAction=R(null);approveExtension(n){return y(this,null,function*(){let e=this.reservation();if(!e)return;let t=e.extensions?.find(C=>C._id===n);if(!t){this.snackBar.open("Extension not found","Close",{duration:3e3});return}let s={extensionId:n,reservationId:e._id,extensionCost:t.additionalCost,currency:this.storeStore.selectedStore()?.currency||"USD",additionalNights:t.additionalNights},_=yield this.dialog.open(Ne,{data:s,width:"500px",disableClose:!0}).afterClosed().toPromise();if(_){this.processingExtension.set(n),this.processingAction.set("approve");try{let C=yield this.reservationService.approveExtension(e._id,n,"Extension approved from reservation details",_).toPromise();C?.reservation&&(this.reservation.set(C.reservation),this.snackBar.open("Extension approved successfully with payment information!","Close",{duration:3e3,panelClass:["success-snackbar"]}))}catch(C){console.error("Error approving extension:",C),this.snackBar.open(C.message||"Failed to approve extension","Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.processingExtension.set(null),this.processingAction.set(null)}}})}rejectExtension(n){return y(this,null,function*(){let e=this.reservation();if(!e)return;let t=prompt("Please provide a reason for rejection:");if(t){this.processingExtension.set(n),this.processingAction.set("reject");try{let s=yield this.reservationService.rejectExtension(e._id,n,t,"Extension rejected from reservation details").toPromise();s?.reservation&&(this.reservation.set(s.reservation),this.snackBar.open("Extension rejected successfully!","Close",{duration:3e3,panelClass:["success-snackbar"]}))}catch(s){console.error("Error rejecting extension:",s),this.snackBar.open(s.message||"Failed to reject extension","Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.processingExtension.set(null),this.processingAction.set(null)}}})}openRoomChangeDialog(){return y(this,null,function*(){let n=this.reservation();if(!n||this.isCheckedOut()){this.snackBar.open("Cannot change rooms for checked-out reservations","Close",{duration:3e3});return}this.dialog.open(oi,{width:"500px",maxWidth:"95vw",disableClose:!0,data:{reservationId:n._id,currentRooms:n.rooms,checkInDate:new Date(n.checkInDate).toISOString(),checkOutDate:new Date(n.checkOutDate).toISOString(),numberOfNights:n.numberOfNights,currency:this.storeStore.selectedStore()?.currency||"USD",actualCheckInDate:n.actualCheckInDate?new Date(n.actualCheckInDate).toISOString():void 0,reservationStatus:n.status}}).afterClosed().subscribe(t=>y(this,null,function*(){t&&(yield this.processRoomChange(t))}))})}processRoomChange(n){return y(this,null,function*(){let e=this.reservation();if(e)try{if(this.loading.set(!0),n.pricingAdjustment.requiresPayment){let s=this.storeStore.selectedStore()?.currency||"USD";if(!(yield this.dialog.open(Be,{width:"500px",disableClose:!0,data:{reservation:e,amount:n.pricingAdjustment.difference,title:"Room Change - Additional Payment Required",description:`Additional payment of ${s}${n.pricingAdjustment.difference.toLocaleString()} required for room upgrade`,isCheckoutFlow:!1}}).afterClosed().toPromise())){this.snackBar.open("Room change cancelled - payment not processed","Close",{duration:3e3});return}}let t=yield this.reservationService.changeRooms(e._id,n).toPromise();t.success&&(this.reservation.set(t.data),this.snackBar.open("Rooms changed successfully","Close",{duration:3e3}),yield this.loadReservation(e._id))}catch(t){console.error("Error processing room change:",t);let s=t?.error?.error||t?.error?.message||t?.message||"Failed to change rooms";this.snackBar.open(s,"Close",{duration:5e3})}finally{this.loading.set(!1)}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=B({type:r,selectors:[["app-reservation-details"]],decls:80,vars:23,consts:[["actionsMenu","matMenu"],["paymentMenu","matMenu"],["emailMenu","matMenu"],["printMenu","matMenu"],["statusMenu","matMenu"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","border-b","border-blue-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-6"],[1,"flex","items-center","gap-4"],["type","button",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"click"],[1,"flex","items-center","gap-3"],[1,"flex","justify-center","items-center","py-12","bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],[1,"!shadow-xl","!border","!border-gray-200","!rounded-lg"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"matMenuTriggerFor"],[1,"mr-3","!text-gray-600"],[1,"ml-auto","!text-gray-400"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-red-600","animate-spin"],[1,"mr-3","!text-red-600"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","border-b","border-gray-100"],[1,"px-3","py-2","text-xs","text-gray-400","italic","flex","items-center","gap-2"],[1,"px-3","py-2","text-xs","text-gray-400","italic"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click"],[1,"mr-3","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors"],[1,"px-3","py-2","text-xs","text-gray-600","bg-gray-50","border-t","border-gray-100","mt-1"],[1,"px-3","py-2","text-xs","border-b","border-gray-100"],[1,"flex","items-center","gap-2","text-green-600"],[1,"flex","items-center","gap-2","text-gray-500"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-blue-600","animate-spin"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click","disabled"],[1,"mr-3","!text-green-600"],[1,"px-3","py-2","border-t","border-gray-100","mt-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"disabled"],[1,"text-3xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600"],[1,"relative"],[1,"px-3","py-1","rounded-full","text-sm","font-medium","border-2","flex","items-center","gap-2","hover:opacity-80","transition-all","duration-200","disabled:opacity-50",3,"matMenuTriggerFor","disabled"],[1,"text-sm","animate-spin"],[1,"text-sm",3,"color"],[1,"text-xs","opacity-60"],["mat-menu-item",""],[1,"px-3","py-2","text-xs","text-amber-600","bg-amber-50","border-t","border-amber-100","mt-1"],[1,"px-3","py-2","text-xs","text-blue-600","bg-blue-50","border-t","border-blue-100","mt-1"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-green-700","bg-green-50","border","border-green-200","rounded-lg","hover:bg-green-100","hover:border-green-300","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"matMenuTriggerFor"],[1,"text-sm"],["mat-menu-item","",3,"click"],[1,"mr-3","text-base"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-blue-700","bg-blue-50","border","border-blue-200","rounded-lg","hover:bg-blue-100","hover:border-blue-300","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"text-lg"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-green-700","bg-green-50","border","border-green-200","rounded-lg","hover:bg-green-100","hover:border-green-300","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["diameter","40",1,"!text-blue-600"],[1,"ml-3","text-gray-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-6","text-center"],[1,"w-16","h-16","bg-red-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-red-500"],[1,"text-lg","font-semibold","text-red-900","mb-2"],[1,"text-red-700","mb-4"],["type","button",1,"bg-red-600","hover:bg-red-700","text-white","px-4","py-2","rounded-lg","font-medium","transition-colors","duration-200",3,"click"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-2","space-y-6"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"text-blue-600"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-green-600"],[1,"flex","items-center","justify-between"],[1,"text-purple-600"],["mat-icon-button","","matTooltip","Change Rooms",1,"text-blue-600","hover:bg-blue-50","transition-colors","duration-200"],[1,"overflow-x-auto"],[1,"min-w-full"],[1,"border-b","border-gray-200"],[1,"text-left","py-3","px-4","font-semibold","text-gray-700"],[1,"border-b","border-gray-100","hover:bg-gray-50"],[1,"space-y-6"],[1,"bg-gradient-to-r","from-purple-50","to-purple-100","px-6","py-4","border-b","border-purple-200"],[1,"flex","justify-between","items-center"],[1,"text-xs","text-gray-500","font-normal"],["mat-icon-button","",1,"text-gray-600","hover:text-purple-600","hover:bg-purple-50","transition-colors","duration-200",3,"click","matTooltip","disabled"],[1,"space-y-3"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"font-medium","text-gray-900"],[1,"border-gray-200"],[1,"flex","justify-between","text-lg","font-semibold"],[1,"text-gray-900"],[1,"font-medium","text-green-600"],[1,"font-medium"],[1,"mt-8","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"bg-red-50","border","border-red-200","rounded-lg","overflow-hidden"],[1,"bg-gradient-to-r","from-orange-50","to-amber-50","px-6","py-4","border-b","border-orange-200"],[1,"text-orange-600"],[1,"ml-2","px-2","py-1","bg-orange-100","text-orange-700","text-xs","font-medium","rounded-full"],[1,"space-y-4"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200"],[1,"mt-6","p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"flex","items-start","justify-between","mb-3"],[1,"w-10","h-10","bg-orange-100","rounded-full","flex","items-center","justify-center"],[1,"text-orange-600","text-sm"],[1,"px-3","py-1","rounded-full","text-xs","font-medium","border",3,"ngClass"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","mb-4"],[1,"text-sm","text-gray-900"],[1,"text-sm","text-gray-900","font-medium"],[1,"text-sm","font-medium","text-orange-600"],[1,"mb-3"],[1,"mt-3","flex","gap-2"],[1,"mt-3","p-3","bg-red-50","border","border-red-200","rounded"],[1,"text-sm","text-gray-600","bg-white","p-3","rounded","border"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-green-600","border","border-green-600","rounded-lg","hover:bg-green-700","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-red-600","bg-white","border","border-red-300","rounded-lg","hover:bg-red-50","hover:border-red-400","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"flex","items-center","gap-2","text-sm","text-green-600"],[1,"mt-3","p-3","bg-blue-50","border","border-blue-200","rounded"],[1,"flex","items-center","gap-2","text-sm","text-blue-600","mb-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3","text-sm"],[1,"ml-2","px-2","py-1","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"ml-2","font-medium","text-gray-900"],[1,"mt-2","pt-2","border-t","border-blue-200"],[1,"ml-2","font-mono","text-sm","text-gray-900"],[1,"text-gray-600","text-sm"],[1,"mt-1","text-sm","text-gray-700"],[1,"flex","items-center","gap-2","text-sm","text-red-600","mb-1"],[1,"text-sm","text-red-700"],[1,"text-xs","text-red-500","mt-1"],[1,"flex","items-center","gap-2","mb-2"],[1,"font-medium","text-green-800"],[1,"text-sm","text-green-700"],["mat-icon-button","","matTooltip","Change Rooms",1,"text-blue-600","hover:bg-blue-50","transition-colors","duration-200",3,"click"],[1,"py-3","px-4","font-medium","text-gray-900"],[1,"py-3","px-4","text-gray-600"],[1,"font-medium","text-orange-600"],["matTooltip","Payment options",1,"p-2","text-gray-600","hover:text-gray-900","hover:bg-white/60","rounded-lg","transition-all","duration-200",3,"matMenuTriggerFor"],["matTooltip","Cannot edit payment info for checked-out reservations",1,"p-2","text-gray-400"],[1,"flex","items-center","gap-2"],[1,"text-sm","animate-spin","text-blue-600"],[1,"inline-flex","px-2","py-1","text-xs","font-medium","rounded-full"],[1,"py-3","px-4"],[1,"text-gray-700"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"bg-gray-50","border","border-gray-200","rounded-lg","p-4"],[1,"bg-red-100","px-6","py-4","border-b","border-red-200"],[1,"text-lg","font-semibold","text-red-900","flex","items-center","gap-2"],[1,"text-red-600"],[1,"block","text-sm","font-medium","text-red-700","mb-1"],[1,"text-sm","text-red-600"],[1,"!border-gray-200","my-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click"],[1,"!text-sm"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors"],[1,"mr-3","!text-base","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"click"],[1,"mr-3","!text-base"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-purple-50","hover:!text-purple-700","!transition-colors",3,"click"],[1,"mr-3","!text-purple-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors","w-full",3,"click","disabled"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors","w-full",3,"click","disabled"]],template:function(e,t){if(e&1){let s=P();o(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"button",9),h("click",function(){return E(s),S(t.goBack())}),o(5,"mat-icon"),a(6,"arrow_back"),i()(),o(7,"div"),c(8,an,4,1)(9,rn,4,0),i()(),c(10,vn,23,18,"div",10),i()()(),c(11,_n,4,0,"div",11),c(12,xn,11,1,"div",12),c(13,_o,162,69,"div",12),o(14,"mat-menu",13,0),c(16,xo,5,0,"button",14),o(17,"button",15)(18,"mat-icon",16),a(19,"print"),i(),o(20,"span"),a(21,"Print Details"),i(),o(22,"mat-icon",17),a(23,"chevron_right"),i()(),o(24,"button",15)(25,"mat-icon",16),a(26,"email"),i(),o(27,"span"),a(28,"Send Email"),i(),o(29,"mat-icon",17),a(30,"chevron_right"),i()(),c(31,fo,5,1,"button",18),o(32,"button",19),h("click",function(){return E(s),S(t.exportReservationToPDF())}),c(33,bo,2,0,"mat-icon",20)(34,ho,2,0,"mat-icon",21),o(35,"span"),a(36),i()(),c(37,Co,6,0),i(),o(38,"mat-menu",13,1)(40,"div",22),a(41," Update Payment Information "),i(),c(42,yo,5,0,"div",23)(43,Eo,2,0,"div",24)(44,ko,9,0),i(),o(45,"mat-menu",13,2)(47,"div",22),a(48," Email Options "),i(),o(49,"button",25),h("click",function(){return E(s),S(t.sendReservationEmail("details"))}),o(50,"mat-icon",26),a(51,"description"),i(),o(52,"span"),a(53,"Send Reservation Details"),i()(),c(54,Do,5,0,"button",27),c(55,Po,5,0,"button",28),o(56,"div",29),a(57),i()(),o(58,"mat-menu",13,3)(60,"div",22),a(61," Print Options "),i(),o(62,"div",30),c(63,Mo,5,0,"div",31)(64,Ro,5,0,"div",32),i(),o(65,"button",33),h("click",function(){return E(s),S(t.printReservation())}),c(66,wo,2,0,"mat-icon",34)(67,Io,2,0,"mat-icon",26),o(68,"span"),a(69),i()(),o(70,"button",35),h("click",function(){return E(s),S(t.testPrint())}),o(71,"mat-icon",36),a(72,"check_circle"),i(),o(73,"span"),a(74,"Test Print"),i()(),o(75,"div",37),c(76,Oo,5,1,"button",38)(77,To,5,1,"button",39),i(),o(78,"div",29),a(79," \u{1F5A8}\uFE0F Uses Bluetooth thermal printers with ESC/POS commands "),i()()}if(e&2){let s=q(46),d=q(59);l(8),m(t.reservation()?8:9),l(2),m(t.reservation()&&!t.loading()?10:-1),l(),m(t.loading()?11:-1),l(),m(t.error()&&!t.loading()?12:-1),l(),m(t.reservation()&&!t.loading()&&!t.error()?13:-1),l(3),m(t.canEdit()?16:-1),l(),b("matMenuTriggerFor",d),l(7),b("matMenuTriggerFor",s),l(7),m(t.canRequestExtension()?31:-1),l(),b("disabled",t.exportingPDF()||t.statusUpdating()),l(),m(t.exportingPDF()?33:34),l(3),p(t.exportingPDF()?"Exporting...":"Export to PDF"),l(),m(t.canDelete()?37:-1),l(5),m(t.isCheckedOut()?42:t.getAvailablePaymentStatusOptions().length===0?43:44),l(12),m(t.reservation()&&(t.reservation().status==="confirmed"||t.reservation().status==="checked_in"||t.reservation().status==="checked_out")?54:-1),l(),m(t.reservation()&&(t.reservation().status==="checked_in"||t.reservation().status==="checked_out")?55:-1),l(2),v(" \u{1F4E7} Email will be sent to: ",t.guestEmail()," "),l(6),m(t.printerConnected()?63:64),l(2),b("disabled",t.printing()||t.statusUpdating()),l(),m(t.printing()?66:67),l(3),p(t.printing()?"Printing...":"Print Reservation"),l(),b("disabled",t.printing()||t.statusUpdating()||!t.printerConnected()),l(6),m(t.printerConnected()?76:77)}},dependencies:[j,Et,ke,z,Nt,H,L,Jt,Xt,Yt,Wt,Lt,$t,Ht,Re,Me,we,$,W,pe,Ie,Zt,Qt,ye,Z],styles:[".reservation-details-container[_ngcontent-%COMP%]{padding:24px;max-width:1200px;margin:0 auto}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]{margin:24px auto;max-width:400px}.reservation-details-container[_ngcontent-%COMP%]   .error-card[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#f44336}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]{box-shadow:0 2px 8px #0000001a;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{padding:24px 24px 0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:16px 24px}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{background-color:#f8f9fa;border-top:1px solid #e9ecef;margin:0}.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{font-weight:500;border-radius:20px;padding:8px 16px;font-size:12px;text-transform:uppercase;letter-spacing:.5px}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#1f2937}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin-top:4px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e5e7eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:#3b82f6;font-weight:600}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-body-content{padding:0}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table{box-shadow:none;border:1px solid #e5e7eb;border-radius:8px;overflow:hidden}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-row{background-color:#f8f9fa}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-header-cell{font-weight:600;color:#374151;border-bottom:1px solid #e5e7eb;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-cell{color:#1f2937;border-bottom:1px solid #f3f4f6;font-size:14px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:hover{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-table .mat-mdc-row:last-child .mat-mdc-cell{border-bottom:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip{font-size:11px;font-weight:500;height:24px;border-radius:12px}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-chip.status-chip{border:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary{background-color:#3b82f6;color:#fff}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-raised-button.mat-primary:hover{background-color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-button{border-radius:8px;font-weight:500;text-transform:none}.reservation-details-container[_ngcontent-%COMP%]     .mat-mdc-menu-panel{border-radius:8px;box-shadow:0 4px 16px #0000001f}.reservation-details-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]{display:grid}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-1[_ngcontent-%COMP%]{grid-template-columns:repeat(1,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .grid-cols-3[_ngcontent-%COMP%]{grid-template-columns:repeat(3,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .gap-2[_ngcontent-%COMP%]{gap:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-4[_ngcontent-%COMP%]{gap:1rem}.reservation-details-container[_ngcontent-%COMP%]   .gap-6[_ngcontent-%COMP%]{gap:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-1[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.25rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-2[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .space-y-6[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:1.5rem}@media(min-width:768px){.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.reservation-details-container[_ngcontent-%COMP%]   .md\\\\[_ngcontent-%COMP%]:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}}.reservation-details-container[_ngcontent-%COMP%]   .flex[_ngcontent-%COMP%]{display:flex}.reservation-details-container[_ngcontent-%COMP%]   .items-center[_ngcontent-%COMP%]{align-items:center}.reservation-details-container[_ngcontent-%COMP%]   .items-start[_ngcontent-%COMP%]{align-items:flex-start}.reservation-details-container[_ngcontent-%COMP%]   .justify-center[_ngcontent-%COMP%]{justify-content:center}.reservation-details-container[_ngcontent-%COMP%]   .justify-between[_ngcontent-%COMP%]{justify-content:space-between}.reservation-details-container[_ngcontent-%COMP%]   .w-full[_ngcontent-%COMP%]{width:100%}.reservation-details-container[_ngcontent-%COMP%]   .mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.reservation-details-container[_ngcontent-%COMP%]   .ml-2[_ngcontent-%COMP%]{margin-left:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .p-3[_ngcontent-%COMP%]{padding:.75rem}.reservation-details-container[_ngcontent-%COMP%]   .p-4[_ngcontent-%COMP%]{padding:1rem}.reservation-details-container[_ngcontent-%COMP%]   .py-8[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}.reservation-details-container[_ngcontent-%COMP%]   .pb-4[_ngcontent-%COMP%]{padding-bottom:1rem}.reservation-details-container[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center}.reservation-details-container[_ngcontent-%COMP%]   .text-sm[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem}.reservation-details-container[_ngcontent-%COMP%]   .text-lg[_ngcontent-%COMP%]{font-size:1.125rem;line-height:1.75rem}.reservation-details-container[_ngcontent-%COMP%]   .text-4xl[_ngcontent-%COMP%]{font-size:2.25rem;line-height:2.5rem}.reservation-details-container[_ngcontent-%COMP%]   .font-medium[_ngcontent-%COMP%]{font-weight:500}.reservation-details-container[_ngcontent-%COMP%]   .font-semibold[_ngcontent-%COMP%]{font-weight:600}.reservation-details-container[_ngcontent-%COMP%]   .rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.reservation-details-container[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .border-t[_ngcontent-%COMP%]{border-top-width:1px}.reservation-details-container[_ngcontent-%COMP%]   .overflow-x-auto[_ngcontent-%COMP%]{overflow-x:auto}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#111827}.reservation-details-container[_ngcontent-%COMP%]   .text-blue-600[_ngcontent-%COMP%]{color:#2563eb}.reservation-details-container[_ngcontent-%COMP%]   .text-green-600[_ngcontent-%COMP%]{color:#059669}.reservation-details-container[_ngcontent-%COMP%]   .text-purple-600[_ngcontent-%COMP%]{color:#9333ea}.reservation-details-container[_ngcontent-%COMP%]   .text-orange-600[_ngcontent-%COMP%]{color:#ea580c}.reservation-details-container[_ngcontent-%COMP%]   .text-red-600[_ngcontent-%COMP%]{color:#dc2626}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .bg-red-50[_ngcontent-%COMP%]{background-color:#fef2f2}.reservation-details-container[_ngcontent-%COMP%]   .border-red-200[_ngcontent-%COMP%]{border-color:#fecaca}.reservation-details-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#6b7280}.reservation-details-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{opacity:.5}.reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:focus{outline:2px solid #3b82f6;outline-offset:2px}@media print{.reservation-details-container[_ngcontent-%COMP%]   .header-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .reservation-details-container[_ngcontent-%COMP%]   .mat-mdc-menu-trigger[_ngcontent-%COMP%]{display:none!important}.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:none;border:1px solid #ccc}}@media(prefers-color-scheme:dark){.reservation-details-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{background-color:#374151;color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-900[_ngcontent-%COMP%]{color:#f9fafb}.reservation-details-container[_ngcontent-%COMP%]   .text-gray-500[_ngcontent-%COMP%]{color:#9ca3af}.reservation-details-container[_ngcontent-%COMP%]   .bg-gray-50[_ngcontent-%COMP%]{background-color:#4b5563}}"]})};export{mi as ReservationDetailsComponent};
