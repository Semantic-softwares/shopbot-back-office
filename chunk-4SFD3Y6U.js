import{a as T}from"./chunk-TNPSEYEN.js";import{a as Re}from"./chunk-OMPSTANM.js";import{a as S,b as Ee,c as De,d as Pe}from"./chunk-CPK5HEAO.js";import"./chunk-HAIV243A.js";import{a as Te}from"./chunk-HHC6NUQG.js";import"./chunk-MS4AQ6UA.js";import{a as h,b as we}from"./chunk-O45P3V5P.js";import{a as de,b as pe,c as ge,d as Ce,e as ue,f as fe,g as _e,h as Me,i as he,j as Se,k as ye,l as xe}from"./chunk-57X727ZR.js";import"./chunk-Q5UDPT6U.js";import"./chunk-3RK6DDJD.js";import{a as be,b as ve}from"./chunk-CNWF3C72.js";import"./chunk-MLUPCCQ4.js";import"./chunk-U7HTFG6P.js";import"./chunk-VIUFJ2AI.js";import"./chunk-Q4AGDAAP.js";import{b as Z,c as ee,d as te}from"./chunk-2QJHH5H3.js";import"./chunk-UQ6ZHJLZ.js";import{c as se}from"./chunk-FZ2JUGBK.js";import{a as ae,b as re,c as le,d as me}from"./chunk-AI6BMZ3D.js";import"./chunk-TGNPMYMP.js";import"./chunk-ISZZXQLC.js";import{d as ce}from"./chunk-KYJY5VKP.js";import"./chunk-WYGWPNHQ.js";import{B as U,I as X,b as W,g as q,l as z,y as G}from"./chunk-XY46NWPA.js";import{a as Y,c as J,g as K}from"./chunk-Y7KHCUH6.js";import{a as ie,b as oe}from"./chunk-VJDAHTGR.js";import{l as $,m as B,n as j}from"./chunk-FJR6RDUA.js";import{c as ne}from"./chunk-HXGWD5KU.js";import"./chunk-DX7AZUD7.js";import"./chunk-LJSEVW7O.js";import{c as L}from"./chunk-QQ5WRBM6.js";import{r as A}from"./chunk-5PWABXJE.js";import{$b as v,Db as P,Eb as R,Jb as d,Kb as o,Lb as n,Mb as p,Nb as g,Ob as C,Qb as I,Ub as f,Vb as _,Z as E,Zb as w,_a as l,_b as b,dc as O,ec as k,fa as u,ic as r,jc as M,kb as D,kc as F,la as y,ma as x,mc as H,nc as V,oc as N,qb as s,sc as Q}from"./chunk-FR2FBSQW.js";import"./chunk-EQDQRRRY.js";var Oe=()=>[5,10,25,100];function ke(e,i){e&1&&(o(0,"div",9),p(1,"mat-spinner",12),n())}function Fe(e,i){e&1&&p(0,"app-no-record",10)}function He(e,i){e&1&&(o(0,"th",25),r(1,"Name"),n())}function Ve(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.name)}}function Ne(e,i){e&1&&(o(0,"th",25),r(1,"Color"),n())}function Qe(e,i){if(e&1&&(o(0,"td",26)(1,"div",27),r(2),n()()),e&2){let t=i.$implicit;l(),k("background-color",t.color),l(),F(" ",t.color," ")}}function Ae(e,i){e&1&&(o(0,"th",25),r(1,"Icon"),n())}function Le(e,i){if(e&1&&(o(0,"td",26)(1,"mat-icon"),r(2),n()()),e&2){let t=i.$implicit;l(2),M(t==null?null:t.icon)}}function $e(e,i){e&1&&(o(0,"th",25),r(1,"Items"),n())}function Be(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.items)}}function je(e,i){e&1&&(o(0,"th",28),r(1,"Actions"),n())}function We(e,i){if(e&1){let t=I();o(0,"td",26)(1,"button",29)(2,"mat-icon"),r(3,"more_vert"),n()(),o(4,"mat-menu",null,0)(6,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.onEditCategory(m))}),o(7,"mat-icon"),r(8,"edit"),n(),o(9,"span"),r(10,"Edit"),n()(),o(11,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.deleteCategory(m))}),o(12,"mat-icon"),r(13,"delete"),n(),o(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=O(5);l(),d("matMenuTriggerFor",t)}}function qe(e,i){e&1&&p(0,"tr",31)}function ze(e,i){e&1&&p(0,"tr",32)}function Ge(e,i){if(e&1&&(o(0,"div",11)(1,"table",13),g(2,14),s(3,He,2,0,"th",15)(4,Ve,2,1,"td",16),C(),g(5,17),s(6,Ne,2,0,"th",15)(7,Qe,3,3,"td",16),C(),g(8,18),s(9,Ae,2,0,"th",15)(10,Le,3,1,"td",16),C(),g(11,19),s(12,$e,2,0,"th",15)(13,Be,2,1,"td",16),C(),g(14,20),s(15,je,2,0,"th",21)(16,We,16,1,"td",16),C(),s(17,qe,1,0,"tr",22)(18,ze,1,0,"tr",23),n(),p(19,"mat-paginator",24),n()),e&2){let t=_();l(),d("dataSource",t.dataSource),l(16),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns),l(),d("pageSizeOptions",Q(4,Oe))}}var Ie=class e{displayedColumns=["name","color","icon","items","actions"];dataSource;searchText="";dialog=u(se);router=u(L);categoryService=u(Re);storeStore=u(ne);paginator;sort;categories=ce({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:i})=>this.categoryService.getStoreMenus(i.storeId).pipe(E(t=>{this.dataSource=new xe(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))});applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase()}addCategory(){this.dialog.open(T,{width:"500px",data:{isEdit:!1}}).afterClosed().subscribe(t=>{t&&this.categories.reload()})}onEditCategory(i){this.dialog.open(T,{width:"500px",data:{isEdit:!0,category:i}}).afterClosed().subscribe(a=>{a&&this.categories.reload()})}deleteCategory(i){this.dialog.open(Pe,{width:"350px",data:{message:`Are you sure you want to delete ${i.name}?`}}).afterClosed().subscribe(a=>{a&&(console.log("Category to delete:",i),this.categoryService.deleteMenu(i._id).subscribe({next:()=>{console.log("Category deleted successfully"),this.categories.reload()}}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-categories"]],viewQuery:function(t,a){if(t&1&&(w(h,5),w(S,5)),t&2){let m;b(m=v())&&(a.paginator=m.first),b(m=v())&&(a.sort=m.first)}},decls:14,vars:2,consts:[["menu","matMenu"],[1,"categories-container","!bg-white"],[1,"!bg-white"],[1,"actions-row"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Search categories",3,"keyup","ngModelChange","ngModel"],[1,"buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","category","title","No Categories","message","No categories found matching your criteria."],[1,"table-container","!bg-white"],["diameter","40"],["mat-table","","matSort","",1,"!bg-white",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","color"],["matColumnDef","icon"],["matColumnDef","items"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of categories",1,"!bg-white",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"color-preview"],["mat-header-cell","",1,"w-20"],["mat-icon-button","","aria-label","Category actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Search"),n(),o(7,"input",6),f("keyup",function(c){return a.applyFilter(c)}),N("ngModelChange",function(c){return V(a.searchText,c)||(a.searchText=c),c}),n()()(),o(8,"div",7)(9,"button",8),f("click",function(){return a.addCategory()}),r(10,"+ ADD CATEGORY"),n()()(),P(11,ke,2,0,"div",9)(12,Fe,1,0,"app-no-record",10)(13,Ge,20,5,"div",11),n()()),t&2&&(l(7),H("ngModel",a.searchText),l(4),R(a.categories.isLoading()?11:a.categories.hasValue()&&a.categories.value().length===0?12:a.categories.hasValue()?13:-1))},dependencies:[A,ye,de,ge,_e,Ce,pe,Me,ue,fe,he,Se,we,h,De,S,Ee,K,Y,J,Z,X,U,te,ee,j,B,$,oe,ie,me,re,ae,le,ve,be,Te,G,W,q,z],styles:[".categories-container[_ngcontent-%COMP%]{margin:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:16px}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.categories-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;display:inline-block;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5)}"]})};export{Ie as CategoriesComponent};
