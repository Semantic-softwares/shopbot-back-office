import{c as J,d as K}from"./chunk-IS37LNAK.js";import{a as G,b as L,e as Y,h as H}from"./chunk-QJ2P7YZL.js";import"./chunk-LXD47U2C.js";import{a as Q,b as U}from"./chunk-ZG44B3L4.js";import{B as A,b as N,d as g,g as P,h as D,m as B,s as q,t as j,y as O,z}from"./chunk-SZWYIW32.js";import"./chunk-CTT4BYCX.js";import{a as M}from"./chunk-V7ZBVJLR.js";import{a as V}from"./chunk-T4ACDKLD.js";import"./chunk-5QCN73SK.js";import"./chunk-NQRUH5DO.js";import{h as I}from"./chunk-MESJBQC5.js";import"./chunk-QEF3JOQ3.js";import"./chunk-LSROOOYO.js";import"./chunk-7NDZPDVA.js";import{b as R,c as F}from"./chunk-OWLRGWNJ.js";import{$ as w,Z as T}from"./chunk-OS2CYUJN.js";import{e as C,g as E}from"./chunk-WFEXX4HI.js";import{r as _}from"./chunk-U2P6GFP5.js";import{$a as l,Gb as s,Hb as u,Mb as c,Nb as e,Ob as t,Pb as f,Wb as y,_b as S,ac as x,ea as m,ja as v,ka as b,ob as h,pc as i,qc as k,va as p}from"./chunk-IQSYHSID.js";import"./chunk-EQDQRRRY.js";function X(n,o){n&1&&(e(0,"mat-error"),i(1,"Token is required"),t())}function Z(n,o){n&1&&(e(0,"mat-error"),i(1,"Token must be 6 digits"),t())}function $(n,o){n&1&&(e(0,"span",30),f(1,"mat-spinner",34),i(2," Verifying... "),t())}function ee(n,o){n&1&&i(0," Verify Token ")}function te(n,o){if(n&1){let r=y();e(0,"h2",21),i(1,"Enter verification code"),t(),e(2,"p",22),i(3,"Enter the 6-digit token sent to your email."),t(),e(4,"div",23)(5,"mat-icon",24),i(6,"mail"),t(),e(7,"span"),i(8,"Token sent to: "),e(9,"strong"),i(10),t()()(),e(11,"form",25),S("ngSubmit",function(){v(r);let a=x();return b(a.onSubmit())}),e(12,"mat-form-field",26)(13,"mat-label"),i(14,"Reset Token"),t(),f(15,"input",27),e(16,"mat-icon",28),i(17,"vpn_key"),t(),s(18,X,2,0,"mat-error"),s(19,Z,2,0,"mat-error"),t(),e(20,"button",29),s(21,$,3,0,"span",30)(22,ee,1,0),t(),e(23,"div",31)(24,"p",32),i(25,"Didn't receive the token?"),t(),e(26,"a",33),i(27," Request a new one "),t()()()}if(n&2){let r,d,a=x();l(10),k(a.email()),l(),c("formGroup",a.verifyTokenForm),l(7),u((r=a.verifyTokenForm.get("token"))!=null&&r.hasError("required")?18:-1),l(),u((d=a.verifyTokenForm.get("token"))!=null&&d.hasError("minlength")?19:-1),l(),c("disabled",!a.verifyTokenForm.valid||a.loading()),l(),u(a.loading()?21:22)}}function ie(n,o){n&1&&(e(0,"div",6)(1,"div",35)(2,"mat-icon",36),i(3,"verified_user"),t()(),e(4,"h2",21),i(5,"Token Verified!"),t(),e(6,"p",37),i(7," Redirecting to reset your password... "),t(),f(8,"mat-spinner",38),t())}var W=class n{fb=m(z);authService=m(V);snackBar=m(M);router=m(E);route=m(C);loading=p(!1);verified=p(!1);email=p("");verifyTokenForm=this.fb.group({token:["",[g.required,g.minLength(6)]]});ngOnInit(){this.route.queryParams.subscribe(o=>{o.email&&this.email.set(o.email)})}onSubmit(){if(this.verifyTokenForm.valid&&this.email()){this.loading.set(!0);let{token:o}=this.verifyTokenForm.value;this.authService.verifyResetToken(this.email(),o).subscribe({next:r=>{this.loading.set(!1),this.verified.set(!0),this.snackBar.open("Token verified successfully!","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),setTimeout(()=>{this.router.navigate(["/auth/reset-password"],{queryParams:{email:this.email(),token:o}})},2e3)},error:r=>{this.loading.set(!1),this.verified.set(!1),this.snackBar.open(r.error?.msg||r.message||"Invalid token. Please try again.","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=h({type:n,selectors:[["app-verify-reset-token"]],decls:50,vars:1,consts:[[1,"min-h-screen","w-full","flex","flex-col","lg:flex-row"],[1,"w-full","lg:w-1/2","flex","flex-col","justify-center","px-6","py-12","lg:px-16","xl:px-24","bg-white"],[1,"mb-8"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-500","mt-1"],[1,"max-w-md"],[1,"text-center","py-8"],[1,"hidden","lg:flex","lg:w-1/2","bg-gradient-to-br","from-blue-600","via-blue-700","to-indigo-800","relative","overflow-hidden"],[1,"absolute","inset-0","opacity-10"],[1,"absolute","top-0","left-0","w-96","h-96","bg-white","rounded-full","-translate-x-1/2","-translate-y-1/2"],[1,"absolute","bottom-0","right-0","w-80","h-80","bg-white","rounded-full","translate-x-1/3","translate-y-1/3"],[1,"absolute","top-1/2","left-1/2","w-64","h-64","bg-white","rounded-full","-translate-x-1/2","-translate-y-1/2"],[1,"relative","z-10","flex","flex-col","justify-center","px-12","xl:px-16","text-white"],[1,"mb-10"],[1,"text-3xl","xl:text-4xl","font-bold","leading-tight","mb-4"],[1,"text-blue-200","text-lg"],[1,"grid","grid-cols-2","gap-6"],[1,"bg-white/10","backdrop-blur-sm","rounded-xl","p-5"],["fontSet","material-icons-outlined",1,"text-blue-300","text-3xl","mb-3"],[1,"font-semibold","text-white","mb-1"],[1,"text-blue-200","text-sm"],[1,"text-2xl","font-semibold","text-gray-800","mb-2"],[1,"text-gray-500","mb-8"],[1,"bg-blue-50","text-blue-700","text-sm","p-4","rounded-lg","mb-6","flex","items-center","gap-3"],["fontSet","material-icons-outlined",1,"text-blue-600"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","token","placeholder","Enter 6-digit token","type","text","maxlength","6",1,"text-center","text-2xl","tracking-widest"],["matSuffix","","fontSet","material-icons-outlined"],["mat-flat-button","","color","primary","type","submit",1,"w-full","h-12","text-base",3,"disabled"],[1,"flex","items-center","justify-center","gap-2"],[1,"text-center","mt-6"],[1,"text-sm","text-gray-500","mb-2"],["href","/auth/forgot-password",1,"text-sm","font-medium","text-blue-600","hover:text-blue-800"],["diameter","20"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-6"],[1,"text-green-600","text-3xl"],[1,"text-gray-500","mb-4"],["diameter","32",1,"mx-auto"]],template:function(r,d){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"ShopBot"),t(),e(5,"p",4),i(6,"Verify Reset Token"),t()(),e(7,"div",5),s(8,te,28,6)(9,ie,9,0,"div",6),t()(),e(10,"div",7)(11,"div",8),f(12,"div",9)(13,"div",10)(14,"div",11),t(),e(15,"div",12)(16,"div",13)(17,"h2",14),i(18," Almost there! "),t(),e(19,"p",15),i(20," Verify your identity to continue with the password reset process. "),t()(),e(21,"div",16)(22,"div",17)(23,"mat-icon",18),i(24,"verified_user"),t(),e(25,"h4",19),i(26,"Secure Verification"),t(),e(27,"p",20),i(28,"One-time token for your security"),t()(),e(29,"div",17)(30,"mat-icon",18),i(31,"schedule"),t(),e(32,"h4",19),i(33,"Time Limited"),t(),e(34,"p",20),i(35,"Token expires for added security"),t()(),e(36,"div",17)(37,"mat-icon",18),i(38,"lock"),t(),e(39,"h4",19),i(40,"Encrypted"),t(),e(41,"p",20),i(42,"Your data is always protected"),t()(),e(43,"div",17)(44,"mat-icon",18),i(45,"refresh"),t(),e(46,"h4",19),i(47,"Resend Token"),t(),e(48,"p",20),i(49,"Request a new code if needed"),t()()()()()()),r&2&&(l(8),u(d.verified()?9:8))},dependencies:[_,I,w,T,K,J,H,G,L,Y,A,B,N,P,D,O,j,q,F,R,U,Q],styles:[".token-input[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;letter-spacing:.5rem;font-weight:700}"]})};export{W as VerifyResetTokenComponent};
