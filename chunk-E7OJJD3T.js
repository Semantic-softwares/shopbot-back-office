import{a as ye}from"./chunk-YDQODEUY.js";import{c as be}from"./chunk-UAGP56HF.js";import"./chunk-QXGZPCFY.js";import{a as ve,c as xe,d as ge,e as he}from"./chunk-5XJCC6NP.js";import{B as se,D as ce,b as ee,g as te,h as ne,m as re,p as ie,s as ae,t as oe,u as le,v as de}from"./chunk-CXVWFC6J.js";import{a as me,b as ue}from"./chunk-7C3RSL2D.js";import"./chunk-VIOSJ367.js";import"./chunk-TEL7Y7UN.js";import{p as Q,q as X}from"./chunk-FSA22CPB.js";import{b as pe}from"./chunk-JTAKXPWP.js";import"./chunk-M2YK6UF7.js";import"./chunk-BVQK7CK4.js";import{a as Y}from"./chunk-LJSEVW7O.js";import"./chunk-TQDHD3WD.js";import{B as K,q as J,s as Z,t as q}from"./chunk-DWCYWQVU.js";import{Cc as u,Db as g,Dc as B,E as _,Eb as h,Fc as v,Hb as O,Ib as V,Jb as E,Kb as t,Lb as r,Mb as m,Mc as R,Qb as P,Ub as k,Vb as p,X as I,_a as d,aa as L,dc as z,ea as N,ec as W,fa as T,fc as G,g as U,ic as i,jc as j,kb as H,kc as c,la as w,ma as D,n as C,na as b,oa as f,va as S,y as $}from"./chunk-5AECHVKR.js";import"./chunk-FK6H3RFT.js";import{a as y}from"./chunk-EQDQRRRY.js";var F=class o{constructor(n){this.http=n}apiUrl=`${Y.apiUrl}/revenue`;getRevenueData(n,e){let a=y(y({storeId:n,startDate:e.startDate,endDate:e.endDate,reportType:e.reportType},e.revenueType&&{revenueType:e.revenueType}),e.paymentMethod&&{paymentMethod:e.paymentMethod});return this.http.get(`${this.apiUrl}/data`,{params:a,headers:{storeid:n}}).pipe(_(l=>(console.error("API Error, falling back to mock data:",l),C(this.getMockRevenueData()))))}getRevenueStats(n,e){let a=y(y({storeId:n,startDate:e.startDate,endDate:e.endDate,reportType:e.reportType},e.revenueType&&{revenueType:e.revenueType}),e.paymentMethod&&{paymentMethod:e.paymentMethod});return this.http.get(`${this.apiUrl}/stats`,{params:a,headers:{storeid:n}}).pipe(_(l=>(console.error("API Error, falling back to mock data:",l),C(this.getMockRevenueStats()))))}getRevenueBreakdown(n,e){let a=y(y({storeId:n,startDate:e.startDate,endDate:e.endDate,reportType:e.reportType},e.revenueType&&{revenueType:e.revenueType}),e.paymentMethod&&{paymentMethod:e.paymentMethod});return this.http.get(`${this.apiUrl}/breakdown`,{params:a,headers:{storeid:n}}).pipe(_(l=>(console.error("API Error, falling back to mock data:",l),C(this.getMockRevenueBreakdown()))))}exportToCSV(n,e){let a=y(y({storeId:n,startDate:e.startDate,endDate:e.endDate,reportType:e.reportType,format:"csv"},e.revenueType&&{revenueType:e.revenueType}),e.paymentMethod&&{paymentMethod:e.paymentMethod});return this.http.get(`${this.apiUrl}/export`,{params:a,headers:{storeid:n},responseType:"blob"}).pipe(_(l=>{console.error("Export API Error, generating local CSV:",l);let s=this.generateCSVData(),x=new Blob([s],{type:"text/csv"});return C(x)}))}exportToPDF(n,e){let a=y(y({storeId:n,startDate:e.startDate,endDate:e.endDate,reportType:e.reportType,format:"pdf"},e.revenueType&&{revenueType:e.revenueType}),e.paymentMethod&&{paymentMethod:e.paymentMethod});return this.http.get(`${this.apiUrl}/export`,{params:a,headers:{storeid:n},responseType:"blob"}).pipe(_(l=>{console.error("Export API Error, generating local PDF:",l);let s="Mock PDF data",x=new Blob([s],{type:"application/pdf"});return C(x)}))}getMockRevenueData(){let n=new Date,e=[];for(let a=29;a>=0;a--){let l=new Date(n);l.setDate(l.getDate()-a);let s=Math.random()*5e3+2e3,x=s*(.6+Math.random()*.2),M=s*(.2+Math.random()*.1),Se=s-x-M,A=Math.floor(Math.random()*50+20);e.push({date:l.toISOString().split("T")[0],totalRevenue:s,roomRevenue:x,serviceRevenue:M,otherRevenue:Se,transactions:A,averageTransaction:s/A,revenueGrowth:Math.random()*20-10})}return e}getMockRevenueStats(){let n=this.getMockRevenueData(),e=n.reduce((s,x)=>s+x.totalRevenue,0),a=n.reduce((s,x)=>s+x.transactions,0),l=Math.max(...n.map(s=>s.totalRevenue));return{totalRevenue:e,totalTransactions:a,averageTransactionValue:e/a,averageDailyRevenue:e/n.length,revenueGrowth:8.5,peakRevenueAmount:l,monthlyProjection:e/n.length*30}}getMockRevenueBreakdown(){return[{category:"Room Revenue",amount:15e4*.65,percentage:65,transactions:450,averageAmount:15e4*.65/450},{category:"Service Revenue",amount:15e4*.25,percentage:25,transactions:280,averageAmount:15e4*.25/280},{category:"Food & Beverage",amount:15e4*.08,percentage:8,transactions:120,averageAmount:15e4*.08/120},{category:"Other Revenue",amount:15e4*.02,percentage:2,transactions:35,averageAmount:15e4*.02/35}]}generateCSVData(){let n=this.getMockRevenueData(),a=["Date","Total Revenue","Room Revenue","Service Revenue","Other Revenue","Transactions","Average Transaction","Growth %"].join(",")+`
`;return n.forEach(l=>{let s=[l.date,l.totalRevenue.toFixed(2),l.roomRevenue.toFixed(2),l.serviceRevenue.toFixed(2),l.otherRevenue.toFixed(2),l.transactions.toString(),l.averageTransaction.toFixed(2),l.revenueGrowth.toFixed(2)];a+=s.join(",")+`
`}),a}static \u0275fac=function(e){return new(e||o)(N(K))};static \u0275prov=L({token:o,factory:o.\u0275fac,providedIn:"root"})};var Ce=(o,n)=>n.category,_e=(o,n)=>n.date;function we(o,n){if(o&1){let e=P();t(0,"div",9)(1,"div",37)(2,"div",38),b(),t(3,"svg",39),m(4,"path",40),r()(),f(),t(5,"div",41)(6,"p",42),i(7),r()(),t(8,"div",43)(9,"div",44)(10,"button",45),k("click",function(){w(e);let l=p();return D(l.clearError())}),t(11,"span",46),i(12,"Dismiss"),r(),b(),t(13,"svg",47),m(14,"path",48),r()()()()()()}if(o&2){let e=p();d(7),j(e.error())}}function De(o,n){o&1&&(b(),t(0,"svg",49),m(1,"circle",50)(2,"path",51),r(),i(3," Loading... "))}function Ee(o,n){o&1&&i(0," Update Report ")}function ke(o,n){if(o&1&&(t(0,"span"),i(1),r()),o&2){let e=p(3);d(),c("\u2197 +",e.revenueStats().revenueGrowth,"%")}}function Te(o,n){if(o&1&&(t(0,"span"),i(1),r()),o&2){let e=p(3);d(),c("\u2198 ",e.revenueStats().revenueGrowth,"%")}}function Me(o,n){if(o&1&&(t(0,"p",75),g(1,ke,2,1,"span")(2,Te,2,1,"span"),r()),o&2){let e=p(2);G("text-green-600",e.revenueStats().revenueGrowth>0)("text-red-600",e.revenueStats().revenueGrowth<0),d(),h(e.revenueStats().revenueGrowth>0?1:2)}}function Be(o,n){if(o&1&&(t(0,"div",73),m(1,"canvas",76),r()),o&2){let e=p(2);d(),E("data",e.revenueTrendChartData())("options",e.chartOptions())}}function Fe(o,n){o&1&&(t(0,"div",74)(1,"div",77),b(),t(2,"svg",78),m(3,"path",68),r(),f(),t(4,"p",79),i(5,"No revenue data available"),r()()())}function Ie(o,n){if(o&1&&(t(0,"div",73),m(1,"canvas",80),r()),o&2){let e=p(2);d(),E("data",e.revenueBreakdownChartData())("options",e.doughnutChartOptions())}}function Oe(o,n){o&1&&(t(0,"div",74)(1,"div",77),b(),t(2,"svg",78),m(3,"path",81)(4,"path",82),r(),f(),t(5,"p",79),i(6,"No breakdown data available"),r()()())}function Ve(o,n){if(o&1&&(t(0,"tr",88)(1,"td",89),i(2),r(),t(3,"td",90),i(4),u(5,"currency"),r(),t(6,"td",90)(7,"div",54)(8,"div",91),m(9,"div",92),r(),t(10,"span"),i(11),r()()(),t(12,"td",90),i(13),u(14,"number"),r(),t(15,"td",90),i(16),u(17,"currency"),r()()),o&2){let e=n.$implicit,a=p(3);d(2),c(" ",e.category," "),d(2),c(" ",v(5,7,e.amount,a.currency(),"symbol","1.2-2")," "),d(5),W("width",e.percentage,"%"),d(2),c("",e.percentage,"%"),d(2),c(" ",B(14,12,e.transactions)," "),d(3),c(" ",v(17,14,e.averageAmount,a.currency(),"symbol","1.2-2")," ")}}function Pe(o,n){if(o&1&&(t(0,"div",10)(1,"h3",11),i(2,"Revenue Breakdown Details"),r(),t(3,"div",83)(4,"table",84)(5,"thead",85)(6,"tr")(7,"th",86),i(8,"Category"),r(),t(9,"th",86),i(10,"Amount"),r(),t(11,"th",86),i(12,"Percentage"),r(),t(13,"th",86),i(14,"Transactions"),r(),t(15,"th",86),i(16,"Avg per Transaction"),r()()(),t(17,"tbody",87),O(18,Ve,18,19,"tr",88,Ce),r()()()()),o&2){let e=p(2);d(18),V(e.revenueBreakdown())}}function Ge(o,n){if(o&1&&(t(0,"span"),i(1),r()),o&2){let e=p().$implicit;d(),c("+",e.revenueGrowth,"%")}}function je(o,n){if(o&1&&(t(0,"span"),i(1),r()),o&2){let e=p().$implicit;d(),c("",e.revenueGrowth,"%")}}function Ae(o,n){o&1&&(t(0,"span"),i(1,"0%"),r())}function Ue(o,n){if(o&1&&(t(0,"tr",88)(1,"td",90),i(2),r(),t(3,"td",89),i(4),u(5,"currency"),r(),t(6,"td",90),i(7),u(8,"currency"),r(),t(9,"td",90),i(10),u(11,"currency"),r(),t(12,"td",90),i(13),u(14,"currency"),r(),t(15,"td",90),i(16),u(17,"number"),r(),t(18,"td",90),i(19),u(20,"currency"),r(),t(21,"td",96),g(22,Ge,2,1,"span")(23,je,2,1,"span")(24,Ae,2,0,"span"),r()()),o&2){let e=n.$implicit,a=p(3);d(2),c(" ",a.formatDate(e.date)," "),d(2),c(" ",v(5,14,e.totalRevenue,a.currency(),"symbol","1.2-2")," "),d(3),c(" ",v(8,19,e.roomRevenue,a.currency(),"symbol","1.2-2")," "),d(3),c(" ",v(11,24,e.serviceRevenue,a.currency(),"symbol","1.2-2")," "),d(3),c(" ",v(14,29,e.otherRevenue,a.currency(),"symbol","1.2-2")," "),d(3),c(" ",B(17,34,e.transactions)," "),d(3),c(" ",v(20,36,e.averageTransaction,a.currency(),"symbol","1.2-2")," "),d(2),G("text-green-600",e.revenueGrowth>0)("text-red-600",e.revenueGrowth<0)("text-gray-500",e.revenueGrowth===0),d(),h(e.revenueGrowth>0?22:e.revenueGrowth<0?23:24)}}function $e(o,n){if(o&1&&(t(0,"div",53)(1,"div",93)(2,"h3",94),i(3,"Daily Revenue Data"),r(),t(4,"p",95),i(5),r()(),t(6,"div",83)(7,"table",84)(8,"thead",85)(9,"tr")(10,"th",86),i(11,"Date"),r(),t(12,"th",86),i(13,"Total Revenue"),r(),t(14,"th",86),i(15,"Room Revenue"),r(),t(16,"th",86),i(17,"Service Revenue"),r(),t(18,"th",86),i(19,"Other Revenue"),r(),t(20,"th",86),i(21,"Transactions"),r(),t(22,"th",86),i(23,"Avg Transaction"),r(),t(24,"th",86),i(25,"Growth"),r()()(),t(26,"tbody",87),O(27,Ue,25,41,"tr",88,_e),r()()()()),o&2){let e=p(2);d(5),c("",e.revenueData().length," records found"),d(22),V(e.revenueData())}}function Le(o,n){if(o&1&&(t(0,"div",52)(1,"div",53)(2,"div",54)(3,"div",55)(4,"p",56),i(5,"Total Revenue"),r(),t(6,"p",57),i(7),u(8,"currency"),r(),g(9,Me,3,5,"p",58),r(),t(10,"div",38)(11,"div",59),b(),t(12,"svg",60),m(13,"path",61),r()()()()(),f(),t(14,"div",53)(15,"div",54)(16,"div",55)(17,"p",56),i(18,"Total Transactions"),r(),t(19,"p",57),i(20),u(21,"number"),r(),t(22,"p",62),i(23),u(24,"currency"),r()(),t(25,"div",38)(26,"div",63),b(),t(27,"svg",64),m(28,"path",65),r()()()()(),f(),t(29,"div",53)(30,"div",54)(31,"div",55)(32,"p",56),i(33,"Daily Average"),r(),t(34,"p",57),i(35),u(36,"currency"),r(),t(37,"p",62),i(38),u(39,"currency"),r()(),t(40,"div",38)(41,"div",66),b(),t(42,"svg",67),m(43,"path",68),r()()()()(),f(),t(44,"div",53)(45,"div",54)(46,"div",55)(47,"p",56),i(48,"Monthly Projection"),r(),t(49,"p",57),i(50),u(51,"currency"),r(),t(52,"p",62),i(53,"Based on current trends"),r()(),t(54,"div",38)(55,"div",69),b(),t(56,"svg",70),m(57,"path",71),r()()()()()(),f(),t(58,"div",72)(59,"div",53)(60,"h3",11),i(61,"Revenue Trend"),r(),g(62,Be,2,2,"div",73)(63,Fe,6,0,"div",74),r(),t(64,"div",53)(65,"h3",11),i(66,"Revenue Breakdown"),r(),g(67,Ie,2,2,"div",73)(68,Oe,7,0,"div",74),r()(),g(69,Pe,20,0,"div",10),g(70,$e,29,1,"div",53)),o&2){let e=p();d(7),c(" ",v(8,11,e.revenueStats().totalRevenue,e.currency(),"symbol","1.2-2")," "),d(2),h(e.revenueStats().revenueGrowth!==0?9:-1),d(11),j(B(21,16,e.revenueStats().totalTransactions)),d(3),c(" Avg: ",v(24,18,e.revenueStats().averageTransactionValue,e.currency(),"symbol","1.2-2")," "),d(12),c(" ",v(36,23,e.revenueStats().averageDailyRevenue,e.currency(),"symbol","1.2-2")," "),d(3),c(" Peak: ",v(39,28,e.revenueStats().peakRevenueAmount,e.currency(),"symbol","1.2-2")," "),d(12),c(" ",v(51,33,e.revenueStats().monthlyProjection,e.currency(),"symbol","1.2-2")," "),d(12),h(e.revenueData().length>0?62:63),d(5),h(e.revenueBreakdown().length>0?67:68),d(2),h(e.revenueBreakdown().length>0?69:-1),d(),h(e.revenueData().length>0?70:-1)}}function Ne(o,n){o&1&&(t(0,"div",36)(1,"div",97),b(),t(2,"svg",98),m(3,"circle",50)(4,"path",51),r(),f(),t(5,"p",99),i(6,"Loading revenue data..."),r(),t(7,"p",100),i(8,"This may take a few moments"),r()()())}var fe=class o{fb=T(se);revenueService=T(F);storeStore=T(pe);exportService=T(ye);destroy$=new U;isExporting=S(!1);selectedStore=R(()=>this.storeStore.selectedStore());currency=R(()=>this.selectedStore()?.currencyCode||this.selectedStore()?.currency||"USD");filterForm;loading=S(!1);revenueData=S([]);revenueBreakdown=S([]);revenueStats=S(null);error=S(null);lastUpdated=S(new Date);revenueTrendChartData=R(()=>{let n=this.revenueData();return{labels:n.map(e=>this.formatDateShort(new Date(e.date))),datasets:[{data:n.map(e=>e.totalRevenue),label:"Total Revenue",backgroundColor:"rgba(59, 130, 246, 0.1)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:2,fill:!0,tension:.4},{data:n.map(e=>e.roomRevenue),label:"Room Revenue",backgroundColor:"rgba(34, 197, 94, 0.1)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,fill:!1,tension:.4}]}});revenueBreakdownChartData=R(()=>{let n=this.revenueBreakdown();return{labels:n.map(e=>e.category),datasets:[{data:n.map(e=>e.amount),backgroundColor:["rgba(59, 130, 246, 0.8)","rgba(34, 197, 94, 0.8)","rgba(168, 85, 247, 0.8)","rgba(245, 158, 11, 0.8)","rgba(239, 68, 68, 0.8)","rgba(20, 184, 166, 0.8)"],borderWidth:2,borderColor:"#fff"}]}});chartOptions=R(()=>({responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top"},tooltip:{callbacks:{label:n=>{let e=this.currency(),a=new Intl.NumberFormat("en-US",{style:"currency",currency:e});return`${n.dataset.label}: ${a.format(n.parsed.y)}`}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"}},y:{display:!0,title:{display:!0,text:`Revenue (${this.currency()})`},beginAtZero:!0,ticks:{callback:n=>{let e=this.currency();return new Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(Number(n))}}}}}));doughnutChartOptions=R(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"right"},tooltip:{callbacks:{label:n=>{let e=this.currency(),a=new Intl.NumberFormat("en-US",{style:"currency",currency:e}),l=n.dataset.data.reduce((x,M)=>x+Number(M),0),s=(Number(n.parsed)/l*100).toFixed(1);return`${n.label}: ${a.format(Number(n.parsed))} (${s}%)`}}}}}));displayedColumns=["date","totalRevenue","roomRevenue","serviceRevenue","otherRevenue","transactions","averageTransaction"];constructor(){this.filterForm=this.fb.group({startDate:[new Date(Date.now()-30*24*60*60*1e3)],endDate:[new Date],reportType:["daily"],revenueType:["all"],paymentMethod:["all"]})}ngOnInit(){this.loadData(),this.filterForm.valueChanges.pipe(I(this.destroy$)).subscribe(()=>{this.loadData()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadData(){let n=this.selectedStore()?._id||"",e=this.getFilters();this.loading.set(!0),$({revenueData:this.revenueService.getRevenueData(n,e),revenueBreakdown:this.revenueService.getRevenueBreakdown(n,e),stats:this.revenueService.getRevenueStats(n,e)}).pipe(I(this.destroy$)).subscribe({next:({revenueData:a,revenueBreakdown:l,stats:s})=>{this.revenueData.set(a),this.revenueBreakdown.set(l),this.revenueStats.set(s),this.lastUpdated.set(new Date),this.loading.set(!1)},error:a=>{console.error("Error loading data:",a),this.error.set("Failed to load revenue data. Please try again."),this.loading.set(!1)}})}getFilters(){let n=this.filterForm.value;return{startDate:n.startDate,endDate:n.endDate,reportType:n.reportType,revenueType:n.revenueType!=="all"?n.revenueType:void 0,paymentMethod:n.paymentMethod!=="all"?n.paymentMethod:void 0}}updateCharts(n,e){}onDateRangeChange(){this.loadData()}exportToCSV(){let n=this.selectedStore()?._id||"",e=this.getFilters();this.isExporting.set(!0),this.revenueService.exportToCSV(n,e).subscribe({next:a=>{let l=window.URL.createObjectURL(a),s=document.createElement("a");s.href=l,s.download=`revenue-report-${this.formatDateISO(new Date)}.csv`,s.click(),window.URL.revokeObjectURL(l),this.isExporting.set(!1)},error:a=>{console.error("Export error:",a),this.error.set("Failed to export CSV. Please try again."),this.isExporting.set(!1)}})}exportToPDF(){let n=this.selectedStore()?._id||"",e=this.getFilters();this.isExporting.set(!0),this.revenueService.exportToPDF(n,e).subscribe({next:a=>{let l=window.URL.createObjectURL(a),s=document.createElement("a");s.href=l,s.download=`revenue-report-${this.formatDateISO(new Date)}.pdf`,s.click(),window.URL.revokeObjectURL(l),this.isExporting.set(!1)},error:a=>{console.error("Export error:",a),this.error.set("Failed to export PDF. Please try again."),this.isExporting.set(!1)}})}exportData(n){if(!this.revenueData().length)return;let e=this.revenueData(),a="revenue-report",l={from:this.filterForm.value.startDate?.toISOString()||"",to:this.filterForm.value.endDate?.toISOString()||""};switch(n){case"pdf":this.exportService.exportRevenueDataToPdf(e,a,l);break;case"csv":this.exportService.exportToCSV(e,a);break;case"excel":this.exportService.exportToExcel(e,a);break}}refreshData(){this.loadData()}clearError(){this.error.set(null)}getRevenueGrowthClass(n){return n>0?"text-green-600":n<0?"text-red-600":"text-gray-600"}getRevenueGrowthIcon(n){return n>0?"\u2197\uFE0F":n<0?"\u2198\uFE0F":"\u27A1\uFE0F"}formatCurrency(n){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.currency()}).format(n)}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}formatDateShort(n){return n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}formatDateISO(n){return n.toISOString().split("T")[0]}formatPercent(n){return`${n.toFixed(1)}%`}formatNumber(n){return n.toLocaleString()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=H({type:o,selectors:[["app-revenue-report"]],decls:85,vars:7,consts:[["exportMenu","matMenu"],[1,"p-6","bg-gray-50","min-h-screen"],[1,"mb-6"],[1,"flex","flex-col","md:flex-row","md:items-center","md:justify-between","gap-4"],[1,"text-3xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["mat-flat-button","","color","primary",3,"matMenuTriggerFor"],[1,"mr-2"],["mat-menu-item","",3,"click"],[1,"mb-6","bg-yellow-50","border","border-yellow-200","rounded-md","p-4"],[1,"bg-white","rounded-lg","shadow-md","p-6","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4",3,"formGroup"],["for","startDate",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","date","id","startDate","formControlName","startDate",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["for","endDate",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","date","id","endDate","formControlName","endDate",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["for","reportType",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","reportType","formControlName","reportType",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["value","daily"],["value","weekly"],["value","monthly"],["for","revenueType",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","revenueType","formControlName","revenueType",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["value",""],["value","room"],["value","service"],["value","other"],["for","paymentMethod",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["id","paymentMethod","formControlName","paymentMethod",1,"w-full","px-3","py-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500"],["value","cash"],["value","card"],["value","online"],["value","transfer"],[1,"mt-4","flex","justify-end"],[1,"inline-flex","items-center","px-4","py-2","border","border-transparent","text-sm","font-medium","rounded-md","shadow-sm","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"click","disabled"],[1,"bg-white","rounded-lg","shadow-md","p-12"],[1,"flex"],[1,"flex-shrink-0"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5","text-yellow-400"],["fill-rule","evenodd","d","M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"ml-3"],[1,"text-sm","text-yellow-700"],[1,"ml-auto","pl-3"],[1,"-mx-1.5","-my-1.5"],[1,"inline-flex","bg-yellow-50","rounded-md","p-1.5","text-yellow-500","hover:bg-yellow-100",3,"click"],[1,"sr-only"],["fill","currentColor","viewBox","0 0 20 20",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-4","w-4","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","m 12,2 a 10,10 0 0 1 10,10 h -4 a 6,6 0 0 0 -6,-6 z",1,"opacity-75"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-4","gap-6","mb-6"],[1,"bg-white","rounded-lg","shadow-md","p-6"],[1,"flex","items-center"],[1,"flex-1"],[1,"text-sm","font-medium","text-gray-500","uppercase","tracking-wide"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","mt-1",3,"text-green-600","text-red-600"],[1,"w-12","h-12","bg-green-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"],[1,"text-sm","text-gray-600","mt-1"],[1,"w-12","h-12","bg-blue-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"],[1,"w-12","h-12","bg-purple-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-purple-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"],[1,"w-12","h-12","bg-orange-100","rounded-lg","flex","items-center","justify-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6","mb-6"],[1,"h-80"],[1,"h-80","flex","items-center","justify-center","text-gray-500"],[1,"text-sm","mt-1"],["baseChart","","type","line",3,"data","options"],[1,"text-center"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2"],["baseChart","","type","doughnut",3,"data","options"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"w-16","bg-gray-200","rounded-full","h-2","mr-2"],[1,"bg-blue-600","h-2","rounded-full"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"px-6","py-4","whitespace-nowrap","text-sm"],[1,"flex","flex-col","items-center","justify-center"],["fill","none","viewBox","0 0 24 24",1,"animate-spin","h-12","w-12","text-blue-600","mb-4"],[1,"text-lg","text-gray-600"],[1,"text-sm","text-gray-500","mt-1"]],template:function(e,a){if(e&1){let l=P();t(0,"div",1)(1,"div",2)(2,"div",3)(3,"div")(4,"h1",4),i(5,"Revenue Report"),r(),t(6,"p",5),i(7,"Track and analyze your revenue performance and trends"),r()(),t(8,"div")(9,"button",6)(10,"mat-icon",7),i(11,"file_download"),r(),i(12," Export Data "),r(),t(13,"mat-menu",null,0)(15,"button",8),k("click",function(){return w(l),D(a.exportData("pdf"))}),t(16,"mat-icon"),i(17,"picture_as_pdf"),r(),t(18,"span"),i(19,"Export as PDF"),r()(),t(20,"button",8),k("click",function(){return w(l),D(a.exportData("csv"))}),t(21,"mat-icon"),i(22,"description"),r(),t(23,"span"),i(24,"Export as CSV"),r()(),t(25,"button",8),k("click",function(){return w(l),D(a.exportData("excel"))}),t(26,"mat-icon"),i(27,"table_chart"),r(),t(28,"span"),i(29,"Export as Excel"),r()()()()()(),g(30,we,15,1,"div",9),t(31,"div",10)(32,"h2",11),i(33,"Report Filters"),r(),t(34,"form",12)(35,"div")(36,"label",13),i(37,"Start Date"),r(),m(38,"input",14),r(),t(39,"div")(40,"label",15),i(41,"End Date"),r(),m(42,"input",16),r(),t(43,"div")(44,"label",17),i(45,"Report Type"),r(),t(46,"select",18)(47,"option",19),i(48,"Daily"),r(),t(49,"option",20),i(50,"Weekly"),r(),t(51,"option",21),i(52,"Monthly"),r()()(),t(53,"div")(54,"label",22),i(55,"Revenue Type"),r(),t(56,"select",23)(57,"option",24),i(58,"All Categories"),r(),t(59,"option",25),i(60,"Room Revenue"),r(),t(61,"option",26),i(62,"Service Revenue"),r(),t(63,"option",27),i(64,"Other Revenue"),r()()(),t(65,"div")(66,"label",28),i(67,"Payment Method"),r(),t(68,"select",29)(69,"option",24),i(70,"All Methods"),r(),t(71,"option",30),i(72,"Cash"),r(),t(73,"option",31),i(74,"Card"),r(),t(75,"option",32),i(76,"Online"),r(),t(77,"option",33),i(78,"Bank Transfer"),r()()()(),t(79,"div",34)(80,"button",35),k("click",function(){return w(l),D(a.loadData())}),g(81,De,4,0)(82,Ee,1,0),r()()(),g(83,Le,71,38),g(84,Ne,9,0,"div",36),r()}if(e&2){let l=z(14);d(9),E("matMenuTriggerFor",l),d(21),h(a.error()?30:-1),d(4),E("formGroup",a.filterForm),d(46),E("disabled",a.loading()),d(),h(a.loading()?81:82),d(2),h(a.revenueStats()?83:-1),d(),h(a.loading()&&!a.revenueStats()?84:-1)}},dependencies:[q,J,Z,ce,re,le,de,ee,oe,te,ne,ie,ae,be,X,Q,ue,me,he,xe,ve,ge],styles:[".chart-container[_ngcontent-%COMP%]{position:relative;height:100%;width:100%}.loading-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.revenue-table-row[_ngcontent-%COMP%]{transition:background-color .2s ease}.revenue-table-row[_ngcontent-%COMP%]:hover{background-color:#f9fafbcc}.export-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.revenue-table-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px;width:8px}.revenue-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.revenue-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e0;border-radius:4px}.revenue-table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a0aec0}"]})};export{fe as RevenueReportComponent};
