import{a as J}from"./chunk-AFUSWNYJ.js";import{a as U}from"./chunk-SCF7UMUI.js";import"./chunk-QC7H4KPM.js";import"./chunk-XLZTIYSF.js";import{b as z}from"./chunk-6I3AJKA7.js";import"./chunk-TILT22SG.js";import"./chunk-BFT2MTJY.js";import{a as j,b as Y,c as $,f as q,h as H}from"./chunk-3E3PJ7Q7.js";import{b as L,c as X}from"./chunk-JPRPNQOM.js";import{_ as N,ba as F}from"./chunk-3LDCGXHW.js";import{e as R,g as G}from"./chunk-ZLVQTB5B.js";import{g as P,l as D,m as V,q as A,s as k}from"./chunk-6PFJHDFS.js";import{Ib as d,Ic as h,Jb as c,Jc as I,Lc as p,Mb as w,Mc as v,Nb as M,Nc as E,Ob as y,Pb as n,Qb as i,Yb as x,ac as C,bb as r,cc as m,fa as u,ka as g,la as _,qb as B,rc as o,sc as f,tc as b,wa as S}from"./chunk-J2AK4FW5.js";import"./chunk-GAL4ENT6.js";var O=(e,a,t,l)=>({"text-orange-600":e,"text-green-600":a,"text-red-600":t,"text-gray-500":l}),Q=(e,a,t)=>({"text-green-600 bg-green-100 px-3 py-1 rounded text-sm font-medium":e,"text-orange-600 bg-orange-100 px-3 py-1 rounded text-sm font-medium":a,"text-red-600 bg-red-100 px-3 py-1 rounded text-sm font-medium":t}),W=(e,a)=>a._id;function Z(e,a){e&1&&(n(0,"div",4)(1,"mat-icon",9),o(2,"warning"),i(),n(3,"span",10),o(4,"Your subscription has expired. Please renew to continue accessing the platform."),i()())}function tt(e,a){e&1&&(n(0,"div",5)(1,"mat-icon",11),o(2,"error"),i(),n(3,"span",12),o(4,"Your subscription payment is overdue. Please update your payment method."),i()())}function et(e,a){if(e&1&&(n(0,"div")(1,"label",16),o(2,"Trial Days Remaining"),i(),n(3,"span",21),o(4),i()()),e&2){let t=m(2);r(4),b("",t.featureGating.trialDaysRemaining()," days")}}function it(e,a){if(e&1&&(n(0,"div")(1,"label",16),o(2,"Next Billing Date"),i(),n(3,"span",22),o(4),p(5,"date"),i()()),e&2){let t=m();r(4),f(E(5,1,t.nextBillingDate,"MMM d, yyyy"))}}function nt(e,a){if(e&1){let t=x();n(0,"button",23),C("click",function(){g(t);let s=m(2);return _(s.upgradeToPaid())}),n(1,"mat-icon",24),o(2,"credit_card"),i(),o(3," Upgrade to Paid Plan "),i()}}function ot(e,a){if(e&1){let t=x();n(0,"button",23),C("click",function(){g(t);let s=m(2);return _(s.renewSubscription())}),n(1,"mat-icon",24),o(2,"refresh"),i(),o(3," Renew Subscription "),i()}}function at(e,a){if(e&1){let t=x();n(0,"button",25),C("click",function(){g(t);let s=m(2);return _(s.manageBilling())}),n(1,"mat-icon",24),o(2,"settings"),i(),o(3," Manage Billing "),i()}}function rt(e,a){if(e&1&&(n(0,"mat-card",7)(1,"mat-card-header",13)(2,"mat-card-title"),o(3,"Current Subscription"),i()(),n(4,"mat-card-content",14)(5,"div",15)(6,"div")(7,"label",16),o(8,"Status"),i(),n(9,"span",17),o(10),p(11,"titlecase"),i()(),d(12,et,5,1,"div"),d(13,it,6,4,"div"),i(),n(14,"div",18),d(15,nt,4,0,"button",19),d(16,ot,4,0,"button",19),d(17,at,4,0,"button",20),i()()()),e&2){let t=a,l=m();r(9),y("ngClass",I(9,O,t.status==="TRIAL",t.status==="ACTIVE",t.status==="PAST_DUE"||t.status==="EXPIRED",t.status!=="TRIAL"&&t.status!=="ACTIVE"&&t.status!=="PAST_DUE"&&t.status!=="EXPIRED")),r(),b(" ",v(11,7,t.status)," "),r(2),c(l.featureGating.isTrialActive()?12:-1),r(),c(t.status==="ACTIVE"?13:-1),r(2),c(l.featureGating.isTrialActive()?15:-1),r(),c(t.status==="PAST_DUE"||t.status==="EXPIRED"?16:-1),r(),c(t.status==="ACTIVE"?17:-1)}}function lt(e,a){if(e&1){let t=x();n(0,"mat-card",8)(1,"mat-card-header",13)(2,"mat-card-title"),o(3,"Ready to upgrade?"),i()(),n(4,"mat-card-content",14)(5,"p",26),o(6,"Choose your plan and start your subscription today."),i(),n(7,"button",23),C("click",function(){g(t);let s=m();return _(s.goToPricing())}),n(8,"mat-icon",24),o(9,"storefront"),i(),o(10," View Pricing Plans "),i()()()}}function dt(e,a){if(e&1&&(n(0,"div",28)(1,"div",29)(2,"span",30),o(3),p(4,"date"),i(),n(5,"span",31),o(6),p(7,"currency"),i()(),n(8,"span",32),o(9),p(10,"titlecase"),i()()),e&2){let t=a.$implicit;r(3),f(E(4,4,t.billingDate,"MMM d, yyyy")),r(3),f(v(7,7,t.amount)),r(2),y("ngClass",h(11,Q,t.status==="PAID",t.status==="PENDING",t.status==="FAILED")),r(),b(" ",v(10,9,t.status)," ")}}function ct(e,a){if(e&1&&(n(0,"mat-card",7)(1,"mat-card-header",13)(2,"mat-card-title"),o(3,"Invoices"),i()(),n(4,"mat-card-content",14)(5,"div",27),w(6,dt,11,15,"div",28,W),i()()()),e&2){let t=m();r(6),M(t)}}function st(e,a){e&1&&d(0,ct,8,0,"mat-card",7),e&2&&c(a.length>0?0:-1)}var K=class e{featureGatingService=u(J);subscriptionService=u(U);router=u(G);activatedRoute=u(R);featureGating=this.featureGatingService;currentSubscription=this.featureGatingService.currentSubscription;invoices=S([]);reason=S(null);constructor(){this.reason.set(this.activatedRoute.snapshot.queryParams.reason),this.loadInvoices()}loadInvoices(){let a=this.currentSubscription();a&&a._id&&this.subscriptionService.getInvoices().subscribe({next:t=>{this.invoices.set(t.invoices||[])},error:t=>console.error("Failed to load invoices:",t)})}upgradeToPaid(){this.router.navigate(["/pricing"])}goToPricing(){this.router.navigate(["/pricing"])}renewSubscription(){this.router.navigate(["/pricing"])}manageBilling(){console.log("Manage billing clicked")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=B({type:e,selectors:[["app-billing"]],decls:12,vars:5,consts:[[1,"max-w-4xl","mx-auto","px-6","py-8"],[1,"mb-8"],[1,"text-3xl","font-bold","mb-2"],[1,"text-gray-600"],[1,"flex","items-center","gap-4","p-4","mb-6","bg-yellow-50","border-l-4","border-yellow-400","rounded"],[1,"flex","items-center","gap-4","p-4","mb-6","bg-red-50","border-l-4","border-red-400","rounded"],[1,"space-y-6"],[1,"shadow-md"],[1,"shadow-md","bg-gradient-to-r","from-blue-50","to-indigo-50"],[1,"text-yellow-500"],[1,"text-yellow-800"],[1,"text-red-500"],[1,"text-red-800"],[1,"pb-4","border-b"],[1,"pt-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6","mb-6"],[1,"text-sm","font-medium","text-gray-600","block","mb-2"],[1,"text-lg","font-semibold",3,"ngClass"],[1,"flex","flex-wrap","gap-3"],["mat-raised-button","","color","primary",1,"flex","items-center","gap-2"],["mat-button","",1,"flex","items-center","gap-2"],[1,"text-lg","font-semibold","text-orange-600"],[1,"text-lg","font-semibold"],["mat-raised-button","","color","primary",1,"flex","items-center","gap-2",3,"click"],[1,"text-base"],["mat-button","",1,"flex","items-center","gap-2",3,"click"],[1,"text-gray-700","mb-4"],[1,"space-y-3"],[1,"flex","justify-between","items-center","p-4","rounded-lg","bg-gray-50","border-l-4","border-blue-400"],[1,"flex","gap-6"],[1,"text-sm","text-gray-600"],[1,"font-semibold","text-gray-900"],[3,"ngClass"]],template:function(t,l){if(t&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),o(3,"Billing & Subscription"),i(),n(4,"p",3),o(5,"Manage your subscription and billing information"),i()(),d(6,Z,5,0,"div",4),d(7,tt,5,0,"div",5),n(8,"div",6),d(9,rt,18,14,"mat-card",7),d(10,lt,11,0,"mat-card",8),d(11,st,1,1),i()()),t&2){let s,T;r(6),c(l.reason()==="subscription-expired"?6:-1),r(),c(l.reason()==="past-due"?7:-1),r(2),c((s=l.currentSubscription())?9:-1,s),r(),c(l.featureGating.isTrialActive()?10:-1),r(),c((T=l.invoices())?11:-1,T)}},dependencies:[k,P,H,j,$,q,Y,F,N,X,L,z,D,A,V],encapsulation:2})};export{K as BillingComponent};
