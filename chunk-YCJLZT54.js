import{a as p}from"./chunk-BFT2MTJY.js";import{A as g,z as h}from"./chunk-H22US2IH.js";import{Y as t,aa as c,fa as l,wa as a}from"./chunk-P5WOETP4.js";var y=class i{http=l(g);baseUrl=p.apiUrl;syncingStore=a(!1);syncingRoomTypes=a(new Set);pushingAvailability=a(!1);connectingChannel=a(null);isSyncingStore=this.syncingStore.asReadonly();syncingRoomTypes$=this.syncingRoomTypes.asReadonly();isPushingAvailability=this.pushingAvailability.asReadonly();connectingChannel$=this.connectingChannel.asReadonly();syncStoreToChannex(n,e){return this.syncingStore.set(!0),this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/sync`,e).pipe(t(()=>this.syncingStore.set(!1)))}syncRoomTypeToChannex(n,e,s){return this.syncingRoomTypes.update(r=>new Set(r).add(e)),this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/room-types/${e}/sync`,s).pipe(t(()=>{this.syncingRoomTypes.update(r=>{let o=new Set(r);return o.delete(e),o})}))}pushAvailability(n,e){return this.pushingAvailability.set(!0),this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/availability`,e).pipe(t(()=>this.pushingAvailability.set(!1)))}getStoreStatus(n){return this.http.get(`${this.baseUrl}/admin/channex/stores/${n}/status`)}getChannexReservations(n,e){let s=new h;return e?.status&&(s=s.set("status",e.status)),e?.startDate&&(s=s.set("startDate",e.startDate)),e?.endDate&&(s=s.set("endDate",e.endDate)),this.http.get(`${this.baseUrl}/admin/channex/stores/${n}/reservations`,{params:s})}getChannelConnectionKey(n){return this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/channel-connection-key`,{})}updateChannelStatus(n,e){return this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/channel-status`,{channels:e})}getChannelAuthUrl(n,e){return this.connectingChannel.set(e),this.http.get(`${this.baseUrl}/admin/channex/stores/${n}/channels/${e}/authorize-url`).pipe(t(()=>this.connectingChannel.set(null)))}handleChannelCallback(n,e,s){return this.http.post(`${this.baseUrl}/admin/channex/stores/${n}/channels/${e}/callback`,s)}getChannels(n){return this.http.get(`${this.baseUrl}/admin/channex/stores/${n}/channels`)}disconnectChannel(n,e){return this.http.delete(`${this.baseUrl}/admin/channex/stores/${n}/channels/${e}`)}isRoomTypeSyncing(n){return this.syncingRoomTypes().has(n)}clearLoadingStates(){this.syncingStore.set(!1),this.syncingRoomTypes.set(new Set),this.pushingAvailability.set(!1),this.connectingChannel.set(null)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=c({token:i,factory:i.\u0275fac,providedIn:"root"})};export{y as a};
