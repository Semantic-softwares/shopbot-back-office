import{b as ae}from"./chunk-TLN5MM36.js";import{c as te,d as ie}from"./chunk-3BP5U2AG.js";import{a as T}from"./chunk-BF5Y3WJN.js";import{a as Y,b as J,c as K,d as Q,f as U,g as W}from"./chunk-L2IRRR6J.js";import{a as X,b as Z,e as $,h as ee}from"./chunk-27T6VRU4.js";import{A as O,C as j,E as z,b as B,d as P,g as L,h as q,m as G,s as A,t as H}from"./chunk-LM7FYRY4.js";import"./chunk-ZENMOCFL.js";import{a as oe,b as re}from"./chunk-EDESGICS.js";import{a as D}from"./chunk-6UI2KQ7N.js";import"./chunk-7KAGHLPR.js";import"./chunk-JRF7K3G5.js";import"./chunk-HRGWPEEQ.js";import{X as N,Y as I,Z as V}from"./chunk-BVLPFG4Z.js";import"./chunk-LYY57WCE.js";import"./chunk-5CST2L2O.js";import{a as k,c as F,d as R}from"./chunk-QJAAU2EQ.js";import"./chunk-S3JL7UCS.js";import{r as E}from"./chunk-ETP2OZKZ.js";import{Bb as _,Db as u,Eb as p,Jb as f,Kb as t,Lb as i,Mb as v,Tb as S,Xb as g,Ya as s,Zb as w,ca as c,ha as C,ia as b,lb as M,mc as r,nc as x,oc as y,ta as m}from"./chunk-KGWH6IHP.js";import"./chunk-EQDQRRRY.js";function se(n,e){n&1&&(t(0,"mat-error"),r(1,"Password is required"),i())}function le(n,e){n&1&&(t(0,"mat-error"),r(1,"Password must be at least 8 characters"),i())}function de(n,e){n&1&&(t(0,"mat-error"),r(1,"Please confirm your password"),i())}function me(n,e){n&1&&(t(0,"mat-error",11),r(1,"Passwords do not match"),i())}function ce(n,e){if(n&1){let o=S();t(0,"form",5),g("ngSubmit",function(){C(o);let d=w();return b(d.onSubmit())}),t(1,"mat-form-field",6)(2,"mat-label"),r(3,"New Password"),i(),v(4,"input",7),t(5,"button",8),g("click",function(){C(o);let d=w();return b(d.clickEvent("password"))}),t(6,"mat-icon",9),r(7),i()(),u(8,se,2,0,"mat-error"),u(9,le,2,0,"mat-error"),i(),t(10,"mat-form-field",6)(11,"mat-label"),r(12,"Confirm Password"),i(),v(13,"input",10),t(14,"button",8),g("click",function(){C(o);let d=w();return b(d.clickEvent("confirmPassword"))}),t(15,"mat-icon",9),r(16),i()(),u(17,de,2,0,"mat-error"),i(),u(18,me,2,0,"mat-error",11),t(19,"button",12),r(20),i(),t(21,"div",13)(22,"a",14),r(23," Back to Login "),i()()()}if(n&2){let o,l,d,h,a=w();f("formGroup",a.resetPasswordForm),s(4),f("type",a.hidePassword()?"password":"text"),s(),_("aria-label","Hide password")("aria-pressed",a.hidePassword()),s(2),x(a.hidePassword()?"visibility_off":"visibility"),s(),p((o=a.resetPasswordForm.get("password"))!=null&&o.hasError("required")?8:-1),s(),p((l=a.resetPasswordForm.get("password"))!=null&&l.hasError("minlength")?9:-1),s(4),f("type",a.hideConfirmPassword()?"password":"text"),s(),_("aria-label","Hide password")("aria-pressed",a.hideConfirmPassword()),s(2),x(a.hideConfirmPassword()?"visibility_off":"visibility"),s(),p((d=a.resetPasswordForm.get("confirmPassword"))!=null&&d.hasError("required")?17:-1),s(),p(a.resetPasswordForm.hasError("passwordMismatch")&&((h=a.resetPasswordForm.get("password"))!=null&&h.value)&&((h=a.resetPasswordForm.get("confirmPassword"))!=null&&h.value)?18:-1),s(),f("disabled",!a.resetPasswordForm.valid||a.loading()),s(),y(" ",a.loading()?"Resetting...":"Reset Password"," ")}}function ue(n,e){n&1&&(t(0,"div",4)(1,"mat-icon",15),r(2,"check_circle"),i(),t(3,"h3",16),r(4,"Password Reset Successfully!"),i(),t(5,"p",17),r(6," Your password has been reset. You can now login with your new password. "),i(),t(7,"a",18),r(8," Go to Login "),i()())}var ne=class n{fb=c(j);authService=c(D);snackBar=c(T);router=c(F);route=c(k);loading=m(!1);resetComplete=m(!1);hidePassword=m(!0);hideConfirmPassword=m(!0);email=m("");token=m("");resetPasswordForm=this.fb.group({password:["",[P.required,P.minLength(8)]],confirmPassword:["",P.required]},{validators:this.passwordMatchValidator});constructor(){}ngOnInit(){this.route.queryParams.subscribe(e=>{if(!e.email||!e.token){this.router.navigate(["/auth/forgot-password"]);return}e.email&&this.email.set(e.email),e.token&&this.token.set(e.token)})}passwordMatchValidator(e){let o=e.get("password"),l=e.get("confirmPassword");return!o||!l||o.value===l.value?null:{passwordMismatch:!0}}clickEvent(e){e==="password"?this.hidePassword.set(!this.hidePassword()):this.hideConfirmPassword.set(!this.hideConfirmPassword())}onSubmit(){if(this.resetPasswordForm.valid&&this.email()&&this.token()){this.loading.set(!0);let{password:e}=this.resetPasswordForm.value;this.authService.updatePassword(this.email(),e).subscribe({next:o=>{this.loading.set(!1),this.resetComplete.set(!0),this.snackBar.open("Password reset successfully!","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),setTimeout(()=>{this.router.navigate(["/auth/login"])},2e3)},error:o=>{this.loading.set(!1),this.snackBar.open(o.error?.msg||o.message||"Failed to reset password. Please try again.","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=M({type:n,selectors:[["app-reset-password"]],decls:10,vars:1,consts:[[1,"min-h-screen","w-full","flex","items-center","justify-center"],["appearance","outlined",1,"w-full","max-w-sm"],[1,"mb-6"],[1,"flex","flex-col","gap-4",3,"formGroup"],[1,"text-center"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","password","placeholder","Enter new password","minlength","8",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["fontSet","material-icons-outlined"],["matInput","","formControlName","confirmPassword","placeholder","Confirm password",3,"type"],[1,"block","text-center"],["matButton","filled","color","primary","type","submit",3,"disabled"],[1,"text-center","mt-4"],["routerLink","/auth/login",1,"text-sm","text-blue-600","hover:text-blue-800"],[1,"text-green-600","text-5xl","mb-4"],[1,"text-lg","font-semibold","mb-2"],[1,"text-gray-600","text-sm","mb-4"],["routerLink","/auth/login","mat-raised-button","","color","primary",1,"w-full"]],template:function(o,l){o&1&&(t(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title"),r(4,"Create New Password"),i(),t(5,"mat-card-subtitle"),r(6,"Enter a strong password for your account."),i()(),t(7,"mat-card-content"),u(8,ce,24,15,"form",3)(9,ue,9,0,"div",4),i()()()),o&2&&(s(8),p(l.resetComplete()?9:8))},dependencies:[E,W,Y,K,U,Q,J,V,I,N,ie,te,ee,X,Z,$,z,G,B,L,q,O,H,A,re,oe,ae,R],encapsulation:2})};export{ne as ResetPasswordComponent};
