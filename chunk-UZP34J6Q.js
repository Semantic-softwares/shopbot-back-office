import{b as Z}from"./chunk-KVX2H4A7.js";import{c as Q,d as U}from"./chunk-GYNGZAKB.js";import{a as E}from"./chunk-GI4SSOPO.js";import{a as R,b as q,c as j,d as z,f as A,g as H}from"./chunk-J3TXHOEY.js";import{a as W,b as J,e as K,h as O}from"./chunk-YLKT6R4Z.js";import{C as V,E as G,b as B,d as g,g as N,h as T,m as D,s as I,t as L}from"./chunk-2UT4NYMV.js";import"./chunk-S2P5547C.js";import{a as X,b as Y}from"./chunk-J5JAEWDO.js";import{a as k}from"./chunk-RE5VYPI4.js";import"./chunk-AGG277FR.js";import"./chunk-7KULNFHZ.js";import"./chunk-5M2ITBTB.js";import{Y as y,Z as F}from"./chunk-D3B3XJ53.js";import"./chunk-RDMIWI4X.js";import"./chunk-AGZJ637K.js";import{c as M,d as P}from"./chunk-LTDPQFG4.js";import"./chunk-VYX7HJYX.js";import{r as _}from"./chunk-FORATDN3.js";import{Eb as d,Fb as u,Kb as p,Lb as e,Mb as t,Nb as b,Ub as w,Yb as v,Za as l,_b as f,ca as s,ha as x,ia as C,mb as S,nc as i,pc as h,ta as c}from"./chunk-53XJD7JZ.js";import"./chunk-EQDQRRRY.js";function ee(r,a){r&1&&(e(0,"mat-error"),i(1,"Email is required"),t())}function te(r,a){r&1&&(e(0,"mat-error"),i(1,"Please enter a valid email"),t())}function oe(r,a){if(r&1){let o=w();e(0,"form",5),v("ngSubmit",function(){x(o);let n=f();return C(n.onSubmit())}),e(1,"mat-form-field",6)(2,"mat-label"),i(3,"Email"),t(),b(4,"input",7),e(5,"mat-icon",8),i(6,"email"),t(),d(7,ee,2,0,"mat-error"),d(8,te,2,0,"mat-error"),t(),e(9,"button",9),i(10),t(),e(11,"div",10)(12,"a",11),i(13," Back to Login "),t()()()}if(r&2){let o,m,n=f();p("formGroup",n.forgotPasswordForm),l(7),u((o=n.forgotPasswordForm.get("email"))!=null&&o.hasError("required")?7:-1),l(),u((m=n.forgotPasswordForm.get("email"))!=null&&m.hasError("email")?8:-1),l(),p("disabled",!n.forgotPasswordForm.valid||n.loading()),l(),h(" ",n.loading()?"Sending...":"Send Reset Link"," ")}}function ie(r,a){r&1&&(e(0,"div",4)(1,"mat-icon",12),i(2,"check_circle"),t(),e(3,"h3",13),i(4,"Email Sent!"),t(),e(5,"p",14),i(6," We've sent a password reset link to your email. Please check your inbox and follow the link to reset your password. "),t(),e(7,"a",15),i(8," Back to Login "),t()())}var $=class r{fb=s(V);authService=s(k);snackBar=s(E);router=s(M);loading=c(!1);emailSent=c(!1);forgotPasswordForm=this.fb.group({email:["",[g.required,g.email]]});onSubmit(){if(this.forgotPasswordForm.valid){this.loading.set(!0);let{email:a}=this.forgotPasswordForm.value;this.authService.resetPassword(a).subscribe({next:o=>{this.loading.set(!1),this.emailSent.set(!0),this.snackBar.open("Password reset link sent to your email. Please check your inbox.","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["success-snackbar"]}),setTimeout(()=>{this.router.navigate(["/auth/verify-reset-token"],{queryParams:{email:a}})},2e3)},error:o=>{this.loading.set(!1),this.emailSent.set(!1),this.snackBar.open(o.error?.msg||o.message||"Failed to send reset link. Please try again.","Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]})}})}}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=S({type:r,selectors:[["app-forgot-password"]],decls:10,vars:1,consts:[[1,"min-h-screen","w-full","flex","items-center","justify-center"],["appearance","outlined",1,"w-full","max-w-sm"],[1,"mb-6"],[1,"flex","flex-col","gap-4",3,"formGroup"],[1,"text-center"],[1,"flex","flex-col","gap-4",3,"ngSubmit","formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","email","placeholder","Enter your email","type","email"],["matSuffix","","fontSet","material-icons-outlined"],["matButton","filled","color","primary","type","submit",3,"disabled"],[1,"text-center","mt-4"],["routerLink","/auth/login",1,"text-sm","text-blue-600","hover:text-blue-800"],[1,"text-green-600","text-5xl","mb-4"],[1,"text-lg","font-semibold","mb-2"],[1,"text-gray-600","text-sm","mb-4"],["routerLink","/auth/login","mat-raised-button","","color","primary",1,"w-full"]],template:function(o,m){o&1&&(e(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title"),i(4,"Reset Password"),t(),e(5,"mat-card-subtitle"),i(6,"Enter your email address and we'll send you a link to reset your password."),t()(),e(7,"mat-card-content"),d(8,oe,14,5,"form",3)(9,ie,9,0,"div",4),t()()()),o&2&&(l(8),u(m.emailSent()?9:8))},dependencies:[_,H,R,j,A,z,q,F,y,U,Q,O,W,J,K,G,D,B,N,T,L,I,Y,X,Z,P],encapsulation:2})};export{$ as ForgotPasswordComponent};
