import{a as T}from"./chunk-T4NG5K7S.js";import{a as Re}from"./chunk-52EMKFJP.js";import{a as S,b as Te,c as Ee,d as Pe}from"./chunk-D54P5HEE.js";import"./chunk-HI5TUZJE.js";import{c as De}from"./chunk-HDWLNSMT.js";import{a as ve}from"./chunk-XISJ3OTQ.js";import"./chunk-MS4AQ6UA.js";import{a as se,b as de,c as pe,d as ge,e as Ce,f as ue,g as fe,h as _e,i as Me,j as he,k as Se,l as ye,m as h,n as xe}from"./chunk-553G7WQ4.js";import"./chunk-UDNOIW3J.js";import{a as we,b as be}from"./chunk-E5GOXSYX.js";import"./chunk-U3ROV4NJ.js";import"./chunk-BGOXKF75.js";import"./chunk-W3I56YZS.js";import"./chunk-Q3BO6IZX.js";import{c as U,j as X,k as Z,l as ee,m as te}from"./chunk-JURQBM4X.js";import{a as Y,c as J,e as K}from"./chunk-2OS3A6OW.js";import"./chunk-UHZERJ3B.js";import"./chunk-L3V4XNTA.js";import{a as ae,b as re,c as le,d as me}from"./chunk-DU2I3CEK.js";import"./chunk-URU65OXG.js";import{c as ce}from"./chunk-45N66JJF.js";import"./chunk-JMDTRE27.js";import{b as W,g as q,l as z,v as G}from"./chunk-7VZONRG3.js";import{a as ie,b as oe}from"./chunk-USY657EX.js";import{O as ne,i as $,j as B,k as j}from"./chunk-FG3IKYWR.js";import"./chunk-V6BWQRYA.js";import{c as L}from"./chunk-B5BMUNHO.js";import{p as A}from"./chunk-2NDSKVKU.js";import{Bb as P,Cb as R,Hb as d,Ib as o,Jb as n,Kb as p,Lb as g,Mb as C,Ob as I,Sb as f,Tb as _,Xb as w,Y as E,Yb as b,Za as l,Zb as v,bc as O,cc as k,ea as u,gc as r,hc as M,ic as F,jb as D,ka as y,kc as H,la as x,lc as V,mc as N,pb as s,qc as Q}from"./chunk-EV5SF5GC.js";import"./chunk-EQDQRRRY.js";var Oe=()=>[5,10,25,100];function ke(e,i){e&1&&(o(0,"div",9),p(1,"mat-spinner",12),n())}function Fe(e,i){e&1&&p(0,"app-no-record",10)}function He(e,i){e&1&&(o(0,"th",25),r(1,"Name"),n())}function Ve(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.name)}}function Ne(e,i){e&1&&(o(0,"th",25),r(1,"Color"),n())}function Qe(e,i){if(e&1&&(o(0,"td",26)(1,"div",27),r(2),n()()),e&2){let t=i.$implicit;l(),k("background-color",t.color),l(),F(" ",t.color," ")}}function Ae(e,i){e&1&&(o(0,"th",25),r(1,"Icon"),n())}function Le(e,i){if(e&1&&(o(0,"td",26)(1,"mat-icon"),r(2),n()()),e&2){let t=i.$implicit;l(2),M(t==null?null:t.icon)}}function $e(e,i){e&1&&(o(0,"th",25),r(1,"Items"),n())}function Be(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.items)}}function je(e,i){e&1&&(o(0,"th",28),r(1,"Actions"),n())}function We(e,i){if(e&1){let t=I();o(0,"td",26)(1,"button",29)(2,"mat-icon"),r(3,"more_vert"),n()(),o(4,"mat-menu",null,0)(6,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.onEditCategory(m))}),o(7,"mat-icon"),r(8,"edit"),n(),o(9,"span"),r(10,"Edit"),n()(),o(11,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.deleteCategory(m))}),o(12,"mat-icon"),r(13,"delete"),n(),o(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=O(5);l(),d("matMenuTriggerFor",t)}}function qe(e,i){e&1&&p(0,"tr",31)}function ze(e,i){e&1&&p(0,"tr",32)}function Ge(e,i){if(e&1&&(o(0,"div",11)(1,"table",13),g(2,14),s(3,He,2,0,"th",15)(4,Ve,2,1,"td",16),C(),g(5,17),s(6,Ne,2,0,"th",15)(7,Qe,3,3,"td",16),C(),g(8,18),s(9,Ae,2,0,"th",15)(10,Le,3,1,"td",16),C(),g(11,19),s(12,$e,2,0,"th",15)(13,Be,2,1,"td",16),C(),g(14,20),s(15,je,2,0,"th",21)(16,We,16,1,"td",16),C(),s(17,qe,1,0,"tr",22)(18,ze,1,0,"tr",23),n(),p(19,"mat-paginator",24),n()),e&2){let t=_();l(),d("dataSource",t.dataSource),l(16),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns),l(),d("pageSizeOptions",Q(4,Oe))}}var Ie=class e{displayedColumns=["name","color","icon","items","actions"];dataSource;searchText="";dialog=u(De);router=u(L);categoryService=u(Re);storeStore=u(ne);paginator;sort;categories=ce({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:i})=>this.categoryService.getStoreMenus(i.storeId).pipe(E(t=>{this.dataSource=new ye(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))});applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase()}addCategory(){this.dialog.open(T,{width:"500px",data:{isEdit:!1}}).afterClosed().subscribe(t=>{t&&this.categories.reload()})}onEditCategory(i){this.dialog.open(T,{width:"500px",data:{isEdit:!0,category:i}}).afterClosed().subscribe(a=>{a&&this.categories.reload()})}deleteCategory(i){this.dialog.open(Pe,{width:"350px",data:{message:`Are you sure you want to delete ${i.name}?`}}).afterClosed().subscribe(a=>{a&&(console.log("Category to delete:",i),this.categoryService.deleteMenu(i._id).subscribe({next:()=>{console.log("Category deleted successfully"),this.categories.reload()}}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-categories"]],viewQuery:function(t,a){if(t&1&&(w(h,5),w(S,5)),t&2){let m;b(m=v())&&(a.paginator=m.first),b(m=v())&&(a.sort=m.first)}},decls:14,vars:2,consts:[["menu","matMenu"],[1,"categories-container","!bg-white"],[1,"!bg-white"],[1,"actions-row"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Search categories",3,"keyup","ngModelChange","ngModel"],[1,"buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","category","title","No Categories","message","No categories found matching your criteria."],[1,"table-container","!bg-white"],["diameter","40"],["mat-table","","matSort","",1,"!bg-white",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","color"],["matColumnDef","icon"],["matColumnDef","items"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of categories",1,"!bg-white",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"color-preview"],["mat-header-cell","",1,"w-20"],["mat-icon-button","","aria-label","Category actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Search"),n(),o(7,"input",6),f("keyup",function(c){return a.applyFilter(c)}),N("ngModelChange",function(c){return V(a.searchText,c)||(a.searchText=c),c}),n()()(),o(8,"div",7)(9,"button",8),f("click",function(){return a.addCategory()}),r(10,"+ ADD CATEGORY"),n()()(),P(11,ke,2,0,"div",9)(12,Fe,1,0,"app-no-record",10)(13,Ge,20,5,"div",11),n()()),t&2&&(l(7),H("ngModel",a.searchText),l(4),R(a.categories.isLoading()?11:a.categories.hasValue()&&a.categories.value().length===0?12:a.categories.hasValue()?13:-1))},dependencies:[A,Se,se,pe,fe,ge,de,_e,Ce,ue,Me,he,xe,h,Ee,S,Te,K,Y,J,Z,X,U,te,ee,j,B,$,oe,ie,me,re,ae,le,be,we,ve,G,W,q,z],styles:[".categories-container[_ngcontent-%COMP%]{margin:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:16px}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.categories-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;display:inline-block;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5)}"]})};export{Ie as CategoriesComponent};
