import{a as ut}from"./chunk-ITEY5KLI.js";import{b as st,f as dt}from"./chunk-CU623SSI.js";import{a as pt}from"./chunk-37MPZNQ6.js";import{a as ct}from"./chunk-QLYTOGCJ.js";import{c as _t}from"./chunk-XNNKKASY.js";import"./chunk-XVOO3XAI.js";import{a as Y,b as Z,c as tt,d as et,e as it,f as nt,g as ot,h as at,i as rt,j as lt,k as mt}from"./chunk-GTRRE3DU.js";import{l as X}from"./chunk-S5GZV54O.js";import{a as W}from"./chunk-4XV2UKEU.js";import{a as G,b as O,c as q,d as J}from"./chunk-Q4U6FYZ3.js";import{i as N}from"./chunk-QC7H4KPM.js";import{d as U}from"./chunk-BXJEGH2V.js";import"./chunk-64WHNS37.js";import"./chunk-TIVXUJ22.js";import"./chunk-W7B5PSOS.js";import"./chunk-XLZTIYSF.js";import"./chunk-G3VZM262.js";import"./chunk-BCE7WRWQ.js";import{a as K,b as Q}from"./chunk-6I3AJKA7.js";import"./chunk-W7NMJLMQ.js";import"./chunk-F5SZ3AU3.js";import{a as $}from"./chunk-4UBDYPTG.js";import"./chunk-TILT22SG.js";import"./chunk-BFT2MTJY.js";import{a as j,c as F,h as z}from"./chunk-3E3PJ7Q7.js";import"./chunk-FO4KTVQ3.js";import"./chunk-TRZH7NMW.js";import"./chunk-GXTELBJV.js";import{b as H,c as A}from"./chunk-JPRPNQOM.js";import{Z as R,_ as I,ba as B}from"./chunk-3LDCGXHW.js";import{e as P,g as V}from"./chunk-ZLVQTB5B.js";import{s as D}from"./chunk-6PFJHDFS.js";import{Ib as c,Jb as _,Ob as h,Pb as e,Qb as i,Rb as M,Vb as x,Vc as E,Wb as f,Yb as b,ac as d,bb as l,cc as s,fa as v,ka as p,la as u,mc as w,oc as L,qb as T,qc as k,rc as a,sc as S,tc as y,wb as C}from"./chunk-J2AK4FW5.js";import"./chunk-GAL4ENT6.js";function xt(t,n){t&1&&(e(0,"th",29),a(1,"Name"),i())}function ft(t,n){if(t&1&&(e(0,"div",32),a(1),i()),t&2){let o=s().$implicit;l(),S(o.description)}}function St(t,n){if(t&1&&(e(0,"td",30)(1,"div",31),a(2),i(),c(3,ft,2,1,"div",32),i()),t&2){let o=n.$implicit;l(2),S(o.name),l(),_(o.description?3:-1)}}function gt(t,n){t&1&&(e(0,"th",29),a(1,"Type"),i())}function vt(t,n){if(t&1&&(e(0,"td",30)(1,"mat-chip"),a(2),i()()),t&2){let o=n.$implicit,r=s(3);l(),k(r.getStationTypeClass(o.type)),l(),y(" ",r.getStationTypeLabel(o.type)," ")}}function ht(t,n){t&1&&(e(0,"th",29),a(1,"Printers"),i())}function bt(t,n){if(t&1&&(e(0,"td",30)(1,"div",33)(2,"mat-icon",34),a(3," print "),i(),e(4,"span"),a(5),i()()()),t&2){let o=n.$implicit,r=s(3);l(2),L("text-green-600",r.getPrinterCount(o)>0)("text-gray-400",r.getPrinterCount(o)===0),l(3),y("",r.getPrinterCount(o)," active")}}function Et(t,n){t&1&&(e(0,"th",29),a(1,"Auto Print"),i())}function Mt(t,n){t&1&&(e(0,"mat-icon",35),a(1,"check_circle"),i())}function yt(t,n){t&1&&(e(0,"mat-icon",36),a(1,"cancel"),i())}function Tt(t,n){if(t&1&&(e(0,"td",30),c(1,Mt,2,0,"mat-icon",35)(2,yt,2,0,"mat-icon",36),i()),t&2){let o=n.$implicit;l(),_(o.settings!=null&&o.settings.autoPrint?1:2)}}function wt(t,n){t&1&&(e(0,"th",29),a(1,"Status"),i())}function Lt(t,n){t&1&&(e(0,"span",37),a(1," Active "),i())}function kt(t,n){t&1&&(e(0,"span",38),a(1," Inactive "),i())}function Dt(t,n){if(t&1&&(e(0,"td",30),c(1,Lt,2,0,"span",37)(2,kt,2,0,"span",38),i()),t&2){let o=n.$implicit;l(),_(o.active?1:2)}}function Pt(t,n){t&1&&(e(0,"th",29),a(1,"Actions"),i())}function Vt(t,n){if(t&1){let o=b();e(0,"td",30)(1,"button",39),d("click",function(m){return p(o),u(m.stopPropagation())}),e(2,"mat-icon"),a(3,"more_vert"),i()(),e(4,"mat-menu",null,0)(6,"button",40),d("click",function(){let m=p(o).$implicit,g=s(3);return u(g.viewStation(m))}),e(7,"mat-icon"),a(8,"visibility"),i(),e(9,"span"),a(10,"View Details"),i()(),e(11,"button",40),d("click",function(){let m=p(o).$implicit,g=s(3);return u(g.editStation(m))}),e(12,"mat-icon"),a(13,"edit"),i(),e(14,"span"),a(15,"Edit"),i()(),M(16,"mat-divider"),e(17,"button",40),d("click",function(){let m=p(o).$implicit,g=s(3);return u(g.deleteStation(m))}),e(18,"mat-icon",41),a(19,"delete"),i(),e(20,"span"),a(21,"Delete Station"),i()()()()}if(t&2){let o=w(5);l(),h("matMenuTriggerFor",o)}}function Rt(t,n){t&1&&M(0,"tr",42)}function It(t,n){if(t&1){let o=b();e(0,"tr",43),d("click",function(){let m=p(o).$implicit,g=s(3);return u(g.viewStation(m))}),i()}}function Bt(t,n){if(t&1&&(e(0,"table",17),x(1,19),C(2,xt,2,0,"th",20)(3,St,4,2,"td",21),f(),x(4,22),C(5,gt,2,0,"th",20)(6,vt,3,3,"td",21),f(),x(7,23),C(8,ht,2,0,"th",20)(9,bt,6,5,"td",21),f(),x(10,24),C(11,Et,2,0,"th",20)(12,Tt,3,1,"td",21),f(),x(13,25),C(14,wt,2,0,"th",20)(15,Dt,3,1,"td",21),f(),x(16,26),C(17,Pt,2,0,"th",20)(18,Vt,22,1,"td",21),f(),C(19,Rt,1,0,"tr",27)(20,It,1,0,"tr",28),i()),t&2){let o=s(2);h("dataSource",o.stations.value()),l(19),h("matHeaderRowDef",o.displayedColumns),l(),h("matRowDefColumns",o.displayedColumns)}}function $t(t,n){if(t&1){let o=b();e(0,"div",18)(1,"div",44)(2,"mat-icon",45),a(3,"restaurant"),i()(),e(4,"h3",46),a(5,"No stations found"),i(),e(6,"p",47),a(7," Get started by creating your first station to manage kitchen printers. "),i(),e(8,"button",48),d("click",function(){p(o);let m=s(2);return u(m.createStation())}),e(9,"mat-icon"),a(10,"add"),i(),a(11," Create New Station "),i()()}}function Nt(t,n){if(t&1&&(c(0,Bt,21,3,"table",17),c(1,$t,12,0,"div",18)),t&2){let o=s();_(o.stations.value().length>0?0:-1),l(),_(o.stations.value().length===0?1:-1)}}function Ht(t,n){if(t&1){let o=b();e(0,"div",15)(1,"div",49)(2,"mat-icon",50),a(3,"error"),i(),e(4,"div")(5,"h3",51),a(6,"Error loading stations"),i(),e(7,"p",52),a(8),i(),e(9,"div",53)(10,"button",54),d("click",function(){p(o);let m=s();return u(m.reloadData())}),e(11,"mat-icon",4),a(12,"refresh"),i(),a(13," Retry "),i()()()()()}if(t&2){let o=s();l(8),S(o.stations.error())}}function At(t,n){t&1&&(e(0,"div",16),M(1,"mat-spinner",55),i())}var Ct=class t{stationsService=v(ut);storeStore=v(N);router=v(V);dialog=v(_t);snackBar=v($);route=v(P);displayedColumns=["name","type","printers","autoPrint","active","actions"];stations=U({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:n})=>this.stationsService.getStations(n.storeId)});totalStations=E(()=>this.stations.value()?.length||0);activeStations=E(()=>this.stations.value()?.filter(n=>n.active).length||0);totalPrinters=E(()=>this.stations.value()?.reduce((n,o)=>n+(o.printers?.filter(r=>r.enabled).length||0),0)||0);autoPrintEnabled=E(()=>this.stations.value()?.filter(n=>n.settings?.autoPrint).length||0);createStation(){this.router.navigate(["../create"],{relativeTo:this.route})}editStation(n){this.router.navigate(["../edit",n._id],{relativeTo:this.route})}viewStation(n){this.router.navigate(["../details",n._id],{relativeTo:this.route})}deleteStation(n){this.dialog.open(pt,{width:"400px",data:{title:"Delete Station",message:`Are you sure you want to delete "${n.name}"? This action cannot be undone.`}}).afterClosed().subscribe(r=>{r&&this.stationsService.deleteStation(n._id).subscribe({next:()=>{this.snackBar.open("Station deleted successfully","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.stations.reload()},error:m=>{this.snackBar.open("Error deleting station","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}})})}reloadData(){this.stations.reload()}getPrinterCount(n){return n.printers?.filter(o=>o.enabled)?.length||0}getStationTypeLabel(n){return{preparation:"Preparation",bar:"Bar",pastry:"Pastry",grill:"Grill",other:"Other"}[n]||n}getStationTypeClass(n){let o={preparation:"bg-blue-100 text-blue-800",bar:"bg-purple-100 text-purple-800",pastry:"bg-pink-100 text-pink-800",grill:"bg-orange-100 text-orange-800",other:"bg-gray-100 text-gray-800"};return o[n]||o.other}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=T({type:t,selectors:[["app-list-stations"]],decls:40,vars:8,consts:[["actionMenu","matMenu"],["title","Stations","subtitle","Manage kitchen stations and printers",3,"showViewToggle"],["actions",""],["matButton","outlined",3,"click"],[1,"mr-1"],["matButton","filled",3,"click"],[1,"max-w-12xl","py-6"],[1,"grid","grid-cols-2","md:grid-cols-4","gap-4"],["appearance","outlined"],[1,"p-4!"],[1,"text-sm","text-gray-600"],[1,"text-2xl","font-bold"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-2xl","font-bold","text-blue-600"],["appearance","outlined",1,"py-4"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","m-4"],[1,"flex","items-center","justify-center","py-20"],["mat-table","",1,"w-full",3,"dataSource"],[1,"py-20","text-center"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","printers"],["matColumnDef","autoPrint"],["matColumnDef","active"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","cursor-pointer hover:bg-gray-50",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"font-medium"],[1,"text-sm","text-gray-500"],[1,"flex","items-center"],[1,"mr-2"],[1,"text-green-600"],[1,"text-gray-400"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","bg-green-100","text-green-800"],[1,"px-2","py-1","text-xs","font-medium","rounded-full","bg-gray-100","text-gray-800"],["mat-icon-button","",3,"click","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["color","warn"],["mat-header-row",""],["mat-row","",1,"cursor-pointer","hover:bg-gray-50",3,"click"],[1,"w-16","h-16","bg-gray-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-gray-400"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],["matButton","filled","color","primary",3,"click"],[1,"flex"],[1,"text-red-500","mr-2"],[1,"text-red-800","font-medium"],[1,"text-red-700","text-sm","mt-1"],[1,"mt-3","flex","space-x-3"],["mat-button","","color","warn",1,"!text-red-600",3,"click"],["diameter","48"]],template:function(o,r){o&1&&(e(0,"app-page-header",1),x(1,2),e(2,"button",3),d("click",function(){return r.reloadData()}),e(3,"mat-icon",4),a(4,"refresh"),i(),a(5," Reload "),i(),e(6,"button",5),d("click",function(){return r.createStation()}),e(7,"mat-icon",4),a(8,"add"),i(),a(9," Create Station "),i(),f(),i(),e(10,"div",6)(11,"div",7)(12,"mat-card",8)(13,"mat-card-content",9)(14,"div",10),a(15,"Total Stations"),i(),e(16,"div",11),a(17),i()()(),e(18,"mat-card",8)(19,"mat-card-content",9)(20,"div",10),a(21,"Active"),i(),e(22,"div",12),a(23),i()()(),e(24,"mat-card",8)(25,"mat-card-content",9)(26,"div",10),a(27,"Total Printers"),i(),e(28,"div",11),a(29),i()()(),e(30,"mat-card",8)(31,"mat-card-content",9)(32,"div",10),a(33,"Auto Print"),i(),e(34,"div",13),a(35),i()()()()(),e(36,"mat-card",14),c(37,Nt,2,2),c(38,Ht,14,1,"div",15),c(39,At,2,0,"div",16),i()),o&2&&(h("showViewToggle",!1),l(17),S(r.totalStations()),l(6),S(r.activeStations()),l(6),S(r.totalPrinters()),l(6),S(r.autoPrintEnabled()),l(2),_(r.stations.hasValue()?37:-1),l(),_(r.stations.error()?38:-1),l(),_(r.stations.isLoading()?39:-1))},dependencies:[D,mt,Y,tt,ot,et,Z,at,it,nt,rt,lt,B,I,R,z,j,F,J,O,G,q,A,H,Q,K,dt,st,ct,X,W],encapsulation:2})};export{Ct as ListStationsComponent};
