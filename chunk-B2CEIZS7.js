import{b as He}from"./chunk-WUDFCJBP.js";import{a as Ge}from"./chunk-BADSAPV5.js";import{a as Be,b as qe}from"./chunk-LJBXM47V.js";import{a as Ie,b as Fe,c as we,g as Ne}from"./chunk-7QS7GU74.js";import{a as Ve}from"./chunk-JEAWRT3X.js";import{a as ye,b as ve,c as Me,d as Se,e as Pe,f as Ee,g as De,h as ke,i as Te,j as Oe,k as Ae}from"./chunk-XKLFH3FF.js";import{a as Ue,b as Re}from"./chunk-46P5YEBT.js";import{d as se}from"./chunk-6KQFCX5X.js";import{a as xe,b as be}from"./chunk-KVX2H4A7.js";import{b as Q,c as Y,d as J}from"./chunk-GYNGZAKB.js";import{a as X,b as Z,e as ee,f as te,g as ne,h as ie}from"./chunk-BTSYCNWJ.js";import{c as he}from"./chunk-2WBLSBPP.js";import{a as Ce}from"./chunk-GIZLGNET.js";import{a as $,b as fe,d as _e,h as L}from"./chunk-YLKT6R4Z.js";import{C as j,E as z,b as R,d as v,g as V,h as B,m as q,n as pe,s as G,t as H,x as ue,y as ge}from"./chunk-2UT4NYMV.js";import{a as K,b as W}from"./chunk-J5JAEWDO.js";import{a as ce}from"./chunk-RE5VYPI4.js";import{Y as N,Z as U}from"./chunk-D3B3XJ53.js";import{m as le,n as me,q as de,r as w}from"./chunk-FORATDN3.js";import{Eb as c,Fb as p,Hc as s,Ic as D,Jc as x,Kb as C,Lb as t,Mb as e,Nb as u,Pc as re,Rb as S,Sb as P,Ub as I,Yb as M,Za as l,_b as f,ca as _,ha as T,ia as O,jc as oe,mb as A,mc as F,nc as n,oc as E,pc as d,sb as y,ta as h}from"./chunk-53XJD7JZ.js";function Xe(a,o){a&1&&(t(0,"div",16)(1,"div",21)(2,"mat-icon",22),n(3,"warning"),e(),t(4,"span",23),n(5," Please confirm all room readiness requirements before proceeding. "),e()()())}var je=class a{dialogRef=_(X);fb=_(j);data=_(Z);loading=h(!1);checkInForm=this.fb.group({isClean:[!1,v.requiredTrue],isMaintained:[!1,v.requiredTrue],amenitiesReady:[!1,v.requiredTrue],notes:[""]});get isFormValid(){return this.checkInForm.valid}get roomNumbers(){return this.data.reservation.rooms?this.data.reservation.rooms.map(o=>{let i=o.room;return typeof i=="string"?i:i.roomNumber||i._id}).join(", "):""}onCancel(){this.dialogRef.close({confirmed:!1})}onConfirm(){if(!this.isFormValid)return;let o=this.checkInForm.value,i={confirmed:!0,roomChecks:{isClean:o.isClean||!1,isMaintained:o.isMaintained||!1,amenitiesReady:o.amenitiesReady||!1},notes:o.notes||void 0};this.dialogRef.close(i)}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=A({type:a,selectors:[["app-check-in-confirmation-dialog"]],decls:46,vars:8,consts:[["mat-dialog-title",""],[1,"bg-gray-50","rounded-lg","p-4","mb-6"],[1,"font-semibold","text-gray-900","mb-3"],[1,"grid","grid-cols-2","gap-4","text-sm"],[1,"text-gray-600"],[1,"font-medium","text-gray-900"],[1,"space-y-4",3,"formGroup"],[1,"font-semibold","text-gray-900"],[1,"space-y-3"],[1,"flex","items-center","gap-3"],["formControlName","isClean","color","primary"],[1,"text-sm","text-gray-700"],["formControlName","isMaintained","color","primary"],["formControlName","amenitiesReady","color","primary"],["appearance","outline",1,"w-full","mt-6"],["matInput","","formControlName","notes","rows","3","placeholder","Any special notes or observations..."],[1,"bg-amber-50","border","border-amber-200","rounded-lg","p-3","mt-6"],["align","end"],["mat-button","",3,"click"],["matButton","filled","color","primary",3,"click","disabled"],[1,"mr-2"],[1,"flex","items-center","gap-2"],[1,"text-amber-600","text-sm"],[1,"text-xs","text-amber-800","font-medium"]],template:function(i,r){i&1&&(t(0,"h2",0),n(1),e(),t(2,"mat-dialog-content")(3,"div",1)(4,"h3",2),n(5,"Guest Information"),e(),t(6,"div",3)(7,"div")(8,"span",4),n(9,"Name:"),e(),t(10,"div",5),n(11),s(12,"getGuestName"),e()(),t(13,"div")(14,"span",4),n(15,"Room(s):"),e(),t(16,"div",5),n(17),e()()()(),t(18,"form",6)(19,"h3",7),n(20,"Room Readiness Checklist"),e(),t(21,"div",8)(22,"div",9),u(23,"mat-checkbox",10),t(24,"span",11),n(25,"Room is clean and housekeeping complete"),e()(),t(26,"div",9),u(27,"mat-checkbox",12),t(28,"span",11),n(29,"All maintenance issues resolved"),e()(),t(30,"div",9),u(31,"mat-checkbox",13),t(32,"span",11),n(33,"Amenities and supplies are stocked"),e()()(),t(34,"mat-form-field",14)(35,"mat-label"),n(36,"Check-in Notes (Optional)"),e(),u(37,"textarea",15),e()(),c(38,Xe,6,0,"div",16),e(),t(39,"mat-dialog-actions",17)(40,"button",18),M("click",function(){return r.onCancel()}),n(41,"Cancel"),e(),t(42,"button",19),M("click",function(){return r.onConfirm()}),t(43,"mat-icon",20),n(44,"check_circle"),e(),n(45," Confirm Check-In "),e()()),i&2&&(l(),d(" Confirm Check-In (",r.data.reservation.confirmationNumber,`)
`),l(10),E(D(12,6,r.data.reservation.guest)),l(6),E(r.roomNumbers),l(),C("formGroup",r.checkInForm),l(20),p(r.isFormValid?-1:38),l(4),C("disabled",!r.isFormValid||r.loading()))},dependencies:[ie,ee,ne,te,U,N,W,K,qe,Be,Q,L,$,J,Y,z,q,R,V,B,H,G,w,He],styles:[".check-in-dialog[_ngcontent-%COMP%]   .mat-mdc-checkbox[_ngcontent-%COMP%]   .mdc-checkbox[_ngcontent-%COMP%]{margin-right:8px}.check-in-dialog[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   .mat-mdc-text-field-wrapper[_ngcontent-%COMP%]{background-color:#fafafa}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.animate-spin[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}"]})};function Ze(a,o){a&1&&(t(0,"mat-icon",28),n(1,"add_circle_outline"),e(),n(2," Add Transaction "))}function et(a,o){a&1&&(t(0,"mat-error"),n(1,"Amount is required"),e())}function tt(a,o){a&1&&(t(0,"mat-error"),n(1,"Amount must be greater than 0"),e())}function nt(a,o){a&1&&(t(0,"mat-error"),n(1,"Amount cannot exceed balance due"),e())}function it(a,o){a&1&&(t(0,"mat-error"),n(1,"Payment method is required"),e())}function at(a,o){if(a&1){let i=I();t(0,"button",44),M("click",function(){T(i);let m=f(2);return O(m.setAmount(100))}),n(1),s(2,"currency"),e()}if(a&2){let i,r=f(2);l(),d(" ",x(2,1,100,(i=r.storeStore.selectedStore())==null?null:i.currency)," ")}}function ot(a,o){if(a&1){let i=I();t(0,"button",44),M("click",function(){T(i);let m=f(2);return O(m.setAmount(50))}),n(1),s(2,"currency"),e()}if(a&2){let i,r=f(2);l(),d(" ",x(2,1,50,(i=r.storeStore.selectedStore())==null?null:i.currency)," ")}}function rt(a,o){if(a&1){let i=I();t(0,"div",29)(1,"mat-form-field",30)(2,"mat-label"),n(3,"Payment Amount"),e(),t(4,"span",31),n(5),e(),u(6,"input",32),c(7,et,2,0,"mat-error"),c(8,tt,2,0,"mat-error"),c(9,nt,2,0,"mat-error"),e(),t(10,"mat-form-field",30)(11,"mat-label"),n(12,"Payment Method"),e(),t(13,"mat-select",33)(14,"mat-option",34),n(15,"Cash"),e(),t(16,"mat-option",35),n(17,"Credit/Debit Card"),e(),t(18,"mat-option",36),n(19,"Bank Transfer"),e(),t(20,"mat-option",37),n(21,"Mobile Money"),e(),t(22,"mat-option",38),n(23,"Check"),e(),t(24,"mat-option",39),n(25,"Online Payment"),e()(),c(26,it,2,0,"mat-error"),e()(),t(27,"mat-form-field",30)(28,"mat-label"),n(29,"Reference Number (Optional)"),e(),u(30,"input",40),e(),t(31,"mat-form-field",30)(32,"mat-label"),n(33,"Notes (Optional)"),e(),u(34,"textarea",41),e(),t(35,"div")(36,"h4",42),n(37,"Quick Amounts"),e(),t(38,"div",43)(39,"button",44),M("click",function(){T(i);let m=f();return O(m.setAmount(m.balanceAmount()))}),n(40),s(41,"currency"),e(),c(42,at,3,4,"button",45),c(43,ot,3,4,"button",45),e()()}if(a&2){let i,r,m,g,k,ae,b=f();l(5),d("",(i=b.storeStore.selectedStore())==null?null:i.currency,"\xA0"),l(),C("max",b.balanceAmount()),l(),p((r=b.paymentForm.get("amount"))!=null&&r.hasError("required")?7:-1),l(),p((m=b.paymentForm.get("amount"))!=null&&m.hasError("min")?8:-1),l(),p((g=b.paymentForm.get("amount"))!=null&&g.hasError("max")?9:-1),l(17),p((k=b.paymentForm.get("method"))!=null&&k.hasError("required")?26:-1),l(14),d(" Full Balance (",x(41,9,b.balanceAmount(),(ae=b.storeStore.selectedStore())==null?null:ae.currency),") "),l(2),p(b.balanceAmount()>=100?42:-1),l(),p(b.balanceAmount()>=50?43:-1)}}function lt(a,o){a&1&&(t(0,"mat-error"),n(1,"Payment status is required"),e())}function mt(a,o){a&1&&(t(0,"mat-error"),n(1,"Payment method is required"),e())}function dt(a,o){if(a&1&&(t(0,"mat-error",51)(1,"strong"),n(2,'Cannot mark as "Paid in Full":'),e(),n(3," There is still an outstanding balance of "),t(4,"strong"),n(5),s(6,"currency"),e(),n(7,'. Please use "Partial Payment" status or record additional payments first. '),e()),a&2){let i,r=f(2);l(5),E(x(6,1,r.balanceAmount(),(i=r.storeStore.selectedStore())==null?null:i.currency))}}function st(a,o){if(a&1&&(t(0,"mat-form-field",30)(1,"mat-label"),n(2,"Payment Status"),e(),t(3,"mat-select",46)(4,"mat-option",47),n(5,"Pending Payment"),e(),t(6,"mat-option",48),n(7,"Partial Payment"),e(),t(8,"mat-option",49),n(9,"Paid in Full"),e()(),c(10,lt,2,0,"mat-error"),e(),t(11,"mat-form-field",30)(12,"mat-label"),n(13,"Payment Method"),e(),t(14,"mat-select",33)(15,"mat-option",34),n(16,"Cash"),e(),t(17,"mat-option",35),n(18,"Credit/Debit Card"),e(),t(19,"mat-option",36),n(20,"Bank Transfer"),e(),t(21,"mat-option",37),n(22,"Mobile Money"),e(),t(23,"mat-option",38),n(24,"Check"),e(),t(25,"mat-option",39),n(26,"Online Payment"),e()(),c(27,mt,2,0,"mat-error"),e(),t(28,"mat-form-field",30)(29,"mat-label"),n(30,"Transaction Reference (Optional)"),e(),u(31,"input",40),e(),t(32,"mat-form-field",30)(33,"mat-label"),n(34,"Payment Notes (Optional)"),e(),u(35,"textarea",50),e(),c(36,dt,8,4,"mat-error",51)),a&2){let i,r,m,g=f();l(10),p((i=g.paymentForm.get("status"))!=null&&i.hasError("required")?10:-1),l(17),p((r=g.paymentForm.get("method"))!=null&&r.hasError("required")?27:-1),l(9),p(((m=g.paymentForm.get("status"))==null?null:m.value)==="paid"&&g.balanceAmount()>0?36:-1)}}function ct(a,o){if(a&1&&(t(0,"mat-icon",28),n(1,"history"),e(),n(2)),a&2){let i=f();l(2),d(" History (",i.transactions().length,") ")}}function pt(a,o){if(a&1&&(t(0,"div",21)(1,"strong"),n(2,"\u26A0\uFE0F Note:"),e(),n(3),e()),a&2){let i=f();l(3),d(" ",i.loadError()," ")}}function ut(a,o){a&1&&(t(0,"div",22),u(1,"mat-progress-spinner",52),e())}function gt(a,o){a&1&&(t(0,"div",23)(1,"mat-icon",53),n(2,"payment"),e(),t(3,"p"),n(4,"No transactions recorded yet"),e()())}function ft(a,o){a&1&&(t(0,"th",68),n(1,"Date"),e())}function _t(a,o){if(a&1&&(t(0,"td",69),n(1),s(2,"date"),e()),a&2){let i=o.$implicit;l(),d(" ",x(2,1,i.createdAt,"short")," ")}}function Ct(a,o){a&1&&(t(0,"th",70),n(1,"Amount"),e())}function xt(a,o){if(a&1&&(t(0,"td",71),n(1),s(2,"currency"),e()),a&2){let i,r=o.$implicit,m=f(2);l(),d(" ",x(2,1,r.amount,(i=m.storeStore.selectedStore())==null?null:i.currency)," ")}}function bt(a,o){a&1&&(t(0,"th",68),n(1,"Method"),e())}function ht(a,o){if(a&1&&(t(0,"td",69)(1,"span",72),n(2),s(3,"titlecase"),e()()),a&2){let i=o.$implicit;l(2),d(" ",D(3,1,i.method)," ")}}function yt(a,o){a&1&&(t(0,"th",68),n(1,"Type"),e())}function vt(a,o){if(a&1&&(t(0,"td",69)(1,"span"),n(2),s(3,"titlecase"),e()()),a&2){let i=o.$implicit;l(),F(i.type==="payment"?"px-2 py-1 bg-green-100 text-green-800 rounded text-xs":"px-2 py-1 bg-red-100 text-red-800 rounded text-xs"),l(),d(" ",D(3,3,i.type)," ")}}function Mt(a,o){a&1&&(t(0,"th",68),n(1,"Notes"),e())}function St(a,o){if(a&1&&(t(0,"td",73),n(1),e()),a&2){let i=o.$implicit;l(),d(" ",i.notes||"-"," ")}}function Pt(a,o){a&1&&(t(0,"th",70),n(1,"Balance After "),e())}function Et(a,o){if(a&1&&(t(0,"td",74),n(1),s(2,"currency"),e()),a&2){let i,r=o.$implicit,m=f(2);l(),d(" ",x(2,1,r.balanceAfterTransaction,(i=m.storeStore.selectedStore())==null?null:i.currency)," ")}}function Dt(a,o){a&1&&u(0,"tr",75)}function kt(a,o){a&1&&u(0,"tr",76)}function Tt(a,o){if(a&1&&(t(0,"table",24),S(1,54),y(2,ft,2,0,"th",55)(3,_t,3,4,"td",56),P(),S(4,57),y(5,Ct,2,0,"th",58)(6,xt,3,4,"td",59),P(),S(7,60),y(8,bt,2,0,"th",55)(9,ht,4,3,"td",56),P(),S(10,61),y(11,yt,2,0,"th",55)(12,vt,4,5,"td",56),P(),S(13,62),y(14,Mt,2,0,"th",55)(15,St,2,1,"td",63),P(),S(16,64),y(17,Pt,2,0,"th",58)(18,Et,3,4,"td",65),P(),y(19,Dt,1,0,"tr",66)(20,kt,1,0,"tr",67),e()),a&2){let i=f();C("dataSource",i.transactions()),l(19),C("matHeaderRowDef",i.displayedColumns),l(),C("matRowDefColumns",i.displayedColumns)}}var ze=class a{fb=_(j);dialogRef=_(X);data=_(Z);storeStore=_(Ce);reservationService=_(Ge);authService=_(ce);currentUser=he(this.authService.currentUser,{initialValue:null});queryParamService=_(Ve);processing=h(!1);loadingTransactions=h(!1);transactions=h([]);loadError=h(null);totalAmount=h(0);paidAmount=h(0);balanceAmount=h(0);paymentPercentage=re(()=>{let o=this.totalAmount(),i=this.paidAmount();return o>0?Math.round(i/o*100):0});displayedColumns=["date","amount","method","type","notes","balance"];paymentForm=this.fb.group({amount:[0],status:[""],method:["",v.required],reference:[""],notes:[""]});constructor(){if(this.data.reservation.status==="checked_out"&&!this.data.isCheckoutFlow){setTimeout(()=>{this.dialogRef.close({confirmed:!1,error:"Cannot edit payment information for checked-out reservations"})});return}}ngOnInit(){this.initializePaymentData(),this.loadTransactions()}initializePaymentData(){let o=this.data.reservation;this.totalAmount.set(o.pricing.total),this.paidAmount.set(o.pricing.paid),this.balanceAmount.set(o.pricing.balance);let i=this.getCurrentPaymentStatus(),r=o.paymentInfo?.method||"cash";this.data.isCheckoutFlow?(this.paymentForm.get("amount")?.setValidators([v.required,v.min(.01),v.max(this.balanceAmount()||0)]),this.paymentForm.patchValue({amount:this.balanceAmount()||0,method:r})):(this.paymentForm.get("status")?.setValidators([v.required]),this.paymentForm.patchValue({status:i,method:r})),this.paymentForm.updateValueAndValidity()}loadTransactions(){this.loadingTransactions.set(!0),this.loadError.set(null);let o=this.storeStore.selectedStore()?._id;if(!o){console.error("Store ID not available"),this.loadingTransactions.set(!1),this.loadError.set("Store information not available");return}this.reservationService.getReservationTransactions(o,this.data.reservation._id).subscribe({next:i=>{this.transactions.set(i),this.loadingTransactions.set(!1),this.loadError.set(null)},error:i=>{console.error("Failed to load transactions:",i),this.loadingTransactions.set(!1),i.status===404?this.loadError.set("Reservation not found. Please refresh and try again."):i.status===403?this.loadError.set("You do not have permission to view transactions for this reservation."):this.loadError.set("Failed to load transaction history. You can still record new payments."),this.transactions.set([])}})}getApprovedExtensionCost(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(i=>i.status==="approved").reduce((i,r)=>i+(r.additionalCost||0),0):0}getApprovedExtensionNights(){return this.data.reservation.extensions?this.data.reservation.extensions.filter(i=>i.status==="approved").reduce((i,r)=>i+(r.additionalNights||0),0):0}hasApprovedExtensions(){return this.getApprovedExtensionCost()>0}getCurrentPaymentStatus(){let o=this.balanceAmount(),i=this.paidAmount();return o<=0?"paid":i>0?"partial":"pending"}getCurrentStatusClass(){switch(this.getCurrentPaymentStatus()){case"paid":return"text-green-600";case"partial":return"text-orange-600";case"pending":return"text-red-600";default:return"text-gray-600"}}canSave(){if(!this.paymentForm.valid)return!1;if(this.data.isCheckoutFlow)return this.paymentForm.valid;{let o=this.paymentForm.get("status")?.value,i=this.balanceAmount();if(o==="paid"&&i>0)return!1}return!0}setAmount(o){this.paymentForm.patchValue({amount:o})}onCancel(){this.queryParamService.remove("paymentRedirection"),this.dialogRef.close({confirmed:!1})}onConfirm(){if(this.queryParamService.remove("paymentRedirection"),this.canSave()){this.processing.set(!0);let o=this.storeStore.selectedStore()?._id;if(!o){console.error("Store ID not available"),this.processing.set(!1);return}let i,r=this.currentUser()?._id;this.data.isCheckoutFlow?i={reservation:this.data.reservation._id,amount:this.paymentForm.value.amount,method:this.paymentForm.value.method,type:"payment",notes:this.paymentForm.value.notes||void 0,processedBy:r}:i={reservation:this.data.reservation._id,amount:0,method:this.paymentForm.value.method,type:"adjustment",notes:this.paymentForm.value.notes||void 0,processedBy:r},this.reservationService.createTransaction(o,this.data.reservation._id,i).subscribe({next:m=>{this.processing.set(!1),this.loadTransactions(),this.dialogRef.close({confirmed:!0,paymentData:i,transaction:m})},error:m=>{console.error("Error creating transaction:",m),this.processing.set(!1);let g="Failed to process transaction. Please try again.";m.status===400?g=m.error?.message||"Invalid transaction data":m.status===404&&(g="Reservation not found"),alert(g)}})}}static \u0275fac=function(i){return new(i||a)};static \u0275cmp=A({type:a,selectors:[["app-payment-update-dialog"]],decls:57,vars:31,consts:[["mat-dialog-title",""],[1,"mb-6","p-4","bg-gray-50","rounded-lg"],[1,"text-sm","font-semibold","mb-4"],[1,"grid","grid-cols-2","gap-4","mb-4"],[1,"bg-white","p-3","rounded","border","border-gray-200"],[1,"text-xs","text-gray-600","mb-1"],[1,"text-lg","font-bold"],[1,"text-lg","font-bold","text-green-600"],[1,"text-sm","font-bold"],[1,"mb-4"],[1,"flex","justify-between","items-center","mb-1"],[1,"text-xs","font-medium"],[1,"text-xs","font-semibold"],[1,"h-2","bg-gray-200","rounded-full","overflow-hidden"],[1,"h-full","bg-green-500","transition-all"],["animationDuration","300"],["label","Add Transaction",3,"disabled"],["mat-tab-label",""],[1,"space-y-4","mt-6",3,"formGroup"],["label","Transaction History",3,"disabled"],[1,"mt-6"],[1,"p-4","bg-yellow-50","border","border-yellow-200","rounded","text-sm","text-yellow-700","mb-4"],[1,"flex","justify-center","items-center","py-8"],[1,"text-center","py-8","text-gray-500"],["mat-table","",1,"w-full","mt-4",3,"dataSource"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"mr-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matPrefix",""],["matInput","","type","number","step","0.01","min","0","formControlName","amount","placeholder","0.00",3,"max"],["formControlName","method"],["value","cash"],["value","card"],["value","bank_transfer"],["value","mobile_money"],["value","check"],["value","online"],["matInput","","formControlName","reference","placeholder","Transaction ID, Receipt number, etc."],["matInput","","formControlName","notes","rows","3","placeholder","Additional payment notes..."],[1,"text-sm","font-medium","mb-2"],[1,"flex","flex-wrap","gap-2"],["type","button","mat-stroked-button","",3,"click"],["type","button","mat-stroked-button",""],["formControlName","status"],["value","pending"],["value","partial"],["value","paid"],["matInput","","formControlName","notes","rows","3","placeholder","Additional notes about the payment..."],[1,"block"],["diameter","40","mode","indeterminate"],[1,"block","text-4xl","mb-2","opacity-30"],["matColumnDef","date"],["mat-header-cell","","class","text-xs font-semibold",4,"matHeaderCellDef"],["mat-cell","","class","text-sm",4,"matCellDef"],["matColumnDef","amount"],["mat-header-cell","","class","text-xs font-semibold text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-sm text-right font-semibold",4,"matCellDef"],["matColumnDef","method"],["matColumnDef","type"],["matColumnDef","notes"],["mat-cell","","class","text-sm text-gray-600",4,"matCellDef"],["matColumnDef","balance"],["mat-cell","","class","text-sm text-right",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","border-b hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-xs","font-semibold"],["mat-cell","",1,"text-sm"],["mat-header-cell","",1,"text-xs","font-semibold","text-right"],["mat-cell","",1,"text-sm","text-right","font-semibold"],[1,"px-2","py-1","bg-blue-100","text-blue-800","rounded","text-xs"],["mat-cell","",1,"text-sm","text-gray-600"],["mat-cell","",1,"text-sm","text-right"],["mat-header-row",""],["mat-row","",1,"border-b","hover:bg-gray-50"]],template:function(i,r){if(i&1&&(t(0,"h2",0),n(1),e(),t(2,"mat-dialog-content")(3,"div",1)(4,"h3",2),n(5,"Payment Breakdown"),e(),t(6,"div",3)(7,"div",4)(8,"div",5),n(9,"Total Amount"),e(),t(10,"div",6),n(11),s(12,"currency"),e()(),t(13,"div",4)(14,"div",5),n(15,"Amount Paid"),e(),t(16,"div",7),n(17),s(18,"currency"),e()(),t(19,"div",4)(20,"div",5),n(21,"Balance Due"),e(),t(22,"div",6),n(23),s(24,"currency"),e()(),t(25,"div",4)(26,"div",5),n(27,"Payment Status"),e(),t(28,"div",8),n(29),s(30,"titlecase"),e()()(),t(31,"div",9)(32,"div",10)(33,"span",11),n(34,"Payment Progress"),e(),t(35,"span",12),n(36),e()(),t(37,"div",13),u(38,"div",14),e()()(),t(39,"mat-tab-group",15)(40,"mat-tab",16),y(41,Ze,3,0,"ng-template",17),t(42,"form",18),c(43,rt,44,12)(44,st,37,3),e()(),t(45,"mat-tab",19),y(46,ct,3,1,"ng-template",17),t(47,"div",20),c(48,pt,4,1,"div",21),c(49,ut,2,0,"div",22)(50,gt,5,0,"div",23)(51,Tt,21,3,"table",24),e()()()(),t(52,"mat-dialog-actions",25)(53,"a",26),M("click",function(){return r.onCancel()}),n(54,"Cancel"),e(),t(55,"a",27),M("click",function(){return r.onConfirm()}),n(56),e()()),i&2){let m,g,k;l(),d(" Transaction Management (",r.data.reservation.confirmationNumber,`)
`),l(10),d("",x(12,20,r.totalAmount(),(m=r.storeStore.selectedStore())==null?null:m.currency)," "),l(6),E(x(18,23,r.paidAmount(),(g=r.storeStore.selectedStore())==null?null:g.currency)),l(5),F(r.balanceAmount()>0?"text-red-600":"text-green-600"),l(),d(" ",x(24,26,r.balanceAmount(),(k=r.storeStore.selectedStore())==null?null:k.currency)," "),l(5),F(r.getCurrentStatusClass()),l(),d(" ",D(30,29,r.getCurrentPaymentStatus())," "),l(7),d("",r.paymentPercentage(),"%"),l(2),oe("width",r.paymentPercentage(),"%"),l(2),C("disabled",r.loadingTransactions()),l(2),C("formGroup",r.paymentForm),l(),p(r.data.isCheckoutFlow?43:44),l(2),C("disabled",r.loadingTransactions()),l(3),p(r.loadError()?48:-1),l(),p(r.loadingTransactions()?49:r.transactions().length===0?50:51),l(6),C("disabled",!r.canSave()||r.processing()),l(),d(" ",r.processing()?"Processing...":"Save Transaction"," ")}},dependencies:[w,z,q,R,pe,V,B,ge,ue,H,G,ie,ee,ne,te,U,N,Q,L,$,fe,_e,J,Y,Re,Ue,se,W,K,be,xe,Ne,Ie,Fe,we,Ae,ye,Me,De,Se,ve,ke,Pe,Ee,Te,Oe,le,de,me],styles:["mat-dialog-content[_ngcontent-%COMP%]{max-height:600px;padding:24px}mat-dialog-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab-list{border-bottom:1px solid #e5e7eb}mat-dialog-content[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:150px}.bg-gray-50[_ngcontent-%COMP%]{background-color:#f9fafb}.bg-gray-50[_ngcontent-%COMP%]   .bg-white[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e5e7eb}.bg-gray-50[_ngcontent-%COMP%]   .bg-white[_ngcontent-%COMP%]   .text-gray-600[_ngcontent-%COMP%]{color:#4b5563;font-size:.75rem}.h-2[_ngcontent-%COMP%]{height:.5rem}.h-2.bg-gray-200[_ngcontent-%COMP%]{background-color:#e5e7eb}.h-2[_ngcontent-%COMP%]   .bg-green-500[_ngcontent-%COMP%]{background-color:#10b981}mat-form-field[_ngcontent-%COMP%]{display:block;margin-bottom:1rem}table[_ngcontent-%COMP%]{border-collapse:collapse}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem;text-align:left;border-bottom:1px solid #e5e7eb;background-color:#f9fafb}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem;border-bottom:1px solid #e5e7eb}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.px-2.py-1.rounded[_ngcontent-%COMP%]{padding:.5rem;border-radius:.25rem;font-size:.75rem;font-weight:600}.bg-blue-100[_ngcontent-%COMP%]{background-color:#dbeafe;color:#0c4a6e}.bg-green-100[_ngcontent-%COMP%]{background-color:#dcfce7;color:#166534}.bg-red-100[_ngcontent-%COMP%]{background-color:#fee2e2;color:#991b1b}.opacity-30[_ngcontent-%COMP%]{opacity:.3}mat-progress-spinner[_ngcontent-%COMP%]{display:block;margin:0 auto}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e7eb;display:flex;justify-content:flex-end;gap:1rem}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.text-xs[_ngcontent-%COMP%]{font-size:.75rem}.text-sm[_ngcontent-%COMP%]{font-size:.875rem}.text-lg[_ngcontent-%COMP%]{font-size:1.125rem}.font-medium[_ngcontent-%COMP%]{font-weight:500}.font-semibold[_ngcontent-%COMP%]{font-weight:600}.font-bold[_ngcontent-%COMP%]{font-weight:700}.text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.text-gray-600[_ngcontent-%COMP%]{color:#4b5563}.text-green-600[_ngcontent-%COMP%]{color:#16a34a}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.text-blue-800[_ngcontent-%COMP%]{color:#1e40af}.text-blue-50[_ngcontent-%COMP%]{background-color:#eff6ff}.border-blue-200[_ngcontent-%COMP%]{border:1px solid #bfdbfe}.rounded-lg[_ngcontent-%COMP%]{border-radius:.5rem}.mb-1[_ngcontent-%COMP%]{margin-bottom:.25rem}.mb-2[_ngcontent-%COMP%]{margin-bottom:.5rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.p-4[_ngcontent-%COMP%]{padding:1rem}.grid[_ngcontent-%COMP%]{display:grid}.gap-2[_ngcontent-%COMP%]{gap:.5rem}.gap-4[_ngcontent-%COMP%]{gap:1rem}.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}@media(max-width:768px){.grid-cols-2[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{je as a,ze as b};
