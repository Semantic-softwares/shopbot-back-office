import{a as De}from"./chunk-HJQVQ5OX.js";import{a as S,b as ve,c as Te}from"./chunk-ETPNRL7S.js";import{a as T}from"./chunk-Z7SBUEFF.js";import{a as Pe}from"./chunk-UAUN2EOX.js";import"./chunk-U7ARI6ZS.js";import{c as Ee}from"./chunk-DCD2EY64.js";import{a as be}from"./chunk-2MXILDTK.js";import{a as h,b as we}from"./chunk-SYBKQTIU.js";import{a as de,b as pe,c as ge,d as Ce,e as ue,f as fe,g as _e,h as Me,i as he,j as Se,k as ye,l as xe}from"./chunk-OALZQOYE.js";import"./chunk-H3VCUIUM.js";import"./chunk-FB5OTQCF.js";import"./chunk-HY4LTOAV.js";import"./chunk-4G2PTLMY.js";import"./chunk-EIZRJIIE.js";import"./chunk-R4SEO7WU.js";import{a as J,b as K,c as U,d as X}from"./chunk-U2JZUY6D.js";import{a as j}from"./chunk-VPPMXXDW.js";import"./chunk-3IQG3KHZ.js";import"./chunk-YK4A772F.js";import"./chunk-HXICWX3M.js";import"./chunk-4YIJHWNC.js";import{d as se}from"./chunk-EPNSEEH4.js";import"./chunk-MMNFDWV7.js";import"./chunk-CGDRKYIW.js";import{b as ae,c as re,d as le}from"./chunk-IS37LNAK.js";import{a as oe,h as ne}from"./chunk-QJ2P7YZL.js";import"./chunk-LXD47U2C.js";import{a as me,b as ce}from"./chunk-ZG44B3L4.js";import{A as ie,b as Z,g as ee,l as te}from"./chunk-SZWYIW32.js";import"./chunk-CTT4BYCX.js";import"./chunk-V7ZBVJLR.js";import"./chunk-NQRUH5DO.js";import{a as z,c as G,h as Y}from"./chunk-MESJBQC5.js";import"./chunk-QEF3JOQ3.js";import"./chunk-LSROOOYO.js";import"./chunk-7NDZPDVA.js";import{b as W,c as q}from"./chunk-OWLRGWNJ.js";import{$ as B,Y as L,Z as $}from"./chunk-OS2CYUJN.js";import{g as A}from"./chunk-WFEXX4HI.js";import"./chunk-U2P6GFP5.js";import{$a as l,Dc as Q,Gb as P,Hb as R,Mb as d,Nb as o,Ob as n,Pb as p,Tb as g,Ub as C,Wb as I,X as E,_b as f,ac as _,ea as u,ec as w,fc as b,gc as v,ja as y,ka as x,kc as O,lc as k,ob as D,pc as r,qc as M,rc as F,ub as s,uc as H,vc as V,wc as N}from"./chunk-IQSYHSID.js";import"./chunk-EQDQRRRY.js";var Ie=()=>[5,10,25,100];function Oe(e,i){e&1&&(o(0,"div",9),p(1,"mat-spinner",12),n())}function ke(e,i){e&1&&p(0,"app-no-record",10)}function Fe(e,i){e&1&&(o(0,"th",25),r(1,"Name"),n())}function He(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.name)}}function Ve(e,i){e&1&&(o(0,"th",25),r(1,"Color"),n())}function Ne(e,i){if(e&1&&(o(0,"td",26)(1,"div",27),r(2),n()()),e&2){let t=i.$implicit;l(),k("background-color",t.color),l(),F(" ",t.color," ")}}function Qe(e,i){e&1&&(o(0,"th",25),r(1,"Icon"),n())}function Ae(e,i){if(e&1&&(o(0,"td",26)(1,"mat-icon"),r(2),n()()),e&2){let t=i.$implicit;l(2),M(t==null?null:t.icon)}}function Le(e,i){e&1&&(o(0,"th",25),r(1,"Items"),n())}function $e(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.items)}}function Be(e,i){e&1&&(o(0,"th",28),r(1,"Actions"),n())}function je(e,i){if(e&1){let t=I();o(0,"td",26)(1,"button",29)(2,"mat-icon"),r(3,"more_vert"),n()(),o(4,"mat-menu",null,0)(6,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.onEditCategory(m))}),o(7,"mat-icon"),r(8,"edit"),n(),o(9,"span"),r(10,"Edit"),n()(),o(11,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.deleteCategory(m))}),o(12,"mat-icon"),r(13,"delete"),n(),o(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=O(5);l(),d("matMenuTriggerFor",t)}}function We(e,i){e&1&&p(0,"tr",31)}function qe(e,i){e&1&&p(0,"tr",32)}function ze(e,i){if(e&1&&(o(0,"div",11)(1,"table",13),g(2,14),s(3,Fe,2,0,"th",15)(4,He,2,1,"td",16),C(),g(5,17),s(6,Ve,2,0,"th",15)(7,Ne,3,3,"td",16),C(),g(8,18),s(9,Qe,2,0,"th",15)(10,Ae,3,1,"td",16),C(),g(11,19),s(12,Le,2,0,"th",15)(13,$e,2,1,"td",16),C(),g(14,20),s(15,Be,2,0,"th",21)(16,je,16,1,"td",16),C(),s(17,We,1,0,"tr",22)(18,qe,1,0,"tr",23),n(),p(19,"mat-paginator",24),n()),e&2){let t=_();l(),d("dataSource",t.dataSource),l(16),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns),l(),d("pageSizeOptions",Q(4,Ie))}}var Re=class e{displayedColumns=["name","color","icon","items","actions"];dataSource;searchText="";dialog=u(Ee);router=u(A);categoryService=u(Pe);storeStore=u(j);paginator;sort;categories=se({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:i})=>this.categoryService.getStoreMenus(i.storeId).pipe(E(t=>{this.dataSource=new xe(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))});applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase()}addCategory(){this.dialog.open(T,{width:"500px",data:{isEdit:!1}}).afterClosed().subscribe(t=>{t&&this.categories.reload()})}onEditCategory(i){this.dialog.open(T,{width:"500px",data:{isEdit:!0,category:i}}).afterClosed().subscribe(a=>{a&&this.categories.reload()})}deleteCategory(i){this.dialog.open(De,{width:"350px",data:{message:`Are you sure you want to delete ${i.name}?`}}).afterClosed().subscribe(a=>{a&&(console.log("Category to delete:",i),this.categoryService.deleteMenu(i._id).subscribe({next:()=>{console.log("Category deleted successfully"),this.categories.reload()}}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-categories"]],viewQuery:function(t,a){if(t&1&&(w(h,5),w(S,5)),t&2){let m;b(m=v())&&(a.paginator=m.first),b(m=v())&&(a.sort=m.first)}},decls:14,vars:2,consts:[["menu","matMenu"],[1,"categories-container","!bg-white"],[1,"!bg-white"],[1,"actions-row"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Search categories",3,"keyup","ngModelChange","ngModel"],[1,"buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","category","title","No Categories","message","No categories found matching your criteria."],[1,"table-container","!bg-white"],["diameter","40"],["mat-table","","matSort","",1,"!bg-white",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","color"],["matColumnDef","icon"],["matColumnDef","items"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of categories",1,"!bg-white",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"color-preview"],["mat-header-cell","",1,"w-20"],["mat-icon-button","","aria-label","Category actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Search"),n(),o(7,"input",6),f("keyup",function(c){return a.applyFilter(c)}),N("ngModelChange",function(c){return V(a.searchText,c)||(a.searchText=c),c}),n()()(),o(8,"div",7)(9,"button",8),f("click",function(){return a.addCategory()}),r(10,"+ ADD CATEGORY"),n()()(),P(11,Oe,2,0,"div",9)(12,ke,1,0,"app-no-record",10)(13,ze,20,5,"div",11),n()()),t&2&&(l(7),H("ngModel",a.searchText),l(4),R(a.categories.isLoading()?11:a.categories.hasValue()&&a.categories.value().length===0?12:a.categories.hasValue()?13:-1))},dependencies:[ye,de,ge,_e,Ce,pe,Me,ue,fe,he,Se,we,h,Te,S,ve,Y,z,G,ae,ne,oe,le,re,B,$,L,q,W,X,K,J,U,ce,me,be,ie,Z,ee,te],styles:[".categories-container[_ngcontent-%COMP%]{margin:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:16px}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.categories-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;display:inline-block;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5)}"]})};export{Re as CategoriesComponent};
