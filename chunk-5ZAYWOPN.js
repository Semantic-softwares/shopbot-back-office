import{a as De}from"./chunk-TH2IFHSA.js";import{a as S,b as Te,c as Ee}from"./chunk-PW5BR2DD.js";import{a as T}from"./chunk-QPC6625G.js";import{a as Pe}from"./chunk-YLAORFJI.js";import"./chunk-WMPBMFVH.js";import{a as ve}from"./chunk-RYCTW6VP.js";import{a as h,b as be}from"./chunk-7WNNENZV.js";import{a as pe,b as ge,c as Ce,d as ue,e as fe,f as _e,g as Me,h as he,i as Se,j as ye,k as xe,l as we}from"./chunk-72VJX2YS.js";import"./chunk-DB3A7P3M.js";import"./chunk-CZ2S7A5U.js";import"./chunk-KVJZH652.js";import"./chunk-XTLJZNJU.js";import"./chunk-HUTJFBBB.js";import"./chunk-SWNYNPHN.js";import{a as ne,b as ae}from"./chunk-TLN5MM36.js";import{b as X,c as Z,d as ee}from"./chunk-3BP5U2AG.js";import"./chunk-BF5Y3WJN.js";import{c as de}from"./chunk-TXVLFBH3.js";import"./chunk-CZME4V75.js";import"./chunk-CQES5GWZ.js";import{a as re,c as le,d as me,e as ce}from"./chunk-CMZGRSEW.js";import"./chunk-K6UY4OSY.js";import{d as se}from"./chunk-ZBSG24BC.js";import"./chunk-GXR3VSCN.js";import{a as oe}from"./chunk-RBYYFQHC.js";import"./chunk-UPBHOZRL.js";import{a as G,c as Y,g as J}from"./chunk-L2IRRR6J.js";import{a as K,h as U}from"./chunk-27T6VRU4.js";import{D as z,b as j,g as W,l as q}from"./chunk-LM7FYRY4.js";import"./chunk-ZENMOCFL.js";import{a as te,b as ie}from"./chunk-EDESGICS.js";import"./chunk-7KAGHLPR.js";import"./chunk-JRF7K3G5.js";import"./chunk-HRGWPEEQ.js";import{X as L,Y as $,Z as B}from"./chunk-BVLPFG4Z.js";import"./chunk-LYY57WCE.js";import"./chunk-5CST2L2O.js";import{c as A}from"./chunk-QJAAU2EQ.js";import"./chunk-S3JL7UCS.js";import"./chunk-ETP2OZKZ.js";import{Ac as Q,Db as P,Eb as R,Jb as d,Kb as o,Lb as n,Mb as p,Qb as g,Rb as C,Tb as I,V as E,Xb as f,Ya as l,Zb as _,bc as w,ca as u,cc as b,dc as v,ha as y,hc as O,ia as x,ic as k,lb as D,mc as r,nc as M,oc as F,rb as s,rc as H,sc as V,tc as N}from"./chunk-KGWH6IHP.js";import"./chunk-EQDQRRRY.js";var Ie=()=>[5,10,25,100];function Oe(e,i){e&1&&(o(0,"div",9),p(1,"mat-spinner",12),n())}function ke(e,i){e&1&&p(0,"app-no-record",10)}function Fe(e,i){e&1&&(o(0,"th",25),r(1,"Name"),n())}function He(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.name)}}function Ve(e,i){e&1&&(o(0,"th",25),r(1,"Color"),n())}function Ne(e,i){if(e&1&&(o(0,"td",26)(1,"div",27),r(2),n()()),e&2){let t=i.$implicit;l(),k("background-color",t.color),l(),F(" ",t.color," ")}}function Qe(e,i){e&1&&(o(0,"th",25),r(1,"Icon"),n())}function Ae(e,i){if(e&1&&(o(0,"td",26)(1,"mat-icon"),r(2),n()()),e&2){let t=i.$implicit;l(2),M(t==null?null:t.icon)}}function Le(e,i){e&1&&(o(0,"th",25),r(1,"Items"),n())}function $e(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.items)}}function Be(e,i){e&1&&(o(0,"th",28),r(1,"Actions"),n())}function je(e,i){if(e&1){let t=I();o(0,"td",26)(1,"button",29)(2,"mat-icon"),r(3,"more_vert"),n()(),o(4,"mat-menu",null,0)(6,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.onEditCategory(m))}),o(7,"mat-icon"),r(8,"edit"),n(),o(9,"span"),r(10,"Edit"),n()(),o(11,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.deleteCategory(m))}),o(12,"mat-icon"),r(13,"delete"),n(),o(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=O(5);l(),d("matMenuTriggerFor",t)}}function We(e,i){e&1&&p(0,"tr",31)}function qe(e,i){e&1&&p(0,"tr",32)}function ze(e,i){if(e&1&&(o(0,"div",11)(1,"table",13),g(2,14),s(3,Fe,2,0,"th",15)(4,He,2,1,"td",16),C(),g(5,17),s(6,Ve,2,0,"th",15)(7,Ne,3,3,"td",16),C(),g(8,18),s(9,Qe,2,0,"th",15)(10,Ae,3,1,"td",16),C(),g(11,19),s(12,Le,2,0,"th",15)(13,$e,2,1,"td",16),C(),g(14,20),s(15,Be,2,0,"th",21)(16,je,16,1,"td",16),C(),s(17,We,1,0,"tr",22)(18,qe,1,0,"tr",23),n(),p(19,"mat-paginator",24),n()),e&2){let t=_();l(),d("dataSource",t.dataSource),l(16),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns),l(),d("pageSizeOptions",Q(4,Ie))}}var Re=class e{displayedColumns=["name","color","icon","items","actions"];dataSource;searchText="";dialog=u(de);router=u(A);categoryService=u(Pe);storeStore=u(oe);paginator;sort;categories=se({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:i})=>this.categoryService.getStoreMenus(i.storeId).pipe(E(t=>{this.dataSource=new we(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))});applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase()}addCategory(){this.dialog.open(T,{width:"500px",data:{isEdit:!1}}).afterClosed().subscribe(t=>{t&&this.categories.reload()})}onEditCategory(i){this.dialog.open(T,{width:"500px",data:{isEdit:!0,category:i}}).afterClosed().subscribe(a=>{a&&this.categories.reload()})}deleteCategory(i){this.dialog.open(De,{width:"350px",data:{message:`Are you sure you want to delete ${i.name}?`}}).afterClosed().subscribe(a=>{a&&(console.log("Category to delete:",i),this.categoryService.deleteMenu(i._id).subscribe({next:()=>{console.log("Category deleted successfully"),this.categories.reload()}}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-categories"]],viewQuery:function(t,a){if(t&1&&(w(h,5),w(S,5)),t&2){let m;b(m=v())&&(a.paginator=m.first),b(m=v())&&(a.sort=m.first)}},decls:14,vars:2,consts:[["menu","matMenu"],[1,"categories-container","!bg-white"],[1,"!bg-white"],[1,"actions-row"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Search categories",3,"keyup","ngModelChange","ngModel"],[1,"buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","category","title","No Categories","message","No categories found matching your criteria."],[1,"table-container","!bg-white"],["diameter","40"],["mat-table","","matSort","",1,"!bg-white",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","color"],["matColumnDef","icon"],["matColumnDef","items"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of categories",1,"!bg-white",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"color-preview"],["mat-header-cell","",1,"w-20"],["mat-icon-button","","aria-label","Category actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Search"),n(),o(7,"input",6),f("keyup",function(c){return a.applyFilter(c)}),N("ngModelChange",function(c){return V(a.searchText,c)||(a.searchText=c),c}),n()()(),o(8,"div",7)(9,"button",8),f("click",function(){return a.addCategory()}),r(10,"+ ADD CATEGORY"),n()()(),P(11,Oe,2,0,"div",9)(12,ke,1,0,"app-no-record",10)(13,ze,20,5,"div",11),n()()),t&2&&(l(7),H("ngModel",a.searchText),l(4),R(a.categories.isLoading()?11:a.categories.hasValue()&&a.categories.value().length===0?12:a.categories.hasValue()?13:-1))},dependencies:[xe,pe,Ce,Me,ue,ge,he,fe,_e,Se,ye,be,h,Ee,S,Te,J,G,Y,X,U,K,ee,Z,B,$,L,ie,te,ce,le,re,me,ae,ne,ve,z,j,W,q],styles:[".categories-container[_ngcontent-%COMP%]{margin:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:16px}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.categories-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;display:inline-block;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5)}"]})};export{Re as CategoriesComponent};
