import{a as mt,b as ut,c as pt,d as gt}from"./chunk-YHH6U7IV.js";import"./chunk-NVPRDFZM.js";import{a as ct}from"./chunk-VQRQEB7B.js";import{a as dt}from"./chunk-DLDGJ2G7.js";import{c as lt}from"./chunk-PW5BR2DD.js";import"./chunk-JWH6MPF3.js";import"./chunk-ROZP2TNQ.js";import"./chunk-R6677L7M.js";import{a as et,b as tt,c as le,d as it,e as nt,f as ot,g as rt,h as de}from"./chunk-NGP3QI5W.js";import{a as at,b as st}from"./chunk-7WNNENZV.js";import{k as Xe}from"./chunk-72VJX2YS.js";import{a as ce,b as me}from"./chunk-DB3A7P3M.js";import{a as De}from"./chunk-CZ2S7A5U.js";import"./chunk-KVJZH652.js";import"./chunk-XTLJZNJU.js";import"./chunk-HUTJFBBB.js";import{d as q}from"./chunk-SWNYNPHN.js";import{a as ae,b as se}from"./chunk-TLN5MM36.js";import{b as Ve,c as ie,d as ne}from"./chunk-3BP5U2AG.js";import{a as Fe}from"./chunk-BF5Y3WJN.js";import{c as Ke}from"./chunk-ZNHPNQ3W.js";import{a as ze,c as We,e as He,f as Je,g as Ye,h as Ze}from"./chunk-TXVLFBH3.js";import{a as Ae,b as Be}from"./chunk-OLCCZ3IB.js";import{a as Qe}from"./chunk-CZME4V75.js";import"./chunk-CQES5GWZ.js";import{a as Le,b as Ue,c as qe,d as $e,e as Ge}from"./chunk-CMZGRSEW.js";import"./chunk-K6UY4OSY.js";import{c as I,d as je}from"./chunk-ZBSG24BC.js";import"./chunk-GXR3VSCN.js";import{a as re}from"./chunk-RBYYFQHC.js";import"./chunk-UPBHOZRL.js";import{g as K}from"./chunk-L2IRRR6J.js";import{a as X,d as Pe,e as ee,h as te}from"./chunk-27T6VRU4.js";import{C as Y,E as Z,b as j,d as w,g as Q,h as z,k as Me,m as W,n as Te,p as Ie,q as Ne,s as H,t as J}from"./chunk-LM7FYRY4.js";import"./chunk-ZENMOCFL.js";import{a as Oe,b as oe}from"./chunk-EDESGICS.js";import"./chunk-6UI2KQ7N.js";import"./chunk-7KAGHLPR.js";import"./chunk-JRF7K3G5.js";import"./chunk-HRGWPEEQ.js";import{Y as $,Z as G}from"./chunk-BVLPFG4Z.js";import"./chunk-LYY57WCE.js";import"./chunk-5CST2L2O.js";import{a as we,c as U}from"./chunk-QJAAU2EQ.js";import"./chunk-S3JL7UCS.js";import{i as ye,m as ke,n as Re,o as Se,q as Ee,r as L}from"./chunk-ETP2OZKZ.js";import{Ac as O,Bc as Ce,Db as u,Eb as p,F as he,Gb as be,Gc as E,Hb as F,Hc as pe,Ib as M,Ic as T,J as fe,Jb as f,Kb as r,Lb as n,Mb as C,Oc as k,Tb as R,Xb as x,Ya as l,Zb as c,ca as y,ha as v,hc as P,ia as h,ic as B,lb as A,m as ve,mc as a,nc as S,oc as g,pc as V,rb as _e,ta as b,wa as xe}from"./chunk-KGWH6IHP.js";import{f as N}from"./chunk-EQDQRRRY.js";var vt=()=>[],ht=(s,e)=>e._id||e.id;function Dt(s,e){if(s&1&&(r(0,"mat-option",19),a(1),n()),s&2){let t=e.$implicit;f("value",t),l(),S(t)}}function Ft(s,e){s&1&&(r(0,"div",20),C(1,"mat-spinner",27),n())}function Mt(s,e){if(s&1&&a(0),s&2){let t=c().$implicit;g(" - Room #",t.roomNumber," ")}}function Tt(s,e){if(s&1&&(r(0,"mat-option",19),a(1),u(2,Mt,1,1),n()),s&2){let t=e.$implicit;f("value",t._id||t.id),l(),g(" ",t.name," "),l(),p(t.roomNumber?2:-1)}}function It(s,e){if(s&1&&(r(0,"mat-form-field",8)(1,"mat-label"),a(2,"Select Room"),n(),r(3,"mat-select",28),F(4,Tt,3,3,"mat-option",19,ht),n()()),s&2){let t=c(2);l(4),M(t.filteredRooms())}}function Nt(s,e){if(s&1&&a(0),s&2){let t=c().$implicit;g(" - Room #",t.roomNumber," ")}}function Pt(s,e){if(s&1&&(r(0,"mat-option",19),a(1),u(2,Nt,1,1),n()),s&2){let t=e.$implicit;f("value",t._id||t.id),l(),g(" ",t.name," "),l(),p(t.roomNumber?2:-1)}}function Vt(s,e){if(s&1&&(r(0,"mat-form-field",8)(1,"mat-label"),a(2,"Select Rooms"),n(),r(3,"mat-select",29),F(4,Pt,3,3,"mat-option",19,ht),n()()),s&2){let t=c(2);l(4),M(t.filteredRooms())}}function Ot(s,e){if(s&1&&u(0,It,6,0,"mat-form-field",8)(1,Vt,6,0,"mat-form-field",8),s&2){let t=c();p(t.bookingType()==="single"?0:1)}}function At(s,e){s&1&&(r(0,"p",21),a(1,"No rooms available for selected dates"),n())}function Bt(s,e){s&1&&(r(0,"p",21),a(1,"Select a room type to see available rooms"),n())}var ue=class s{fb=y(Y);dialogRef=y(ze);roomsService=y(dt);router=y(U);storeStore=y(re);roomTypeField=new Me("");minDate=b(new Date);quickReservationForm=this.fb.group({bookingType:["single",w.required],dateRange:this.fb.group({start:[new Date,[w.required,this.minDateValidator.bind(this)]],end:[this.getNextDay(new Date),[w.required,this.minDateValidator.bind(this)]]}),selectedRoom:["",w.required],adults:[1,[w.required,w.min(1)]],children:[0,[w.required,w.min(0)]]});checkIn=I(this.quickReservationForm.get("dateRange.start").valueChanges,{initialValue:this.quickReservationForm.get("dateRange.start").value});checkOut=I(this.quickReservationForm.get("dateRange.end").valueChanges,{initialValue:this.quickReservationForm.get("dateRange.end").value});selectedRoomId=I(this.quickReservationForm.get("selectedRoom").valueChanges,{initialValue:this.quickReservationForm.get("selectedRoom").value});bookingType=I(this.quickReservationForm.get("bookingType").valueChanges,{initialValue:this.quickReservationForm.get("bookingType").value});adultsValue=I(this.quickReservationForm.get("adults").valueChanges,{initialValue:this.quickReservationForm.get("adults").value});childrenValue=I(this.quickReservationForm.get("children").valueChanges,{initialValue:this.quickReservationForm.get("children").value});numberOfNights=k(()=>{let e=this.checkIn(),t=this.checkOut();if(!e||!t)return 0;let i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/(1e3*60*60*24))});availableRoomsResource=je({params:()=>({checkIn:this.checkIn(),checkOut:this.checkOut(),storeId:this.storeStore.selectedStore()?._id}),stream:({params:e})=>this.getAvailableRooms({checkIn:e.checkIn,checkOut:e.checkOut,storeId:e.storeId})});roomTypeValue=I(this.roomTypeField.valueChanges,{initialValue:this.roomTypeField.value});uniqueRoomTypes=k(()=>{let e=this.availableRoomsResource.value()||[],t=new Set(e.map(i=>i.roomType.name));return Array.from(t).sort()});filteredRooms=k(()=>{let e=this.availableRoomsResource.value()||[],t=this.roomTypeValue();return t?e.filter(i=>i.roomType.name===t):e});maxCapacity=k(()=>{let e=this.selectedRoomId(),t=this.availableRoomsResource.value()||[],i=this.bookingType();if(!e)return{adults:0,children:0};let o=Array.isArray(e)?e:[e],d=0,m=0;return o.forEach(_=>{let D=t.find(ge=>(ge._id||ge.id)===_);D?.roomType?.capacity&&(d+=D.roomType.capacity.adults||0,m+=D.roomType.capacity.children||0)}),{adults:d,children:m}});occupancyValidator=()=>{let e=this.adultsValue()||0,t=this.childrenValue()||0,i=this.maxCapacity();return e>i.adults?(this.quickReservationForm.get("adults")?.setErrors({exceedsCapacity:!0}),{exceedsCapacity:!0}):t>i.children?(this.quickReservationForm.get("children")?.setErrors({exceedsCapacity:!0}),{exceedsCapacity:!0}):e+t>i.adults+i.children?(this.quickReservationForm.setErrors({totalOccupancyExceeded:!0}),{totalOccupancyExceeded:!0}):(this.quickReservationForm.hasError("totalOccupancyExceeded")&&this.quickReservationForm.setErrors(null),null)};occupancyCheck=k(()=>(this.adultsValue(),this.childrenValue(),this.maxCapacity(),this.occupancyValidator()));totalAmount=k(()=>{let e=this.selectedRoomId(),t=this.availableRoomsResource.value()||[],i=this.numberOfNights();if(!e||i===0)return 0;let o=Array.isArray(e)?e:[e],d=0;return o.forEach(m=>{let _=t.find(D=>(D._id||D.id)===m);if(_){let D=_.priceOverride||_.pricePerNight||0;d+=D}}),d*i});getAvailableRooms(e){let t=new Date(e.checkIn).toISOString().split("T")[0],i=new Date(e.checkOut).toISOString().split("T")[0];return!t||!i||!e.storeId?ve([]):this.roomsService.getAvailableRooms({storeId:e.storeId,checkInDate:t,checkOutDate:i})}minDateValidator(e){if(!e.value)return null;let t=new Date(e.value),i=new Date;return i.setHours(0,0,0,0),t.setHours(0,0,0,0),t<i?{minDateInvalid:!0}:null}onCancel(){this.dialogRef.close()}onProceed(){if(this.quickReservationForm.invalid||this.occupancyCheck())return;let e=this.quickReservationForm.value,t=e.dateRange,i={bookingType:e.bookingType,checkInDate:t?.start,checkOutDate:t?.end,roomTypeFilter:this.roomTypeField.value||"",selectedRoom:this.selectedRoomId()||"",adults:e.adults||1,children:e.children||0};this.dialogRef.close(i)}getNextDay(e){let t=new Date(e);return t.setDate(t.getDate()+1),t}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=A({type:s,selectors:[["app-quick-reservation-modal"]],decls:56,vars:13,consts:[["picker",""],[1,"flex","justify-between","items-center"],["mat-dialog-title",""],[1,"flex","items-center","space-x-2","pr-4"],[1,"text-gray-600","font-medium"],[1,"text-lg","font-bold","text-blue-600"],[3,"formGroup"],[1,"space-y-4"],["appearance","outline",1,"w-full"],["formControlName","bookingType"],["value","single"],["value","group"],["formGroupName","dateRange",3,"min","rangePicker"],["matStartDate","","formControlName","start","placeholder","Check-in","readonly",""],["matDateRangeSeparator",""],["matEndDate","","formControlName","end","placeholder","Check-out","readonly",""],["matIconSuffix","",3,"for"],[3,"formControl"],["value",""],[3,"value"],[1,"flex","justify-center","py-4"],[1,"text-gray-500","text-sm","text-center","py-4"],["matInput","","type","number","formControlName","adults"],["matInput","","type","number","formControlName","children"],["align","end",1,"space-x-2","mt-6"],["matButton","outlined",3,"click"],["matButton","filled","color","primary",3,"click","disabled"],["diameter","40"],["formControlName","selectedRoom"],["formControlName","selectedRoom","multiple",""]],template:function(t,i){if(t&1){let o=R();r(0,"div",1)(1,"h2",2),a(2,"Add Quick Reservation"),n(),r(3,"div",3)(4,"span",4),a(5,"Total:"),n(),r(6,"span",5),a(7),E(8,"currency"),n()()(),r(9,"mat-dialog-content")(10,"form",6)(11,"div",7)(12,"mat-form-field",8)(13,"mat-label"),a(14,"Booking Type"),n(),r(15,"mat-select",9)(16,"mat-option",10),a(17,"Single"),n(),r(18,"mat-option",11),a(19,"Group"),n()()(),r(20,"mat-form-field",8)(21,"mat-label"),a(22,"Stay Dates"),n(),r(23,"mat-date-range-input",12),C(24,"input",13),r(25,"span",14),a(26,"\u2013"),n(),C(27,"input",15),n(),C(28,"mat-datepicker-toggle",16)(29,"mat-date-range-picker",null,0),n(),r(31,"mat-form-field",8)(32,"mat-label"),a(33,"Room Type"),n(),r(34,"mat-select",17)(35,"mat-option",18),a(36,"All Room Types"),n(),F(37,Dt,2,2,"mat-option",19,be),n()(),u(39,Ft,2,0,"div",20)(40,Ot,2,1)(41,At,2,0,"p",21)(42,Bt,2,0,"p",21),r(43,"mat-form-field",8)(44,"mat-label"),a(45,"Number of Adults"),n(),C(46,"input",22),n(),r(47,"mat-form-field",8)(48,"mat-label"),a(49,"Number of Children"),n(),C(50,"input",23),n()()()(),r(51,"mat-dialog-actions",24)(52,"button",25),x("click",function(){return v(o),h(i.onCancel())}),a(53," Cancel "),n(),r(54,"button",26),x("click",function(){return v(o),h(i.onProceed())}),a(55," Proceed to Details "),n()()}if(t&2){let o,d=P(30);l(7),g(" ",T(8,8,i.totalAmount(),((o=i.storeStore.selectedStore())==null?null:o.currency)||((o=i.storeStore.selectedStore())==null?null:o.currencyCode)||"$")," "),l(3),f("formGroup",i.quickReservationForm),l(13),f("min",i.minDate())("rangePicker",d),l(5),f("for",d),l(6),f("formControl",i.roomTypeField),l(3),M(i.uniqueRoomTypes()),l(2),p(i.availableRoomsResource.isLoading()?39:(i.availableRoomsResource.value()||O(11,vt)).length>0?40:(i.availableRoomsResource.value()||O(12,vt)).length===0&&!i.availableRoomsResource.isLoading()?41:42),l(15),f("disabled",i.quickReservationForm.invalid)}},dependencies:[L,Z,W,j,Te,Q,z,Ie,J,H,Ne,Ze,He,Ye,Je,K,G,$,me,te,X,ee,ce,q,Ve,de,le,it,nt,ot,rt,ne,ie,De,oe,se,ae,Ee],encapsulation:2})};var Lt=()=>[5,10,25,50,100],Ut=s=>({reservation:s}),xt=(s,e)=>e.value,qt=(s,e)=>e._id;function $t(s,e){if(s&1&&(r(0,"mat-option",37)(1,"span",57),C(2,"span",58),a(3),n()()),s&2){let t=e.$implicit;f("value",t.value),l(2),f("ngClass","bg-"+t.color+"-500 ring-"+t.color+"-200"),l(),g(" ",t.label," ")}}function Gt(s,e){s&1&&(r(0,"div",52),C(1,"mat-spinner",59),r(2,"span",60),a(3,"Loading reservations..."),n()())}function jt(s,e){if(s&1){let t=R();r(0,"div",53)(1,"div",61)(2,"mat-icon",62),a(3,"error"),n(),r(4,"div")(5,"h3",63),a(6,"Error loading reservations"),n(),r(7,"p",64),a(8),n(),r(9,"div",65)(10,"button",66),x("click",function(){v(t);let o=c();return h(o.refreshReservations())}),r(11,"mat-icon",67),a(12,"refresh"),n(),a(13," Retry "),n(),r(14,"button",68),x("click",function(){v(t);let o=c();return h(o.clearError())}),a(15,"Dismiss"),n()()()()()}if(s&2){let t=c();l(8),S(t.error())}}function Qt(s,e){if(s&1){let t=R();r(0,"div",69)(1,"div",70)(2,"mat-icon",71),a(3,"hotel"),n()(),r(4,"h3",72),a(5,"No reservations found"),n(),r(6,"p",73),a(7),n(),r(8,"button",74),x("click",function(){v(t);let o=c(2);return h(o.createReservation())}),r(9,"mat-icon",49),a(10,"add"),n(),a(11," Create New Reservation "),n()()}if(s&2){let t,i=c(2);l(7),g(" ",(t=i.filterForm.get("search"))!=null&&t.value||(t=i.filterForm.get("status"))!=null&&t.value?"Try adjusting your filters or search terms to find matching reservations.":"Get started by creating your first reservation to begin managing your hotel bookings."," ")}}function zt(s,e){s&1&&(r(0,"span",98),a(1," Extended "),n())}function Wt(s,e){if(s&1&&(r(0,"span",99),a(1),n()),s&2){let t=c().$implicit,i=c(3);l(),g("(",i.getExtensionNights(t)," extra nights)")}}function Ht(s,e){s&1&&(r(0,"mat-icon",102),a(1,"refresh"),n())}function Jt(s,e){if(s&1&&C(0,"span",116),s&2){let t=c().$implicit,i=c(3);B("background-color",i.getStatusColorHex(t.status))}}function Yt(s,e){s&1&&(r(0,"mat-icon",104),a(1,"expand_more"),n())}function Zt(s,e){if(s&1&&(r(0,"span",106),a(1),n()),s&2){let t=c().$implicit,i=c(3);l(),g("(+",i.getExtensionNights(t)," ext.)")}}function Kt(s,e){if(s&1){let t=R();r(0,"button",117),x("click",function(){v(t);let o=c().$implicit,d=c(3);return h(d.editReservation(o))}),r(1,"mat-icon",118),a(2,"edit"),n(),r(3,"span"),a(4,"Edit"),n()()}}function Xt(s,e){if(s&1){let t=R();C(0,"mat-divider",119),r(1,"button",120),x("click",function(){v(t);let o=c().$implicit,d=c(3);return h(d.deleteReservation(o))}),r(2,"mat-icon",121),a(3,"delete"),n(),r(4,"span"),a(5,"Delete Reservation"),n()()}}function ei(s,e){if(s&1){let t=R();r(0,"tr",85),x("click",function(){let o=v(t).$implicit,d=c(3);return h(d.viewReservation(o))}),r(1,"td",86)(2,"div",87),x("click",function(o){let d=v(t).$implicit,m=c(3);return o.stopPropagation(),h(m.viewReservation(d))}),a(3),n()(),r(4,"td",86)(5,"div",57)(6,"div",88)(7,"div",89)(8,"span"),a(9),n()()(),r(10,"div",90)(11,"div",91),a(12),E(13,"getGuestName"),n(),r(14,"div",8),a(15),n(),r(16,"div",92),a(17),n()()()(),r(18,"td",86)(19,"div",93)(20,"mat-icon",94),a(21,"hotel"),n(),r(22,"div")(23,"div",95),a(24),n(),r(25,"div",8),a(26),n()()()(),r(27,"td",86)(28,"div",93)(29,"mat-icon",96),a(30,"login"),n(),r(31,"div")(32,"div",95),a(33),E(34,"date"),n(),r(35,"div",8),a(36),n()()()(),r(37,"td",86)(38,"div",93)(39,"mat-icon",97),a(40,"logout"),n(),r(41,"div")(42,"div",95),a(43),E(44,"date"),u(45,zt,2,0,"span",98),n(),r(46,"div",8),a(47),u(48,Wt,2,1,"span",99),n()()()(),r(49,"td",86)(50,"div",100)(51,"button",101),x("click",function(o){return v(t),h(o.stopPropagation())}),u(52,Ht,2,0,"mat-icon",102)(53,Jt,1,2,"span",103),a(54),E(55,"titlecase"),u(56,Yt,2,0,"mat-icon",104),n()()(),r(57,"td",86)(58,"div",105),a(59),E(60,"number"),n(),r(61,"div",8),a(62),u(63,Zt,2,1,"span",106),n(),r(64,"div",107),a(65),E(66,"number"),n()(),r(67,"td",108)(68,"div",109)(69,"div",110)(70,"button",111),x("click",function(o){return v(t),h(o.stopPropagation())}),r(71,"mat-icon",49),a(72,"more_vert"),n()(),r(73,"mat-menu",112,3)(75,"button",113),x("click",function(){let o=v(t).$implicit,d=c(3);return h(d.viewReservation(o))}),r(76,"mat-icon",114),a(77,"visibility"),n(),r(78,"span"),a(79,"View Details"),n()(),u(80,Kt,5,0,"button",115),u(81,Xt,6,0),n()()()()()}if(s&2){let t=e.$implicit,i=P(74),o=c(3),d=P(146);l(3),g(" ",t.confirmationNumber," "),l(6),S(o.getGuestName(t).charAt(0).toUpperCase()||"G"),l(3),g(" ",pe(13,38,t.guest)," "),l(3),g(" ",t.guest.email||"No email"," "),l(2),g(" ",t.guest.phone||"No phone"," "),l(7),g(" ",o.getRoomNumbers(t)," "),l(2),V(" ",t.rooms.length," room",t.rooms.length!==1?"s":""," "),l(7),g(" ",T(34,40,t.checkInDate,"MMM dd, yyyy")," "),l(3),g(" ",t.expectedCheckInTime||"15:00"," "),l(7),g(" ",T(44,43,o.getEffectiveCheckOutDate(t),"MMM dd, yyyy")," "),l(2),p(o.hasApprovedExtensions(t)?45:-1),l(2),g(" ",t.expectedCheckOutTime||"11:00"," "),l(),p(o.hasApprovedExtensions(t)?48:-1),l(3),B("background-color",o.getStatusColorHex(t.status)+"20")("color",o.getStatusColorHex(t.status))("border-color",o.getStatusColorHex(t.status)+"40")("focus:ring-color",o.getStatusColorHex(t.status)+"60"),f("matMenuTriggerFor",d)("matMenuTriggerData",Ce(54,Ut,t))("disabled",o.isStatusUpdating(t._id)),l(),p(o.isStatusUpdating(t._id)?52:53),l(2),g(" ",pe(55,46,t.status)," "),l(2),p(!o.isStatusUpdating(t._id)&&o.getAvailableStatusOptions(t).length>0?56:-1),l(3),V(" ",o.currency,"",T(60,48,o.getEffectiveTotal(t),"1.2-2")," "),l(3),V(" ",t.numberOfNights+o.getExtensionNights(t)," night",t.numberOfNights+o.getExtensionNights(t)!==1?"s":""," "),l(),p(o.hasApprovedExtensions(t)?63:-1),l(2),V(" ",o.currency,"",T(66,51,o.getEffectiveTotal(t)/(t.numberOfNights+o.getExtensionNights(t)||1),"1.2-2"),"/night "),l(5),f("matMenuTriggerFor",i),l(10),p(o.canEdit(t)?80:-1),l(),p(o.canDelete(t)?81:-1)}}function ti(s,e){if(s&1){let t=R();r(0,"div",69)(1,"div",70)(2,"mat-icon",71),a(3,"hotel"),n()(),r(4,"h3",72),a(5,"No reservations found"),n(),r(6,"p",73),a(7,"Try adjusting your filters or create a new reservation."),n(),r(8,"button",74),x("click",function(){v(t);let o=c(3);return h(o.createReservation())}),r(9,"mat-icon",49),a(10,"add"),n(),a(11," New Reservation "),n()()}}function ii(s,e){if(s&1){let t=R();r(0,"div",75)(1,"div",76)(2,"table",77)(3,"thead",78)(4,"tr")(5,"th",79),a(6," Confirmation # "),n(),r(7,"th",79),a(8," Guest Information "),n(),r(9,"th",79),a(10," Room Details "),n(),r(11,"th",79),a(12," Check-in "),n(),r(13,"th",79),a(14," Check-out "),n(),r(15,"th",79),a(16," Status "),n(),r(17,"th",79),a(18," Total Amount "),n(),r(19,"th",80),a(20," Actions "),n()()(),r(21,"tbody",81),F(22,ei,82,56,"tr",82,qt),n()()(),u(24,ti,12,0,"div",69),n(),r(25,"div",83)(26,"mat-paginator",84),x("page",function(o){v(t);let d=c(2);return h(d.onPageChange(o))}),n()()}if(s&2){let t=c(2);l(22),M(t.reservations()),l(2),p(t.reservations().length===0&&!t.loading()?24:-1),l(2),f("length",t.totalReservations())("pageSize",t.pageSize())("pageSizeOptions",O(5,Lt))("pageIndex",t.currentPage()-1)}}function ni(s,e){if(s&1&&(r(0,"div",54),u(1,Qt,12,1,"div",69),u(2,ii,27,6),n()),s&2){let t=c();l(),p(!t.loading()&&t.reservations().length===0?1:-1),l(),p(!t.loading()&&t.reservations().length>0?2:-1)}}function oi(s,e){s&1&&(r(0,"div",123),a(1," No status changes available "),n())}function ri(s,e){if(s&1){let t=R();r(0,"button",127),x("click",function(){let o=v(t).$implicit,d=c().reservation,m=c();return h(m.updateReservationStatus(d,o.value))}),r(1,"mat-icon",128),a(2),n(),r(3,"span"),a(4),n()()}if(s&2){let t=e.$implicit;l(),B("color",t.color),l(),S(t.icon),l(2),S(t.label)}}function ai(s,e){s&1&&(r(0,"div",125),a(1," \u{1F4A1} Confirm reservation before check-in "),n())}function si(s,e){s&1&&(r(0,"div",126),a(1," \u{1F4A1} Ready for check-in "),n())}function li(s,e){if(s&1&&(r(0,"div",122),a(1," Change Status "),n(),u(2,oi,2,0,"div",123),F(3,ri,5,4,"button",124,xt),u(5,ai,2,0,"div",125),u(6,si,2,0,"div",126)),s&2){let t=e.reservation,i=c();l(2),p(i.getAvailableStatusOptions(t).length===0?2:-1),l(),M(i.getAvailableStatusOptions(t)),l(2),p(t.status==="pending"?5:-1),l(),p(t.status==="confirmed"?6:-1)}}var ft=class s{router=y(U);route=y(we);fb=y(Y);reservationService=y(ct);storeStore=y(re);snackBar=y(Fe);dialog=y(We);reservations=b([]);loading=b(!1);error=b(null);currentPage=b(1);pageSize=b(10);totalReservations=b(0);statusUpdating=b(new Set);searchFilter=b("");statusFilter=b("");dateFromFilter=b(null);dateToFilter=b(null);sortByFilter=b("createdAt");sortOrderFilter=b("desc");filterForm=this.fb.group({search:[""],status:[""],dateFrom:[null],dateTo:[null],sortBy:["createdAt"],sortOrder:["desc"]});confirmedCount=k(()=>this.reservations().filter(e=>e.status==="confirmed").length);checkedInCount=k(()=>this.reservations().filter(e=>e.status==="checked_in").length);pendingCount=k(()=>this.reservations().filter(e=>e.status==="pending").length);cancelledCount=k(()=>this.reservations().filter(e=>e.status==="cancelled").length);totalRevenue=k(()=>this.reservations().reduce((e,t)=>e+this.getEffectiveTotal(t),0));filterParams=k(()=>{let t={storeId:this.storeStore.selectedStore()?._id,page:this.currentPage(),limit:this.pageSize(),sortBy:this.sortByFilter(),sortOrder:this.sortOrderFilter()};return this.searchFilter()&&this.searchFilter().trim()&&(t.search=this.searchFilter().trim()),this.statusFilter()&&this.statusFilter().trim()&&(t.status=this.statusFilter().trim()),this.dateFromFilter()&&(t.dateFrom=new Date(this.dateFromFilter()).toISOString().split("T")[0]),this.dateToFilter()&&(t.dateTo=new Date(this.dateToFilter()).toISOString().split("T")[0]),t});displayedColumns=["confirmationNumber","guest","rooms","checkIn","checkOut","status","total","actions"];statusOptions=[{value:"",label:"All Statuses",color:"gray"},{value:"pending",label:"Pending",color:"orange"},{value:"confirmed",label:"Confirmed",color:"blue"},{value:"checked_in",label:"Checked In",color:"green"},{value:"checked_out",label:"Checked Out",color:"purple"},{value:"cancelled",label:"Cancelled",color:"red"},{value:"no_show",label:"No Show",color:"gray"}];constructor(){xe(()=>{let e=this.filterParams();if(console.log("Filter params changed, loading reservations:",e),!e.storeId){console.log("No store selected, skipping load");return}this.loadReservationsInternal()}),this.filterForm.valueChanges.pipe(he(300),fe()).subscribe(e=>{console.log("Form values changed:",e),this.currentPage.set(1),this.searchFilter.set(e.search||""),this.statusFilter.set(e.status||""),this.dateFromFilter.set(e.dateFrom||null),this.dateToFilter.set(e.dateTo||null),this.sortByFilter.set(e.sortBy||"createdAt"),this.sortOrderFilter.set(e.sortOrder||"desc")})}loadReservationsInternal(){this.loading.set(!0),this.error.set(null);let e=this.filterParams();console.log("Loading reservations with params:",e),this.reservationService.getReservations(e).subscribe({next:t=>{console.log("Reservations response:",t),this.reservations.set(t.reservations),this.totalReservations.set(t.total),this.loading.set(!1)},error:t=>{console.error("Error loading reservations:",t),this.error.set(t.message||"Failed to load reservations"),this.loading.set(!1),this.reservations.set([]),this.totalReservations.set(0)}})}loadReservations(){this.loadReservationsInternal()}onPageChange(e){this.currentPage.set(e.pageIndex+1),this.pageSize.set(e.pageSize),this.loadReservations()}clearFilters(){this.filterForm.reset({search:"",status:"",dateFrom:null,dateTo:null,sortBy:"createdAt",sortOrder:"desc"}),this.searchFilter.set(""),this.statusFilter.set(""),this.dateFromFilter.set(null),this.dateToFilter.set(null),this.sortByFilter.set("createdAt"),this.sortOrderFilter.set("desc"),this.currentPage.set(1)}refreshReservations(){this.loadReservations()}getStatusColor(e){return this.statusOptions.find(i=>i.value===e)?.color||"gray"}getGuestName(e){return typeof e.guest=="object"&&e.guest!==null?e.guest.firstName+" "+e.guest.lastName:String(e.guest)}getRoomNumbers(e){return e.rooms.map(t=>typeof t.room=="string"?t.room:t.room.roomNumber).join(", ")}get currency(){return this.storeStore.selectedStore()?.currencyCode||this.storeStore.selectedStore()?.currency||"$"}createReservation(){this.dialog.open(ue,{width:"600px",disableClose:!1}).afterClosed().subscribe(t=>{t&&this.router.navigate(["../create"],{relativeTo:this.route.parent,queryParams:{quickReservation:JSON.stringify(t)}})})}viewReservation(e){this.router.navigate(["../edit",e._id],{relativeTo:this.route.parent})}editReservation(e){this.router.navigate(["../edit",e._id],{relativeTo:this.route.parent})}checkInReservation(e){e.status==="confirmed"&&this.reservationService.checkInReservation(e._id).subscribe({next:()=>{this.refreshReservations()},error:t=>{console.error("Error checking in reservation:",t)}})}checkOutReservation(e){e.status==="checked_in"&&this.reservationService.checkOutReservation(e._id).subscribe({next:()=>{this.refreshReservations()},error:t=>{console.error("Error checking out reservation:",t)}})}cancelReservation(e){let t=prompt("Please provide a reason for cancellation:");t&&this.reservationService.cancelReservation(e._id,t).subscribe({next:()=>{this.refreshReservations()},error:i=>{console.error("Error cancelling reservation:",i)}})}canCheckIn(e){return e.status==="confirmed"&&new Date(e.checkInDate)<=new Date}canCheckOut(e){return e.status==="checked_in"}canCancel(e){return["pending","confirmed"].includes(e.status)}canEdit(e){return e.status!=="cancelled"&&e.status!=="checked_out"&&e.status!=="no_show"&&e.status!=="checked_in"&&!e.actualCheckInDate}canDelete(e){return["pending","cancelled","no_show"].includes(e.status)}deleteReservation(e){let t=this.storeStore.selectedStore();if(!t?._id){this.snackBar.open("No store selected","Close",{duration:3e3});return}let i={storeId:t._id,actionDescription:`delete reservation ${e.confirmationNumber}`,reservationId:e._id};this.dialog.open(gt,{data:i,width:"500px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(d=>{d?.authorized&&d.pin&&this.performReservationDeletion(e,d.pin)})}performReservationDeletion(e,t){let i=new Set(this.statusUpdating());i.add(e._id),this.statusUpdating.set(i),this.reservationService.deleteReservationWithPin(e._id,t).subscribe({next:o=>{let m=this.reservations().filter(_=>_._id!==e._id);this.reservations.set(m),this.totalReservations.set(this.totalReservations()-1),this.snackBar.open(`Reservation ${e.confirmationNumber} deleted successfully`,"Close",{duration:5e3})},error:o=>{console.error("Error deleting reservation:",o),this.snackBar.open(o.message||"Failed to delete reservation","Close",{duration:5e3,panelClass:["error-snackbar"]})},complete:()=>{let o=new Set(this.statusUpdating());o.delete(e._id),this.statusUpdating.set(o)}})}allStatusOptions=[{value:"pending",label:"Pending",icon:"schedule",color:"#f59e0b"},{value:"confirmed",label:"Confirmed",icon:"check_circle",color:"#10b981"},{value:"checked_in",label:"Checked In",icon:"login",color:"#3b82f6"},{value:"checked_out",label:"Checked Out",icon:"logout",color:"#6b7280"},{value:"cancelled",label:"Cancelled",icon:"cancel",color:"#ef4444"},{value:"no_show",label:"No Show",icon:"person_off",color:"#f97316"}];isValidStatusTransition(e,t){return{pending:["confirmed","cancelled","no_show"],confirmed:["checked_in","cancelled","no_show"],checked_in:["checked_out"],checked_out:[],cancelled:[],no_show:[]}[e]?.includes(t)||!1}getStatusTransitionError(e,t){switch(t){case"checked_in":return'Guests can only be checked in when reservation status is "Confirmed"';case"checked_out":return'Guests can only be checked out when reservation status is "Checked In"';case"confirmed":return e==="checked_in"?"Cannot change back to confirmed after check-in":e==="checked_out"?"Cannot change back to confirmed after check-out":"Invalid status transition";default:return`Cannot change status from "${e}" to "${t}"`}}getAvailableStatusOptions(e){let t=e.status;return this.allStatusOptions.filter(i=>i.value!==t&&this.isValidStatusTransition(t,i.value))}updateReservationStatus(e,t){return N(this,null,function*(){if(e.status!==t){if(t==="checked_in"){this.showCheckInDialog(e);return}if(t==="checked_out"){yield this.performCheckOut(e);return}if(!this.isValidStatusTransition(e.status,t)){this.snackBar.open(this.getStatusTransitionError(e.status,t),"Close",{duration:5e3,panelClass:["error-snackbar"]});return}(t==="cancelled"||t==="no_show")&&!confirm(`Are you sure you want to change the status to ${t}?`)||(yield this.performStatusUpdate(e,t))}})}showCheckInDialog(e){let t={reservation:e};this.dialog.open(ut,{data:t,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(o=>{o?.confirmed&&this.performCheckIn(e,o)})}performCheckIn(e,t){return N(this,null,function*(){let i=new Set(this.statusUpdating());i.add(e._id),this.statusUpdating.set(i);try{let o=yield this.reservationService.checkInReservationWithRooms(e._id).toPromise();if(o){let m=this.reservations().map(_=>_._id===e._id?o:_);this.reservations.set(m),this.snackBar.open("Guest checked in successfully! Room status updated to occupied.","Close",{duration:5e3})}}catch(o){console.error("Error during check-in:",o);let d=o instanceof Error?o.message:"Failed to check in guest";this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{let o=new Set(this.statusUpdating());o.delete(e._id),this.statusUpdating.set(o)}})}performCheckOut(e){return N(this,null,function*(){if(this.requiresPaymentBeforeCheckout(e)){this.showPaymentRequiredDialog(e);return}let t=new Set(this.statusUpdating());t.add(e._id),this.statusUpdating.set(t);try{let i=yield this.reservationService.checkOutReservationWithRooms(e._id).toPromise();if(i){let d=this.reservations().map(m=>m._id===e._id?i:m);this.reservations.set(d),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3})}}catch(i){console.error("Error during check-out:",i);let o=i instanceof Error?i.message:"Failed to check out guest";this.snackBar.open(o,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{let i=new Set(this.statusUpdating());i.delete(e._id),this.statusUpdating.set(i)}})}requiresPaymentBeforeCheckout(e){let t=e.pricing.balance>0,i=e.paymentInfo?.status!=="paid";return t&&i}showPaymentRequiredDialog(e){let t={reservation:e,isCheckoutFlow:!0};this.dialog.open(pt,{data:t,width:"600px",maxWidth:"90vw",disableClose:!0}).afterClosed().subscribe(o=>{o?.confirmed&&o.paymentData&&(o.paymentData.amount!==void 0?this.processPaymentAndCheckout(e,o.paymentData):console.error("Expected amount-based payment data for checkout flow"))})}processPaymentAndCheckout(e,t){return N(this,null,function*(){let i=new Set(this.statusUpdating());i.add(e._id),this.statusUpdating.set(i);try{yield this.reservationService.processPayment(e._id,{amount:t.amount,method:t.method,reference:t.reference||`PAY-${Date.now()}`}).toPromise();let o=yield this.reservationService.getReservationById(e._id).toPromise();if(o){let m=this.reservations().map(_=>_._id===e._id?o:_);this.reservations.set(m),this.snackBar.open(`Payment of ${this.formatCurrency(t.amount)} recorded successfully`,"Close",{duration:3e3}),o.pricing.balance<=0||o.paymentInfo?.status==="paid"?setTimeout(()=>{this.proceedWithCheckout(o)},1500):this.snackBar.open("Payment recorded, but outstanding balance remains. Please complete payment before checkout.","Close",{duration:5e3,panelClass:["warning-snackbar"]})}}catch(o){console.error("Error processing payment for checkout:",o);let d=o instanceof Error?o.message:"Failed to process payment";this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{let o=new Set(this.statusUpdating());o.delete(e._id),this.statusUpdating.set(o)}})}proceedWithCheckout(e){return N(this,null,function*(){let t=new Set(this.statusUpdating());t.add(e._id),this.statusUpdating.set(t);try{let i=yield this.reservationService.checkOutReservationWithRooms(e._id).toPromise();if(i){let d=this.reservations().map(m=>m._id===e._id?i:m);this.reservations.set(d),this.snackBar.open("Guest checked out successfully! Room status updated to cleaning.","Close",{duration:5e3})}}catch(i){console.error("Error during checkout after payment:",i);let o=i instanceof Error?i.message:"Failed to complete checkout";this.snackBar.open(o,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{let i=new Set(this.statusUpdating());i.delete(e._id),this.statusUpdating.set(i)}})}formatCurrency(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.storeStore.selectedStore()?.currencyCode||"USD"}).format(e)}performStatusUpdate(e,t){return N(this,null,function*(){let i=new Set(this.statusUpdating());i.add(e._id),this.statusUpdating.set(i);try{let o=yield this.reservationService.updateReservationStatus(e._id,t).toPromise();if(o){let m=this.reservations().map(_=>_._id===e._id?o:_);this.reservations.set(m),this.snackBar.open(`Status updated to ${t}`,"Close",{duration:3e3})}}catch(o){console.error("Error updating reservation status:",o);let d=o instanceof Error?o.message:"Failed to update status";this.snackBar.open(d,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{let o=new Set(this.statusUpdating());o.delete(e._id),this.statusUpdating.set(o)}})}isStatusUpdating(e){return this.statusUpdating().has(e)}getStatusColorHex(e){return{pending:"#f59e0b",confirmed:"#10b981",checked_in:"#3b82f6",checked_out:"#6b7280",cancelled:"#ef4444",no_show:"#f97316"}[e]||"#6b7280"}getStatusIcon(e){return{pending:"schedule",confirmed:"check_circle",checked_in:"login",checked_out:"logout",cancelled:"cancel",no_show:"person_off"}[e]||"help"}clearError(){this.error.set(null),this.loadReservations()}exportReservations(){try{let e=this.generateCSV(),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(i.download!==void 0){let o=URL.createObjectURL(t);i.setAttribute("href",o),i.setAttribute("download",this.generateExportFilename()),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),this.snackBar.open("Reservations exported successfully","Close",{duration:3e3})}}catch(e){console.error("Error exporting reservations:",e),this.snackBar.open("Failed to export reservations","Close",{duration:5e3,panelClass:["error-snackbar"]})}}generateCSV(){let t=[["Confirmation Number","Guest Name","Email","Phone","Room Numbers","Check-in Date","Check-out Date","Check-in Time","Check-out Time","Status","Adults","Children","Nights","Subtotal","Taxes","Total","Balance","Payment Status","Created Date","Special Requests/Notes"].join(",")];return this.reservations().forEach(i=>{let o=[this.escapeCsvField(i.confirmationNumber||""),this.escapeCsvField(this.getGuestName(i)),this.escapeCsvField(typeof i.guest!="string"&&i.guest?.email||""),this.escapeCsvField(typeof i.guest!="string"&&i.guest?.phone||""),this.escapeCsvField(this.getRoomNumbers(i)),this.formatDateForCSV(i.checkInDate),this.formatDateForCSV(this.getEffectiveCheckOutDate(i)),this.escapeCsvField(i.expectedCheckInTime||""),this.escapeCsvField(i.expectedCheckOutTime||""),this.escapeCsvField(i.status||""),i.numberOfNights||0,i.pricing?.subtotal||0,i.pricing?.taxes||0,this.getEffectiveTotal(i),i.pricing?.balance||0,this.escapeCsvField(i.paymentInfo?.status||"pending"),this.formatDateForCSV(i.createdAt),this.escapeCsvField(i.specialRequests||i.internalNotes||"")];t.push(o.join(","))}),t.join(`
`)}escapeCsvField(e){if(e==null)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes(`
`)?`"${t.replace(/"/g,'""')}"`:t}formatDateForCSV(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):""}generateExportFilename(){let e=new Date,t=e.toISOString().split("T")[0],i=e.toTimeString().split(" ")[0].replace(/:/g,"-"),o=`reservations_${t}_${i}`,d=this.filterForm.value;return d.search&&(o+=`_search-${d.search.replace(/[^a-zA-Z0-9]/g,"")}`),d.status&&(o+=`_${d.status}`),(d.dateFrom||d.dateTo)&&(o+="_filtered"),`${o}.csv`}hasApprovedExtensions(e){return!!(e.extensions&&e.extensions.some(t=>t.status==="approved"))}getEffectiveCheckOutDate(e){if(this.hasApprovedExtensions(e)){let t=e.extensions?.filter(i=>i.status==="approved")||[];if(t.length>0)return t.reduce((o,d)=>{let m=new Date(o.newCheckOutDate);return new Date(d.newCheckOutDate)>m?d:o}).newCheckOutDate}return e.checkOutDate}getExtensionNights(e){return e.extensions?e.extensions.filter(i=>i.status==="approved").reduce((i,o)=>i+(o.additionalNights||0),0):0}getApprovedExtensionCost(e){return e.extensions?e.extensions.filter(i=>i.status==="approved").reduce((i,o)=>i+(o.additionalCost||0),0):0}getEffectiveTotal(e){return e.pricing?.total||0}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=A({type:s,selectors:[["app-reservations-list"]],decls:148,vars:20,consts:[["dateFromPicker",""],["dateToPicker",""],["statusMenu","matMenu"],["actionMenu","matMenu"],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","border-b","border-blue-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-6"],[1,"text-3xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600"],["mat-raised-button","","color","primary",1,"!bg-gradient-to-r","!from-blue-600","!to-blue-700","hover:!from-blue-700","hover:!to-blue-800","!text-white","px-6","py-3","rounded-lg","font-medium","transition-all","duration-200","shadow-lg","hover:shadow-xl","transform","hover:scale-105",3,"click"],[1,"mr-2"],[1,"bg-white","shadow-sm","border-b","border-gray-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-6","gap-4"],[1,"bg-gradient-to-br","from-blue-50","to-blue-100","rounded-xl","border","border-blue-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"flex","items-center","gap-3"],[1,"w-12","h-12","bg-gradient-to-r","from-blue-500","to-blue-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"text-white","text-xl"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-sm","font-medium","text-gray-600"],[1,"bg-gradient-to-br","from-green-50","to-green-100","rounded-xl","border","border-green-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"w-12","h-12","bg-gradient-to-r","from-green-500","to-green-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"bg-gradient-to-br","from-purple-50","to-purple-100","rounded-xl","border","border-purple-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"w-12","h-12","bg-gradient-to-r","from-purple-500","to-purple-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"bg-gradient-to-br","from-orange-50","to-orange-100","rounded-xl","border","border-orange-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"w-12","h-12","bg-gradient-to-r","from-orange-500","to-orange-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"bg-gradient-to-br","from-red-50","to-red-100","rounded-xl","border","border-red-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"w-12","h-12","bg-gradient-to-r","from-red-500","to-red-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[1,"bg-gradient-to-br","from-cyan-50","to-cyan-100","rounded-xl","border","border-cyan-200","p-4","shadow-sm","hover:shadow-md","transition-all","duration-200"],[1,"w-12","h-12","bg-gradient-to-r","from-cyan-500","to-cyan-600","rounded-full","flex","items-center","justify-center","shadow-lg"],[3,"formGroup"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","xl:grid-cols-6","gap-4","mb-4"],[1,"lg:col-span-2"],["appearance","outline",1,"w-full","[&_.mdc-text-field--outlined]:!bg-gray-50","[&_.mdc-text-field--outlined]:!border-gray-200","hover:[&_.mdc-text-field--outlined]:!border-blue-300","[&_.mdc-text-field--focused_.mdc-text-field--outlined]:!border-blue-500"],["matPrefix","",1,"text-gray-400"],["matInput","","placeholder","Guest name or confirmation #","formControlName","search",1,"!bg-gray-50"],["formControlName","status"],[3,"value"],["matInput","","formControlName","dateFrom",1,"!bg-gray-50",3,"matDatepicker"],["matSuffix","",1,"text-gray-400",3,"for"],["matInput","","formControlName","dateTo",1,"!bg-gray-50",3,"matDatepicker"],["formControlName","sortBy"],["value","createdAt"],["value","checkInDate"],["value","checkOutDate"],["value","total"],["value","guestName"],[1,"flex","items-center","justify-between"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-gray-700","bg-white","border","border-gray-300","rounded-lg","hover:bg-gray-50","hover:border-gray-400","transition-all","duration-200","flex","items-center","gap-2",3,"click"],[1,"text-lg"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-white","bg-green-600","border","border-green-600","rounded-lg","hover:bg-green-700","hover:border-green-700","transition-all","duration-200","flex","items-center","gap-2","disabled:opacity-50","disabled:cursor-not-allowed","disabled:hover:bg-green-600",3,"click","disabled"],[1,"flex","items-center","text-sm","text-gray-600"],[1,"flex","justify-center","items-center","py-12","bg-white"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","m-4"],[1,"py-6"],[1,"!shadow-xl","!border","!border-gray-200","!rounded-lg"],["matMenuContent",""],[1,"flex","items-center"],[1,"w-3","h-3","rounded-full","mr-3","ring-2",3,"ngClass"],["diameter","40",1,"!text-blue-600"],[1,"ml-3","text-gray-600"],[1,"flex"],[1,"text-red-500","mr-2"],[1,"text-red-800","font-medium"],[1,"text-red-700","text-sm","mt-1"],[1,"mt-3","flex","space-x-3"],["mat-button","","color","warn",1,"!text-red-600",3,"click"],[1,"mr-1"],["mat-button","",1,"!text-gray-600",3,"click"],[1,"py-20","bg-gradient-to-br","from-gray-50","to-white","text-center"],[1,"w-16","h-16","bg-gray-200","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-gray-400"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-500","mb-6"],[1,"!bg-gradient-to-r","!from-blue-600","!to-blue-700","hover:!from-blue-700","hover:!to-blue-800","!text-white","px-6","py-3","rounded-lg","font-medium","transition-all","duration-200","shadow-lg","hover:shadow-xl","transform","hover:scale-105","inline-flex","items-center","gap-2",3,"click"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden","mb-6"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100"],[1,"px-6","py-4","text-left","text-xs","font-semibold","text-gray-700","uppercase","tracking-wider","border-b-2","border-gray-200"],[1,"px-6","py-4","text-right","text-xs","font-semibold","text-gray-700","uppercase","tracking-wider","border-b-2","border-gray-200"],[1,"bg-white","divide-y","divide-gray-100"],[1,"hover:bg-gray-50","transition-colors","duration-200","cursor-pointer"],[1,"bg-white","px-4","py-3","border-t","border-gray-200","sm:px-6","rounded-b-lg"],["showFirstLastButtons","",1,"!border-0","!bg-white","[&_.mat-mdc-paginator-range-label]:!text-gray-600",3,"page","length","pageSize","pageSizeOptions","pageIndex"],[1,"hover:bg-gray-50","transition-colors","duration-200","cursor-pointer",3,"click"],[1,"px-6","py-4","whitespace-nowrap","border-b","border-gray-100"],[1,"text-sm","font-bold","text-blue-600","hover:text-blue-800","cursor-pointer","transition-colors","bg-blue-50","px-3","py-1","rounded-full","border","border-blue-200",3,"click"],[1,"flex-shrink-0","h-12","w-12"],[1,"h-12","w-12","rounded-full","bg-gradient-to-br","from-blue-500","to-blue-600","flex","items-center","justify-center","text-white","font-bold","text-lg","shadow-md","ring-2","ring-blue-200"],[1,"ml-4"],[1,"text-sm","font-semibold","text-gray-900"],[1,"text-xs","text-gray-500","font-medium"],[1,"flex","items-center","space-x-2"],[1,"text-purple-600","text-lg"],[1,"text-sm","font-medium","text-gray-900"],[1,"text-green-600","text-lg"],[1,"text-red-600","text-lg"],[1,"ml-2","px-2","py-1","bg-orange-100","text-orange-700","text-xs","font-medium","rounded-full"],[1,"text-xs","text-orange-600","ml-1"],[1,"relative"],[1,"inline-flex","items-center","px-3","py-2","text-xs","font-bold","rounded-full","shadow-sm","ring-2","hover:opacity-80","transition-all","duration-200","disabled:opacity-50","disabled:cursor-not-allowed","focus:outline-none","focus:ring-2","focus:ring-offset-2",3,"click","matMenuTriggerFor","matMenuTriggerData","disabled"],[1,"w-2","h-2","mr-2","animate-spin","text-xs"],[1,"w-2","h-2","rounded-full","mr-2",3,"background-color"],[1,"ml-1","text-xs","opacity-60"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-orange-600","ml-1"],[1,"text-xs","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium","border-b","border-gray-100"],[1,"flex","items-center","justify-end"],[1,"relative","inline-block","text-left"],["title","More Actions",1,"text-gray-600","hover:text-gray-900","p-2","rounded-lg","hover:bg-gray-100","transition-all","duration-200",3,"click","matMenuTriggerFor"],[1,"[&_.mat-mdc-menu-panel]:!shadow-xl","[&_.mat-mdc-menu-panel]:!border","[&_.mat-mdc-menu-panel]:!border-gray-200","[&_.mat-mdc-menu-panel]:!rounded-lg"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-blue-50","hover:!text-blue-700","!transition-colors",3,"click"],[1,"mr-3","!text-blue-600"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors"],[1,"w-2","h-2","rounded-full","mr-2"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-green-50","hover:!text-green-700","!transition-colors",3,"click"],[1,"mr-3","!text-green-600"],[1,"!border-gray-200","my-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-red-50","hover:!text-red-700","!transition-colors",3,"click"],[1,"mr-3","!text-red-600"],[1,"px-3","py-2","text-xs","font-medium","text-gray-500","border-b","border-gray-100"],[1,"px-3","py-2","text-xs","text-gray-400","italic"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors"],[1,"px-3","py-2","text-xs","text-amber-600","bg-amber-50","border-t","border-amber-100","mt-1"],[1,"px-3","py-2","text-xs","text-blue-600","bg-blue-50","border-t","border-blue-100","mt-1"],["mat-menu-item","",1,"!text-gray-700","hover:!bg-gray-50","!transition-colors",3,"click"],[1,"mr-3","!text-base"]],template:function(t,i){if(t&1){let o=R();r(0,"div",4)(1,"div",5)(2,"div",6)(3,"div")(4,"h1",7),a(5,"Reservations"),n(),r(6,"p",8),a(7,"Manage hotel reservations and guest bookings"),n()(),r(8,"button",9),x("click",function(){return v(o),h(i.createReservation())}),r(9,"mat-icon",10),a(10,"add"),n(),a(11," New Reservation "),n()()()(),r(12,"div",11)(13,"div",12)(14,"div",13)(15,"div",14)(16,"div",15)(17,"div",16)(18,"mat-icon",17),a(19,"hotel"),n()(),r(20,"div")(21,"div",18),a(22),n(),r(23,"div",19),a(24,"Total"),n()()()(),r(25,"div",20)(26,"div",15)(27,"div",21)(28,"mat-icon",17),a(29,"check_circle"),n()(),r(30,"div")(31,"div",18),a(32),n(),r(33,"div",19),a(34,"Confirmed"),n()()()(),r(35,"div",22)(36,"div",15)(37,"div",23)(38,"mat-icon",17),a(39,"person"),n()(),r(40,"div")(41,"div",18),a(42),n(),r(43,"div",19),a(44,"Checked In"),n()()()(),r(45,"div",24)(46,"div",15)(47,"div",25)(48,"mat-icon",17),a(49,"schedule"),n()(),r(50,"div")(51,"div",18),a(52),n(),r(53,"div",19),a(54,"Pending"),n()()()(),r(55,"div",26)(56,"div",15)(57,"div",27)(58,"mat-icon",17),a(59,"cancel"),n()(),r(60,"div")(61,"div",18),a(62),n(),r(63,"div",19),a(64,"Cancelled"),n()()()(),r(65,"div",28)(66,"div",15)(67,"div",29)(68,"mat-icon",17),a(69,"attach_money"),n()(),r(70,"div")(71,"div",18),a(72),E(73,"number"),n(),r(74,"div",19),a(75,"Revenue"),n()()()()()()(),r(76,"div",11)(77,"div",12)(78,"form",30)(79,"div",31)(80,"div",32)(81,"mat-form-field",33)(82,"mat-label"),a(83,"Search reservations..."),n(),r(84,"mat-icon",34),a(85,"search"),n(),C(86,"input",35),n()(),r(87,"div")(88,"mat-form-field",33)(89,"mat-label"),a(90,"Status"),n(),r(91,"mat-select",36),F(92,$t,4,3,"mat-option",37,xt),n()()(),r(94,"div")(95,"mat-form-field",33)(96,"mat-label"),a(97,"Check-in from"),n(),C(98,"input",38)(99,"mat-datepicker-toggle",39)(100,"mat-datepicker",null,0),n()(),r(102,"div")(103,"mat-form-field",33)(104,"mat-label"),a(105,"Check-in to"),n(),C(106,"input",40)(107,"mat-datepicker-toggle",39)(108,"mat-datepicker",null,1),n()(),r(110,"div")(111,"mat-form-field",33)(112,"mat-label"),a(113,"Sort by"),n(),r(114,"mat-select",41)(115,"mat-option",42),a(116,"Created Date"),n(),r(117,"mat-option",43),a(118,"Check-in Date"),n(),r(119,"mat-option",44),a(120,"Check-out Date"),n(),r(121,"mat-option",45),a(122,"Total Amount"),n(),r(123,"mat-option",46),a(124,"Guest Name"),n()()()()(),r(125,"div",47)(126,"div",15)(127,"button",48),x("click",function(){return v(o),h(i.clearFilters())}),r(128,"mat-icon",49),a(129,"clear"),n(),a(130," Clear Filters "),n(),r(131,"button",48),x("click",function(){return v(o),h(i.refreshReservations())}),r(132,"mat-icon",49),a(133,"refresh"),n(),a(134," Refresh "),n(),r(135,"button",50),x("click",function(){return v(o),h(i.exportReservations())}),r(136,"mat-icon",49),a(137,"download"),n(),a(138," Export CSV "),n()(),r(139,"div",51)(140,"span"),a(141),n()()()()()(),u(142,Gt,4,0,"div",52),u(143,jt,16,1,"div",53),u(144,ni,3,2,"div",54),r(145,"mat-menu",55,2),_e(147,li,7,3,"ng-template",56),n()}if(t&2){let o=P(101),d=P(109);l(22),S(i.reservations().length),l(10),S(i.confirmedCount()),l(10),S(i.checkedInCount()),l(10),S(i.pendingCount()),l(10),S(i.cancelledCount()),l(10),V("",i.currency,"",T(73,17,i.totalRevenue(),"1.2-2")),l(6),f("formGroup",i.filterForm),l(14),M(i.statusOptions),l(6),f("matDatepicker",o),l(),f("for",o),l(7),f("matDatepicker",d),l(),f("for",d),l(28),f("disabled",i.reservations().length===0||i.loading()),l(6),g("Showing ",i.reservations().length," reservations"),l(),p(i.loading()?142:-1),l(),p(i.error()&&!i.loading()?143:-1),l(),p(!i.loading()&&!i.error()?144:-1)}},dependencies:[L,ye,Z,W,j,Q,z,J,H,Xe,st,at,lt,ne,ie,te,X,Pe,ee,me,ce,q,G,$,oe,Oe,Ke,K,Ge,qe,Le,Ue,$e,Qe,de,et,tt,le,se,ae,Be,Ae,Se,ke,Re,mt],encapsulation:2})};export{ft as ReservationsListComponent};
