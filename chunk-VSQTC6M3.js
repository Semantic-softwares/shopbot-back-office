import{a as Ce}from"./chunk-VWN5Z5VW.js";import{a as he,b as ve}from"./chunk-BTXZK3DD.js";import{a as de,b as ce,c as pe,g as ue}from"./chunk-M3D2B6CG.js";import"./chunk-MS4AQ6UA.js";import{a as fe,b as ge}from"./chunk-YVYCFWPM.js";import"./chunk-3RK6DDJD.js";import{a as Se,b as xe}from"./chunk-LIUA42FM.js";import"./chunk-JQGESV5S.js";import{d as U}from"./chunk-XQNDMVIO.js";import{b as te,c as ie,d as ne}from"./chunk-3632TDEK.js";import{a as z}from"./chunk-I24LUS2H.js";import{c as se}from"./chunk-DSRTAZMJ.js";import{g as me}from"./chunk-H55FNLX4.js";import"./chunk-EEQKDLYL.js";import"./chunk-JTD73F4Y.js";import{a as X,e as Z,h as ee}from"./chunk-JGZ2V5AL.js";import{B as K,D as Y,b as R,d as c,g as O,h as A,m as L,n as q,p as D,q as Q,s as j,w as W,x as $}from"./chunk-CXVWFC6J.js";import"./chunk-JTLCVARK.js";import{g as J}from"./chunk-HA7VDR7W.js";import{a as oe,b as re}from"./chunk-7C3RSL2D.js";import"./chunk-OHZSVTBE.js";import"./chunk-VIOSJ367.js";import"./chunk-TEL7Y7UN.js";import{p as B,q as V}from"./chunk-FSA22CPB.js";import{a as ae,b as le}from"./chunk-6U4I4OYM.js";import"./chunk-M2YK6UF7.js";import"./chunk-BVQK7CK4.js";import"./chunk-AGZJ637K.js";import"./chunk-TQDHD3WD.js";import{t as G}from"./chunk-DWCYWQVU.js";import{Db as x,Eb as h,Hb as k,Ib as P,Jb as u,Kb as i,Lb as e,Mb as m,Nb as I,Ob as N,Qb as w,Ub as S,Vb as p,_a as s,dc as H,fa as _,ic as t,jc as y,kb as F,la as f,ma as g,qb as T,va as E}from"./chunk-5AECHVKR.js";import{a as C,b,f as v}from"./chunk-EQDQRRRY.js";var M=(r,n)=>n.value;function _e(r,n){r&1&&(i(0,"div",10),m(1,"mat-spinner",12),i(2,"span",13),t(3,"Loading settings..."),e()())}function Ee(r,n){r&1&&(i(0,"div",100)(1,"mat-icon",22),t(2,"business"),e(),i(3,"span"),t(4,"Hotel Info"),e()())}function ye(r,n){if(r&1&&(i(0,"mat-option",44),t(1),e()),r&2){let o=n.$implicit;u("value",o.value),s(),y(o.label)}}function Te(r,n){r&1&&(I(0),i(1,"mat-icon",101),t(2,"refresh"),e(),t(3," Saving... "),N())}function ke(r,n){r&1&&(I(0),i(1,"mat-icon",80),t(2,"save"),e(),t(3," Save Hotel Information "),N())}function Pe(r,n){r&1&&(i(0,"div",100)(1,"mat-icon",9),t(2,"print"),e(),i(3,"span"),t(4,"Printer"),e()())}function we(r,n){if(r&1){let o=w();i(0,"div",53)(1,"div",102)(2,"mat-icon",103),t(3,"check_circle"),e()(),i(4,"h4",104),t(5,"Printer Connected"),e(),i(6,"p",105),t(7),e(),i(8,"div",106)(9,"button",107),S("click",function(){f(o);let l=p(2);return g(l.testPrint())}),i(10,"mat-icon",80),t(11,"print"),e(),t(12," Test Print "),e(),i(13,"button",108),S("click",function(){f(o);let l=p(2);return g(l.testPaperUtilization())}),i(14,"mat-icon",80),t(15,"straighten"),e(),t(16," Test Paper Width "),e(),i(17,"div",109)(18,"input",110,0),S("change",function(l){f(o);let d=p(2);return g(d.uploadLogo(l))}),e(),i(20,"button",107),S("click",function(){f(o);let l=H(19);return g(l.click())}),i(21,"mat-icon",80),t(22,"image"),e(),t(23," Upload Logo "),e()(),i(24,"button",111),S("click",function(){f(o);let l=p(2);return g(l.disconnectPrinter())}),i(25,"mat-icon",80),t(26,"bluetooth_disabled"),e(),t(27," Disconnect "),e()()()}if(r&2){let o,a=p(2);s(7),y((o=a.connectedPrinter())==null?null:o.name)}}function Ie(r,n){r&1&&(i(0,"mat-icon",101),t(1,"refresh"),e(),t(2," Connecting... "))}function Ne(r,n){r&1&&(i(0,"mat-icon",80),t(1,"bluetooth"),e(),t(2," Connect Printer "))}function Me(r,n){if(r&1){let o=w();i(0,"div",53)(1,"div",112)(2,"mat-icon",113),t(3,"print_disabled"),e()(),i(4,"h4",104),t(5,"No Printer Connected"),e(),i(6,"p",105),t(7,"Connect a Bluetooth printer to enable receipt printing"),e(),i(8,"button",114),S("click",function(){f(o);let l=p(2);return g(l.connectPrinter())}),x(9,Ie,3,0)(10,Ne,3,0),e()()}if(r&2){let o=p(2);s(8),u("disabled",o.printerConnecting()),s(),h(o.printerConnecting()?9:10)}}function Fe(r,n){if(r&1&&(i(0,"mat-option",44),t(1),e()),r&2){let o=n.$implicit;u("value",o.value),s(),y(o.label)}}function He(r,n){if(r&1&&(i(0,"mat-option",44),t(1),e()),r&2){let o=n.$implicit;u("value",o.value),s(),y(o.label)}}function Ge(r,n){r&1&&(i(0,"mat-icon",101),t(1,"refresh"),e(),t(2," Saving... "))}function Ue(r,n){r&1&&(i(0,"mat-icon",80),t(1,"save"),e(),t(2," Save Printer Settings "))}function Be(r,n){r&1&&(i(0,"div",100)(1,"mat-icon",71),t(2,"email"),e(),i(3,"span"),t(4,"Email"),e()())}function Ve(r,n){r&1&&(i(0,"mat-icon",101),t(1,"refresh"),e(),t(2," Saving... "))}function ze(r,n){r&1&&(i(0,"mat-icon",80),t(1,"save"),e(),t(2," Save Email Settings "))}function Re(r,n){r&1&&(i(0,"div",100)(1,"mat-icon",88),t(2,"notifications"),e(),i(3,"span"),t(4,"Notifications"),e()())}function Oe(r,n){r&1&&(i(0,"mat-icon",101),t(1,"refresh"),e(),t(2," Saving... "))}function Ae(r,n){r&1&&(i(0,"mat-icon",80),t(1,"save"),e(),t(2," Save Notification Settings "))}function Le(r,n){if(r&1){let o=w();i(0,"div",11)(1,"mat-tab-group",14)(2,"mat-tab"),T(3,Ee,5,0,"ng-template",15),i(4,"div",16)(5,"form",17),S("ngSubmit",function(){f(o);let l=p();return g(l.saveHotelInfo())}),i(6,"div",18)(7,"div",19)(8,"div",20)(9,"h3",21)(10,"mat-icon",22),t(11,"info"),e(),t(12," Basic Information "),e()(),i(13,"div",23)(14,"mat-form-field",24)(15,"mat-label"),t(16,"Hotel Name"),e(),m(17,"input",25),i(18,"mat-icon",26),t(19,"business"),e()(),i(20,"div",27)(21,"mat-form-field",24)(22,"mat-label"),t(23,"Phone Number"),e(),m(24,"input",28),i(25,"mat-icon",26),t(26,"phone"),e()(),i(27,"mat-form-field",24)(28,"mat-label"),t(29,"Email Address"),e(),m(30,"input",29),i(31,"mat-icon",26),t(32,"email"),e()(),i(33,"mat-form-field",24)(34,"mat-label"),t(35,"Website (Optional)"),e(),m(36,"input",30),i(37,"mat-icon",26),t(38,"language"),e()()()()(),i(39,"div",19)(40,"div",20)(41,"h3",21)(42,"mat-icon",9),t(43,"location_on"),e(),t(44," Address Information "),e()(),i(45,"div",31)(46,"mat-form-field",24)(47,"mat-label"),t(48,"Street Address"),e(),m(49,"textarea",32),i(50,"mat-icon",26),t(51,"place"),e()(),i(52,"div",33)(53,"mat-form-field",34)(54,"mat-label"),t(55,"City"),e(),m(56,"input",35),e(),i(57,"mat-form-field",34)(58,"mat-label"),t(59,"State/Province"),e(),m(60,"input",36),e()(),i(61,"div",33)(62,"mat-form-field",34)(63,"mat-label"),t(64,"Country"),e(),m(65,"input",37),e(),i(66,"mat-form-field",34)(67,"mat-label"),t(68,"Postal Code"),e(),m(69,"input",38),e()()()(),i(70,"div",39)(71,"div",20)(72,"h3",21)(73,"mat-icon",40),t(74,"settings"),e(),t(75," Operational Settings "),e()(),i(76,"div",41)(77,"div",42)(78,"mat-form-field",34)(79,"mat-label"),t(80,"Timezone"),e(),i(81,"mat-select",43),k(82,ye,2,2,"mat-option",44,M),e()(),i(84,"mat-form-field",34)(85,"mat-label"),t(86,"Check-in Time"),e(),m(87,"input",45),i(88,"mat-icon",26),t(89,"schedule"),e()(),i(90,"mat-form-field",34)(91,"mat-label"),t(92,"Check-out Time"),e(),m(93,"input",46),i(94,"mat-icon",26),t(95,"schedule"),e()()(),i(96,"div",47)(97,"h5",48)(98,"mat-icon",22),t(99,"info"),e(),t(100," Store Currency "),e(),i(101,"p",49),t(102," Current store currency: "),i(103,"strong"),t(104),e(),m(105,"br"),i(106,"span",50),t(107,"To change currency, update it in the main store settings."),e()()()()()(),i(108,"div",51)(109,"button",52),x(110,Te,4,0,"ng-container")(111,ke,4,0,"ng-container"),e()()()()(),i(112,"mat-tab"),T(113,Pe,5,0,"ng-template",15),i(114,"div",16)(115,"div",18)(116,"div",19)(117,"div",20)(118,"h3",21)(119,"mat-icon",9),t(120,"bluetooth"),e(),t(121," Printer Connection "),e()(),i(122,"div",41),x(123,we,28,1,"div",53)(124,Me,11,2,"div",53),i(125,"div",54)(126,"h5",48)(127,"mat-icon",22),t(128,"info"),e(),t(129," Printer Requirements "),e(),i(130,"ul",55)(131,"li"),t(132,"\u2022 ESC/POS compatible Bluetooth printer"),e(),i(133,"li"),t(134,"\u2022 Chrome browser (version 56+)"),e(),i(135,"li"),t(136,"\u2022 HTTPS connection required"),e(),i(137,"li"),t(138,"\u2022 Supported brands: EPSON, Star, Citizen, Bixolon"),e()()()()(),i(139,"div",19)(140,"div",20)(141,"h3",21)(142,"mat-icon",40),t(143,"tune"),e(),t(144," Print Configuration "),e()(),i(145,"div",41)(146,"form",17),S("ngSubmit",function(){f(o);let l=p();return g(l.savePrinterSettings())}),i(147,"div",56)(148,"mat-form-field",24)(149,"mat-label"),t(150,"Paper Size"),e(),i(151,"mat-select",57),k(152,Fe,2,2,"mat-option",44,M),e(),i(154,"mat-icon",26),t(155,"straighten"),e()(),i(156,"mat-form-field",24)(157,"mat-label"),t(158,"Print Quality"),e(),i(159,"mat-select",58),k(160,He,2,2,"mat-option",44,M),e(),i(162,"mat-icon",26),t(163,"high_quality"),e()(),i(164,"div",59)(165,"mat-form-field",34)(166,"mat-label"),t(167,"Font Size"),e(),m(168,"input",60),i(169,"span",26),t(170,"px"),e()(),i(171,"mat-form-field",34)(172,"mat-label"),t(173,"Line Spacing"),e(),m(174,"input",61),i(175,"span",26),t(176,"x"),e()()(),i(177,"mat-form-field",24)(178,"mat-label"),t(179,"Header Text (Optional)"),e(),m(180,"input",62),e(),i(181,"mat-form-field",24)(182,"mat-label"),t(183,"Footer Text"),e(),m(184,"input",63),e(),i(185,"div",64)(186,"div",65)(187,"div")(188,"label",66),t(189,"Auto Cut Paper"),e(),i(190,"p",67),t(191,"Automatically cut paper after printing"),e()(),m(192,"mat-slide-toggle",68),e(),i(193,"div",65)(194,"div")(195,"label",66),t(196,"Include Logo"),e(),i(197,"p",67),t(198,"Print hotel logo on receipts"),e()(),m(199,"mat-slide-toggle",69),e()(),i(200,"button",70),x(201,Ge,3,0)(202,Ue,3,0),e()()()()()()()(),i(203,"mat-tab"),T(204,Be,5,0,"ng-template",15),i(205,"div",16)(206,"form",17),S("ngSubmit",function(){f(o);let l=p();return g(l.saveEmailSettings())}),i(207,"div",18)(208,"div",19)(209,"div",20)(210,"h3",21)(211,"mat-icon",71),t(212,"settings"),e(),t(213," SMTP Configuration "),e()(),i(214,"div",23)(215,"mat-form-field",24)(216,"mat-label"),t(217,"SMTP Host"),e(),m(218,"input",72),i(219,"mat-icon",26),t(220,"dns"),e()(),i(221,"div",59)(222,"mat-form-field",34)(223,"mat-label"),t(224,"Port"),e(),m(225,"input",73),e(),i(226,"div",74),m(227,"mat-slide-toggle",75),i(228,"span",76),t(229,"Use SSL/TLS"),e()()(),i(230,"mat-form-field",24)(231,"mat-label"),t(232,"Username"),e(),m(233,"input",77),i(234,"mat-icon",26),t(235,"person"),e()(),i(236,"mat-form-field",24)(237,"mat-label"),t(238,"Password"),e(),m(239,"input",78),i(240,"mat-icon",26),t(241,"lock"),e()(),i(242,"button",79),S("click",function(){f(o);let l=p();return g(l.testEmailConnection())}),i(243,"mat-icon",80),t(244,"send"),e(),t(245," Test Connection "),e()()(),i(246,"div",19)(247,"div",20)(248,"h3",21)(249,"mat-icon",22),t(250,"branding_watermark"),e(),t(251," Email Branding "),e()(),i(252,"div",23)(253,"mat-form-field",24)(254,"mat-label"),t(255,"Sender Name"),e(),m(256,"input",81),i(257,"mat-icon",26),t(258,"badge"),e()(),i(259,"mat-form-field",24)(260,"mat-label"),t(261,"Sender Email"),e(),m(262,"input",82),i(263,"mat-icon",26),t(264,"email"),e()(),i(265,"mat-form-field",24)(266,"mat-label"),t(267,"Reply-To Email"),e(),m(268,"input",83),i(269,"mat-icon",26),t(270,"reply"),e()(),i(271,"div",84)(272,"h5",85)(273,"mat-icon",86),t(274,"lightbulb"),e(),t(275," Email Tips "),e(),i(276,"ul",87)(277,"li"),t(278,"\u2022 Use a dedicated email for hotel communications"),e(),i(279,"li"),t(280,"\u2022 Enable 2FA for better security"),e(),i(281,"li"),t(282,"\u2022 Test emails before going live"),e()()()()()(),i(283,"div",51)(284,"button",52),x(285,Ve,3,0)(286,ze,3,0),e()()()()(),i(287,"mat-tab"),T(288,Re,5,0,"ng-template",15),i(289,"div",16)(290,"form",17),S("ngSubmit",function(){f(o);let l=p();return g(l.saveNotificationSettings())}),i(291,"div",18)(292,"div",19)(293,"div",20)(294,"h3",21)(295,"mat-icon",88),t(296,"person"),e(),t(297," Guest Notifications "),e()(),i(298,"div",23)(299,"div",64)(300,"div",65)(301,"div")(302,"label",66),t(303,"Reservation Confirmation"),e(),i(304,"p",67),t(305,"Send confirmation emails for new reservations"),e()(),m(306,"mat-slide-toggle",89),e(),i(307,"div",65)(308,"div")(309,"label",66),t(310,"Check-in Reminder"),e(),i(311,"p",67),t(312,"Remind guests about upcoming check-ins"),e()(),m(313,"mat-slide-toggle",90),e(),i(314,"div",65)(315,"div")(316,"label",66),t(317,"Check-out Reminder"),e(),i(318,"p",67),t(319,"Remind guests about check-out times"),e()(),m(320,"mat-slide-toggle",91),e(),i(321,"div",65)(322,"div")(323,"label",66),t(324,"Payment Confirmation"),e(),i(325,"p",67),t(326,"Send receipts for payments"),e()(),m(327,"mat-slide-toggle",92),e(),i(328,"div",65)(329,"div")(330,"label",66),t(331,"Cancellation Notice"),e(),i(332,"p",67),t(333,"Notify guests about cancellations"),e()(),m(334,"mat-slide-toggle",93),e(),i(335,"div",65)(336,"div")(337,"label",66),t(338,"Feedback Request"),e(),i(339,"p",67),t(340,"Request feedback after checkout"),e()(),m(341,"mat-slide-toggle",94),e()()()(),i(342,"div",19)(343,"div",20)(344,"h3",21)(345,"mat-icon",9),t(346,"communication"),e(),t(347," Communication Channels "),e()(),i(348,"div",23)(349,"div",64)(350,"div",65)(351,"div")(352,"label",66),t(353,"SMS Notifications"),e(),i(354,"p",67),t(355,"Send important updates via SMS"),e()(),m(356,"mat-slide-toggle",95),e(),i(357,"div",65)(358,"div")(359,"label",66),t(360,"Push Notifications"),e(),i(361,"p",67),t(362,"Send real-time browser notifications"),e()(),m(363,"mat-slide-toggle",96),e()(),i(364,"div",97)(365,"h5",98)(366,"mat-icon",9),t(367,"tips_and_updates"),e(),t(368," Best Practices "),e(),i(369,"ul",99)(370,"li"),t(371,"\u2022 Keep notifications relevant and timely"),e(),i(372,"li"),t(373,"\u2022 Avoid overwhelming guests with messages"),e(),i(374,"li"),t(375,"\u2022 Test notification content before enabling"),e(),i(376,"li"),t(377,"\u2022 Respect guest communication preferences"),e()()(),i(378,"button",70),x(379,Oe,3,0)(380,Ae,3,0),e()()()()()()()()()}if(r&2){let o,a=p();s(5),u("formGroup",a.hotelInfoForm),s(77),P(a.timezoneOptions),s(22),y(((o=a.storeStore.selectedStore())==null?null:o.currency)||"Not set"),s(5),u("disabled",a.hotelInfoForm.invalid||a.saving()),s(),h(a.saving()?110:111),s(13),h(a.printerConnected()?123:124),s(23),u("formGroup",a.printerSettingsForm),s(6),P(a.paperSizeOptions),s(8),P(a.printQualityOptions),s(40),u("disabled",a.printerSettingsForm.invalid||a.saving()),s(),h(a.saving()?201:202),s(5),u("formGroup",a.emailSettingsForm),s(78),u("disabled",a.emailSettingsForm.invalid||a.saving()),s(),h(a.saving()?285:286),s(5),u("formGroup",a.notificationSettingsForm),s(88),u("disabled",a.saving()),s(),h(a.saving()?379:380)}}var be=class r{fb=_(K);snackBar=_(z);printerService=_(Ce);storeService=_(ae);storeStore=_(le);loading=E(!1);saving=E(!1);printerConnecting=E(!1);printerConnected=E(!1);hotelInfoForm;printerSettingsForm;emailSettingsForm;notificationSettingsForm;paperSizeOptions=[{value:"58mm",label:"58mm (2.3 inches)"},{value:"80mm",label:"80mm (3.1 inches)"},{value:"112mm",label:"112mm (4.4 inches)"}];printQualityOptions=[{value:"draft",label:"Draft (Fast)"},{value:"normal",label:"Normal"},{value:"high",label:"High Quality"}];timezoneOptions=[{value:"UTC-12",label:"(GMT-12:00) International Date Line West"},{value:"UTC-11",label:"(GMT-11:00) Midway Island, Samoa"},{value:"UTC-10",label:"(GMT-10:00) Hawaii"},{value:"UTC-9",label:"(GMT-09:00) Alaska"},{value:"UTC-8",label:"(GMT-08:00) Pacific Time (US & Canada)"},{value:"UTC-7",label:"(GMT-07:00) Mountain Time (US & Canada)"},{value:"UTC-6",label:"(GMT-06:00) Central Time (US & Canada)"},{value:"UTC-5",label:"(GMT-05:00) Eastern Time (US & Canada)"},{value:"UTC-4",label:"(GMT-04:00) Atlantic Time (Canada)"},{value:"UTC-3",label:"(GMT-03:00) Buenos Aires, Georgetown"},{value:"UTC-2",label:"(GMT-02:00) Mid-Atlantic"},{value:"UTC-1",label:"(GMT-01:00) Azores, Cape Verde Islands"},{value:"UTC+0",label:"(GMT+00:00) Greenwich Mean Time"},{value:"UTC+1",label:"(GMT+01:00) Amsterdam, Berlin, Rome"},{value:"UTC+2",label:"(GMT+02:00) Cairo, Athens, Istanbul"},{value:"UTC+3",label:"(GMT+03:00) Moscow, Kuwait, Riyadh"},{value:"UTC+4",label:"(GMT+04:00) Abu Dhabi, Muscat"},{value:"UTC+5",label:"(GMT+05:00) Islamabad, Karachi"},{value:"UTC+6",label:"(GMT+06:00) Almaty, Dhaka"},{value:"UTC+7",label:"(GMT+07:00) Bangkok, Hanoi, Jakarta"},{value:"UTC+8",label:"(GMT+08:00) Beijing, Perth, Singapore"},{value:"UTC+9",label:"(GMT+09:00) Tokyo, Seoul, Osaka"},{value:"UTC+10",label:"(GMT+10:00) Eastern Australia, Guam"},{value:"UTC+11",label:"(GMT+11:00) Magadan, Solomon Islands"},{value:"UTC+12",label:"(GMT+12:00) Auckland, Wellington"}];connectedPrinter=E(null);ngOnInit(){this.initializeForms(),this.loadSettings(),this.checkPrinterStatus()}initializeForms(){this.hotelInfoForm=this.fb.group({hotelName:["",c.required],address:this.fb.group({street:[""],city:["",c.required],state:[""],country:["",c.required],postalCode:[""]}),contactInfo:this.fb.group({phone:["",c.required],email:["",[c.required,c.email]],website:[""]}),timezone:["UTC+0",c.required],checkInTime:["15:00",c.required],checkOutTime:["11:00",c.required]}),this.printerSettingsForm=this.fb.group({paperSize:["80mm",c.required],printQuality:["normal",c.required],autocut:[!0],headerText:[""],footerText:["Thank you for your stay!"],includeLogo:[!0],fontSize:[12,[c.required,c.min(8),c.max(20)]],lineSpacing:[1.2,[c.required,c.min(1),c.max(3)]]}),this.emailSettingsForm=this.fb.group({smtpHost:[""],smtpPort:[587],smtpUsername:[""],smtpPassword:[""],smtpSecure:[!0],senderName:[""],senderEmail:[""],replyToEmail:[""]}),this.notificationSettingsForm=this.fb.group({reservationConfirmation:[!0],checkInReminder:[!0],checkOutReminder:[!0],paymentConfirmation:[!0],cancellationNotice:[!0],guestFeedbackRequest:[!1],smsNotifications:[!1],pushNotifications:[!0]})}loadSettings(){this.loading.set(!0);let n=this.storeStore.selectedStore();n&&(this.hotelInfoForm.patchValue({hotelName:n.name||"",address:{street:n.contactInfo?.address||"",city:n.contactInfo?.city||"",state:n.contactInfo?.state||"",country:n.contactInfo?.country||"",postalCode:n.contactInfo?.postalCode||""},contactInfo:{phone:n.contactInfo?.phone||"",email:n.contactInfo?.email||"",website:n.contactInfo?.placeName||""},timezone:n.hotelSettings?.operationalSettings?.timezone||"UTC+0",checkInTime:n.hotelSettings?.operationalSettings?.checkInTime||"15:00",checkOutTime:n.hotelSettings?.operationalSettings?.checkOutTime||"11:00"}),n.hotelSettings?.printerConfiguration&&this.printerSettingsForm.patchValue(n.hotelSettings.printerConfiguration),n.hotelSettings?.emailSettings&&this.emailSettingsForm.patchValue(n.hotelSettings.emailSettings),n.hotelSettings?.notifications&&this.notificationSettingsForm.patchValue(n.hotelSettings.notifications)),this.loading.set(!1)}checkPrinterStatus(){let n=this.printerService.getConnectedDeviceInfo();n&&(this.connectedPrinter.set(n),this.printerConnected.set(!0))}connectPrinter(){return v(this,null,function*(){this.printerConnecting.set(!0);try{yield this.printerService.connectToPrinter();let n=this.printerService.getConnectedDeviceInfo();n&&(this.connectedPrinter.set(n),this.printerConnected.set(!0),this.snackBar.open("Printer connected successfully!","Close",{duration:3e3}))}catch(n){console.error("Error connecting to printer:",n),this.snackBar.open("Failed to connect to printer. Please try again.","Close",{duration:5e3})}finally{this.printerConnecting.set(!1)}})}disconnectPrinter(){this.printerService.disconnectPrinter(),this.connectedPrinter.set(null),this.printerConnected.set(!1),this.snackBar.open("Printer disconnected","Close",{duration:3e3})}testPrint(){return v(this,null,function*(){try{let n=this.getCurrentPrinterConfiguration();yield this.printerService.testPrint(n),this.snackBar.open("Test print sent successfully with current settings!","Close",{duration:3e3})}catch(n){console.error("Error during test print:",n),this.snackBar.open("Test print failed. Please check printer connection.","Close",{duration:5e3})}})}testPaperUtilization(){return v(this,null,function*(){try{let n=this.getCurrentPrinterConfiguration();yield this.printerService.testPaperUtilization(n),this.snackBar.open("Paper utilization test sent successfully!","Close",{duration:3e3})}catch(n){console.error("Error during paper utilization test:",n),this.snackBar.open("Paper utilization test failed. Please check printer connection.","Close",{duration:5e3})}})}uploadLogo(n){return v(this,null,function*(){let o=n.target;if(o.files&&o.files[0]){let a=o.files[0];try{let l=new FileReader;l.onload=d=>v(this,null,function*(){d.target?.result&&(yield this.printerService.uploadLogo(d.target.result))}),l.readAsArrayBuffer(a)}catch(l){console.error("Error uploading logo:",l),this.snackBar.open("Failed to upload logo. Please try again.","Close",{duration:5e3})}}})}getCurrentPrinterConfiguration(){let o=this.storeStore.selectedStore()?.hotelSettings?.printerConfiguration;return{paperSize:this.printerSettingsForm.get("paperSize")?.value||o?.paperSize||"80mm",printQuality:this.printerSettingsForm.get("printQuality")?.value||o?.printQuality||"normal",autocut:this.printerSettingsForm.get("autocut")?.value??o?.autocut??!0,headerText:this.printerSettingsForm.get("headerText")?.value||o?.headerText||"",footerText:this.printerSettingsForm.get("footerText")?.value||o?.footerText||"Thank you for your stay!",includeLogo:this.printerSettingsForm.get("includeLogo")?.value??o?.includeLogo??!0,fontSize:this.printerSettingsForm.get("fontSize")?.value||o?.fontSize||12,lineSpacing:this.printerSettingsForm.get("lineSpacing")?.value||o?.lineSpacing||1.2}}printReservationWithHotelSettings(n){return v(this,null,function*(){try{let o=this.storeStore.selectedStore();if(!o)throw new Error("No store selected");let a=this.getCurrentPrinterConfiguration();yield this.printerService.printReservation(n,o,a),this.snackBar.open("Reservation printed successfully!","Close",{duration:3e3})}catch(o){throw console.error("Error printing reservation:",o),this.snackBar.open("Failed to print reservation. Please check printer connection.","Close",{duration:5e3}),o}})}saveHotelInfo(){if(this.hotelInfoForm.valid&&this.storeStore.selectedStore()){this.saving.set(!0);let n=this.hotelInfoForm.value,o=this.storeStore.selectedStore(),a={name:n.hotelName,contactInfo:b(C({},o.contactInfo),{phone:n.contactInfo.phone,email:n.contactInfo.email,address:n.address.street,city:n.address.city,state:n.address.state,country:n.address.country,postalCode:n.address.postalCode,placeName:n.contactInfo.website,placeNumber:o.contactInfo?.placeNumber||""}),hotelSettings:b(C({},o.hotelSettings),{operationalSettings:{timezone:n.timezone,checkInTime:n.checkInTime,checkOutTime:n.checkOutTime}})};this.storeService.updateStore(o._id,a).subscribe({next:l=>{this.storeService.getStore(o._id).subscribe({next:d=>{this.storeStore.updateStore(d),this.storeService.saveStoreLocally(d),this.saving.set(!1),this.snackBar.open("Hotel information saved successfully!","Close",{duration:3e3})},error:d=>{console.error("Error fetching updated store:",d),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data. Please refresh the page.","Close",{duration:5e3})}})},error:l=>{console.error("Error saving hotel info:",l),this.saving.set(!1),this.snackBar.open("Failed to save hotel information. Please try again.","Close",{duration:5e3})}})}}savePrinterSettings(){if(this.printerSettingsForm.valid&&this.storeStore.selectedStore()){this.saving.set(!0);let n=this.storeStore.selectedStore(),o=this.printerSettingsForm.value,a={hotelSettings:b(C({},n.hotelSettings),{printerConfiguration:o})};this.storeService.updateStore(n._id,a).subscribe({next:l=>{this.storeService.getStore(n._id).subscribe({next:d=>{this.storeStore.updateStore(d),this.storeService.saveStoreLocally(d),this.saving.set(!1),this.snackBar.open("Printer settings saved successfully!","Close",{duration:3e3})},error:d=>{console.error("Error fetching updated store:",d),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data. Please refresh the page.","Close",{duration:5e3})}})},error:l=>{console.error("Error saving printer settings:",l),this.saving.set(!1),this.snackBar.open("Failed to save printer settings. Please try again.","Close",{duration:5e3})}})}}saveEmailSettings(){if(this.emailSettingsForm.valid&&this.storeStore.selectedStore()){this.saving.set(!0);let n=this.storeStore.selectedStore(),o=this.emailSettingsForm.value,a={hotelSettings:b(C({},n.hotelSettings),{emailSettings:o})};this.storeService.updateStore(n._id,a).subscribe({next:l=>{this.storeService.getStore(n._id).subscribe({next:d=>{this.storeStore.updateStore(d),this.storeService.saveStoreLocally(d),this.saving.set(!1),this.snackBar.open("Email settings saved successfully!","Close",{duration:3e3})},error:d=>{console.error("Error fetching updated store:",d),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data. Please refresh the page.","Close",{duration:5e3})}})},error:l=>{console.error("Error saving email settings:",l),this.saving.set(!1),this.snackBar.open("Failed to save email settings. Please try again.","Close",{duration:5e3})}})}}saveNotificationSettings(){if(this.storeStore.selectedStore()){this.saving.set(!0);let n=this.storeStore.selectedStore(),o=this.notificationSettingsForm.value,a={hotelSettings:b(C({},n.hotelSettings),{notifications:o})};this.storeService.updateStore(n._id,a).subscribe({next:l=>{this.storeService.getStore(n._id).subscribe({next:d=>{this.storeStore.updateStore(d),this.storeService.saveStoreLocally(d),this.saving.set(!1),this.snackBar.open("Notification settings saved successfully!","Close",{duration:3e3})},error:d=>{console.error("Error fetching updated store:",d),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data. Please refresh the page.","Close",{duration:5e3})}})},error:l=>{console.error("Error saving notification settings:",l),this.saving.set(!1),this.snackBar.open("Failed to save notification settings. Please try again.","Close",{duration:5e3})}})}}testEmailConnection(){this.emailSettingsForm.valid&&(this.snackBar.open("Testing email connection...","Close",{duration:2e3}),setTimeout(()=>{this.snackBar.open("Email connection test successful!","Close",{duration:3e3})},2e3))}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=F({type:r,selectors:[["app-hotel-settings"]],decls:17,vars:2,consts:[["logoInput",""],[1,"bg-gradient-to-r","from-blue-50","to-indigo-50","border-b","border-blue-100"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","py-6"],[1,"flex","items-center","gap-4"],[1,"text-3xl","font-bold","text-gray-900","mb-1"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","gap-3"],[1,"flex","items-center","gap-2","text-sm","text-gray-600"],[1,"text-green-600"],[1,"flex","justify-center","items-center","py-12","bg-white"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-8"],["diameter","40",1,"!text-blue-600"],[1,"ml-3","text-gray-600"],["animationDuration","200ms",1,"settings-tabs"],["mat-tab-label",""],[1,"py-6"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden"],[1,"bg-gradient-to-r","from-gray-50","to-gray-100","px-6","py-4","border-b","border-gray-200"],[1,"text-lg","font-semibold","text-gray-900","flex","items-center","gap-2"],[1,"text-blue-600"],[1,"p-6","space-y-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","hotelName","placeholder","Enter hotel name"],["matSuffix",""],["formGroupName","contactInfo",1,"space-y-4"],["matInput","","formControlName","phone","placeholder","+1 (555) 123-4567"],["matInput","","type","email","formControlName","email","placeholder","contact@hotel.com"],["matInput","","formControlName","website","placeholder","https://www.hotel.com"],["formGroupName","address",1,"p-6","space-y-6"],["matInput","","formControlName","street","placeholder","123 Hotel Street","rows","2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline"],["matInput","","formControlName","city","placeholder","New York"],["matInput","","formControlName","state","placeholder","NY"],["matInput","","formControlName","country","placeholder","United States"],["matInput","","formControlName","postalCode","placeholder","10001"],[1,"bg-white","rounded-lg","shadow-sm","border","border-gray-200","overflow-hidden","lg:col-span-2"],[1,"text-purple-600"],[1,"p-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["formControlName","timezone"],[3,"value"],["matInput","","type","time","formControlName","checkInTime"],["matInput","","type","time","formControlName","checkOutTime"],[1,"mt-4","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"font-semibold","text-blue-900","mb-2","flex","items-center","gap-2"],[1,"text-sm","text-blue-800"],[1,"text-xs"],[1,"flex","justify-end","mt-8"],["type","submit","mat-raised-button","","color","primary",1,"px-8","py-2",3,"disabled"],[1,"text-center","py-4"],[1,"mt-6","p-4","bg-blue-50","border","border-blue-200","rounded-lg"],[1,"text-sm","text-blue-800","space-y-1"],[1,"space-y-6"],["formControlName","paperSize"],["formControlName","printQuality"],[1,"grid","grid-cols-2","gap-4"],["matInput","","type","number","formControlName","fontSize","min","8","max","20"],["matInput","","type","number","formControlName","lineSpacing","min","1","max","3","step","0.1"],["matInput","","formControlName","headerText","placeholder","Welcome to our hotel"],["matInput","","formControlName","footerText","placeholder","Thank you for your stay!"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-500"],["formControlName","autocut","color","primary"],["formControlName","includeLogo","color","primary"],["type","submit","mat-raised-button","","color","primary",1,"w-full",3,"disabled"],[1,"text-orange-600"],["matInput","","formControlName","smtpHost","placeholder","smtp.gmail.com"],["matInput","","type","number","formControlName","smtpPort","placeholder","587"],[1,"flex","items-center"],["formControlName","smtpSecure","color","primary"],[1,"ml-2","text-sm","text-gray-700"],["matInput","","formControlName","smtpUsername","placeholder","your-email@domain.com"],["matInput","","type","password","formControlName","smtpPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"],["type","button","mat-stroked-button","","color","accent",1,"w-full",3,"click"],[1,"mr-2"],["matInput","","formControlName","senderName","placeholder","Hotel Name"],["matInput","","type","email","formControlName","senderEmail","placeholder","noreply@hotel.com"],["matInput","","type","email","formControlName","replyToEmail","placeholder","reservations@hotel.com"],[1,"p-4","bg-yellow-50","border","border-yellow-200","rounded-lg"],[1,"font-semibold","text-yellow-900","mb-2","flex","items-center","gap-2"],[1,"text-yellow-600"],[1,"text-sm","text-yellow-800","space-y-1"],[1,"text-red-600"],["formControlName","reservationConfirmation","color","primary"],["formControlName","checkInReminder","color","primary"],["formControlName","checkOutReminder","color","primary"],["formControlName","paymentConfirmation","color","primary"],["formControlName","cancellationNotice","color","primary"],["formControlName","guestFeedbackRequest","color","primary"],["formControlName","smsNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"font-semibold","text-green-900","mb-2","flex","items-center","gap-2"],[1,"text-sm","text-green-800","space-y-1"],[1,"flex","items-center","gap-2"],[1,"animate-spin","mr-2"],[1,"w-16","h-16","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-green-600"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-4"],[1,"flex","flex-col","gap-3"],["mat-stroked-button","","color","primary",1,"w-full",3,"click"],["mat-stroked-button","","color","accent",1,"w-full",3,"click"],[1,"w-full"],["type","file","accept","image/*",1,"hidden",3,"change"],["mat-stroked-button","","color","warn",1,"w-full",3,"click"],[1,"w-16","h-16","bg-gray-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-4xl","text-gray-400"],["mat-raised-button","","color","primary",1,"w-full",3,"click","disabled"]],template:function(o,a){o&1&&(i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div")(5,"h1",5),t(6," Hotel Settings "),e(),i(7,"p",6),t(8,"Configure your hotel properties and system preferences"),e()()(),i(9,"div",7)(10,"div",8)(11,"mat-icon",9),t(12,"verified"),e(),i(13,"span"),t(14,"All changes are saved automatically"),e()()()()()(),x(15,_e,4,0,"div",10),x(16,Le,381,14,"div",11)),o&2&&(s(15),h(a.loading()?15:-1),s(),h(a.loading()?-1:16))},dependencies:[G,Y,L,R,q,O,A,$,W,D,j,Q,J,V,B,re,oe,te,ee,X,Z,ne,ie,ge,fe,U,ve,he,ue,de,ce,pe,se,xe,Se,me],styles:["[_nghost-%COMP%]{display:block}"]})};export{be as HotelSettingsComponent};
