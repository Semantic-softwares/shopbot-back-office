import{Sc as y,Tc as D,Uc as w,V as m,Vc as x,Y as d,d as v,ea as f,pa as l,va as b}from"./chunk-IQSYHSID.js";import{a as g,b as p}from"./chunk-EQDQRRRY.js";function U(t){t||(t=f(l));let e=new v(n=>{if(t.destroyed){n.next();return}return t.onDestroy(n.next.bind(n))});return n=>n.pipe(m(e))}function T(t){let e=y(t);return new v(n=>{let s=e?.onDestroy(()=>n.complete()),i=t.subscribe(r=>n.next(r));return()=>{i.unsubscribe(),s?.()}})}function F(t,e){let s=!e?.manualCleanup?e?.injector?.get(l)??f(l):null,i=h(e?.equal),r;e?.requireSync?r=b({kind:0},{equal:i}):r=b({kind:1,value:e?.initialValue},{equal:i});let a,c=t.subscribe({next:o=>r.set({kind:1,value:o}),error:o=>{r.set({kind:2,error:o}),a?.()},complete:()=>{a?.()}});if(e?.requireSync&&r().kind===0)throw new d(601,!1);return a=s?.onDestroy(c.unsubscribe.bind(c)),D(()=>{let o=r();switch(o.kind){case 1:return o.value;case 2:throw o.error;case 0:throw new d(601,!1)}},{equal:e?.equal})}function h(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function L(t){return w(p(g({},t),{loader:void 0,stream:e=>{let n,s=()=>n?.unsubscribe();e.abortSignal.addEventListener("abort",s);let i=b({value:void 0}),r,a=new Promise(u=>r=u);function c(u){i.set(u),r?.(i),r=void 0}let o=t.stream??t.loader;if(o===void 0)throw new d(990,!1);return n=o(e).subscribe({next:u=>c({value:u}),error:u=>{c({error:x(u)}),e.abortSignal.removeEventListener("abort",s)},complete:()=>{r&&c({error:new d(991,!1)}),e.abortSignal.removeEventListener("abort",s)}}),a}}))}export{U as a,T as b,F as c,L as d};
