import{a as q,b as z}from"./chunk-PP3XBKNF.js";import"./chunk-DSVTILZD.js";import{i as C}from"./chunk-I4XKOMFF.js";import{a as E}from"./chunk-XBTGTIDL.js";import{b as j}from"./chunk-4CSV6WDD.js";import{B as T,g as I,h as w,m as G,s as P,t as D,z as O}from"./chunk-APGJ2ZCU.js";import{a as x}from"./chunk-6XJLFJNL.js";import"./chunk-R35DVJIH.js";import"./chunk-BFT2MTJY.js";import{a as M,b as k,c as F,f as R,g as B,h as _}from"./chunk-SV3V3KFF.js";import"./chunk-FTUKKUPK.js";import"./chunk-J6S3CU5H.js";import"./chunk-SBJI2VOL.js";import{b as N,c as y}from"./chunk-A5WKFY2Q.js";import{Z as h,aa as b}from"./chunk-PD333HOR.js";import"./chunk-T7PMTSVA.js";import{$b as S,Nb as c,Ob as t,Pb as e,Qb as n,ab as m,ea as l,pb as u,qc as i,sc as v,va as d}from"./chunk-ZCSDIQ3M.js";import{a as g,b as p}from"./chunk-GAL4ENT6.js";var A=class f{fb=l(O);snackBar=l(x);storeService=l(E);storeStore=l(C);loading=d(!1);saving=d(!1);notificationSettingsForm;ngOnInit(){this.initializeForm(),this.loadSettings()}initializeForm(){this.notificationSettingsForm=this.fb.group({reservationConfirmation:[!0],checkInReminder:[!0],checkOutReminder:[!0],paymentConfirmation:[!0],cancellationNotice:[!0],guestFeedbackRequest:[!1],smsNotifications:[!1],pushNotifications:[!0]})}loadSettings(){this.loading.set(!0);let o=this.storeStore.selectedStore();o?.hotelSettings?.notifications&&this.notificationSettingsForm.patchValue(o.hotelSettings.notifications),this.loading.set(!1)}saveNotificationSettings(){if(this.storeStore.selectedStore()){this.saving.set(!0);let o=this.storeStore.selectedStore(),r=this.notificationSettingsForm.value,s={hotelSettings:p(g({},o.hotelSettings),{notifications:r})};this.storeService.updateStore(o._id,s).subscribe({next:()=>{this.storeService.getStore(o._id).subscribe({next:a=>{this.storeStore.updateStore(a),this.storeService.saveStoreLocally(a),this.saving.set(!1),this.snackBar.open("Notification settings saved successfully!","Close",{duration:3e3})},error:a=>{console.error("Error fetching updated store:",a),this.saving.set(!1),this.snackBar.open("Settings saved but failed to update local data.","Close",{duration:5e3})}})},error:a=>{console.error("Error saving notification settings:",a),this.saving.set(!1),this.snackBar.open("Failed to save notification settings.","Close",{duration:5e3})}})}}static \u0275fac=function(r){return new(r||f)};static \u0275cmp=u({type:f,selectors:[["app-notifications-settings"]],decls:91,vars:3,consts:[[1,"py-6"],[3,"ngSubmit","formGroup"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8"],["appearance","outlined"],["mat-card-avatar","",1,"text-red-600","!flex","!items-center","!justify-center"],[1,"pt-4","space-y-6"],[1,"space-y-4"],[1,"flex","items-center","justify-between"],[1,"text-sm","font-medium","text-gray-700"],[1,"text-xs","text-gray-500"],["formControlName","reservationConfirmation","color","primary"],["formControlName","checkInReminder","color","primary"],["formControlName","checkOutReminder","color","primary"],["formControlName","paymentConfirmation","color","primary"],["formControlName","cancellationNotice","color","primary"],["formControlName","guestFeedbackRequest","color","primary"],["mat-card-avatar","",1,"text-green-600","!flex","!items-center","!justify-center"],["formControlName","smsNotifications","color","primary"],["formControlName","pushNotifications","color","primary"],[1,"p-4","bg-green-50","border","border-green-200","rounded-lg"],[1,"font-semibold","text-green-900","mb-2","flex","items-center","gap-2"],[1,"text-green-600"],[1,"text-sm","text-green-800","space-y-1"],["type","submit","matButton","filled","color","primary",1,"w-full",3,"disabled"]],template:function(r,s){r&1&&(t(0,"div",0)(1,"form",1),S("ngSubmit",function(){return s.saveNotificationSettings()}),t(2,"div",2)(3,"mat-card",3)(4,"mat-card-header")(5,"mat-icon",4),i(6,"person"),e(),t(7,"mat-card-title"),i(8,"Guest Notifications"),e()(),t(9,"mat-card-content",5)(10,"div",6)(11,"div",7)(12,"div")(13,"label",8),i(14,"Reservation Confirmation"),e(),t(15,"p",9),i(16,"Send confirmation emails for new reservations"),e()(),n(17,"mat-slide-toggle",10),e(),t(18,"div",7)(19,"div")(20,"label",8),i(21,"Check-in Reminder"),e(),t(22,"p",9),i(23,"Remind guests about upcoming check-ins"),e()(),n(24,"mat-slide-toggle",11),e(),t(25,"div",7)(26,"div")(27,"label",8),i(28,"Check-out Reminder"),e(),t(29,"p",9),i(30,"Remind guests about check-out times"),e()(),n(31,"mat-slide-toggle",12),e(),t(32,"div",7)(33,"div")(34,"label",8),i(35,"Payment Confirmation"),e(),t(36,"p",9),i(37,"Send receipts for payments"),e()(),n(38,"mat-slide-toggle",13),e(),t(39,"div",7)(40,"div")(41,"label",8),i(42,"Cancellation Notice"),e(),t(43,"p",9),i(44,"Notify guests about cancellations"),e()(),n(45,"mat-slide-toggle",14),e(),t(46,"div",7)(47,"div")(48,"label",8),i(49,"Feedback Request"),e(),t(50,"p",9),i(51,"Request feedback after checkout"),e()(),n(52,"mat-slide-toggle",15),e()()()(),t(53,"mat-card",3)(54,"mat-card-header")(55,"mat-icon",16),i(56,"communication"),e(),t(57,"mat-card-title"),i(58,"Communication Channels"),e()(),t(59,"mat-card-content",5)(60,"div",6)(61,"div",7)(62,"div")(63,"label",8),i(64,"SMS Notifications"),e(),t(65,"p",9),i(66,"Send important updates via SMS"),e()(),n(67,"mat-slide-toggle",17),e(),t(68,"div",7)(69,"div")(70,"label",8),i(71,"Push Notifications"),e(),t(72,"p",9),i(73,"Send real-time browser notifications"),e()(),n(74,"mat-slide-toggle",18),e()(),t(75,"div",19)(76,"h5",20)(77,"mat-icon",21),i(78,"tips_and_updates"),e(),i(79," Best Practices "),e(),t(80,"ul",22)(81,"li"),i(82,"\u2022 Keep notifications relevant and timely"),e(),t(83,"li"),i(84,"\u2022 Avoid overwhelming guests with messages"),e(),t(85,"li"),i(86,"\u2022 Test notification content before enabling"),e(),t(87,"li"),i(88,"\u2022 Respect guest communication preferences"),e()()(),t(89,"button",23),i(90),e()()()()()()),r&2&&(m(),c("formGroup",s.notificationSettingsForm),m(88),c("disabled",s.saving()),m(),v(" ",s.saving()?"Saving...":"Save Notification Settings"," "))},dependencies:[T,G,I,w,D,P,_,M,B,F,R,k,b,h,y,N,z,q,j],styles:["[_nghost-%COMP%]{display:block}"]})};export{A as NotificationsSettings};
