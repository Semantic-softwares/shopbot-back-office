import{a as Tt}from"./chunk-3VJO7DSO.js";import{a as Gt}from"./chunk-QTGE4XNY.js";import{b as Ot,f as Nt}from"./chunk-VQA5W3EJ.js";import"./chunk-L7BDTWLS.js";import{b as Mt,c as kt,g as wt}from"./chunk-U7XYQI32.js";import{a as Dt,b as It}from"./chunk-TPXN6FKM.js";import{a as Ct,b as St,c as ht,d as yt}from"./chunk-Q24JN32N.js";import{i as ct}from"./chunk-WFQLSX5X.js";import"./chunk-UATHS3SB.js";import"./chunk-GZ7S2I6F.js";import"./chunk-L5R7UQHM.js";import"./chunk-TW5XL4DD.js";import"./chunk-GBJWJHBW.js";import{a as Et,b as Pt}from"./chunk-ZDRRUYFZ.js";import"./chunk-ADPCW6JI.js";import"./chunk-UUMWQRYG.js";import{a as mt}from"./chunk-7HFBBWIO.js";import"./chunk-UPMF7ZC6.js";import"./chunk-BFT2MTJY.js";import{a as gt,b as _t,c as xt,f as ft,g as bt,h as vt}from"./chunk-GI3DA2RF.js";import"./chunk-DDDMZQMU.js";import"./chunk-6NXOHEKD.js";import"./chunk-47XHPHB4.js";import{b as ut,c as pt}from"./chunk-5P5QATX2.js";import{$ as dt,Z as st}from"./chunk-LG6YQHRU.js";import{e as ot,g as rt}from"./chunk-DWM5GR6S.js";import{g as nt,l as it,p as at,r as lt}from"./chunk-6BQAOBQP.js";import{$a as r,Gb as g,Hb as _,Jb as K,Jc as b,Kb as J,Kc as C,Lb as X,Mb as P,Nb as e,Nc as et,Ob as t,Pb as k,Tb as Z,Tc as w,Ub as Q,V as j,Wb as I,_b as M,ac as x,ea as h,f as z,ja as y,ka as E,kc as W,ob as Y,pc as n,qc as d,rc as S,sc as tt,va as v}from"./chunk-H33Y42PP.js";import{g as f}from"./chunk-GAL4ENT6.js";function Vt(o,a){o&1&&k(0,"mat-spinner",8)}function At(o,a){o&1&&(e(0,"mat-icon"),n(1,"more_vert"),t())}function Ut(o,a){if(o&1){let i=I();e(0,"button",6),M("click",function(){y(i);let s=x();return E(s.onEdit())}),e(1,"mat-icon"),n(2,"edit"),t(),n(3," Edit Guest "),t(),e(4,"button",7),g(5,Vt,1,0,"mat-spinner",8)(6,At,2,0,"mat-icon"),n(7),t(),e(8,"mat-menu",null,0)(10,"button",9),M("click",function(){y(i);let s=x();return E(s.toggleVipStatus())}),e(11,"mat-icon"),n(12),t(),e(13,"span"),n(14),t()(),e(15,"button",9),M("click",function(){y(i);let s=x();return E(s.toggleBlacklistStatus())}),e(16,"mat-icon"),n(17),t(),e(18,"span"),n(19),t()(),k(20,"mat-divider"),e(21,"button",9),M("click",function(){y(i);let s=x();return E(s.onDelete())}),e(22,"mat-icon",10),n(23,"delete"),t(),e(24,"span"),n(25,"Delete Guest"),t()()()}if(o&2){let i,l,s,p,c=W(9),u=x();r(4),P("matMenuTriggerFor",c)("disabled",u.isUpdating()),r(),_(u.isUpdating()?5:6),r(2),S(" ",u.isUpdating()?"Processing...":"Actions"," "),r(3),P("disabled",u.isUpdating()),r(2),d((i=u.guest())!=null&&i.isVip?"star_border":"star"),r(2),d((l=u.guest())!=null&&l.isVip?"Remove VIP Status":"Make VIP"),r(),P("disabled",u.isUpdating()),r(2),d((s=u.guest())!=null&&s.blacklisted?"check_circle":"block"),r(2),d((p=u.guest())!=null&&p.blacklisted?"Remove from Blacklist":"Add to Blacklist"),r(2),P("disabled",u.isUpdating())}}function $t(o,a){o&1&&(e(0,"div",3),k(1,"mat-spinner",11),t())}function Rt(o,a){if(o&1&&(e(0,"div",20)(1,"mat-icon",21),n(2,"public"),t(),e(3,"span"),n(4),t()()),o&2){let i,l=x(2);r(4),d(l.getCountryName((i=l.guest())==null?null:i.nationality))}}function Lt(o,a){o&1&&(e(0,"mat-icon",24),n(1,"star"),t())}function Ft(o,a){o&1&&(e(0,"mat-icon",24),n(1,"block"),t())}function Ht(o,a){if(o&1&&(e(0,"mat-chip",25)(1,"mat-icon",24),n(2,"workspace_premium"),t(),n(3),b(4,"titlecase"),t()),o&2){let i,l=x(2);r(3),S(" ",C(4,1,(i=l.guest())==null||i.loyaltyProgram==null?null:i.loyaltyProgram.tier)," Member ")}}function qt(o,a){o&1&&(e(0,"mat-chip",26),k(1,"mat-spinner",57),n(2," Updating... "),t())}function zt(o,a){if(o&1&&(e(0,"div",64),n(1),t()),o&2){let i,l=x(3);r(),S(" VIP member since ",l.formatDate((i=l.guest())==null?null:i.vipSince)," ")}}function jt(o,a){if(o&1&&(e(0,"mat-card",38)(1,"mat-card-content",58)(2,"div",59)(3,"mat-icon",60),n(4,"star"),t(),e(5,"div",61)(6,"h3",62),n(7,"VIP Guest"),t(),e(8,"div",63)(9,"p"),n(10,"This guest has VIP status and should receive premium service and privileges."),t(),g(11,zt,2,1,"div",64),t()()()()()),o&2){let i,l=x(2);r(11),_((i=l.guest())!=null&&i.vipSince?11:-1)}}function Yt(o,a){if(o&1&&(e(0,"div",68)(1,"span",70),n(2,"Reason:"),t(),n(3),t()),o&2){let i,l=x(3);r(3),S(" ",(i=l.guest())==null?null:i.blacklistReason," ")}}function Kt(o,a){if(o&1&&(e(0,"div",69),n(1),t()),o&2){let i,l=x(3);r(),S(" Blacklisted on ",l.formatDate((i=l.guest())==null?null:i.blacklistedAt)," ")}}function Jt(o,a){if(o&1&&(e(0,"mat-card",39)(1,"mat-card-content",58)(2,"div",59)(3,"mat-icon",65),n(4,"warning"),t(),e(5,"div",61)(6,"h3",66),n(7,"This guest is blacklisted"),t(),e(8,"div",67)(9,"p"),n(10,"This guest has been flagged and cannot make new reservations without manager approval."),t(),g(11,Yt,4,1,"div",68),g(12,Kt,2,1,"div",69),t()()()()()),o&2){let i,l,s=x(2);r(11),_((i=s.guest())!=null&&i.blacklistReason?11:-1),r(),_((l=s.guest())!=null&&l.blacklistedAt?12:-1)}}function Xt(o,a){if(o&1&&(e(0,"div")(1,"label",48),n(2,"Last Stay"),t(),e(3,"p",49),n(4),t()()),o&2){let i,l=x(2);r(4),d(l.formatDate((i=l.guest())==null?null:i.lastStayDate))}}function Zt(o,a){if(o&1&&(e(0,"div")(1,"label",48),n(2,"Street Address"),t(),e(3,"p",49),n(4),t()(),e(5,"div",47)(6,"div")(7,"label",48),n(8,"City"),t(),e(9,"p",49),n(10),t()(),e(11,"div")(12,"label",48),n(13,"State/Province"),t(),e(14,"p",49),n(15),t()()(),e(16,"div",47)(17,"div")(18,"label",48),n(19,"Postal Code"),t(),e(20,"p",49),n(21),t()(),e(22,"div")(23,"label",48),n(24,"Country"),t(),e(25,"p",49),n(26),t()()()),o&2){let i,l,s,p,c,u=x(2);r(4),d(((i=u.guest())==null||i.address==null?null:i.address.street)||"Not specified"),r(6),d(((l=u.guest())==null||l.address==null?null:l.address.city)||"Not specified"),r(5),d(((s=u.guest())==null||s.address==null?null:s.address.state)||"Not specified"),r(6),d(((p=u.guest())==null||p.address==null?null:p.address.postalCode)||"Not specified"),r(5),d(u.getCountryName((c=u.guest())==null||c.address==null?null:c.address.country))}}function Qt(o,a){o&1&&(e(0,"p",50),n(1,"No address information provided"),t())}function Wt(o,a){if(o&1&&(e(0,"div",47)(1,"div")(2,"label",48),n(3,"Document Type"),t(),e(4,"p",49),n(5),b(6,"titlecase"),t()(),e(7,"div")(8,"label",48),n(9,"Document Number"),t(),e(10,"p",49),n(11),t()()(),e(12,"div",47)(13,"div")(14,"label",48),n(15,"Expiry Date"),t(),e(16,"p",49),n(17),t()(),e(18,"div")(19,"label",48),n(20,"Issuing Country"),t(),e(21,"p",49),n(22),t()()()),o&2){let i,l,s,p,c=x(2);r(5),d(C(6,4,((i=c.guest())==null||i.idDocument==null?null:i.idDocument.type)||"Not specified")),r(6),d(((l=c.guest())==null||l.idDocument==null?null:l.idDocument.number)||"Not specified"),r(6),d(c.formatDate((s=c.guest())==null||s.idDocument==null?null:s.idDocument.expiryDate)),r(5),d(c.getCountryName((p=c.guest())==null||p.idDocument==null?null:p.idDocument.issuingCountry))}}function te(o,a){o&1&&(e(0,"p",50),n(1,"No ID document information provided"),t())}function ee(o,a){if(o&1&&(e(0,"mat-chip",26),n(1),t()),o&2){let i=a.$implicit;r(),d(i)}}function ne(o,a){if(o&1&&(e(0,"div")(1,"label",48),n(2,"Special Requests"),t(),e(3,"div",71),J(4,ee,2,1,"mat-chip",26,K),t()()),o&2){let i,l=x(3);r(4),X((i=l.guest())==null||i.preferences==null?null:i.preferences.specialRequests)}}function ie(o,a){if(o&1&&(e(0,"div",47)(1,"div")(2,"label",48),n(3,"Room Type"),t(),e(4,"p",49),n(5),b(6,"titlecase"),t()(),e(7,"div")(8,"label",48),n(9,"Smoking"),t(),e(10,"p",49),n(11),b(12,"titlecase"),t()()(),e(13,"div",47)(14,"div")(15,"label",48),n(16,"Bed Preference"),t(),e(17,"p",49),n(18),b(19,"titlecase"),t()(),e(20,"div")(21,"label",48),n(22,"Floor Preference"),t(),e(23,"p",49),n(24),b(25,"titlecase"),t()()(),g(26,ne,6,0,"div")),o&2){let i,l,s,p,c,u=x(2);r(5),d(C(6,5,((i=u.guest())==null||i.preferences==null?null:i.preferences.roomType)||"No preference")),r(6),d(C(12,7,((l=u.guest())==null||l.preferences==null||l.preferences.smokingPreference==null?null:l.preferences.smokingPreference.replace("_"," "))||"No preference")),r(7),d(C(19,9,((s=u.guest())==null||s.preferences==null||s.preferences.bedPreference==null?null:s.preferences.bedPreference.replace("_"," "))||"No preference")),r(6),d(C(25,11,((p=u.guest())==null||p.preferences==null?null:p.preferences.floorPreference)||"No preference")),r(2),_(!((c=u.guest())==null||c.preferences==null)&&c.preferences.specialRequests&&((c=u.guest())==null||c.preferences==null?null:c.preferences.specialRequests.length)>0?26:-1)}}function ae(o,a){o&1&&(e(0,"p",50),n(1,"No preferences specified"),t())}function le(o,a){if(o&1&&(e(0,"div",47)(1,"div")(2,"label",48),n(3,"Contact Name"),t(),e(4,"p",49),n(5),t()(),e(6,"div")(7,"label",48),n(8,"Relationship"),t(),e(9,"p",49),n(10),t()()(),e(11,"div",47)(12,"div")(13,"label",48),n(14,"Phone Number"),t(),e(15,"p",49),n(16),t()(),e(17,"div")(18,"label",48),n(19,"Email Address"),t(),e(20,"p",49),n(21),t()()()),o&2){let i,l,s,p,c=x(2);r(5),d(((i=c.guest())==null||i.emergencyContact==null?null:i.emergencyContact.name)||"Not specified"),r(5),d(((l=c.guest())==null||l.emergencyContact==null?null:l.emergencyContact.relationship)||"Not specified"),r(6),d(((s=c.guest())==null||s.emergencyContact==null?null:s.emergencyContact.phone)||"Not specified"),r(5),d(((p=c.guest())==null||p.emergencyContact==null?null:p.emergencyContact.email)||"Not specified")}}function oe(o,a){o&1&&(e(0,"p",50),n(1,"No emergency contact information provided"),t())}function re(o,a){if(o&1&&(e(0,"div")(1,"label",79),n(2,"VIP Since"),t(),e(3,"p",80),n(4),t()()),o&2){let i,l=x(3);r(4),d(l.formatDate((i=l.guest())==null?null:i.vipSince))}}function se(o,a){if(o&1&&(e(0,"div",55)(1,"mat-card",72)(2,"mat-card-header",73)(3,"mat-icon",45),n(4,"star"),t(),e(5,"mat-card-title",74),n(6,"VIP Guest Information"),t()(),e(7,"mat-card-content",46),g(8,re,5,1,"div"),e(9,"div",75)(10,"div",59)(11,"mat-icon",76),n(12,"workspace_premium"),t(),e(13,"div",77)(14,"p",70),n(15,"VIP Benefits & Privileges:"),t(),e(16,"ul",78)(17,"li"),n(18,"\u2022 Priority reservations and check-in"),t(),e(19,"li"),n(20,"\u2022 Complimentary room upgrades (when available)"),t(),e(21,"li"),n(22,"\u2022 Late checkout privileges"),t(),e(23,"li"),n(24,"\u2022 Access to exclusive amenities"),t(),e(25,"li"),n(26,"\u2022 Dedicated customer service"),t(),e(27,"li"),n(28,"\u2022 Special welcome gifts and services"),t()()()()()()()()),o&2){let i,l=x(2);r(8),_((i=l.guest())!=null&&i.vipSince?8:-1)}}function de(o,a){if(o&1&&(e(0,"div")(1,"label",89),n(2,"Blacklist Reason"),t(),e(3,"div",90)(4,"p",91),n(5),t()()()),o&2){let i,l=x(3);r(5),d((i=l.guest())==null?null:i.blacklistReason)}}function me(o,a){if(o&1&&(e(0,"div")(1,"label",89),n(2,"Date Blacklisted"),t(),e(3,"p",92),n(4),t()()),o&2){let i,l=x(3);r(4),d(l.formatDate((i=l.guest())==null?null:i.blacklistedAt))}}function ce(o,a){if(o&1&&(e(0,"div",55)(1,"mat-card",81)(2,"mat-card-header",82)(3,"mat-icon",83),n(4,"block"),t(),e(5,"mat-card-title",84),n(6,"Blacklist Information"),t()(),e(7,"mat-card-content",46),g(8,de,6,1,"div"),g(9,me,5,1,"div"),e(10,"div",85)(11,"div",59)(12,"mat-icon",86),n(13,"info"),t(),e(14,"div",87)(15,"p",70),n(16,"Blacklist Effects:"),t(),e(17,"ul",88)(18,"li"),n(19,"\u2022 Cannot make new reservations without manager approval"),t(),e(20,"li"),n(21,"\u2022 Account is flagged in the system"),t(),e(22,"li"),n(23,"\u2022 Special authorization required for any bookings"),t()()()()()()()()),o&2){let i,l,s=x(2);r(8),_((i=s.guest())!=null&&i.blacklistReason?8:-1),r(),_((l=s.guest())!=null&&l.blacklistedAt?9:-1)}}function ue(o,a){if(o&1&&(e(0,"div",56)(1,"p",93),n(2),t()()),o&2){let i,l=x(2);r(2),d((i=l.guest())==null?null:i.notes)}}function pe(o,a){o&1&&(e(0,"p",50),n(1,"No notes available for this guest"),t())}function ge(o,a){if(o&1&&(e(0,"div",4)(1,"mat-card",12)(2,"mat-card-content",13)(3,"div",14)(4,"div",15)(5,"div",16)(6,"div",17),n(7),t()(),e(8,"div")(9,"h2",18),n(10),t(),e(11,"div",19)(12,"div",20)(13,"mat-icon",21),n(14,"email"),t(),e(15,"span"),n(16),t()(),e(17,"div",20)(18,"mat-icon",21),n(19,"phone"),t(),e(20,"span"),n(21),t()(),g(22,Rt,5,1,"div",20),t(),e(23,"div",22)(24,"mat-chip",23),g(25,Lt,2,0,"mat-icon",24),g(26,Ft,2,0,"mat-icon",24),n(27),b(28,"titlecase"),t(),g(29,Ht,5,3,"mat-chip",25),g(30,qt,3,0,"mat-chip",26),t()()(),e(31,"div",27)(32,"mat-card",28)(33,"mat-card-content",29)(34,"div",30),n(35),t(),e(36,"div",31),n(37,"Total Stays"),t()()(),e(38,"mat-card",32)(39,"mat-card-content",29)(40,"div",33),n(41),b(42,"currency"),t(),e(43,"div",34),n(44,"Total Spent"),t()()(),e(45,"mat-card",35)(46,"mat-card-content",29)(47,"div",36),n(48),t(),e(49,"div",37),n(50,"Loyalty Points"),t()()()()()()(),g(51,jt,12,1,"mat-card",38),g(52,Jt,13,2,"mat-card",39),e(53,"mat-card",40)(54,"mat-tab-group",41)(55,"mat-tab",42)(56,"div",43)(57,"div",44)(58,"mat-card",40)(59,"mat-card-header")(60,"mat-icon",45),n(61,"person"),t(),e(62,"mat-card-title"),n(63,"Personal Details"),t()(),e(64,"mat-card-content",46)(65,"div",47)(66,"div")(67,"label",48),n(68,"First Name"),t(),e(69,"p",49),n(70),t()(),e(71,"div")(72,"label",48),n(73,"Last Name"),t(),e(74,"p",49),n(75),t()()(),e(76,"div")(77,"label",48),n(78,"Email"),t(),e(79,"p",49),n(80),t()(),e(81,"div")(82,"label",48),n(83,"Phone"),t(),e(84,"p",49),n(85),t()(),e(86,"div",47)(87,"div")(88,"label",48),n(89,"Date of Birth"),t(),e(90,"p",49),n(91),t()(),e(92,"div")(93,"label",48),n(94,"Nationality"),t(),e(95,"p",49),n(96),t()()(),g(97,Xt,5,1,"div"),t()(),e(98,"mat-card",40)(99,"mat-card-header")(100,"mat-icon",45),n(101,"location_on"),t(),e(102,"mat-card-title"),n(103,"Address Information"),t()(),e(104,"mat-card-content",46),g(105,Zt,27,5)(106,Qt,2,0,"p",50),t()()()()(),e(107,"mat-tab",51)(108,"div",43)(109,"div",44)(110,"mat-card",40)(111,"mat-card-header")(112,"mat-icon",45),n(113,"badge"),t(),e(114,"mat-card-title"),n(115,"ID Document"),t()(),e(116,"mat-card-content",46),g(117,Wt,23,6)(118,te,2,0,"p",50),t()(),e(119,"mat-card",40)(120,"mat-card-header")(121,"mat-icon",45),n(122,"tune"),t(),e(123,"mat-card-title"),n(124,"Preferences"),t()(),e(125,"mat-card-content",46),g(126,ie,27,13)(127,ae,2,0,"p",50),t()()()()(),e(128,"mat-tab",52)(129,"div",43)(130,"div",53)(131,"mat-card",40)(132,"mat-card-header")(133,"mat-icon",45),n(134,"contact_emergency"),t(),e(135,"mat-card-title"),n(136,"Emergency Contact Information"),t()(),e(137,"mat-card-content",46),g(138,le,22,4)(139,oe,2,0,"p",50),t()()()()(),e(140,"mat-tab",54)(141,"div",43),g(142,se,29,1,"div",55),g(143,ce,24,2,"div",55),e(144,"div",55)(145,"mat-card",40)(146,"mat-card-header")(147,"mat-icon",45),n(148,"notes"),t(),e(149,"mat-card-title"),n(150,"Guest Notes"),t()(),e(151,"mat-card-content",13),g(152,ue,3,1,"div",56)(153,pe,2,0,"p",50),t()()()()()()()()),o&2){let i,l,s,p,c,u,D,O,N,G,T,B,V,A,U,$,R,L,F,H,q,m=x();r(7),tt(" ",m.guest().firstName.charAt(0).toUpperCase(),"",m.guest().lastName.charAt(0).toUpperCase()," "),r(3),d(m.guestFullName()),r(6),d(m.guest().email),r(5),d(m.guest().phone),r(),_((i=m.guest())!=null&&i.nationality?22:-1),r(2),P("ngClass",m.guestStatusClass()),r(),_(m.guestStatus()==="vip"?25:-1),r(),_(m.guestStatus()==="blacklisted"?26:-1),r(),S(" ",C(28,31,m.guestStatus())," Guest "),r(2),_(!((l=m.guest())==null||l.loyaltyProgram==null)&&l.loyaltyProgram.tier?29:-1),r(),_(m.isUpdating()?30:-1),r(5),d(((s=m.guest())==null?null:s.totalStays)||0),r(6),d(et(42,33,((p=m.guest())==null?null:p.totalSpent)||0,((p=m.selectedStore())==null?null:p.currency)||"USD","symbol","1.0-0")),r(7),d(((c=m.guest())==null||c.loyaltyProgram==null?null:c.loyaltyProgram.points)||0),r(3),_((u=m.guest())!=null&&u.isVip&&!((u=m.guest())!=null&&u.blacklisted)?51:-1),r(),_((D=m.guest())!=null&&D.blacklisted?52:-1),r(18),d(((O=m.guest())==null?null:O.firstName)||"Not specified"),r(5),d(((N=m.guest())==null?null:N.lastName)||"Not specified"),r(5),d(((G=m.guest())==null?null:G.email)||"Not specified"),r(5),d(((T=m.guest())==null?null:T.phone)||"Not specified"),r(6),d(m.formatDate((B=m.guest())==null?null:B.dateOfBirth)),r(5),d(m.getCountryName((V=m.guest())==null?null:V.nationality)),r(),_((A=m.guest())!=null&&A.lastStayDate?97:-1),r(8),_((U=m.guest())!=null&&U.address?105:106),r(12),_(($=m.guest())!=null&&$.idDocument?117:118),r(9),_((R=m.guest())!=null&&R.preferences?126:127),r(12),_((L=m.guest())!=null&&L.emergencyContact?138:139),r(4),_((F=m.guest())!=null&&F.isVip?142:-1),r(),_((H=m.guest())!=null&&H.blacklisted?143:-1),r(9),_((q=m.guest())!=null&&q.notes?152:153)}}function _e(o,a){if(o&1){let i=I();e(0,"div",5)(1,"mat-card",94)(2,"mat-card-content",95)(3,"div",96)(4,"mat-icon",97),n(5,"person_off"),t()(),e(6,"h3",98),n(7,"Guest not found"),t(),e(8,"p",99),n(9,"The guest you're looking for doesn't exist or has been removed."),t(),e(10,"button",6),M("click",function(){y(i);let s=x();return E(s.goBack())}),e(11,"mat-icon"),n(12,"arrow_back"),t(),n(13," Back to Guests List "),t()()()()}}var Bt=class o{router=h(rt);route=h(ot);guestService=h(Tt);storeStore=h(ct);snackBar=h(mt);destroy$=new z;guest=v(null);isLoading=v(!1);guestId=v(null);guestHistory=v([]);isLoadingHistory=v(!1);activeTab=v("personal");isUpdating=v(!1);selectedStore=w(()=>this.storeStore.selectedStore());guestFullName=w(()=>{let a=this.guest();return a?`${a.firstName} ${a.lastName}`:""});guestStatus=w(()=>{let a=this.guest();return a?a.blacklisted?"blacklisted":a.isVip?"vip":a.totalStays&&a.totalStays>5?"returning":a.totalStays===1?"new":"regular":"unknown"});guestStatusClass=w(()=>{let a=this.guestStatus();return{vip:"bg-purple-100 text-purple-800 border-purple-200",returning:"bg-blue-100 text-blue-800 border-blue-200",new:"bg-green-100 text-green-800 border-green-200",regular:"bg-gray-100 text-gray-800 border-gray-200",blacklisted:"bg-red-100 text-red-800 border-red-200"}[a]||"bg-gray-100 text-gray-800 border-gray-200"});ngOnInit(){this.route.params.pipe(j(this.destroy$)).subscribe(a=>{let i=a.id;this.guestId.set(i||null),i&&(this.loadGuest(i),this.loadGuestHistory(i))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadGuest(a){return f(this,null,function*(){this.isLoading.set(!0);try{let i=yield this.guestService.getGuestById(a).toPromise();if(i)this.guest.set(i);else throw new Error("Guest not found")}catch(i){console.error("Error loading guest:",i),this.showError("Failed to load guest information"),this.router.navigate(["/menu/hms/front-desk/guests/list"])}finally{this.isLoading.set(!1)}})}loadGuestHistory(a){return f(this,null,function*(){this.isLoadingHistory.set(!0);try{let i=yield this.guestService.getGuestHistory(a).toPromise();this.guestHistory.set(i?.reservations||[])}catch(i){console.error("Error loading guest history:",i),this.guestHistory.set([])}finally{this.isLoadingHistory.set(!1)}})}onEdit(){let a=this.guestId();a&&this.router.navigate(["/menu/hms/front-desk/guests/edit",a])}onDelete(){let a=this.guest();if(!a)return;let l=`Are you sure you want to permanently delete ${`${a.firstName} ${a.lastName}`}?

This action cannot be undone and will remove:
\u2022 All guest information
\u2022 Reservation history
\u2022 Loyalty points
\u2022 Notes and preferences`;confirm(l)&&this.deleteGuest()}deleteGuest(){return f(this,null,function*(){let a=this.guestId();if(a){this.isUpdating.set(!0);try{yield this.guestService.deleteGuest(a).toPromise(),this.showSuccess("Guest deleted successfully"),this.router.navigate(["/menu/hms/front-desk/guests/list"])}catch(i){console.error("Error deleting guest:",i),this.showError("Failed to delete guest. Please try again.")}finally{this.isUpdating.set(!1)}}})}toggleVipStatus(){return f(this,null,function*(){let a=this.guest(),i=this.guestId();if(!a||!i)return;let l=`${a.firstName} ${a.lastName}`;if(a.isVip){if(!confirm(`Are you sure you want to remove VIP status from ${l}?

This will remove all VIP benefits and privileges.`))return;yield this.updateVipStatus(i,!1)}else{let s=`Add VIP status to ${l}?

VIP Benefits include:
\u2022 Priority reservations and check-in
\u2022 Complimentary room upgrades (when available)
\u2022 Late checkout privileges
\u2022 Access to exclusive amenities
\u2022 Dedicated customer service
\u2022 Special welcome gifts and services`;if(!confirm(s))return;yield this.updateVipStatus(i,!0)}})}updateVipStatus(a,i){return f(this,null,function*(){this.isUpdating.set(!0);try{let l={isVip:i};i&&(l.vipSince=new Date().toISOString());let s=yield this.guestService.updateGuest(a,l).toPromise();if(s){this.guest.set(s);let p=this.guest(),c=p?`${p.firstName} ${p.lastName}`:"Guest",u=i?"granted VIP status":"removed from VIP status";this.showSuccess(`${c} ${u} successfully`)}}catch(l){console.error("Error updating VIP status:",l),this.showError("Failed to update VIP status. Please try again.")}finally{this.isUpdating.set(!1)}})}toggleBlacklistStatus(){return f(this,null,function*(){let a=this.guest(),i=this.guestId();if(!a||!i)return;let l=`${a.firstName} ${a.lastName}`;if(a.blacklisted){if(!confirm(`Are you sure you want to remove ${l} from the blacklist?`))return;yield this.updateBlacklistStatus(i,!1,"")}else yield this.addToBlacklist(l,i)})}addToBlacklist(a,i){return f(this,null,function*(){let l=prompt(`Please provide a reason for blacklisting ${a}:

This action will:
\u2022 Prevent future reservations
\u2022 Flag the guest account
\u2022 Require manager approval for any bookings

Reason (required):`,"");if(l!==null){if(!l.trim()){alert("A reason is required to blacklist a guest.");return}yield this.updateBlacklistStatus(i,!0,l.trim())}})}updateBlacklistStatus(a,i,l){return f(this,null,function*(){this.isUpdating.set(!0);try{let s={blacklisted:i};i&&l&&(s.blacklistReason=l,s.blacklistedAt=new Date().toISOString());let p=yield this.guestService.updateGuest(a,s).toPromise();if(p){this.guest.set(p);let c=this.guest(),u=c?`${c.firstName} ${c.lastName}`:"Guest",D=i?"added to blacklist":"removed from blacklist";this.showSuccess(`${u} ${D} successfully`)}}catch(s){console.error("Error updating blacklist status:",s),this.showError("Failed to update blacklist status. Please try again.")}finally{this.isUpdating.set(!1)}})}goBack(){this.router.navigate(["/menu/hms/front-desk/guests/list"])}formatCurrency(a){if(!a)return"$0.00";let i=this.selectedStore()?.currency||"USD";return new Intl.NumberFormat("en-US",{style:"currency",currency:i}).format(a)}formatDate(a){return a?new Date(a).toLocaleDateString():"Not specified"}formatDateTime(a){return a?new Date(a).toLocaleString():"Not specified"}getCountryName(a){return a?{US:"United States",UK:"United Kingdom",CA:"Canada",DE:"Germany",FR:"France",IT:"Italy",ES:"Spain",AU:"Australia",JP:"Japan",KR:"South Korea",CN:"China",IN:"India",BR:"Brazil",MX:"Mexico",AR:"Argentina",NG:"Nigeria",ZA:"South Africa",EG:"Egypt",AE:"United Arab Emirates",SA:"Saudi Arabia"}[a]||a:"Not specified"}showSuccess(a){this.snackBar.open(a,"Close",{duration:3e3,panelClass:["success-snackbar"],horizontalPosition:"right",verticalPosition:"top"})}showError(a){this.snackBar.open(a,"Close",{duration:5e3,panelClass:["error-snackbar"],horizontalPosition:"right",verticalPosition:"top"})}setActiveTab(a){this.activeTab.set(a)}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=Y({type:o,selectors:[["app-guest-details"]],decls:6,vars:4,consts:[["actionsMenu","matMenu"],["title","Guest Details","subtitle","View and manage guest information"],["actions",""],[1,"flex","justify-center","items-center","py-16"],[1,"py-8"],[1,"text-center","py-16"],["matButton","outlined",3,"click"],["matButton","outlined",3,"matMenuTriggerFor","disabled"],["diameter","20"],["mat-menu-item","",3,"click","disabled"],["color","warn"],["diameter","40"],["appearance","outlined",1,"mb-6"],[1,"p-6!"],[1,"flex","items-start","justify-between"],[1,"flex","items-center","gap-6"],[1,"flex-shrink-0"],[1,"h-20","w-20","rounded-full","bg-purple-600","flex","items-center","justify-center","text-white","font-bold","text-2xl","shadow-lg"],[1,"text-2xl","font-bold","text-gray-900","mb-2"],[1,"flex","items-center","gap-4","text-sm","text-gray-600","mb-3"],[1,"flex","items-center","gap-1"],[1,"text-lg"],[1,"flex","items-center","gap-2"],[3,"ngClass"],[1,"text-sm","mr-1"],[1,"bg-amber-100!","text-amber-800!"],[1,"bg-blue-100!","text-blue-800!"],[1,"grid","grid-cols-3","gap-4"],["appearance","outlined",1,"bg-blue-50!"],[1,"p-4!","text-center"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-sm","text-blue-700"],["appearance","outlined",1,"bg-green-50!"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-sm","text-green-700"],["appearance","outlined",1,"bg-purple-50!"],[1,"text-2xl","font-bold","text-purple-600"],[1,"text-sm","text-purple-700"],["appearance","outlined",1,"mb-6","bg-purple-50!","border-purple-200!"],["appearance","outlined",1,"mb-6","bg-red-50!","border-red-200!"],["appearance","outlined"],["animationDuration","200ms"],["label","Personal Information"],[1,"p-6","space-y-6"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],["mat-card-avatar","",1,"text-purple-600"],[1,"p-6!","space-y-4"],[1,"grid","grid-cols-2","gap-4"],[1,"text-sm","font-medium","text-gray-500"],[1,"text-gray-900","mt-1"],[1,"text-gray-500","italic"],["label","Documents & Preferences"],["label","Emergency Contact"],[1,"max-w-2xl"],["label","Notes"],[1,"max-w-4xl"],[1,"bg-gray-50","rounded-lg","p-4","border","border-gray-200"],["diameter","16",1,"mr-1"],[1,"p-4!"],[1,"flex","items-start"],[1,"text-purple-600","text-xl"],[1,"ml-3","flex-1"],[1,"text-sm","font-medium","text-purple-800"],[1,"mt-2","text-sm","text-purple-700"],[1,"mt-1","text-xs","text-purple-600"],[1,"text-red-600","text-xl"],[1,"text-sm","font-medium","text-red-800"],[1,"mt-2","text-sm","text-red-700"],[1,"mt-2"],[1,"mt-1","text-xs","text-red-600"],[1,"font-medium"],[1,"mt-2","flex","flex-wrap","gap-2"],["appearance","outlined",1,"bg-purple-50!","border-purple-200!"],[1,"bg-purple-100!"],[1,"text-purple-900!"],[1,"bg-purple-100","rounded-lg","p-4"],[1,"text-purple-600","text-sm","mr-2","mt-0.5"],[1,"text-sm","text-purple-800"],[1,"mt-2","space-y-1","text-purple-700"],[1,"text-sm","font-medium","text-purple-700"],[1,"text-purple-900","mt-1"],["appearance","outlined",1,"bg-red-50!","border-red-200!"],[1,"bg-red-100!"],["mat-card-avatar","",1,"text-red-600"],[1,"text-red-900!"],[1,"bg-red-100","rounded-lg","p-3"],[1,"text-red-600","text-sm","mr-2","mt-0.5"],[1,"text-sm","text-red-800"],[1,"mt-1","space-y-1","text-red-700"],[1,"text-sm","font-medium","text-red-700"],[1,"mt-1","bg-white","rounded-lg","p-3","border","border-red-200"],[1,"text-red-900"],[1,"text-red-900","mt-1"],[1,"text-gray-900","whitespace-pre-wrap"],["appearance","outlined",1,"max-w-md","mx-auto"],[1,"py-12!"],[1,"bg-gray-100","rounded-full","w-24","h-24","flex","items-center","justify-center","mx-auto","mb-4"],[1,"text-gray-400","text-5xl!"],[1,"text-lg","font-semibold","text-gray-900","mb-2"],[1,"text-gray-600","mb-6"]],template:function(i,l){i&1&&(e(0,"app-page-header",1),Z(1,2),g(2,Ut,26,11),Q(),t(),g(3,$t,2,0,"div",3),g(4,ge,154,38,"div",4),g(5,_e,14,0,"div",5)),i&2&&(r(2),_(!l.isLoading()&&l.guest()?2:-1),r(),_(l.isLoading()?3:-1),r(),_(!l.isLoading()&&l.guest()?4:-1),r(),_(!l.isLoading()&&!l.guest()?5:-1))},dependencies:[lt,nt,pt,ut,dt,st,yt,St,Ct,ht,Pt,Et,It,Dt,vt,gt,bt,xt,ft,_t,wt,Mt,kt,Nt,Ot,Gt,it,at],styles:['.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group{border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a,0 1px 2px -1px #0000001a;border:1px solid #e5e7eb}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{background-color:#f9fafb;border-bottom:1px solid #e5e7eb}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels{padding:0 1rem}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:120px;padding:0 1.5rem;height:48px;font-weight:500;color:#6b7280;transition:all .2s ease}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active{color:#7c3aed;background-color:#fff}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{font-weight:600}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab:hover:not(.mdc-tab--active){background-color:#f3f4f6;color:#374151}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab__text-label{font-size:.875rem;text-transform:none;letter-spacing:normal}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab-indicator .mdc-tab-indicator__content--underline{border-color:#7c3aed;border-top-width:3px;border-radius:2px 2px 0 0}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{background-color:#fff}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-content{overflow:visible}.mat-mdc-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}.mat-mdc-progress-spinner[_ngcontent-%COMP%]   circle[_ngcontent-%COMP%]{stroke:#7c3aed}.status-badge[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.status-badge[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #00000026}.info-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out}.info-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 10px 25px -3px #0000001a,0 4px 6px -2px #0000000d}.guest-avatar[_ngcontent-%COMP%]{position:relative;overflow:hidden}.guest-avatar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.1),transparent);transform:rotate(45deg);transition:all .5s;opacity:0}.guest-avatar[_ngcontent-%COMP%]:hover:before{animation:_ngcontent-%COMP%_shimmer 1.5s infinite;opacity:1}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(-100%) translateY(-100%) rotate(45deg)}to{transform:translate(100%) translateY(100%) rotate(45deg)}}.stats-card[_ngcontent-%COMP%]{transition:all .3s ease-in-out;position:relative;overflow:hidden}.stats-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s}.stats-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px) scale(1.02)}.stats-card[_ngcontent-%COMP%]:hover:before{left:100%}.stats-card[_ngcontent-%COMP%]   .stats-value[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;background:linear-gradient(135deg,currentColor,currentColor);background-clip:text;-webkit-background-clip:text}.action-btn[_ngcontent-%COMP%]{transition:all .2s ease-in-out;position:relative;overflow:hidden}.action-btn[_ngcontent-%COMP%]:before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;background:#7c3aed1a;border-radius:50%;transform:translate(-50%,-50%);transition:all .3s ease}.action-btn[_ngcontent-%COMP%]:hover:before{width:300px;height:300px}.action-btn[_ngcontent-%COMP%]:active{transform:scale(.98)}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{transition:all .2s ease-in-out;padding:.75rem;border-radius:6px}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]:hover{background-color:#f8fafc;transform:translate(4px)}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#6b7280;margin-bottom:.25rem;display:block}.info-grid[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;font-weight:500;margin:0}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.125rem;font-weight:600;color:#111827}.section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#7c3aed;font-size:1.25rem;width:1.25rem;height:1.25rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:50%;width:6rem;height:6rem;display:flex;align-items:center;justify-content:center;margin:0 auto 1rem}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#9ca3af;font-size:3rem;width:3rem;height:3rem}.special-request-tag[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:.25rem .5rem;border-radius:9999px;font-size:.75rem;font-weight:500;background-color:#dbeafe;color:#1e40af;border:1px solid #bfdbfe;transition:all .2s ease}.special-request-tag[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 2px 4px #3b82f626}.notes-section[_ngcontent-%COMP%]   .notes-content[_ngcontent-%COMP%]{background-color:#f9fafb;border-radius:.5rem;padding:1rem;border:1px solid #e5e7eb}.notes-section[_ngcontent-%COMP%]   .notes-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#111827;white-space:pre-wrap;line-height:1.6;margin:0}@media(max-width:768px){.guest-details-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}.guest-details-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.guest-overview[_ngcontent-%COMP%]   .overview-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.guest-overview[_ngcontent-%COMP%]   .overview-content[_ngcontent-%COMP%]   .guest-avatar[_ngcontent-%COMP%]{margin:0 auto}.guest-overview[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1rem;margin-top:1.5rem}.info-grid-responsive[_ngcontent-%COMP%]{grid-template-columns:1fr!important}}@media(prefers-color-scheme:dark){.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{background-color:#1f2937;border-bottom-color:#374151}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{color:#9ca3af}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active{color:#a78bfa;background-color:#111827}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab:hover:not(.mdc-tab--active){background-color:#374151;color:#d1d5db}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{background-color:#111827}}@media print{.guest-details-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:none}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{display:none}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper .mat-mdc-tab-body:not(.mat-mdc-tab-body-active){display:block!important}.guest-details-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper .mat-mdc-tab-body:not(.mat-mdc-tab-body-active) .mat-mdc-tab-body-content{transform:none!important;visibility:visible!important;height:auto!important}.action-btn[_ngcontent-%COMP%], .mat-mdc-menu-trigger[_ngcontent-%COMP%]{display:none}}']})};export{Bt as GuestDetailsComponent};
