import{a as ot}from"./chunk-ZAYIZM2C.js";import{h as nt}from"./chunk-QOMDDN6I.js";import{a as E}from"./chunk-BTIPWJHT.js";import"./chunk-AR7G356Q.js";import"./chunk-YCI4GSMN.js";import"./chunk-BA3SXM5W.js";import{a as tt,b as et}from"./chunk-XPW44I4H.js";import{d as F}from"./chunk-2NVE2BM3.js";import{a as Q,b as X}from"./chunk-W6FIBOPD.js";import{b as Y,c as $,d as H}from"./chunk-7JNU3RG5.js";import"./chunk-LXK533WH.js";import{a as Z}from"./chunk-PQXLVIGM.js";import"./chunk-ZXNLXZXA.js";import"./chunk-KAQLA7HR.js";import"./chunk-Y7XAAAUB.js";import{d as it}from"./chunk-TRTRKQKZ.js";import"./chunk-5WBVJVYM.js";import{a as T,b as V,c as z,f as P,g as A}from"./chunk-X7SU23UW.js";import{a as q,b as J,h as U}from"./chunk-3SKQMCZR.js";import{C as O,E as G,b as N,d as D,g as w,h as k,m as j,s as B,t as L}from"./chunk-EQD33MW2.js";import"./chunk-UJ5WOJLI.js";import{a as I}from"./chunk-ADMJOUL4.js";import"./chunk-O4QGXHKX.js";import"./chunk-3R2L4BJM.js";import"./chunk-Y4VWLT32.js";import"./chunk-CDKFCYZ5.js";import{b as W,c as K}from"./chunk-2HLT5ZQQ.js";import{Y as R,_}from"./chunk-UUZHPQZB.js";import"./chunk-CQ6SLR32.js";import"./chunk-C3MGKPDK.js";import{g as x,h,l as C}from"./chunk-QAO3BBZ5.js";import"./chunk-KTA4MFBX.js";import"./chunk-HUSU2JWO.js";import{Bc as S,Eb as p,Fb as f,Kb as c,Lb as e,Mb as t,Nb as d,Yb as g,Za as a,ca as s,gb as u,mb as M,nc as i,ta as y}from"./chunk-HCNG3XRF.js";import{a as v,b}from"./chunk-EQDQRRRY.js";var rt=()=>[".."];function lt(l,o){l&1&&(e(0,"mat-error"),i(1,"Reconciliation name is required"),t())}function mt(l,o){l&1&&d(0,"mat-spinner",23)}var at=class l{constructor(o,r,n){this.fb=o;this.reconciliationService=r;this.router=n;this.reconciliationForm=this.fb.group({name:["",D.required],type:["full_inventory"],description:[""]})}storeStore=s(Z);authService=s(I);isSubmitting=y(!1);currentUser=it(this.authService.currentUser,{initialValue:null});reconciliationForm;ngOnInit(){let o=new Date,n=`Inventory Count - ${["January","February","March","April","May","June","July","August","September","October","November","December"][o.getMonth()]} ${o.getFullYear()}`;this.reconciliationForm.patchValue({name:n})}onSubmit(){if(this.reconciliationForm.valid){this.isSubmitting.set(!0);let o=this.reconciliationForm.value,r=b(v({},o),{createdBy:this.currentUser()?._id});this.reconciliationService.initialize(r).subscribe({next:n=>{console.log("Reconciliation initialized:",n),this.router.navigate(["dashboard","inventory","reconciliations",n._id,"count"])},error:n=>{console.error("Error initializing reconciliation:",n),this.isSubmitting.set(!1)}})}}static \u0275fac=function(r){return new(r||l)(u(O),u(ot),u(x))};static \u0275cmp=M({type:l,selectors:[["app-start-reconciliation"]],decls:60,vars:8,consts:[[1,"p-6","max-w-2xl","mx-auto"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600","mt-1"],["mat-button","",1,"text-gray-600",3,"routerLink"],[3,"ngSubmit","formGroup"],[1,"mb-6"],[1,"p-6"],[1,"space-y-6"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name","placeholder","e.g., Monthly Inventory Count - December 2024"],["formControlName","type"],["value","full_inventory"],["value","partial"],["value","cycle_count"],["matInput","","formControlName","description","rows","3","placeholder","Optional description or notes about this reconciliation"],[1,"flex","items-start","space-x-4"],[1,"text-blue-500","mt-1"],[1,"font-semibold","text-gray-900","mb-2"],[1,"text-sm","text-gray-600","space-y-1"],[1,"flex","justify-end","space-x-4"],["type","button","mat-button","",3,"routerLink"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],["diameter","20",1,"mr-2"]],template:function(r,n){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),i(4,"Start New Reconciliation"),t(),e(5,"p",3),i(6,"Initialize a new inventory reconciliation session"),t()(),e(7,"button",4)(8,"mat-icon"),i(9,"arrow_back"),t(),i(10," Back to List "),t()(),e(11,"form",5),g("ngSubmit",function(){return n.onSubmit()}),e(12,"mat-card",6)(13,"mat-card-header")(14,"mat-card-title"),i(15,"Reconciliation Details"),t()(),e(16,"mat-card-content",7)(17,"div",8)(18,"mat-form-field",9)(19,"mat-label"),i(20,"Reconciliation Name *"),t(),d(21,"input",10),p(22,lt,2,0,"mat-error"),t(),e(23,"mat-form-field",9)(24,"mat-label"),i(25,"Type"),t(),e(26,"mat-select",11)(27,"mat-option",12),i(28,"Full Inventory Count"),t(),e(29,"mat-option",13),i(30,"Partial Count"),t(),e(31,"mat-option",14),i(32,"Cycle Count"),t()()(),e(33,"mat-form-field",9)(34,"mat-label"),i(35,"Description"),t(),d(36,"textarea",15),t()()()(),e(37,"mat-card",6)(38,"mat-card-content",7)(39,"div",16)(40,"mat-icon",17),i(41,"info"),t(),e(42,"div")(43,"h3",18),i(44,"What happens next?"),t(),e(45,"ul",19)(46,"li"),i(47,"\u2022 System will load all current products and their quantities"),t(),e(48,"li"),i(49,"\u2022 You'll be able to enter physical counts for each product"),t(),e(50,"li"),i(51,"\u2022 Discrepancies will be automatically calculated"),t(),e(52,"li"),i(53,"\u2022 Review and approve adjustments before updating inventory"),t()()()()()(),e(54,"div",20)(55,"button",21),i(56,"Cancel"),t(),e(57,"button",22),p(58,mt,1,0,"mat-spinner",23),i(59," Initialize Reconciliation "),t()()()()),r&2){let m;a(7),c("routerLink",S(6,rt)),a(4),c("formGroup",n.reconciliationForm),a(11),f((m=n.reconciliationForm.get("name"))!=null&&m.invalid&&((m=n.reconciliationForm.get("name"))!=null&&m.touched)?22:-1),a(33),c("routerLink",S(7,rt)),a(2),c("disabled",n.reconciliationForm.invalid||n.isSubmitting()),a(),f(n.isSubmitting()?58:-1)}},dependencies:[G,j,N,w,k,L,B,A,T,z,P,V,Y,U,q,J,H,$,et,tt,F,_,R,K,W,nt,E,X,Q,C,h],styles:[".mat-mdc-form-field[_ngcontent-%COMP%]{width:100%}"]})};export{at as StartReconciliationComponent};
