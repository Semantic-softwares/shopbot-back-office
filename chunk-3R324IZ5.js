import{a as oe,b as re,c as ae,d as se}from"./chunk-ALAT4ORY.js";import{a as ye}from"./chunk-SD3GJBKE.js";import{b as le}from"./chunk-3F2QXBNK.js";import{a as pe,b as de,c as ue,e as ve,f as _e,g as ge,j as be,l as fe}from"./chunk-S5GZV54O.js";import{a as me,b as ce}from"./chunk-4XV2UKEU.js";import{a as J,b as K,c as Q,d as X,e as Y}from"./chunk-37U25SVG.js";import{a as Z,b as ee,c as te,d as ie}from"./chunk-Q4U6FYZ3.js";import{i as H}from"./chunk-QC7H4KPM.js";import{c as ne}from"./chunk-BXJEGH2V.js";import"./chunk-64WHNS37.js";import"./chunk-TIVXUJ22.js";import"./chunk-W7B5PSOS.js";import"./chunk-XLZTIYSF.js";import"./chunk-W7NMJLMQ.js";import{a as q}from"./chunk-YXRAJPAB.js";import{a as j}from"./chunk-UVV7QZRX.js";import"./chunk-TILT22SG.js";import"./chunk-BFT2MTJY.js";import"./chunk-FO4KTVQ3.js";import"./chunk-TRZH7NMW.js";import"./chunk-GXTELBJV.js";import{b as W,c as G}from"./chunk-JPRPNQOM.js";import{Z as $,ba as z}from"./chunk-3LDCGXHW.js";import{e as R,f as A,g as F,h as V,i as B,l as U}from"./chunk-ZLVQTB5B.js";import"./chunk-6PFJHDFS.js";import{Fc as u,Ib as D,Jb as N,Kb as v,Mb as _,Nb as g,Ob as l,Pb as a,Qb as r,Rb as b,Vc as O,Ya as P,Yb as k,ac as x,bb as o,cc as f,fa as p,ka as h,la as M,mc as w,qb as E,rc as m,sc as d,tc as I,wa as S}from"./chunk-J2AK4FW5.js";import{a as L,b as T}from"./chunk-GAL4ENT6.js";var y=()=>["store-settings"];function Se(n,t){if(n&1&&(a(0,"a",5),b(1,"img",14),r()),n&2){let e,i=f();l("routerLink",u(3,y)),o(),l("routerLink",u(4,y))("src",(e=i.storeStore.selectedStore())==null?null:e.logo,P)}}function ke(n,t){n&1&&(a(0,"a",6)(1,"mat-icon"),m(2,"store"),r()())}function xe(n,t){if(n&1){let e=k();a(0,"button",15),x("click",function(){let s=h(e).$implicit,c=f();return M(c.selectStore(s))}),m(1),r()}if(n&2){let e,i=t.$implicit,s=f();l("disabled",i._id===((e=s.storeStore.selectedStore())==null?null:e._id)),o(),I(" ",i.name)}}function we(n,t){if(n&1&&(a(0,"a",17,1)(2,"mat-icon",18),m(3),r(),a(4,"span",19),m(5),r()()),n&2){let e=t.$implicit,i=w(1);l("routerLink",e.link)("activated",i.isActive),o(3),d(e.icon),o(2),d(e.label)}}function Ie(n,t){if(n&1&&(a(0,"mat-expansion-panel",12)(1,"mat-expansion-panel-header")(2,"mat-panel-title")(3,"span",16),m(4),r()()(),_(5,we,6,4,"a",17,v),r()),n&2){let e=t.$implicit;l("expanded",!0),o(4),I(" ",e==null?null:e.name," "),o(),g(e.children)}}var he=class n{router=p(F);route=p(R);authService=p(q);rolesService=p(j);storeStore=p(H);isMobile=S(window.innerWidth<768);opened=S(!0);currentUser=ne(this.authService.currentUser,{initialValue:null});hasAllRequiredPermissions=this.authService.hasAnyPermission(["manage_users","manage_events","manage_companies","manage_dashboard","manage_settings"]);sectionPermissions={Reports:["erp.orders.view","erp.products.view","finance.reports.view","finance.transactions.view"],Items:["erp.products.view","erp.products.create","erp.products.edit"],Tables:["erp.products.view","erp.products.edit"],Inventory:["erp.inventory.view","erp.inventory.create","erp.inventory.edit","erp.suppliers.view"],Employees:["settings.staff.view","settings.staff.create","settings.staff.edit"],Customers:["erp.products.view"],Settings:["settings.store.view","settings.store.edit"]};allNavItems=[{name:"Reports",children:[{icon:"leaderboard",label:"Sales summary",link:"./reports/summary",permission:"view_company"},{icon:"shop",label:"Sales by item",link:"./reports/sales-by-item",permission:"view_timeline"},{icon:"category",label:"Sales by category",link:"./reports/sales-by-category",permission:"view_company"},{icon:"diversity_1",label:"Sales by employee",link:"./reports/sales-by-employee",permission:"manage_home"},{icon:"payments",label:"Sales by payment type",link:"./reports/sales-by-payment-type",permission:"manage_home"},{icon:"description",label:"Receipts",link:"./reports/receipts",permission:"manage_home"}]},{name:"Items",children:[{icon:"local_mall",label:"Products",link:"./items/products",permission:"view_company"},{icon:"category_search",label:"Categories",link:"./items/categories",permission:"view_timeline"},{icon:"palette",label:"Modifiers",link:"./items/variants",permission:"view_company"},{icon:"check_box",label:"Options",link:"./items/options",permission:"view_company"},{icon:"restaurant",label:"Stations",link:"./items/stations",permission:"view_company"}]},{name:"Tables",children:[{icon:"table_restaurant",label:"Tables",link:"./tables/list",permission:"view_company"},{icon:"category",label:"Table Categories",link:"./tables/categories/list",permission:"view_company"}]},{name:"Inventory",children:[{icon:"warehouse",label:"Suppliers",link:"./inventory/suppliers",permission:"view_company"},{icon:"inventory_2",label:"Restock",link:"./inventory/restock",permission:"view_company"},{icon:"calculate",label:"Reconciliations",link:"./inventory/reconciliations",permission:"view_company"}]},{name:"Employees",children:[{icon:"assignment_ind",label:"Employees",link:"./employees/list",permission:"view_company"},{icon:"access_time",label:"Timecards",link:"./employees/timecards/list",permission:"view_company"}]},{name:"Customers",children:[{icon:"groups",label:"Customers",link:"./customers/list",permission:"view_company"}]},{name:"Settings",children:[{icon:"settings",label:"Settings",link:"./settings",permission:"view_company"}]}];navItems=O(()=>this.rolesService.isAdmin()?this.allNavItems:this.allNavItems.map(t=>T(L({},t),{children:t.children.filter(e=>this.canAccessMenuItem(e))})).filter(t=>t.children.length>0));canAccessMenuItem(t){let e=this.allNavItems.find(s=>s.children.some(c=>c.link===t.link))?.name;if(!e)return!1;let i=this.sectionPermissions[e]||[];return this.rolesService.isAdmin()?!0:this.rolesService.hasAny(i)}openLink(t){this.router.navigate([t],{relativeTo:this.route})}toggleSidenav(){this.opened.set(!this.opened())}goToProfile(){this.router.navigate(["dashboard","general","profile"])}selectStore(t){console.log("Selected store:",t),this.storeStore.setSelectedStore(t),window.location.reload()}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=E({type:n,selectors:[["app-dashboard"]],decls:27,vars:10,consts:[["menu","matMenu"],["rla","routerLinkActive"],[1,"dashboard-container"],["title","ERP",3,"menuToggle"],[1,"!w-[20em]","!rounded-[0px]","px-2",3,"mode","opened"],["matListItemIcon","",1,"block","!mr-6",3,"routerLink"],["matListItemIcon","",1,"block"],["matListItemTitle","",3,"routerLink"],["matListItemLine","",3,"routerLink"],["matListItemMeta","","mat-icon-button","",1,"block",3,"matMenuTriggerFor"],["mat-menu-item","",3,"disabled"],["multi",""],[1,"mat-elevation-z0",3,"expanded"],[1,"p-4","h-screen"],[1,"!w-full","!min-w-10","!mr-5","!max-w-100","h-10","rounded-full","object-cover",3,"routerLink","src"],["mat-menu-item","",3,"click","disabled"],[1,"flex","items-center"],["mat-list-item","","routerLinkActive","active-link",3,"routerLink","activated"],["matListItemIcon","",1,"material-icons-outlined"],["matListItemTitle",""]],template:function(e,i){if(e&1){let s=k();a(0,"div",2)(1,"app-toolbar",3),x("menuToggle",function(){return h(s),M(i.toggleSidenav())}),r(),a(2,"mat-sidenav-container")(3,"mat-sidenav",4)(4,"mat-list")(5,"mat-list-item"),D(6,Se,2,5,"a",5)(7,ke,3,0,"a",6),a(8,"h2",7),m(9),r(),a(10,"div",8),m(11),r(),a(12,"a",9)(13,"mat-icon"),m(14,"keyboard_arrow_down"),r()()(),b(15,"mat-divider"),r(),a(16,"mat-menu",null,0),_(18,xe,2,2,"button",10,v),r(),a(20,"mat-nav-list")(21,"mat-accordion",11),_(22,Ie,7,2,"mat-expansion-panel",12,v),r()()(),a(24,"mat-sidenav-content")(25,"div",13),b(26,"router-outlet"),r()()()()}if(e&2){let s,c,C,Me=w(17);o(3),l("mode",i.isMobile()?"over":"side")("opened",i.opened()),o(3),N((s=i.storeStore.selectedStore())!=null&&s.logo?6:7),o(2),l("routerLink",u(8,y)),o(),d((c=i.currentUser())==null||c.role==null?null:c.role.name),o(),l("routerLink",u(9,y)),o(),d((C=i.storeStore.selectedStore())==null?null:C.name),o(),l("matMenuTriggerFor",Me),o(6),g(i.storeStore.stores()),o(4),g(i.navItems())}},dependencies:[se,re,ae,oe,le,fe,_e,be,ge,ve,me,de,pe,ue,G,W,z,$,ie,ee,Z,te,U,A,V,B,Y,X,J,K,Q,ce,ye],styles:["[_nghost-%COMP%]{display:block;height:100%}.dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}mat-toolbar[_ngcontent-%COMP%]{position:sticky;top:0;z-index:1000}mat-sidenav-container[_ngcontent-%COMP%]{flex:1;height:100%}mat-sidenav[_ngcontent-%COMP%]{box-shadow:2px 0 6px #0000001a}.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0 24px}.mat-sidenav-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]{flex:1}.active-link[_ngcontent-%COMP%]{background:#0000000a;color:#1976d2}.active-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.mdc-list-item__content[_ngcontent-%COMP%]{margin-left:5px!important}"]})};export{he as DashboardComponent};
