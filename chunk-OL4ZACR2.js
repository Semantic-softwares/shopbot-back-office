import{a as T}from"./chunk-E6RDX5TH.js";import{a as Pe}from"./chunk-FPSTIL7L.js";import{a as De}from"./chunk-M7CDMT4F.js";import{a as S,b as ve,c as Te}from"./chunk-GYR27UWT.js";import"./chunk-4FCLVNHT.js";import{c as Ee}from"./chunk-GS72R6E5.js";import{a as be}from"./chunk-ONWZVE76.js";import{a as h,b as we}from"./chunk-SLNANJBJ.js";import{a as de,b as pe,c as ge,d as Ce,e as ue,f as fe,g as _e,h as Me,i as he,j as Se,k as ye,l as xe}from"./chunk-SNJMCTTD.js";import"./chunk-GGOIOYKP.js";import"./chunk-LXK533WH.js";import{a as le,b as me,c as ce,d as se}from"./chunk-EMC432UM.js";import"./chunk-BTIPWJHT.js";import"./chunk-AR7G356Q.js";import"./chunk-YCI4GSMN.js";import"./chunk-BA3SXM5W.js";import{a as j}from"./chunk-NWQQ2VP3.js";import"./chunk-M54QIQPD.js";import"./chunk-ZXNLXZXA.js";import"./chunk-2NVE2BM3.js";import"./chunk-KAQLA7HR.js";import"./chunk-Y7XAAAUB.js";import{d as re}from"./chunk-USTUFZ7V.js";import"./chunk-DXWLW3LX.js";import{b as Z,c as ee,d as te}from"./chunk-7JNU3RG5.js";import{a as U,h as X}from"./chunk-3SKQMCZR.js";import"./chunk-UJ5WOJLI.js";import{a as Y,c as J,g as K}from"./chunk-X7SU23UW.js";import{a as ne,b as ae}from"./chunk-W6FIBOPD.js";import{D as G,b as W,g as q,l as z}from"./chunk-EQD33MW2.js";import"./chunk-3R2L4BJM.js";import"./chunk-GGWIF4RR.js";import"./chunk-Y4VWLT32.js";import"./chunk-CDKFCYZ5.js";import{b as ie,c as oe}from"./chunk-2HLT5ZQQ.js";import{X as L,Y as $,_ as B}from"./chunk-UUZHPQZB.js";import"./chunk-CQ6SLR32.js";import"./chunk-BFT2MTJY.js";import{g as A}from"./chunk-QAO3BBZ5.js";import"./chunk-KTA4MFBX.js";import"./chunk-HUSU2JWO.js";import{Bc as Q,Eb as P,Fb as R,Kb as d,Lb as o,Mb as n,Nb as p,Rb as g,Sb as C,Ub as I,V as E,Yb as f,Za as l,_b as _,ca as u,cc as w,dc as b,ec as v,ha as y,ia as x,ic as O,jc as k,mb as D,nc as r,oc as M,pc as F,sb as s,sc as H,tc as V,uc as N}from"./chunk-HCNG3XRF.js";import"./chunk-EQDQRRRY.js";var Ie=()=>[5,10,25,100];function Oe(e,i){e&1&&(o(0,"div",9),p(1,"mat-spinner",12),n())}function ke(e,i){e&1&&p(0,"app-no-record",10)}function Fe(e,i){e&1&&(o(0,"th",25),r(1,"Name"),n())}function He(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.name)}}function Ve(e,i){e&1&&(o(0,"th",25),r(1,"Color"),n())}function Ne(e,i){if(e&1&&(o(0,"td",26)(1,"div",27),r(2),n()()),e&2){let t=i.$implicit;l(),k("background-color",t.color),l(),F(" ",t.color," ")}}function Qe(e,i){e&1&&(o(0,"th",25),r(1,"Icon"),n())}function Ae(e,i){if(e&1&&(o(0,"td",26)(1,"mat-icon"),r(2),n()()),e&2){let t=i.$implicit;l(2),M(t==null?null:t.icon)}}function Le(e,i){e&1&&(o(0,"th",25),r(1,"Items"),n())}function $e(e,i){if(e&1&&(o(0,"td",26),r(1),n()),e&2){let t=i.$implicit;l(),M(t.items)}}function Be(e,i){e&1&&(o(0,"th",28),r(1,"Actions"),n())}function je(e,i){if(e&1){let t=I();o(0,"td",26)(1,"button",29)(2,"mat-icon"),r(3,"more_vert"),n()(),o(4,"mat-menu",null,0)(6,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.onEditCategory(m))}),o(7,"mat-icon"),r(8,"edit"),n(),o(9,"span"),r(10,"Edit"),n()(),o(11,"button",30),f("click",function(){let m=y(t).$implicit,c=_(2);return x(c.deleteCategory(m))}),o(12,"mat-icon"),r(13,"delete"),n(),o(14,"span"),r(15,"Delete"),n()()()()}if(e&2){let t=O(5);l(),d("matMenuTriggerFor",t)}}function We(e,i){e&1&&p(0,"tr",31)}function qe(e,i){e&1&&p(0,"tr",32)}function ze(e,i){if(e&1&&(o(0,"div",11)(1,"table",13),g(2,14),s(3,Fe,2,0,"th",15)(4,He,2,1,"td",16),C(),g(5,17),s(6,Ve,2,0,"th",15)(7,Ne,3,3,"td",16),C(),g(8,18),s(9,Qe,2,0,"th",15)(10,Ae,3,1,"td",16),C(),g(11,19),s(12,Le,2,0,"th",15)(13,$e,2,1,"td",16),C(),g(14,20),s(15,Be,2,0,"th",21)(16,je,16,1,"td",16),C(),s(17,We,1,0,"tr",22)(18,qe,1,0,"tr",23),n(),p(19,"mat-paginator",24),n()),e&2){let t=_();l(),d("dataSource",t.dataSource),l(16),d("matHeaderRowDef",t.displayedColumns),l(),d("matRowDefColumns",t.displayedColumns),l(),d("pageSizeOptions",Q(4,Ie))}}var Re=class e{displayedColumns=["name","color","icon","items","actions"];dataSource;searchText="";dialog=u(Ee);router=u(A);categoryService=u(Pe);storeStore=u(j);paginator;sort;categories=re({params:()=>({storeId:this.storeStore.selectedStore()?._id}),stream:({params:i})=>this.categoryService.getStoreMenus(i.storeId).pipe(E(t=>{this.dataSource=new xe(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}))});applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase()}addCategory(){this.dialog.open(T,{width:"500px",data:{isEdit:!1}}).afterClosed().subscribe(t=>{t&&this.categories.reload()})}onEditCategory(i){this.dialog.open(T,{width:"500px",data:{isEdit:!0,category:i}}).afterClosed().subscribe(a=>{a&&this.categories.reload()})}deleteCategory(i){this.dialog.open(De,{width:"350px",data:{message:`Are you sure you want to delete ${i.name}?`}}).afterClosed().subscribe(a=>{a&&(console.log("Category to delete:",i),this.categoryService.deleteMenu(i._id).subscribe({next:()=>{console.log("Category deleted successfully"),this.categories.reload()}}))})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=D({type:e,selectors:[["app-categories"]],viewQuery:function(t,a){if(t&1&&(w(h,5),w(S,5)),t&2){let m;b(m=v())&&(a.paginator=m.first),b(m=v())&&(a.sort=m.first)}},decls:14,vars:2,consts:[["menu","matMenu"],[1,"categories-container","!bg-white"],[1,"!bg-white"],[1,"actions-row"],[1,"filters"],["appearance","outline"],["matInput","","placeholder","Search categories",3,"keyup","ngModelChange","ngModel"],[1,"buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"flex","items-center","justify-center","min-h-[300px]"],["icon","category","title","No Categories","message","No categories found matching your criteria."],[1,"table-container","!bg-white"],["diameter","40"],["mat-table","","matSort","",1,"!bg-white",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","color"],["matColumnDef","icon"],["matColumnDef","items"],["matColumnDef","actions"],["mat-header-cell","","class","w-20",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of categories",1,"!bg-white",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"color-preview"],["mat-header-cell","",1,"w-20"],["mat-icon-button","","aria-label","Category actions",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,a){t&1&&(o(0,"mat-card",1)(1,"mat-card-content",2)(2,"div",3)(3,"div",4)(4,"mat-form-field",5)(5,"mat-label"),r(6,"Search"),n(),o(7,"input",6),f("keyup",function(c){return a.applyFilter(c)}),N("ngModelChange",function(c){return V(a.searchText,c)||(a.searchText=c),c}),n()()(),o(8,"div",7)(9,"button",8),f("click",function(){return a.addCategory()}),r(10,"+ ADD CATEGORY"),n()()(),P(11,Oe,2,0,"div",9)(12,ke,1,0,"app-no-record",10)(13,ze,20,5,"div",11),n()()),t&2&&(l(7),H("ngModel",a.searchText),l(4),R(a.categories.isLoading()?11:a.categories.hasValue()&&a.categories.value().length===0?12:a.categories.hasValue()?13:-1))},dependencies:[ye,de,ge,_e,Ce,pe,Me,ue,fe,he,Se,we,h,Te,S,ve,K,Y,J,Z,X,U,te,ee,B,$,L,oe,ie,se,me,le,ce,ae,ne,be,G,W,q,z],styles:[".categories-container[_ngcontent-%COMP%]{margin:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.categories-container[_ngcontent-%COMP%]   .actions-row[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;gap:16px}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{width:100%;overflow:auto}.categories-container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.categories-container[_ngcontent-%COMP%]   .color-preview[_ngcontent-%COMP%]{padding:4px 8px;border-radius:4px;display:inline-block;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.5)}"]})};export{Re as CategoriesComponent};
