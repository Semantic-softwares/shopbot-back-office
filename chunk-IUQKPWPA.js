import{a as wt}from"./chunk-5HOUELSU.js";import{a as Bt}from"./chunk-XM7KJLGN.js";import{a as Tt}from"./chunk-FUTA6TE5.js";import{a as yt}from"./chunk-BKAAY5R4.js";import{a as Mt}from"./chunk-IYQ6GC44.js";import{b as vt,f as Jt}from"./chunk-LPOORG3R.js";import{a as kt}from"./chunk-5HJYEPK4.js";import{c as Et}from"./chunk-LKRQNUDW.js";import"./chunk-3PQC2AD7.js";import{h as Pt}from"./chunk-PYMVMKZE.js";import"./chunk-JBPT7IMO.js";import{a as mt,b as pt,c as ut,d as bt,e as _t,f as Ct,g as ft,h as ht,i as gt,j as xt,k as St}from"./chunk-DQAEAUAH.js";import"./chunk-TRRVPZ2R.js";import{a as Z,b as tt,c as et,d as nt}from"./chunk-XCSZ2RSV.js";import{i as K}from"./chunk-WFQLSX5X.js";import{a as ct,b as dt}from"./chunk-D2CDDOVY.js";import{d as U}from"./chunk-S6O7RC67.js";import"./chunk-KQ2NF2R5.js";import"./chunk-AQTPIICF.js";import"./chunk-GZ7S2I6F.js";import"./chunk-L5R7UQHM.js";import{b as rt,d as at}from"./chunk-VN3HHLBZ.js";import{a as it,h as ot}from"./chunk-THLNJRLH.js";import"./chunk-GBJWJHBW.js";import{a as lt,b as st}from"./chunk-YJKLGOC4.js";import"./chunk-ADPCW6JI.js";import"./chunk-UUMWQRYG.js";import{a as G}from"./chunk-VNGKQKTG.js";import"./chunk-UPMF7ZC6.js";import"./chunk-BFT2MTJY.js";import{a as Y,c as q,h as X}from"./chunk-EALJFX3J.js";import"./chunk-5AHC55Y5.js";import"./chunk-TVQ3FP64.js";import"./chunk-47XHPHB4.js";import{b as Q,c as W}from"./chunk-IYN665YT.js";import{Y as z,Z as H,aa as L}from"./chunk-OYVOT3CA.js";import"./chunk-DWM5GR6S.js";import{l as V,r as $}from"./chunk-6BQAOBQP.js";import{$a as s,Gb as J,Hb as y,Jc as j,Kb as I,Kc as A,Lb as N,Mb as p,Nb as n,Ob as o,Pb as k,Tb as _,Tc as F,Ub as C,Wb as E,_b as u,ac as c,ea as x,ja as S,ka as P,kc as M,mc as O,ob as D,pc as r,qc as f,rc as v,sc as R,ub as b,va as m}from"./chunk-H33Y42PP.js";import{a as B,b as w,g}from"./chunk-GAL4ENT6.js";var Nt=(i,t)=>t._id;function Ot(i,t){if(i&1){let e=E();n(0,"button",35),u("click",function(){S(e);let l=c(2);return P(l.connectBluetoothPrinter())}),n(1,"mat-icon"),r(2,"bluetooth"),o(),r(3),o()}if(i&2){let e=c(2);p("disabled",e.isBluetoothConnecting()),s(3),v(" ",e.isBluetoothConnecting()?"Connecting...":"Connect Printer"," ")}}function Rt(i,t){if(i&1){let e=E();n(0,"button",36)(1,"mat-icon"),r(2,"bluetooth_connected"),o(),r(3),o(),n(4,"mat-menu",null,0)(6,"button",37),u("click",function(){S(e);let l=c(2);return P(l.testBluetoothPrint())}),n(7,"mat-icon"),r(8,"print"),o(),n(9,"span"),r(10,"Test Print"),o()(),n(11,"button",37),u("click",function(){S(e);let l=c(2);return P(l.disconnectBluetoothPrinter())}),n(12,"mat-icon"),r(13,"bluetooth_disabled"),o(),n(14,"span"),r(15,"Disconnect"),o()()()}if(i&2){let e=M(5),a=c(2);p("matMenuTriggerFor",e),s(3),v(" ",a.connectedPrinterName()," ")}}function jt(i,t){if(i&1&&J(0,Ot,4,2,"button",34)(1,Rt,16,2),i&2){let e=c();y(e.isBluetoothConnected()?1:0)}}function At(i,t){if(i&1&&(n(0,"mat-option",29),r(1),o()),i&2){let e=t.$implicit;p("value",e._id),s(),f(e.name)}}function Ft(i,t){i&1&&(n(0,"div",31),k(1,"mat-spinner",38),o())}function Vt(i,t){if(i&1){let e=E();n(0,"div",32)(1,"mat-icon",39),r(2,"error_outline"),o(),n(3,"p",40),r(4),o(),n(5,"button",41),u("click",function(){S(e);let l=c();return P(l.reload())}),n(6,"mat-icon"),r(7,"refresh"),o(),r(8," Try Again "),o()()}if(i&2){let e=c();s(4),f(e.error())}}function $t(i,t){i&1&&(n(0,"div",32)(1,"mat-icon",42),r(2,"print_disabled"),o(),n(3,"p",43),r(4,"No print jobs found"),o(),n(5,"p",44),r(6,"Print jobs will appear here when orders are created"),o()())}function Ut(i,t){i&1&&(n(0,"th",58),r(1,"Status"),o())}function zt(i,t){if(i&1&&(n(0,"td",59)(1,"mat-chip",60),r(2),j(3,"titlecase"),o()()),i&2){let e=t.$implicit,a=c(2);s(),p("color",a.getStatusColor(e.status)),s(),v(" ",A(3,2,e.status)," ")}}function Ht(i,t){i&1&&(n(0,"th",58),r(1,"Order"),o())}function Lt(i,t){if(i&1&&(n(0,"td",59)(1,"div",61)(2,"mat-icon",62),r(3,"receipt"),o(),n(4,"span",63),r(5),o()()()),i&2){let e=t.$implicit,a=c(2);s(5),v("#",a.getOrderNumber(e.order))}}function Gt(i,t){i&1&&(n(0,"th",58),r(1,"Station"),o())}function Kt(i,t){if(i&1&&(n(0,"td",59)(1,"div",61)(2,"mat-icon",62),r(3,"restaurant"),o(),n(4,"span"),r(5),o()()()),i&2){let e=t.$implicit,a=c(2);s(5),f(a.getStationName(e.station))}}function Qt(i,t){i&1&&(n(0,"th",58),r(1,"Printer"),o())}function Wt(i,t){if(i&1&&(n(0,"td",59)(1,"div",64)(2,"div",63),r(3),o(),n(4,"div",62),r(5),o()()()),i&2){let e=t.$implicit;s(3),f(e.printerIp),s(2),v("Port: ",e.printerPort)}}function Yt(i,t){i&1&&(n(0,"th",58),r(1,"Created"),o())}function qt(i,t){if(i&1&&(n(0,"td",59)(1,"div",65),r(2),o()()),i&2){let e=t.$implicit,a=c(2);s(2),v(" ",a.formatDate(e.createdAt)," ")}}function Xt(i,t){i&1&&(n(0,"th",58),r(1,"Printed"),o())}function Zt(i,t){if(i&1&&(n(0,"td",59)(1,"div",65),r(2),o()()),i&2){let e=t.$implicit,a=c(2);s(2),v(" ",a.formatDate(e.printedAt)," ")}}function te(i,t){i&1&&(n(0,"th",58),r(1,"Retries"),o())}function ee(i,t){if(i&1&&(n(0,"td",59)(1,"div",64)(2,"span"),r(3),o()()()),i&2){let e=t.$implicit;s(2),O("text-red-600",e.retryCount>0),s(),R(" ",e.retryCount," / ",e.maxRetries," ")}}function ne(i,t){i&1&&(n(0,"th",58),r(1,"Actions"),o())}function ie(i,t){if(i&1){let e=E();n(0,"button",37),u("click",function(){S(e);let l=c().$implicit,d=c(2);return P(d.printJobViaBluetooth(l))}),n(1,"mat-icon"),r(2,"bluetooth"),o(),n(3,"span"),r(4,"Print via Bluetooth"),o()()}}function oe(i,t){if(i&1){let e=E();n(0,"button",37),u("click",function(){S(e);let l=c().$implicit,d=c(2);return P(d.retryJob(l))}),n(1,"mat-icon"),r(2,"refresh"),o(),n(3,"span"),r(4,"Retry"),o()()}}function re(i,t){if(i&1){let e=E();n(0,"button",69),u("click",function(){S(e);let l=c().$implicit,d=c(2);return P(d.cancelJob(l))}),n(1,"mat-icon"),r(2,"cancel"),o(),n(3,"span"),r(4,"Cancel"),o()()}}function ae(i,t){if(i&1&&(n(0,"td",59)(1,"button",66)(2,"mat-icon"),r(3,"more_vert"),o()(),n(4,"mat-menu",null,1),J(6,ie,5,0,"button",67),J(7,oe,5,0,"button",67),J(8,re,5,0,"button",68),o()()),i&2){let e=t.$implicit,a=M(5),l=c(2);s(),p("matMenuTriggerFor",a),s(5),y(l.isBluetoothConnected()?6:-1),s(),y(e.status==="failed"||e.status==="pending"?7:-1),s(),y(e.status==="pending"||e.status==="processing"?8:-1)}}function le(i,t){i&1&&k(0,"tr",70)}function se(i,t){i&1&&k(0,"tr",71)}function ce(i,t){if(i&1&&(n(0,"div",33)(1,"table",45),_(2,46),b(3,Ut,2,0,"th",47)(4,zt,4,4,"td",48),C(),_(5,49),b(6,Ht,2,0,"th",47)(7,Lt,6,1,"td",48),C(),_(8,50),b(9,Gt,2,0,"th",47)(10,Kt,6,1,"td",48),C(),_(11,51),b(12,Qt,2,0,"th",47)(13,Wt,6,2,"td",48),C(),_(14,52),b(15,Yt,2,0,"th",47)(16,qt,3,1,"td",48),C(),_(17,53),b(18,Xt,2,0,"th",47)(19,Zt,3,1,"td",48),C(),_(20,54),b(21,te,2,0,"th",47)(22,ee,4,4,"td",48),C(),_(23,55),b(24,ne,2,0,"th",47)(25,ae,9,4,"td",48),C(),b(26,le,1,0,"tr",56)(27,se,1,0,"tr",57),o()()),i&2){let e=c();s(),p("dataSource",e.filteredJobs()),s(25),p("matHeaderRowDef",e.displayedColumns),s(),p("matRowDefColumns",e.displayedColumns)}}var Dt=class i{printJobService=x(Bt);stationsService=x(Mt);socketService=x(wt);storeStore=x(K);snackBar=x(G);dialog=x(Et);bluetoothPrinterService=x(Tt);printJobs=m([]);stations=m([]);stats=m({total:0,pending:0,processing:0,printed:0,failed:0});loading=m(!1);error=m(null);isBluetoothConnected=m(!1);isBluetoothConnecting=m(!1);connectedPrinterName=m(null);bluetoothSupported=m(this.bluetoothPrinterService.isBluetoothSupported());selectedStatus=m("all");selectedStation=m("all");filteredJobs=F(()=>{let t=this.printJobs(),e=this.selectedStatus(),a=this.selectedStation();return e!=="all"&&(t=t.filter(l=>l.status===e)),a!=="all"&&(t=t.filter(l=>(typeof l.station=="string"?l.station:l.station._id)===a)),t});displayedColumns=["status","order","station","printer","createdAt","printedAt","retryCount","actions"];socketSubscriptions=[];ngOnInit(){this.loadData(),this.setupSocketListeners(),this.checkBluetoothConnection()}ngOnDestroy(){this.socketSubscriptions.forEach(t=>t.unsubscribe())}checkBluetoothConnection(){let t=this.bluetoothPrinterService.getConnectedPrinter();if(t&&t.isConnected)this.isBluetoothConnected.set(!0),this.connectedPrinterName.set(t.device.name||"Unknown Printer"),console.log("Active Bluetooth printer connection found:",t.device.name);else{let e=localStorage.getItem("bluetoothPrinterConnected")==="true",a=localStorage.getItem("bluetoothPrinterName");e&&a&&this.snackBar.open(`Reconnect to ${a}?`,"Connect",{duration:1e4,horizontalPosition:"end",verticalPosition:"top"}).onAction().subscribe(()=>{this.connectBluetoothPrinter()})}}loadData(){let t=this.storeStore.selectedStore()?._id;t&&(this.loading.set(!0),this.error.set(null),this.printJobService.getPrintJobs(t,{limit:100}).subscribe({next:e=>{this.printJobs.set(e),this.loading.set(!1)},error:e=>{this.error.set("Failed to load print jobs"),this.loading.set(!1)}}),this.printJobService.getPrintJobStats(t).subscribe({next:e=>{this.stats.set(e)},error:e=>{console.error("Failed to load stats:",e)}}),this.stationsService.getStations(t).subscribe({next:e=>{this.stations.set(e)},error:e=>{console.error("Failed to load stations:",e)}}))}setupSocketListeners(){let t=this.socketService.on("printJob:created").subscribe({next:l=>g(this,null,function*(){console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F4E1} [SOCKET EVENT] printJob:created"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F4E6} Socket Data:",l),this.snackBar.open(`New print job created for Order #${l.orderNumber||"N/A"}`,"View",{duration:5e3,horizontalPosition:"end",verticalPosition:"top"}),this.loadData(),yield this.handleAutoPrint(l)})}),e=this.socketService.on("printJob:completed").subscribe({next:l=>{console.log("Print job completed:",l),this.updateJobStatus(l.jobId,"printed")}}),a=this.socketService.on("printJob:failed").subscribe({next:l=>{console.log("Print job failed:",l),this.snackBar.open(`Print job failed: ${l.error}`,"Close",{duration:5e3,horizontalPosition:"end",verticalPosition:"top",panelClass:["error-snackbar"]}),this.updateJobStatus(l.jobId,"failed",l.error)}});this.socketSubscriptions.push(t,e,a)}handleAutoPrint(t){return g(this,null,function*(){try{console.log("\u{1F50D} [AUTO-PRINT] Checking auto-print conditions");let e=t.printJob||t;if(!e){console.warn("\u26A0\uFE0F [AUTO-PRINT] No print job data");return}console.log("\u2713 Print Job ID:",e._id),console.log("\u2713 Job Status:",e.status);let a=e.order;if(!a||typeof a!="object"){console.warn("\u26A0\uFE0F [AUTO-PRINT] No order object in print job");return}console.log("\u2713 Order ID:",a._id),console.log("\u2713 Order Category:",a.category),console.log("\u2713 Payment Status:",a.paymentStatus);let l=a.category==="Complete",d=a.paymentStatus==="Paid";if(console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F50D} [ORDER VALIDATION]"),console.log("  Complete:",l?"\u2705":"\u274C"),console.log("  Paid:",d?"\u2705":"\u274C"),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),!l||!d){console.log("\u23ED\uFE0F [AUTO-PRINT] Skipped - Order not complete or not paid");return}let h=this.storeStore.selectedStore()?.posSettings?.receiptSettings?.printAfterFinish??!0;if(console.log("\u{1F50D} [STORE SETTING] printAfterFinish:",h),!h){console.log("\u23ED\uFE0F [AUTO-PRINT] Skipped - Store setting printAfterFinish is disabled");return}let T=this.bluetoothPrinterService.isConnected();if(console.log("\u{1F5A8}\uFE0F [PRINTER CHECK] Bluetooth connected:",T?"\u2705":"\u274C"),!T){console.log("\u23ED\uFE0F [AUTO-PRINT] Skipped - Bluetooth printer not connected");return}console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501"),console.log("\u{1F5A8}\uFE0F [AUTO-PRINTING] Receipt via Bluetooth..."),console.log("  Order:",a.reference||a._id),console.log("  Store:",a.store?.name||"N/A"),console.log("  Total:",a.total),console.log("\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501");let It=this.printJobService.generateOrderReceipt(a);yield this.bluetoothPrinterService.sendToPrinter(It),console.log("\u2705 [AUTO-PRINT] Printed directly via Bluetooth"),console.log(`\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501
`)}catch(e){console.error("\u274C [AUTO-PRINT] Failed:",e)}})}updateJobStatus(t,e,a){let l=this.printJobs(),d=l.findIndex(h=>h._id===t);if(d!==-1){let h=[...l];h[d]=w(B({},h[d]),{status:e,error:a,printedAt:e==="printed"?new Date:h[d].printedAt}),this.printJobs.set(h),this.loadStats()}}loadStats(){let t=this.storeStore.selectedStore()?._id;t&&this.printJobService.getPrintJobStats(t).subscribe({next:e=>{this.stats.set(e)}})}reload(){this.loadData()}retryJob(t){this.printJobService.retryPrintJob(t._id).subscribe({next:()=>{this.snackBar.open("Print job retry initiated","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.loadData()},error:()=>{this.snackBar.open("Failed to retry print job","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}})}cancelJob(t){this.dialog.open(kt,{data:{title:"Cancel Print Job",message:"Are you sure you want to cancel this print job?",confirmText:"Cancel Job",cancelText:"Close"}}).afterClosed().subscribe(a=>{a&&this.printJobService.cancelPrintJob(t._id).subscribe({next:()=>{this.snackBar.open("Print job cancelled","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"}),this.loadData()},error:()=>{this.snackBar.open("Failed to cancel print job","Close",{duration:3e3,horizontalPosition:"end",verticalPosition:"top"})}})})}getStatusClass(t){return{pending:"status-pending",processing:"status-processing",printed:"status-success",failed:"status-error"}[t]||""}getStatusColor(t){return{pending:"accent",processing:"primary",printed:"",failed:"warn"}[t]||""}getStationName(t){if(typeof t=="string"){let e=this.stations().find(a=>a._id===t);return e?e.name:"Unknown"}return t.name}getOrderNumber(t){return typeof t=="string"?t:t?.orderNumber||t?._id||"N/A"}formatDate(t){return t?new Date(t).toLocaleString():"-"}connectBluetoothPrinter(){return g(this,null,function*(){if(!this.bluetoothSupported()){this.snackBar.open("Web Bluetooth is not supported in this browser","Close",{duration:5e3,panelClass:["error-snackbar"]});return}this.isBluetoothConnecting.set(!0);try{let t=yield this.bluetoothPrinterService.connectToPrinter();this.isBluetoothConnected.set(!0),this.connectedPrinterName.set(t.device.name||"Unknown Printer"),this.snackBar.open(`Connected to ${t.device.name||"printer"}`,"Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(t){console.error("Failed to connect to Bluetooth printer:",t),this.snackBar.open(`Failed to connect: ${t.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]})}finally{this.isBluetoothConnecting.set(!1)}})}disconnectBluetoothPrinter(){return g(this,null,function*(){try{yield this.bluetoothPrinterService.disconnectPrinter(),this.isBluetoothConnected.set(!1),this.connectedPrinterName.set(null),this.snackBar.open("Disconnected from printer","Close",{duration:3e3})}catch(t){console.error("Failed to disconnect:",t),this.snackBar.open(`Failed to disconnect: ${t.message}`,"Close",{duration:3e3,panelClass:["error-snackbar"]})}})}printJobViaBluetooth(t){return g(this,null,function*(){if(!this.isBluetoothConnected()){this.snackBar.open("Please connect to a Bluetooth printer first","Close",{duration:3e3,panelClass:["error-snackbar"]});return}try{this.updateJobStatus(t._id,"processing");let e=typeof t.order=="object"?t.order:null;if(!e)throw new Error("No order found in print job");let a=yield this.printJobService.printOrderReceipt(e);this.updateJobStatus(t._id,"printed"),this.snackBar.open("Print job sent successfully","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(e){console.error("Failed to print via Bluetooth:",e),this.updateJobStatus(t._id,"failed",e.message),this.snackBar.open(`Print failed: ${e.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}printOrder(t){return g(this,null,function*(){if(!this.isBluetoothConnected())throw this.snackBar.open("Please connect to a Bluetooth printer first","Close",{duration:3e3,panelClass:["error-snackbar"]}),new Error("Bluetooth printer not connected");try{(yield this.printJobService.printOrderReceipt(t)).isPrinterConnected?this.snackBar.open("\u2705 Order printed successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}):this.snackBar.open("\u{1F4CB} Print job created - Receipt will print at counter","Close",{duration:5e3,panelClass:["success-snackbar"]})}catch(e){throw console.error("\u274C [PRINT ORDER] Failed:",e),this.snackBar.open(`Print failed: ${e.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]}),e}})}testBluetoothPrint(){return g(this,null,function*(){if(!this.isBluetoothConnected()){this.snackBar.open("Please connect to a Bluetooth printer first","Close",{duration:3e3,panelClass:["error-snackbar"]});return}try{yield this.bluetoothPrinterService.testPrint({paperSize:"80mm",printQuality:"normal",autocut:!0,fontSize:12,lineSpacing:1.2,includeLogo:!1}),this.snackBar.open("Test print sent successfully","Close",{duration:3e3,panelClass:["success-snackbar"]})}catch(t){console.error("Test print failed:",t),this.snackBar.open(`Test print failed: ${t.message}`,"Close",{duration:5e3,panelClass:["error-snackbar"]})}})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=D({type:i,selectors:[["app-print-jobs"]],decls:90,vars:9,consts:[["printerMenu","matMenu"],["menu","matMenu"],["title","Print Jobs","subtitle","Monitor and manage all print jobs in real-time"],["actions",""],["mat-stroked-button","",3,"click"],[1,"p-6","space-y-6"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-5","gap-4"],["appearance","outlined",1,"stat-card"],[1,"p-4!"],[1,"flex","items-center","justify-between"],[1,"text-sm","text-gray-500","mb-1"],[1,"text-2xl","font-bold"],[1,"text-4xl","text-blue-500"],[1,"text-2xl","font-bold","text-orange-600"],[1,"text-4xl","text-orange-500"],[1,"text-2xl","font-bold","text-blue-600"],[1,"text-2xl","font-bold","text-green-600"],[1,"text-4xl","text-green-500"],[1,"text-2xl","font-bold","text-red-600"],[1,"text-4xl","text-red-500"],["appearance","outlined"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],[3,"selectionChange","value"],["value","all"],["value","pending"],["value","processing"],["value","printed"],["value","failed"],[3,"value"],[1,"p-0!"],[1,"flex","items-center","justify-center","p-12"],[1,"text-center","p-12"],[1,"overflow-x-auto"],["mat-flat-button","","color","primary",3,"disabled"],["mat-flat-button","","color","primary",3,"click","disabled"],["mat-stroked-button","","color","accent",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["diameter","40"],[1,"text-6xl","text-red-500","mb-4"],[1,"text-lg","text-gray-600","mb-4"],["mat-flat-button","","color","primary",3,"click"],[1,"text-6xl","text-gray-400","mb-4"],[1,"text-lg","text-gray-600"],[1,"text-sm","text-gray-500","mt-2"],["mat-table","",1,"w-full",3,"dataSource"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","order"],["matColumnDef","station"],["matColumnDef","printer"],["matColumnDef","createdAt"],["matColumnDef","printedAt"],["matColumnDef","retryCount"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","hover:bg-gray-50",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"color"],[1,"flex","items-center","gap-2"],[1,"text-gray-500"],[1,"font-medium"],[1,"text-sm"],[1,"text-sm","text-gray-600"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item",""],["mat-menu-item","",1,"text-red-600"],["mat-menu-item","",1,"text-red-600",3,"click"],["mat-header-row",""],["mat-row","",1,"hover:bg-gray-50"]],template:function(e,a){e&1&&(n(0,"app-page-header",2),_(1,3),n(2,"button",4),u("click",function(){return a.reload()}),n(3,"mat-icon"),r(4,"refresh"),o(),r(5," Reload "),o(),J(6,jt,2,1),C(),o(),n(7,"div",5)(8,"div",6)(9,"mat-card",7)(10,"mat-card-content",8)(11,"div",9)(12,"div")(13,"p",10),r(14,"Total Jobs"),o(),n(15,"p",11),r(16),o()(),n(17,"mat-icon",12),r(18,"print"),o()()()(),n(19,"mat-card",7)(20,"mat-card-content",8)(21,"div",9)(22,"div")(23,"p",10),r(24,"Pending"),o(),n(25,"p",13),r(26),o()(),n(27,"mat-icon",14),r(28,"schedule"),o()()()(),n(29,"mat-card",7)(30,"mat-card-content",8)(31,"div",9)(32,"div")(33,"p",10),r(34,"Processing"),o(),n(35,"p",15),r(36),o()(),n(37,"mat-icon",12),r(38,"hourglass_empty"),o()()()(),n(39,"mat-card",7)(40,"mat-card-content",8)(41,"div",9)(42,"div")(43,"p",10),r(44,"Printed"),o(),n(45,"p",16),r(46),o()(),n(47,"mat-icon",17),r(48,"check_circle"),o()()()(),n(49,"mat-card",7)(50,"mat-card-content",8)(51,"div",9)(52,"div")(53,"p",10),r(54,"Failed"),o(),n(55,"p",18),r(56),o()(),n(57,"mat-icon",19),r(58,"error"),o()()()()(),n(59,"mat-card",20)(60,"mat-card-content",8)(61,"div",21)(62,"mat-form-field",22)(63,"mat-label"),r(64,"Status"),o(),n(65,"mat-select",23),u("selectionChange",function(d){return a.selectedStatus.set(d.value)}),n(66,"mat-option",24),r(67,"All Statuses"),o(),n(68,"mat-option",25),r(69,"Pending"),o(),n(70,"mat-option",26),r(71,"Processing"),o(),n(72,"mat-option",27),r(73,"Printed"),o(),n(74,"mat-option",28),r(75,"Failed"),o()()(),n(76,"mat-form-field",22)(77,"mat-label"),r(78,"Station"),o(),n(79,"mat-select",23),u("selectionChange",function(d){return a.selectedStation.set(d.value)}),n(80,"mat-option",24),r(81,"All Stations"),o(),I(82,At,2,2,"mat-option",29,Nt),o()()()()(),n(84,"mat-card",20)(85,"mat-card-content",30),J(86,Ft,2,0,"div",31)(87,Vt,9,1,"div",32)(88,$t,7,0,"div",32)(89,ce,28,3,"div",33),o()()()),e&2&&(s(6),y(a.bluetoothSupported()?6:-1),s(10),f(a.stats().total),s(10),f(a.stats().pending),s(10),f(a.stats().processing),s(10),f(a.stats().printed),s(10),f(a.stats().failed),s(9),p("value",a.selectedStatus()),s(14),p("value",a.selectedStation()),s(3),N(a.stations()),s(4),y(a.loading()?86:a.error()?87:!a.filteredJobs()||a.filteredJobs().length===0?88:89))},dependencies:[$,X,Y,q,St,mt,ut,ft,bt,pt,ht,_t,Ct,gt,xt,L,H,z,W,Q,Jt,vt,st,lt,nt,tt,Z,et,rt,ot,it,dt,ct,U,Pt,at,yt,V],styles:[".stat-card[_ngcontent-%COMP%]{transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 12px #0000001a}.status-pending[_ngcontent-%COMP%]{color:#f97316}.status-processing[_ngcontent-%COMP%]{color:#3b82f6}.status-success[_ngcontent-%COMP%]{color:#22c55e}.status-error[_ngcontent-%COMP%]{color:#ef4444}table[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f9fafb}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:16px}"]})};export{Dt as PrintJobsComponent};
